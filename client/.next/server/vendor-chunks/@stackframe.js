"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@stackframe";
exports.ids = ["vendor-chunks/@stackframe"];
exports.modules = {

/***/ "(ssr)/./node_modules/@stackframe/stack-sc/dist/index.default.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@stackframe/stack-sc/dist/index.default.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cookies: () => (/* binding */ cookies),\n/* harmony export */   isReactServer: () => (/* binding */ isReactServer)\n/* harmony export */ });\nconst cookies = undefined;\nconst isReactServer = false;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2MvZGlzdC9pbmRleC5kZWZhdWx0LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQU87QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL21hcmtlcnBsQUljZS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zYy9kaXN0L2luZGV4LmRlZmF1bHQuanM/NzBlMyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgY29va2llcyA9IHVuZGVmaW5lZDtcbmV4cG9ydCBjb25zdCBpc1JlYWN0U2VydmVyID0gZmFsc2U7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackframe/stack-sc/dist/index.default.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stackframe/stack-sc/dist/index.react-server.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@stackframe/stack-sc/dist/index.react-server.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cookies: () => (/* reexport safe */ next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies),\n/* harmony export */   isReactServer: () => (/* binding */ isReactServer)\n/* harmony export */ });\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(ssr)/./node_modules/next/dist/api/headers.js\");\n\nconst isReactServer = true;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2MvZGlzdC9pbmRleC5yZWFjdC1zZXJ2ZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXVDO0FBQ2hDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWFya2VycGxBSWNlLy4vbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNjL2Rpc3QvaW5kZXgucmVhY3Qtc2VydmVyLmpzPzllYjciXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycyc7XG5leHBvcnQgY29uc3QgaXNSZWFjdFNlcnZlciA9IHRydWU7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackframe/stack-sc/dist/index.react-server.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stackframe/stack-shared/dist/helpers/production-mode.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/helpers/production-mode.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getProductionModeErrors: () => (/* binding */ getProductionModeErrors)\n/* harmony export */ });\n/* harmony import */ var _utils_errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/errors */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js\");\n/* harmony import */ var _utils_urls__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/urls */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/urls.js\");\n\n\nfunction getProductionModeErrors(project) {\n    const errors = [];\n    const domainsFixUrl = `/projects/${project.id}/domains`;\n    if (project.config.allow_localhost) {\n        errors.push({\n            message: \"Localhost is not allowed in production mode, turn off 'Allow localhost' in project settings\",\n            relativeFixUrl: domainsFixUrl,\n        });\n    }\n    for (const { domain } of project.config.domains) {\n        let url;\n        try {\n            url = new URL(domain);\n        }\n        catch (e) {\n            throw new _utils_errors__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"Domain was somehow not a valid URL; we should've caught this when setting the domain in the first place\", {\n                domain,\n                projectId: project\n            });\n        }\n        if ((0,_utils_urls__WEBPACK_IMPORTED_MODULE_1__.isLocalhost)(url)) {\n            errors.push({\n                message: \"Localhost domains are not allowed to be trusted in production mode: \" + domain,\n                relativeFixUrl: domainsFixUrl,\n            });\n        }\n        else if (url.hostname.match(/^\\d+(\\.\\d+)*$/)) {\n            errors.push({\n                message: \"Direct IPs are not valid for trusted domains in production mode: \" + domain,\n                relativeFixUrl: domainsFixUrl,\n            });\n        }\n        else if (url.protocol !== \"https:\") {\n            errors.push({\n                message: \"Trusted domains should be HTTPS: \" + domain,\n                relativeFixUrl: domainsFixUrl,\n            });\n        }\n    }\n    return errors;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvaGVscGVycy9wcm9kdWN0aW9uLW1vZGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXNEO0FBQ1Y7QUFDckM7QUFDUDtBQUNBLHVDQUF1QyxXQUFXO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsaUJBQWlCLFNBQVM7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiw4REFBbUIsc0NBQXNDO0FBQy9FO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxZQUFZLHdEQUFXO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tYXJrZXJwbEFJY2UvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvaGVscGVycy9wcm9kdWN0aW9uLW1vZGUuanM/MWJmZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdGFja0Fzc2VydGlvbkVycm9yIH0gZnJvbSBcIi4uL3V0aWxzL2Vycm9yc1wiO1xuaW1wb3J0IHsgaXNMb2NhbGhvc3QgfSBmcm9tIFwiLi4vdXRpbHMvdXJsc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIGdldFByb2R1Y3Rpb25Nb2RlRXJyb3JzKHByb2plY3QpIHtcbiAgICBjb25zdCBlcnJvcnMgPSBbXTtcbiAgICBjb25zdCBkb21haW5zRml4VXJsID0gYC9wcm9qZWN0cy8ke3Byb2plY3QuaWR9L2RvbWFpbnNgO1xuICAgIGlmIChwcm9qZWN0LmNvbmZpZy5hbGxvd19sb2NhbGhvc3QpIHtcbiAgICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJMb2NhbGhvc3QgaXMgbm90IGFsbG93ZWQgaW4gcHJvZHVjdGlvbiBtb2RlLCB0dXJuIG9mZiAnQWxsb3cgbG9jYWxob3N0JyBpbiBwcm9qZWN0IHNldHRpbmdzXCIsXG4gICAgICAgICAgICByZWxhdGl2ZUZpeFVybDogZG9tYWluc0ZpeFVybCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgeyBkb21haW4gfSBvZiBwcm9qZWN0LmNvbmZpZy5kb21haW5zKSB7XG4gICAgICAgIGxldCB1cmw7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB1cmwgPSBuZXcgVVJMKGRvbWFpbik7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiRG9tYWluIHdhcyBzb21laG93IG5vdCBhIHZhbGlkIFVSTDsgd2Ugc2hvdWxkJ3ZlIGNhdWdodCB0aGlzIHdoZW4gc2V0dGluZyB0aGUgZG9tYWluIGluIHRoZSBmaXJzdCBwbGFjZVwiLCB7XG4gICAgICAgICAgICAgICAgZG9tYWluLFxuICAgICAgICAgICAgICAgIHByb2plY3RJZDogcHJvamVjdFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzTG9jYWxob3N0KHVybCkpIHtcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkxvY2FsaG9zdCBkb21haW5zIGFyZSBub3QgYWxsb3dlZCB0byBiZSB0cnVzdGVkIGluIHByb2R1Y3Rpb24gbW9kZTogXCIgKyBkb21haW4sXG4gICAgICAgICAgICAgICAgcmVsYXRpdmVGaXhVcmw6IGRvbWFpbnNGaXhVcmwsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh1cmwuaG9zdG5hbWUubWF0Y2goL15cXGQrKFxcLlxcZCspKiQvKSkge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiRGlyZWN0IElQcyBhcmUgbm90IHZhbGlkIGZvciB0cnVzdGVkIGRvbWFpbnMgaW4gcHJvZHVjdGlvbiBtb2RlOiBcIiArIGRvbWFpbixcbiAgICAgICAgICAgICAgICByZWxhdGl2ZUZpeFVybDogZG9tYWluc0ZpeFVybCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHVybC5wcm90b2NvbCAhPT0gXCJodHRwczpcIikge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVHJ1c3RlZCBkb21haW5zIHNob3VsZCBiZSBIVFRQUzogXCIgKyBkb21haW4sXG4gICAgICAgICAgICAgICAgcmVsYXRpdmVGaXhVcmw6IGRvbWFpbnNGaXhVcmwsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZXJyb3JzO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackframe/stack-shared/dist/helpers/production-mode.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stackframe/stack-shared/dist/index.js":
/*!*************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/index.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KnownError: () => (/* reexport safe */ _known_errors__WEBPACK_IMPORTED_MODULE_3__.KnownError),\n/* harmony export */   KnownErrors: () => (/* reexport safe */ _known_errors__WEBPACK_IMPORTED_MODULE_3__.KnownErrors),\n/* harmony export */   StackAdminInterface: () => (/* reexport safe */ _interface_adminInterface__WEBPACK_IMPORTED_MODULE_0__.StackAdminInterface),\n/* harmony export */   StackClientInterface: () => (/* reexport safe */ _interface_clientInterface__WEBPACK_IMPORTED_MODULE_1__.StackClientInterface),\n/* harmony export */   StackServerInterface: () => (/* reexport safe */ _interface_serverInterface__WEBPACK_IMPORTED_MODULE_2__.StackServerInterface)\n/* harmony export */ });\n/* harmony import */ var _interface_adminInterface__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./interface/adminInterface */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/interface/adminInterface.js\");\n/* harmony import */ var _interface_clientInterface__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./interface/clientInterface */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/interface/clientInterface.js\");\n/* harmony import */ var _interface_serverInterface__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./interface/serverInterface */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/interface/serverInterface.js\");\n/* harmony import */ var _known_errors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./known-errors */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/known-errors.js\");\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQWlFO0FBQ0U7QUFDQTtBQUNWIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWFya2VycGxBSWNlLy4vbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L2luZGV4LmpzPzdkN2MiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHsgU3RhY2tBZG1pbkludGVyZmFjZSB9IGZyb20gXCIuL2ludGVyZmFjZS9hZG1pbkludGVyZmFjZVwiO1xuZXhwb3J0IHsgU3RhY2tDbGllbnRJbnRlcmZhY2UgfSBmcm9tIFwiLi9pbnRlcmZhY2UvY2xpZW50SW50ZXJmYWNlXCI7XG5leHBvcnQgeyBTdGFja1NlcnZlckludGVyZmFjZSB9IGZyb20gXCIuL2ludGVyZmFjZS9zZXJ2ZXJJbnRlcmZhY2VcIjtcbmV4cG9ydCB7IEtub3duRXJyb3IsIEtub3duRXJyb3JzIH0gZnJvbSBcIi4va25vd24tZXJyb3JzXCI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackframe/stack-shared/dist/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stackframe/stack-shared/dist/interface/adminInterface.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/interface/adminInterface.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StackAdminInterface: () => (/* binding */ StackAdminInterface)\n/* harmony export */ });\n/* harmony import */ var _serverInterface__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./serverInterface */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/interface/serverInterface.js\");\n\nclass StackAdminInterface extends _serverInterface__WEBPACK_IMPORTED_MODULE_0__.StackServerInterface {\n    constructor(options) {\n        super(options);\n        this.options = options;\n    }\n    async sendAdminRequest(path, options, session, requestType = \"admin\") {\n        return await this.sendServerRequest(path, {\n            ...options,\n            headers: {\n                \"x-stack-super-secret-admin-key\": \"superSecretAdminKey\" in this.options ? this.options.superSecretAdminKey : \"\",\n                ...options.headers,\n            },\n        }, session, requestType);\n    }\n    async getProject() {\n        const response = await this.sendAdminRequest(\"/projects/current\", {\n            method: \"GET\",\n        }, null);\n        return await response.json();\n    }\n    async updateProject(update) {\n        const response = await this.sendAdminRequest(\"/projects/current\", {\n            method: \"PATCH\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(update),\n        }, null);\n        return await response.json();\n    }\n    async createApiKey(options) {\n        const response = await this.sendServerRequest(\"/internal/api-keys\", {\n            method: \"POST\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(options),\n        }, null);\n        return await response.json();\n    }\n    async listApiKeys() {\n        const response = await this.sendAdminRequest(\"/internal/api-keys\", {}, null);\n        const result = await response.json();\n        return result.items;\n    }\n    async revokeApiKeyById(id) {\n        await this.sendAdminRequest(`/internal/api-keys/${id}`, {\n            method: \"PATCH\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify({\n                revoked: true,\n            }),\n        }, null);\n    }\n    async getApiKey(id, session) {\n        const response = await this.sendAdminRequest(`/internal/api-keys/${id}`, {}, session);\n        return await response.json();\n    }\n    async listEmailTemplates() {\n        const response = await this.sendAdminRequest(`/email-templates`, {}, null);\n        const result = await response.json();\n        return result.items;\n    }\n    async updateEmailTemplate(type, data) {\n        const result = await this.sendAdminRequest(`/email-templates/${type}`, {\n            method: \"PATCH\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(data),\n        }, null);\n        return await result.json();\n    }\n    async resetEmailTemplate(type) {\n        await this.sendAdminRequest(`/email-templates/${type}`, { method: \"DELETE\" }, null);\n    }\n    async listPermissionDefinitions() {\n        const response = await this.sendAdminRequest(`/team-permission-definitions`, {}, null);\n        const result = await response.json();\n        return result.items;\n    }\n    async createPermissionDefinition(data) {\n        const response = await this.sendAdminRequest(\"/team-permission-definitions\", {\n            method: \"POST\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(data),\n        }, null);\n        return await response.json();\n    }\n    async updatePermissionDefinition(permissionId, data) {\n        const response = await this.sendAdminRequest(`/team-permission-definitions/${permissionId}`, {\n            method: \"PATCH\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(data),\n        }, null);\n        return await response.json();\n    }\n    async deletePermissionDefinition(permissionId) {\n        await this.sendAdminRequest(`/team-permission-definitions/${permissionId}`, { method: \"DELETE\" }, null);\n    }\n    async getSvixToken() {\n        const response = await this.sendAdminRequest(\"/webhooks/svix-token\", {\n            method: \"POST\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify({}),\n        }, null);\n        return await response.json();\n    }\n    async deleteProject() {\n        await this.sendAdminRequest(\"/projects/current\", {\n            method: \"DELETE\",\n        }, null);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvaW50ZXJmYWNlL2FkbWluSW50ZXJmYWNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXlEO0FBQ2xELGtDQUFrQyxrRUFBb0I7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLDZFQUE2RTtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCxHQUFHO0FBQzdEO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsMkVBQTJFLEdBQUcsS0FBSztBQUNuRjtBQUNBO0FBQ0E7QUFDQSwyRUFBMkU7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1RUFBdUUsS0FBSztBQUM1RTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELEtBQUssS0FBSyxrQkFBa0I7QUFDcEY7QUFDQTtBQUNBLHVGQUF1RjtBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLHFGQUFxRixhQUFhO0FBQ2xHO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxvRUFBb0UsYUFBYSxLQUFLLGtCQUFrQjtBQUN4RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsbUNBQW1DO0FBQ25DLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tYXJrZXJwbEFJY2UvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvaW50ZXJmYWNlL2FkbWluSW50ZXJmYWNlLmpzPzk3YTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU3RhY2tTZXJ2ZXJJbnRlcmZhY2UgfSBmcm9tIFwiLi9zZXJ2ZXJJbnRlcmZhY2VcIjtcbmV4cG9ydCBjbGFzcyBTdGFja0FkbWluSW50ZXJmYWNlIGV4dGVuZHMgU3RhY2tTZXJ2ZXJJbnRlcmZhY2Uge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgfVxuICAgIGFzeW5jIHNlbmRBZG1pblJlcXVlc3QocGF0aCwgb3B0aW9ucywgc2Vzc2lvbiwgcmVxdWVzdFR5cGUgPSBcImFkbWluXCIpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QocGF0aCwge1xuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcIngtc3RhY2stc3VwZXItc2VjcmV0LWFkbWluLWtleVwiOiBcInN1cGVyU2VjcmV0QWRtaW5LZXlcIiBpbiB0aGlzLm9wdGlvbnMgPyB0aGlzLm9wdGlvbnMuc3VwZXJTZWNyZXRBZG1pbktleSA6IFwiXCIsXG4gICAgICAgICAgICAgICAgLi4ub3B0aW9ucy5oZWFkZXJzLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSwgc2Vzc2lvbiwgcmVxdWVzdFR5cGUpO1xuICAgIH1cbiAgICBhc3luYyBnZXRQcm9qZWN0KCkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChcIi9wcm9qZWN0cy9jdXJyZW50XCIsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgfSwgbnVsbCk7XG4gICAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZVByb2plY3QodXBkYXRlKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KFwiL3Byb2plY3RzL2N1cnJlbnRcIiwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodXBkYXRlKSxcbiAgICAgICAgfSwgbnVsbCk7XG4gICAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgfVxuICAgIGFzeW5jIGNyZWF0ZUFwaUtleShvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcIi9pbnRlcm5hbC9hcGkta2V5c1wiLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMpLFxuICAgICAgICB9LCBudWxsKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9XG4gICAgYXN5bmMgbGlzdEFwaUtleXMoKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KFwiL2ludGVybmFsL2FwaS1rZXlzXCIsIHt9LCBudWxsKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICByZXR1cm4gcmVzdWx0Lml0ZW1zO1xuICAgIH1cbiAgICBhc3luYyByZXZva2VBcGlLZXlCeUlkKGlkKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChgL2ludGVybmFsL2FwaS1rZXlzLyR7aWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIHJldm9rZWQ6IHRydWUsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSwgbnVsbCk7XG4gICAgfVxuICAgIGFzeW5jIGdldEFwaUtleShpZCwgc2Vzc2lvbikge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChgL2ludGVybmFsL2FwaS1rZXlzLyR7aWR9YCwge30sIHNlc3Npb24pO1xuICAgICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH1cbiAgICBhc3luYyBsaXN0RW1haWxUZW1wbGF0ZXMoKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KGAvZW1haWwtdGVtcGxhdGVzYCwge30sIG51bGwpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIHJldHVybiByZXN1bHQuaXRlbXM7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZUVtYWlsVGVtcGxhdGUodHlwZSwgZGF0YSkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnNlbmRBZG1pblJlcXVlc3QoYC9lbWFpbC10ZW1wbGF0ZXMvJHt0eXBlfWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgICB9LCBudWxsKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3VsdC5qc29uKCk7XG4gICAgfVxuICAgIGFzeW5jIHJlc2V0RW1haWxUZW1wbGF0ZSh0eXBlKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChgL2VtYWlsLXRlbXBsYXRlcy8ke3R5cGV9YCwgeyBtZXRob2Q6IFwiREVMRVRFXCIgfSwgbnVsbCk7XG4gICAgfVxuICAgIGFzeW5jIGxpc3RQZXJtaXNzaW9uRGVmaW5pdGlvbnMoKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KGAvdGVhbS1wZXJtaXNzaW9uLWRlZmluaXRpb25zYCwge30sIG51bGwpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIHJldHVybiByZXN1bHQuaXRlbXM7XG4gICAgfVxuICAgIGFzeW5jIGNyZWF0ZVBlcm1pc3Npb25EZWZpbml0aW9uKGRhdGEpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRBZG1pblJlcXVlc3QoXCIvdGVhbS1wZXJtaXNzaW9uLWRlZmluaXRpb25zXCIsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgICAgIH0sIG51bGwpO1xuICAgICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVQZXJtaXNzaW9uRGVmaW5pdGlvbihwZXJtaXNzaW9uSWQsIGRhdGEpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRBZG1pblJlcXVlc3QoYC90ZWFtLXBlcm1pc3Npb24tZGVmaW5pdGlvbnMvJHtwZXJtaXNzaW9uSWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgICAgIH0sIG51bGwpO1xuICAgICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH1cbiAgICBhc3luYyBkZWxldGVQZXJtaXNzaW9uRGVmaW5pdGlvbihwZXJtaXNzaW9uSWQpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KGAvdGVhbS1wZXJtaXNzaW9uLWRlZmluaXRpb25zLyR7cGVybWlzc2lvbklkfWAsIHsgbWV0aG9kOiBcIkRFTEVURVwiIH0sIG51bGwpO1xuICAgIH1cbiAgICBhc3luYyBnZXRTdml4VG9rZW4oKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KFwiL3dlYmhvb2tzL3N2aXgtdG9rZW5cIiwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7fSksXG4gICAgICAgIH0sIG51bGwpO1xuICAgICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH1cbiAgICBhc3luYyBkZWxldGVQcm9qZWN0KCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNlbmRBZG1pblJlcXVlc3QoXCIvcHJvamVjdHMvY3VycmVudFwiLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgIH0sIG51bGwpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackframe/stack-shared/dist/interface/adminInterface.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stackframe/stack-shared/dist/interface/clientInterface.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/interface/clientInterface.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StackClientInterface: () => (/* binding */ StackClientInterface)\n/* harmony export */ });\n/* harmony import */ var oauth4webapi__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! oauth4webapi */ \"(ssr)/./node_modules/oauth4webapi/build/index.js\");\n/* harmony import */ var _stackframe_stack_sc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @stackframe/stack-sc */ \"(ssr)/./node_modules/@stackframe/stack-sc/dist/index.default.js\");\n/* harmony import */ var _known_errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../known-errors */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/known-errors.js\");\n/* harmony import */ var _sessions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../sessions */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/sessions.js\");\n/* harmony import */ var _utils_crypto__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/crypto */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/crypto.js\");\n/* harmony import */ var _utils_errors__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/errors */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js\");\n/* harmony import */ var _utils_globals__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/globals */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/globals.js\");\n/* harmony import */ var _utils_objects__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/objects */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/objects.js\");\n/* harmony import */ var _utils_results__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/results */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/results.js\");\n/* harmony import */ var _utils_strings__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/strings */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/strings.js\");\n\n\n\n\n\n\n\n\n\n\nclass StackClientInterface {\n    constructor(options) {\n        this.options = options;\n        // nothing here\n    }\n    get projectId() {\n        return this.options.projectId;\n    }\n    getApiUrl() {\n        return this.options.baseUrl + \"/api/v1\";\n    }\n    async runNetworkDiagnostics(session, requestType) {\n        const tryRequest = async (cb) => {\n            try {\n                await cb();\n                return \"OK\";\n            }\n            catch (e) {\n                return `${e}`;\n            }\n        };\n        const cfTrace = await tryRequest(async () => {\n            const res = await fetch(\"https://1.1.1.1/cdn-cgi/trace\");\n            if (!res.ok) {\n                throw new Error(`${res.status} ${res.statusText}: ${await res.text()}`);\n            }\n        });\n        const apiRoot = session !== undefined && requestType !== undefined ? await tryRequest(async () => {\n            const res = await this.sendClientRequestInner(\"/\", {}, session, requestType);\n            if (res.status === \"error\") {\n                throw res.error;\n            }\n        }) : \"Not tested\";\n        const baseUrlBackend = await tryRequest(async () => {\n            const res = await fetch(new URL(\"/health\", this.getApiUrl()));\n            if (!res.ok) {\n                throw new Error(`${res.status} ${res.statusText}: ${await res.text()}`);\n            }\n        });\n        const prodDashboard = await tryRequest(async () => {\n            const res = await fetch(\"https://app.stack-auth.com/health\");\n            if (!res.ok) {\n                throw new Error(`${res.status} ${res.statusText}: ${await res.text()}`);\n            }\n        });\n        const prodBackend = await tryRequest(async () => {\n            const res = await fetch(\"https://api.stack-auth.com/health\");\n            if (!res.ok) {\n                throw new Error(`${res.status} ${res.statusText}: ${await res.text()}`);\n            }\n        });\n        return {\n            \"navigator?.onLine\": _utils_globals__WEBPACK_IMPORTED_MODULE_5__.globalVar.navigator?.onLine,\n            cfTrace,\n            apiRoot,\n            baseUrlBackend,\n            prodDashboard,\n            prodBackend,\n        };\n    }\n    async _networkRetry(cb, session, requestType) {\n        const retriedResult = await _utils_results__WEBPACK_IMPORTED_MODULE_7__.Result.retry(cb, 5, { exponentialDelayBase: 1000 });\n        // try to diagnose the error for the user\n        if (retriedResult.status === \"error\") {\n            if (_utils_globals__WEBPACK_IMPORTED_MODULE_5__.globalVar.navigator && !_utils_globals__WEBPACK_IMPORTED_MODULE_5__.globalVar.navigator.onLine) {\n                throw new Error(\"Failed to send Stack network request. It seems like you are offline. (window.navigator.onLine is falsy)\", { cause: retriedResult.error });\n            }\n            throw new Error((0,_utils_strings__WEBPACK_IMPORTED_MODULE_8__.deindent) `\n        Stack is unable to connect to the server. Please check your internet connection and try again.\n        \n        If the problem persists, please contact Stack support and provide a screenshot of your entire browser console.\n\n        ${retriedResult.error}\n        \n        ${JSON.stringify(await this.runNetworkDiagnostics(session, requestType), null, 2)}\n      `, { cause: retriedResult.error });\n        }\n        return retriedResult.data;\n    }\n    async _networkRetryException(cb, session, requestType) {\n        return await this._networkRetry(async () => await _utils_results__WEBPACK_IMPORTED_MODULE_7__.Result.fromThrowingAsync(cb), session, requestType);\n    }\n    async fetchNewAccessToken(refreshToken) {\n        if (!('publishableClientKey' in this.options)) {\n            // TODO support it\n            throw new Error(\"Admin session token is currently not supported for fetching new access token. Did you try to log in on a StackApp initiated with the admin session?\");\n        }\n        const as = {\n            issuer: this.options.baseUrl,\n            algorithm: 'oauth2',\n            token_endpoint: this.getApiUrl() + '/auth/oauth/token',\n        };\n        const client = {\n            client_id: this.projectId,\n            client_secret: this.options.publishableClientKey,\n            token_endpoint_auth_method: 'client_secret_post',\n        };\n        const rawResponse = await this._networkRetryException(async () => await oauth4webapi__WEBPACK_IMPORTED_MODULE_9__.refreshTokenGrantRequest(as, client, refreshToken.token));\n        const response = await this._processResponse(rawResponse);\n        if (response.status === \"error\") {\n            const error = response.error;\n            if (error instanceof _known_errors__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.RefreshTokenError) {\n                return null;\n            }\n            throw error;\n        }\n        if (!response.data.ok) {\n            const body = await response.data.text();\n            throw new Error(`Failed to send refresh token request: ${response.status} ${body}`);\n        }\n        const result = await oauth4webapi__WEBPACK_IMPORTED_MODULE_9__.processRefreshTokenResponse(as, client, response.data);\n        if (oauth4webapi__WEBPACK_IMPORTED_MODULE_9__.isOAuth2Error(result)) {\n            // TODO Handle OAuth 2.0 response body error\n            throw new _utils_errors__WEBPACK_IMPORTED_MODULE_4__.StackAssertionError(\"OAuth error\", { result });\n        }\n        if (!result.access_token) {\n            throw new _utils_errors__WEBPACK_IMPORTED_MODULE_4__.StackAssertionError(\"Access token not found in token endpoint response, this is weird!\");\n        }\n        return new _sessions__WEBPACK_IMPORTED_MODULE_2__.AccessToken(result.access_token);\n    }\n    async sendClientRequest(path, requestOptions, session, requestType = \"client\") {\n        session ??= this.createSession({\n            refreshToken: null,\n        });\n        return await this._networkRetry(() => this.sendClientRequestInner(path, requestOptions, session, requestType), session, requestType);\n    }\n    createSession(options) {\n        const session = new _sessions__WEBPACK_IMPORTED_MODULE_2__.InternalSession({\n            refreshAccessTokenCallback: async (refreshToken) => await this.fetchNewAccessToken(refreshToken),\n            ...options,\n        });\n        return session;\n    }\n    async sendClientRequestAndCatchKnownError(path, requestOptions, tokenStoreOrNull, errorsToCatch) {\n        try {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_7__.Result.ok(await this.sendClientRequest(path, requestOptions, tokenStoreOrNull));\n        }\n        catch (e) {\n            for (const errorType of errorsToCatch) {\n                if (e instanceof errorType) {\n                    return _utils_results__WEBPACK_IMPORTED_MODULE_7__.Result.error(e);\n                }\n            }\n            throw e;\n        }\n    }\n    async sendClientRequestInner(path, options, session, requestType) {\n        /**\n         * `tokenObj === null` means the session is invalid/not logged in\n         */\n        let tokenObj = await session.getPotentiallyExpiredTokens();\n        let adminSession = \"projectOwnerSession\" in this.options ? this.options.projectOwnerSession : null;\n        let adminTokenObj = adminSession ? await adminSession.getPotentiallyExpiredTokens() : null;\n        // all requests should be dynamic to prevent Next.js caching\n        (0,_stackframe_stack_sc__WEBPACK_IMPORTED_MODULE_0__.cookies)?.();\n        const url = this.getApiUrl() + path;\n        const params = {\n            /**\n             * This fetch may be cross-origin, in which case we don't want to send cookies of the\n             * original origin (this is the default behavior of `credentials`).\n             *\n             * To help debugging, also omit cookies on same-origin, so we don't accidentally\n             * implement reliance on cookies anywhere.\n             *\n             * However, Cloudflare Workers don't actually support `credentials`, so we only set it\n             * if Cloudflare-exclusive globals are not detected. https://github.com/cloudflare/workers-sdk/issues/2514\n             */\n            ...(\"WebSocketPair\" in _utils_globals__WEBPACK_IMPORTED_MODULE_5__.globalVar ? {} : {\n                credentials: \"omit\",\n            }),\n            ...options,\n            headers: {\n                \"X-Stack-Override-Error-Status\": \"true\",\n                \"X-Stack-Project-Id\": this.projectId,\n                \"X-Stack-Access-Type\": requestType,\n                \"X-Stack-Client-Version\": this.options.clientVersion,\n                ...(tokenObj ? {\n                    \"X-Stack-Access-Token\": tokenObj.accessToken.token,\n                } : {}),\n                ...(tokenObj?.refreshToken ? {\n                    \"X-Stack-Refresh-Token\": tokenObj.refreshToken.token,\n                } : {}),\n                ...('publishableClientKey' in this.options ? {\n                    \"X-Stack-Publishable-Client-Key\": this.options.publishableClientKey,\n                } : {}),\n                ...(adminTokenObj ? {\n                    \"X-Stack-Admin-Access-Token\": adminTokenObj.accessToken.token,\n                } : {}),\n                /**\n                 * Next.js until v15 would cache fetch requests by default, and forcefully disabling it was nearly impossible.\n                 *\n                 * This header is used to change the cache key and hence always disable it, because we do our own caching.\n                 *\n                 * When we drop support for Next.js <15, we may be able to remove this header, but please make sure that this is\n                 * the case (I haven't actually tested.)\n                 */\n                \"X-Stack-Random-Nonce\": (0,_utils_crypto__WEBPACK_IMPORTED_MODULE_3__.generateSecureRandomString)(),\n                ...options.headers,\n            },\n            /**\n             * Cloudflare Workers does not support cache, so don't pass it there\n             */\n            ...(\"WebSocketPair\" in _utils_globals__WEBPACK_IMPORTED_MODULE_5__.globalVar ? {} : {\n                cache: \"no-store\",\n            }),\n        };\n        let rawRes;\n        try {\n            rawRes = await fetch(url, params);\n        }\n        catch (e) {\n            if (e instanceof TypeError) {\n                // Network error, retry\n                return _utils_results__WEBPACK_IMPORTED_MODULE_7__.Result.error(e);\n            }\n            throw e;\n        }\n        const processedRes = await this._processResponse(rawRes);\n        if (processedRes.status === \"error\") {\n            // If the access token is invalid, reset it and retry\n            if (processedRes.error instanceof _known_errors__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.InvalidAccessToken) {\n                if (!tokenObj) {\n                    throw new _utils_errors__WEBPACK_IMPORTED_MODULE_4__.StackAssertionError(\"Received invalid access token, but session is not logged in\", { tokenObj, processedRes });\n                }\n                session.markAccessTokenExpired(tokenObj.accessToken);\n                return _utils_results__WEBPACK_IMPORTED_MODULE_7__.Result.error(processedRes.error);\n            }\n            // Same for the admin access token\n            // TODO HACK: Some of the backend hasn't been ported to use the new error codes, so if we have project owner tokens we need to check for ApiKeyNotFound too. Once the migration to smartRouteHandlers is complete, we can check for InvalidAdminAccessToken only.\n            if (adminSession && (processedRes.error instanceof _known_errors__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.InvalidAdminAccessToken || processedRes.error instanceof _known_errors__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.ApiKeyNotFound)) {\n                if (!adminTokenObj) {\n                    throw new _utils_errors__WEBPACK_IMPORTED_MODULE_4__.StackAssertionError(\"Received invalid admin access token, but admin session is not logged in\", { adminTokenObj, processedRes });\n                }\n                adminSession.markAccessTokenExpired(adminTokenObj.accessToken);\n                return _utils_results__WEBPACK_IMPORTED_MODULE_7__.Result.error(processedRes.error);\n            }\n            // Known errors are client side errors, so except for the ones above they should not be retried\n            // Hence, throw instead of returning an error\n            throw processedRes.error;\n        }\n        const res = Object.assign(processedRes.data, {\n            usedTokens: tokenObj,\n        });\n        if (res.ok) {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_7__.Result.ok(res);\n        }\n        else {\n            const error = await res.text();\n            // Do not retry, throw error instead of returning one\n            throw new _utils_errors__WEBPACK_IMPORTED_MODULE_4__.StackAssertionError(`Failed to send request to ${url}: ${res.status} ${error}`, { request: params, res });\n        }\n    }\n    async _processResponse(rawRes) {\n        let res = rawRes;\n        if (rawRes.headers.has(\"x-stack-actual-status\")) {\n            const actualStatus = Number(rawRes.headers.get(\"x-stack-actual-status\"));\n            res = new Response(rawRes.body, {\n                status: actualStatus,\n                statusText: rawRes.statusText,\n                headers: rawRes.headers,\n            });\n        }\n        // Handle known errors\n        if (res.headers.has(\"x-stack-known-error\")) {\n            const errorJson = await res.json();\n            if (res.headers.get(\"x-stack-known-error\") !== errorJson.code) {\n                throw new _utils_errors__WEBPACK_IMPORTED_MODULE_4__.StackAssertionError(\"Mismatch between x-stack-known-error header and error code in body; the server's response is invalid\");\n            }\n            const error = _known_errors__WEBPACK_IMPORTED_MODULE_1__.KnownError.fromJson(errorJson);\n            return _utils_results__WEBPACK_IMPORTED_MODULE_7__.Result.error(error);\n        }\n        return _utils_results__WEBPACK_IMPORTED_MODULE_7__.Result.ok(res);\n    }\n    async checkFeatureSupport(options) {\n        const res = await this.sendClientRequest(\"/check-feature-support\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify(options),\n        }, null);\n        throw new _utils_errors__WEBPACK_IMPORTED_MODULE_4__.StackAssertionError(await res.text());\n    }\n    async sendForgotPasswordEmail(email, callbackUrl) {\n        const res = await this.sendClientRequestAndCatchKnownError(\"/auth/password/send-reset-code\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                email,\n                callback_url: callbackUrl,\n            }),\n        }, null, [_known_errors__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.UserNotFound]);\n        if (res.status === \"error\") {\n            return res.error;\n        }\n    }\n    async sendVerificationEmail(email, callbackUrl, session) {\n        const res = await this.sendClientRequestAndCatchKnownError(\"/contact-channels/send-verification-code\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                email,\n                callback_url: callbackUrl,\n            }),\n        }, session, [_known_errors__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.EmailAlreadyVerified]);\n        if (res.status === \"error\") {\n            return res.error;\n        }\n    }\n    async sendMagicLinkEmail(email, callbackUrl) {\n        const res = await this.sendClientRequestAndCatchKnownError(\"/auth/otp/send-sign-in-code\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                email,\n                callback_url: callbackUrl,\n            }),\n        }, null, [_known_errors__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.RedirectUrlNotWhitelisted]);\n        if (res.status === \"error\") {\n            return res.error;\n        }\n    }\n    async resetPassword(options) {\n        const res = await this.sendClientRequestAndCatchKnownError(\"onlyVerifyCode\" in options ? \"/auth/password/reset/check-code\" : \"/auth/password/reset\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                code: options.code,\n                ...(\"password\" in options ? { password: options.password } : {}),\n            }),\n        }, null, [_known_errors__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.VerificationCodeError]);\n        if (res.status === \"error\") {\n            return res.error;\n        }\n    }\n    async updatePassword(options, session) {\n        const res = await this.sendClientRequestAndCatchKnownError(\"/auth/password/update\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                old_password: options.oldPassword,\n                new_password: options.newPassword,\n            }),\n        }, session, [_known_errors__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.PasswordConfirmationMismatch, _known_errors__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.PasswordRequirementsNotMet]);\n        if (res.status === \"error\") {\n            return res.error;\n        }\n    }\n    async verifyPasswordResetCode(code) {\n        const res = await this.resetPassword({ code, onlyVerifyCode: true });\n        if (res && !(res instanceof _known_errors__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.VerificationCodeError)) {\n            throw res;\n        }\n        return res;\n    }\n    async verifyEmail(code) {\n        const res = await this.sendClientRequestAndCatchKnownError(\"/contact-channels/verify\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                code,\n            }),\n        }, null, [_known_errors__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.VerificationCodeError]);\n        if (res.status === \"error\") {\n            return res.error;\n        }\n    }\n    async sendTeamInvitation(options) {\n        const res = await this.sendClientRequestAndCatchKnownError(\"/team-invitations/send-code\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                email: options.email,\n                team_id: options.teamId,\n                callback_url: options.callbackUrl,\n            }),\n        }, options.session, [_known_errors__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.TeamPermissionRequired]);\n        if (res.status === \"error\") {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_7__.Result.error(res.error);\n        }\n        else {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_7__.Result.ok(undefined);\n        }\n    }\n    async acceptTeamInvitation(options) {\n        const res = await this.sendClientRequestAndCatchKnownError(options.type === 'check' ?\n            \"/team-invitations/accept/check-code\" :\n            options.type === 'details' ?\n                \"/team-invitations/accept/details\" :\n                \"/team-invitations/accept\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                code: options.code,\n            }),\n        }, options.session, [_known_errors__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.VerificationCodeError]);\n        if (res.status === \"error\") {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_7__.Result.error(res.error);\n        }\n        else {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_7__.Result.ok(await res.data.json());\n        }\n    }\n    async totpMfa(attemptCode, totp, session) {\n        const res = await this.sendClientRequest(\"/auth/mfa/sign-in\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                code: attemptCode,\n                type: \"totp\",\n                totp: totp,\n            }),\n        }, session);\n        const result = await res.json();\n        return {\n            accessToken: result.access_token,\n            refreshToken: result.refresh_token,\n            newUser: result.is_new_user,\n        };\n    }\n    async signInWithCredential(email, password, session) {\n        const res = await this.sendClientRequestAndCatchKnownError(\"/auth/password/sign-in\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                email,\n                password,\n            }),\n        }, session, [_known_errors__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.EmailPasswordMismatch]);\n        if (res.status === \"error\") {\n            return res.error;\n        }\n        const result = await res.data.json();\n        return {\n            accessToken: result.access_token,\n            refreshToken: result.refresh_token,\n        };\n    }\n    async signUpWithCredential(email, password, emailVerificationRedirectUrl, session) {\n        const res = await this.sendClientRequestAndCatchKnownError(\"/auth/password/sign-up\", {\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            method: \"POST\",\n            body: JSON.stringify({\n                email,\n                password,\n                verification_callback_url: emailVerificationRedirectUrl,\n            }),\n        }, session, [_known_errors__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.UserEmailAlreadyExists, _known_errors__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.PasswordRequirementsNotMet]);\n        if (res.status === \"error\") {\n            return res.error;\n        }\n        const result = await res.data.json();\n        return {\n            accessToken: result.access_token,\n            refreshToken: result.refresh_token,\n        };\n    }\n    async signInWithMagicLink(code) {\n        const res = await this.sendClientRequestAndCatchKnownError(\"/auth/otp/sign-in\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                code,\n            }),\n        }, null, [_known_errors__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.VerificationCodeError]);\n        if (res.status === \"error\") {\n            return res.error;\n        }\n        const result = await res.data.json();\n        return {\n            accessToken: result.access_token,\n            refreshToken: result.refresh_token,\n            newUser: result.is_new_user,\n        };\n    }\n    async getOAuthUrl(options) {\n        const updatedRedirectUrl = new URL(options.redirectUrl);\n        for (const key of [\"code\", \"state\"]) {\n            if (updatedRedirectUrl.searchParams.has(key)) {\n                console.warn(\"Redirect URL already contains \" + key + \" parameter, removing it as it will be overwritten by the OAuth callback\");\n            }\n            updatedRedirectUrl.searchParams.delete(key);\n        }\n        if (!('publishableClientKey' in this.options)) {\n            // TODO fix\n            throw new Error(\"Admin session token is currently not supported for OAuth\");\n        }\n        const url = new URL(this.getApiUrl() + \"/auth/oauth/authorize/\" + options.provider.toLowerCase());\n        url.searchParams.set(\"client_id\", this.projectId);\n        url.searchParams.set(\"client_secret\", this.options.publishableClientKey);\n        url.searchParams.set(\"redirect_uri\", updatedRedirectUrl.toString());\n        url.searchParams.set(\"scope\", \"legacy\");\n        url.searchParams.set(\"state\", options.state);\n        url.searchParams.set(\"grant_type\", \"authorization_code\");\n        url.searchParams.set(\"code_challenge\", options.codeChallenge);\n        url.searchParams.set(\"code_challenge_method\", \"S256\");\n        url.searchParams.set(\"response_type\", \"code\");\n        url.searchParams.set(\"type\", options.type);\n        url.searchParams.set(\"error_redirect_url\", options.errorRedirectUrl);\n        if (options.afterCallbackRedirectUrl) {\n            url.searchParams.set(\"after_callback_redirect_url\", options.afterCallbackRedirectUrl);\n        }\n        if (options.type === \"link\") {\n            const tokens = await options.session.getPotentiallyExpiredTokens();\n            url.searchParams.set(\"token\", tokens?.accessToken.token || \"\");\n            if (options.providerScope) {\n                url.searchParams.set(\"provider_scope\", options.providerScope);\n            }\n        }\n        return url.toString();\n    }\n    async callOAuthCallback(options) {\n        if (!('publishableClientKey' in this.options)) {\n            // TODO fix\n            throw new Error(\"Admin session token is currently not supported for OAuth\");\n        }\n        const as = {\n            issuer: this.options.baseUrl,\n            algorithm: 'oauth2',\n            token_endpoint: this.getApiUrl() + '/auth/oauth/token',\n        };\n        const client = {\n            client_id: this.projectId,\n            client_secret: this.options.publishableClientKey,\n            token_endpoint_auth_method: 'client_secret_post',\n        };\n        const params = await this._networkRetryException(async () => oauth4webapi__WEBPACK_IMPORTED_MODULE_9__.validateAuthResponse(as, client, options.oauthParams, options.state));\n        if (oauth4webapi__WEBPACK_IMPORTED_MODULE_9__.isOAuth2Error(params)) {\n            throw new _utils_errors__WEBPACK_IMPORTED_MODULE_4__.StackAssertionError(\"Error validating outer OAuth response\", { params }); // Handle OAuth 2.0 redirect error\n        }\n        const response = await oauth4webapi__WEBPACK_IMPORTED_MODULE_9__.authorizationCodeGrantRequest(as, client, params, options.redirectUri, options.codeVerifier);\n        const result = await oauth4webapi__WEBPACK_IMPORTED_MODULE_9__.processAuthorizationCodeOAuth2Response(as, client, response);\n        if (oauth4webapi__WEBPACK_IMPORTED_MODULE_9__.isOAuth2Error(result)) {\n            if (\"code\" in result && result.code === \"MULTI_FACTOR_AUTHENTICATION_REQUIRED\") {\n                throw new _known_errors__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.MultiFactorAuthenticationRequired(result.details.attempt_code);\n            }\n            // TODO Handle OAuth 2.0 response body error\n            throw new _utils_errors__WEBPACK_IMPORTED_MODULE_4__.StackAssertionError(\"Outer OAuth error during authorization code response\", { result });\n        }\n        return {\n            newUser: result.is_new_user,\n            afterCallbackRedirectUrl: result.after_callback_redirect_url,\n            accessToken: result.access_token,\n            refreshToken: result.refresh_token ?? (0,_utils_errors__WEBPACK_IMPORTED_MODULE_4__.throwErr)(\"Refresh token not found in outer OAuth response\"),\n        };\n    }\n    async signOut(session) {\n        const tokenObj = await session.getPotentiallyExpiredTokens();\n        if (tokenObj) {\n            const resOrError = await this.sendClientRequestAndCatchKnownError(\"/auth/sessions/current\", {\n                method: \"DELETE\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({}),\n            }, session, [_known_errors__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.RefreshTokenError]);\n            if (resOrError.status === \"error\") {\n                if (resOrError.error instanceof _known_errors__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.RefreshTokenError) {\n                    // refresh token was already invalid, just continue like nothing happened\n                }\n                else {\n                    // this should never happen\n                    throw new _utils_errors__WEBPACK_IMPORTED_MODULE_4__.StackAssertionError(\"Unexpected error\", { error: resOrError.error });\n                }\n            }\n            else {\n                // user was signed out successfully, all good\n            }\n        }\n        session.markInvalid();\n    }\n    async getClientUserByToken(session) {\n        const responseOrError = await this.sendClientRequestAndCatchKnownError(\"/users/me\", {}, session, [_known_errors__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.CannotGetOwnUserWithoutUser]);\n        if (responseOrError.status === \"error\") {\n            if (responseOrError.error instanceof _known_errors__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.CannotGetOwnUserWithoutUser) {\n                return null;\n            }\n            else {\n                throw new _utils_errors__WEBPACK_IMPORTED_MODULE_4__.StackAssertionError(\"Unexpected uncaught error\", { cause: responseOrError.error });\n            }\n        }\n        const response = responseOrError.data;\n        const user = await response.json();\n        if (!user)\n            throw new _utils_errors__WEBPACK_IMPORTED_MODULE_4__.StackAssertionError(\"User endpoint returned null; this should never happen\");\n        return user;\n    }\n    async listTeamMemberProfiles(options, session) {\n        const response = await this.sendClientRequest(\"/team-member-profiles?\" + new URLSearchParams((0,_utils_objects__WEBPACK_IMPORTED_MODULE_6__.filterUndefined)({\n            team_id: options.teamId,\n            user_id: options.userId,\n        })), {}, session);\n        const result = await response.json();\n        return result.items;\n    }\n    async getTeamMemberProfile(options, session) {\n        const response = await this.sendClientRequest(`/team-member-profiles/${options.teamId}/${options.userId}`, {}, session);\n        return await response.json();\n    }\n    async leaveTeam(teamId, session) {\n        await this.sendClientRequest(`/team-memberships/${teamId}/me`, {\n            method: \"DELETE\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify({}),\n        }, session);\n    }\n    async updateTeamMemberProfile(options, session) {\n        await this.sendClientRequest(`/team-member-profiles/${options.teamId}/${options.userId}`, {\n            method: \"PATCH\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(options.profile),\n        }, session);\n    }\n    async updateTeam(options, session) {\n        await this.sendClientRequest(`/teams/${options.teamId}`, {\n            method: \"PATCH\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(options.data),\n        }, session);\n    }\n    async listCurrentUserTeamPermissions(options, session) {\n        const response = await this.sendClientRequest(`/team-permissions?team_id=${options.teamId}&user_id=me&recursive=${options.recursive}`, {}, session);\n        const result = await response.json();\n        return result.items;\n    }\n    async listCurrentUserTeams(session) {\n        const response = await this.sendClientRequest(\"/teams?user_id=me\", {}, session);\n        const result = await response.json();\n        return result.items;\n    }\n    async getClientProject() {\n        const responseOrError = await this.sendClientRequestAndCatchKnownError(\"/projects/current\", {}, null, [_known_errors__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.ProjectNotFound]);\n        if (responseOrError.status === \"error\") {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_7__.Result.error(responseOrError.error);\n        }\n        const response = responseOrError.data;\n        const project = await response.json();\n        return _utils_results__WEBPACK_IMPORTED_MODULE_7__.Result.ok(project);\n    }\n    async updateClientUser(update, session) {\n        await this.sendClientRequest(\"/users/me\", {\n            method: \"PATCH\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(update),\n        }, session);\n    }\n    async listProjects(session) {\n        const response = await this.sendClientRequest(\"/internal/projects\", {}, session);\n        if (!response.ok) {\n            throw new Error(\"Failed to list projects: \" + response.status + \" \" + (await response.text()));\n        }\n        const json = await response.json();\n        return json.items;\n    }\n    async createProject(project, session) {\n        const fetchResponse = await this.sendClientRequest(\"/internal/projects\", {\n            method: \"POST\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(project),\n        }, session);\n        if (!fetchResponse.ok) {\n            throw new Error(\"Failed to create project: \" + fetchResponse.status + \" \" + (await fetchResponse.text()));\n        }\n        const json = await fetchResponse.json();\n        return json;\n    }\n    async createProviderAccessToken(provider, scope, session) {\n        const response = await this.sendClientRequest(`/connected-accounts/me/${provider}/access-token`, {\n            method: \"POST\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify({ scope }),\n        }, session);\n        return await response.json();\n    }\n    async createTeamForCurrentUser(data, session) {\n        const response = await this.sendClientRequest(\"/teams?add_current_user=true\", {\n            method: \"POST\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(data),\n        }, session);\n        return await response.json();\n    }\n    async deleteCurrentUser(session) {\n        await this.sendClientRequest(\"/users/me\", {\n            method: \"DELETE\",\n        }, session);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvaW50ZXJmYWNlL2NsaWVudEludGVyZmFjZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFzQztBQUNTO0FBQ1c7QUFDQztBQUNFO0FBQ0c7QUFDbkI7QUFDTTtBQUNUO0FBQ0U7QUFDckM7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLEVBQUU7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxZQUFZLEVBQUUsZUFBZSxJQUFJLGlCQUFpQjtBQUNyRjtBQUNBLFNBQVM7QUFDVDtBQUNBLGlFQUFpRTtBQUNqRTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLFlBQVksRUFBRSxlQUFlLElBQUksaUJBQWlCO0FBQ3JGO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxZQUFZLEVBQUUsZUFBZSxJQUFJLGlCQUFpQjtBQUNyRjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsWUFBWSxFQUFFLGVBQWUsSUFBSSxpQkFBaUI7QUFDckY7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxpQ0FBaUMscURBQVM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxrREFBTSxnQkFBZ0IsNEJBQTRCO0FBQ3RGO0FBQ0E7QUFDQSxnQkFBZ0IscURBQVMsZUFBZSxxREFBUztBQUNqRCw2SUFBNkksNEJBQTRCO0FBQ3pLO0FBQ0EsNEJBQTRCLHdEQUFRO0FBQ3BDO0FBQ0E7QUFDQTs7QUFFQSxVQUFVO0FBQ1Y7QUFDQSxVQUFVO0FBQ1YsV0FBVyw0QkFBNEI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQsa0RBQU07QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRkFBZ0Ysa0VBQThCO0FBQzlHO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxzREFBVztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUUsaUJBQWlCLEVBQUUsS0FBSztBQUM3RjtBQUNBLDZCQUE2QixxRUFBaUM7QUFDOUQsWUFBWSx1REFBbUI7QUFDL0I7QUFDQSxzQkFBc0IsOERBQW1CLGtCQUFrQixRQUFRO0FBQ25FO0FBQ0E7QUFDQSxzQkFBc0IsOERBQW1CO0FBQ3pDO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixzREFBZTtBQUMzQztBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGtEQUFNO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGtEQUFNO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSw2REFBTztBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix3RUFBNEIsTUFBTTtBQUNsRDtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLElBQUk7QUFDdEI7QUFDQTtBQUNBLGtCQUFrQixJQUFJO0FBQ3RCO0FBQ0E7QUFDQSxrQkFBa0IsSUFBSTtBQUN0QjtBQUNBO0FBQ0Esa0JBQWtCLElBQUk7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3Qyx5RUFBMEI7QUFDbEU7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHdFQUE0QixNQUFNO0FBQ2xEO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsa0RBQU07QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLHNEQUFXO0FBQ3pEO0FBQ0EsOEJBQThCLDhEQUFtQixrRUFBa0Usd0JBQXdCO0FBQzNJO0FBQ0E7QUFDQSx1QkFBdUIsa0RBQU07QUFDN0I7QUFDQTtBQUNBO0FBQ0EsK0RBQStELHNEQUFXLDBEQUEwRCxzREFBVztBQUMvSTtBQUNBLDhCQUE4Qiw4REFBbUIsOEVBQThFLDZCQUE2QjtBQUM1SjtBQUNBO0FBQ0EsdUJBQXVCLGtEQUFNO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsbUJBQW1CLGtEQUFNO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDhEQUFtQiw4QkFBOEIsSUFBSSxJQUFJLFlBQVksRUFBRSxNQUFNLEtBQUssc0JBQXNCO0FBQzlIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsOERBQW1CLHNFQUFzRTtBQUNuSDtBQUNBLDBCQUEwQixxREFBVTtBQUNwQyxtQkFBbUIsa0RBQU07QUFDekI7QUFDQSxlQUFlLGtEQUFNO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVCxrQkFBa0IsOERBQW1CO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUyxTQUFTLHNEQUFXO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUyxZQUFZLHNEQUFXO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUyxTQUFTLHNEQUFXO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsOENBQThDLDZCQUE2QixJQUFJO0FBQy9FLGFBQWE7QUFDYixTQUFTLFNBQVMsc0RBQVc7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTLFlBQVksc0RBQVcsK0JBQStCLHNEQUFXO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsNEJBQTRCO0FBQzNFLG9DQUFvQyxzREFBVztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTLFNBQVMsc0RBQVc7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVMsb0JBQW9CLHNEQUFXO0FBQ3hDO0FBQ0EsbUJBQW1CLGtEQUFNO0FBQ3pCO0FBQ0E7QUFDQSxtQkFBbUIsa0RBQU07QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVMsb0JBQW9CLHNEQUFXO0FBQ3hDO0FBQ0EsbUJBQW1CLGtEQUFNO0FBQ3pCO0FBQ0E7QUFDQSxtQkFBbUIsa0RBQU07QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUyxZQUFZLHNEQUFXO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUyxZQUFZLHNEQUFXLHlCQUF5QixzREFBVztBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUyxTQUFTLHNEQUFXO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUVBQXFFLDhEQUEwQjtBQUMvRixZQUFZLHVEQUFtQjtBQUMvQixzQkFBc0IsOERBQW1CLDRDQUE0QyxRQUFRLEdBQUc7QUFDaEc7QUFDQSwrQkFBK0IsdUVBQW1DO0FBQ2xFLDZCQUE2QixnRkFBNEM7QUFDekUsWUFBWSx1REFBbUI7QUFDL0I7QUFDQSwwQkFBMEIsc0RBQVc7QUFDckM7QUFDQTtBQUNBLHNCQUFzQiw4REFBbUIsMkRBQTJELFFBQVE7QUFDNUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCx1REFBUTtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsdUNBQXVDO0FBQ3ZDLGFBQWEsWUFBWSxzREFBVztBQUNwQztBQUNBLGdEQUFnRCxzREFBVztBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qiw4REFBbUIsdUJBQXVCLHlCQUF5QjtBQUNqRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4RkFBOEYsWUFBWSxzREFBVztBQUNySDtBQUNBLGlEQUFpRCxzREFBVztBQUM1RDtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsOERBQW1CLGdDQUFnQyw4QkFBOEI7QUFDM0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiw4REFBbUIsK0JBQStCO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBLHFHQUFxRywrREFBZTtBQUNwSDtBQUNBO0FBQ0EsU0FBUyxNQUFNO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrRUFBK0UsZUFBZSxHQUFHLGVBQWUsS0FBSztBQUNySDtBQUNBO0FBQ0E7QUFDQSwwREFBMEQsT0FBTztBQUNqRTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsbUNBQW1DO0FBQ25DLFNBQVM7QUFDVDtBQUNBO0FBQ0EsOERBQThELGVBQWUsR0FBRyxlQUFlO0FBQy9GO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsK0NBQStDLGVBQWU7QUFDOUQ7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxtRkFBbUYsZUFBZSx3QkFBd0Isa0JBQWtCLEtBQUs7QUFDako7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2RUFBNkU7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzR0FBc0csU0FBUyxzREFBVztBQUMxSDtBQUNBLG1CQUFtQixrREFBTTtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxlQUFlLGtEQUFNO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsOEVBQThFO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRkFBZ0YsU0FBUztBQUN6RjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsbUNBQW1DLE9BQU87QUFDMUMsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL21hcmtlcnBsQUljZS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9pbnRlcmZhY2UvY2xpZW50SW50ZXJmYWNlLmpzP2M4YWIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgb2F1dGggZnJvbSAnb2F1dGg0d2ViYXBpJztcbmltcG9ydCB7IGNvb2tpZXMgfSBmcm9tICdAc3RhY2tmcmFtZS9zdGFjay1zYyc7XG5pbXBvcnQgeyBLbm93bkVycm9yLCBLbm93bkVycm9ycyB9IGZyb20gJy4uL2tub3duLWVycm9ycyc7XG5pbXBvcnQgeyBBY2Nlc3NUb2tlbiwgSW50ZXJuYWxTZXNzaW9uIH0gZnJvbSAnLi4vc2Vzc2lvbnMnO1xuaW1wb3J0IHsgZ2VuZXJhdGVTZWN1cmVSYW5kb21TdHJpbmcgfSBmcm9tICcuLi91dGlscy9jcnlwdG8nO1xuaW1wb3J0IHsgU3RhY2tBc3NlcnRpb25FcnJvciwgdGhyb3dFcnIgfSBmcm9tICcuLi91dGlscy9lcnJvcnMnO1xuaW1wb3J0IHsgZ2xvYmFsVmFyIH0gZnJvbSAnLi4vdXRpbHMvZ2xvYmFscyc7XG5pbXBvcnQgeyBmaWx0ZXJVbmRlZmluZWQgfSBmcm9tICcuLi91dGlscy9vYmplY3RzJztcbmltcG9ydCB7IFJlc3VsdCB9IGZyb20gXCIuLi91dGlscy9yZXN1bHRzXCI7XG5pbXBvcnQgeyBkZWluZGVudCB9IGZyb20gJy4uL3V0aWxzL3N0cmluZ3MnO1xuZXhwb3J0IGNsYXNzIFN0YWNrQ2xpZW50SW50ZXJmYWNlIHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIC8vIG5vdGhpbmcgaGVyZVxuICAgIH1cbiAgICBnZXQgcHJvamVjdElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnByb2plY3RJZDtcbiAgICB9XG4gICAgZ2V0QXBpVXJsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmJhc2VVcmwgKyBcIi9hcGkvdjFcIjtcbiAgICB9XG4gICAgYXN5bmMgcnVuTmV0d29ya0RpYWdub3N0aWNzKHNlc3Npb24sIHJlcXVlc3RUeXBlKSB7XG4gICAgICAgIGNvbnN0IHRyeVJlcXVlc3QgPSBhc3luYyAoY2IpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgY2IoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJPS1wiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7ZX1gO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBjZlRyYWNlID0gYXdhaXQgdHJ5UmVxdWVzdChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChcImh0dHBzOi8vMS4xLjEuMS9jZG4tY2dpL3RyYWNlXCIpO1xuICAgICAgICAgICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7cmVzLnN0YXR1c30gJHtyZXMuc3RhdHVzVGV4dH06ICR7YXdhaXQgcmVzLnRleHQoKX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGFwaVJvb3QgPSBzZXNzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVxdWVzdFR5cGUgIT09IHVuZGVmaW5lZCA/IGF3YWl0IHRyeVJlcXVlc3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdElubmVyKFwiL1wiLCB7fSwgc2Vzc2lvbiwgcmVxdWVzdFR5cGUpO1xuICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgICAgICAgICAgIHRocm93IHJlcy5lcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkgOiBcIk5vdCB0ZXN0ZWRcIjtcbiAgICAgICAgY29uc3QgYmFzZVVybEJhY2tlbmQgPSBhd2FpdCB0cnlSZXF1ZXN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKG5ldyBVUkwoXCIvaGVhbHRoXCIsIHRoaXMuZ2V0QXBpVXJsKCkpKTtcbiAgICAgICAgICAgIGlmICghcmVzLm9rKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke3Jlcy5zdGF0dXN9ICR7cmVzLnN0YXR1c1RleHR9OiAke2F3YWl0IHJlcy50ZXh0KCl9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBwcm9kRGFzaGJvYXJkID0gYXdhaXQgdHJ5UmVxdWVzdChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChcImh0dHBzOi8vYXBwLnN0YWNrLWF1dGguY29tL2hlYWx0aFwiKTtcbiAgICAgICAgICAgIGlmICghcmVzLm9rKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke3Jlcy5zdGF0dXN9ICR7cmVzLnN0YXR1c1RleHR9OiAke2F3YWl0IHJlcy50ZXh0KCl9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBwcm9kQmFja2VuZCA9IGF3YWl0IHRyeVJlcXVlc3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goXCJodHRwczovL2FwaS5zdGFjay1hdXRoLmNvbS9oZWFsdGhcIik7XG4gICAgICAgICAgICBpZiAoIXJlcy5vaykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtyZXMuc3RhdHVzfSAke3Jlcy5zdGF0dXNUZXh0fTogJHthd2FpdCByZXMudGV4dCgpfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwibmF2aWdhdG9yPy5vbkxpbmVcIjogZ2xvYmFsVmFyLm5hdmlnYXRvcj8ub25MaW5lLFxuICAgICAgICAgICAgY2ZUcmFjZSxcbiAgICAgICAgICAgIGFwaVJvb3QsXG4gICAgICAgICAgICBiYXNlVXJsQmFja2VuZCxcbiAgICAgICAgICAgIHByb2REYXNoYm9hcmQsXG4gICAgICAgICAgICBwcm9kQmFja2VuZCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXN5bmMgX25ldHdvcmtSZXRyeShjYiwgc2Vzc2lvbiwgcmVxdWVzdFR5cGUpIHtcbiAgICAgICAgY29uc3QgcmV0cmllZFJlc3VsdCA9IGF3YWl0IFJlc3VsdC5yZXRyeShjYiwgNSwgeyBleHBvbmVudGlhbERlbGF5QmFzZTogMTAwMCB9KTtcbiAgICAgICAgLy8gdHJ5IHRvIGRpYWdub3NlIHRoZSBlcnJvciBmb3IgdGhlIHVzZXJcbiAgICAgICAgaWYgKHJldHJpZWRSZXN1bHQuc3RhdHVzID09PSBcImVycm9yXCIpIHtcbiAgICAgICAgICAgIGlmIChnbG9iYWxWYXIubmF2aWdhdG9yICYmICFnbG9iYWxWYXIubmF2aWdhdG9yLm9uTGluZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBzZW5kIFN0YWNrIG5ldHdvcmsgcmVxdWVzdC4gSXQgc2VlbXMgbGlrZSB5b3UgYXJlIG9mZmxpbmUuICh3aW5kb3cubmF2aWdhdG9yLm9uTGluZSBpcyBmYWxzeSlcIiwgeyBjYXVzZTogcmV0cmllZFJlc3VsdC5lcnJvciB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihkZWluZGVudCBgXG4gICAgICAgIFN0YWNrIGlzIHVuYWJsZSB0byBjb25uZWN0IHRvIHRoZSBzZXJ2ZXIuIFBsZWFzZSBjaGVjayB5b3VyIGludGVybmV0IGNvbm5lY3Rpb24gYW5kIHRyeSBhZ2Fpbi5cbiAgICAgICAgXG4gICAgICAgIElmIHRoZSBwcm9ibGVtIHBlcnNpc3RzLCBwbGVhc2UgY29udGFjdCBTdGFjayBzdXBwb3J0IGFuZCBwcm92aWRlIGEgc2NyZWVuc2hvdCBvZiB5b3VyIGVudGlyZSBicm93c2VyIGNvbnNvbGUuXG5cbiAgICAgICAgJHtyZXRyaWVkUmVzdWx0LmVycm9yfVxuICAgICAgICBcbiAgICAgICAgJHtKU09OLnN0cmluZ2lmeShhd2FpdCB0aGlzLnJ1bk5ldHdvcmtEaWFnbm9zdGljcyhzZXNzaW9uLCByZXF1ZXN0VHlwZSksIG51bGwsIDIpfVxuICAgICAgYCwgeyBjYXVzZTogcmV0cmllZFJlc3VsdC5lcnJvciB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0cmllZFJlc3VsdC5kYXRhO1xuICAgIH1cbiAgICBhc3luYyBfbmV0d29ya1JldHJ5RXhjZXB0aW9uKGNiLCBzZXNzaW9uLCByZXF1ZXN0VHlwZSkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fbmV0d29ya1JldHJ5KGFzeW5jICgpID0+IGF3YWl0IFJlc3VsdC5mcm9tVGhyb3dpbmdBc3luYyhjYiksIHNlc3Npb24sIHJlcXVlc3RUeXBlKTtcbiAgICB9XG4gICAgYXN5bmMgZmV0Y2hOZXdBY2Nlc3NUb2tlbihyZWZyZXNoVG9rZW4pIHtcbiAgICAgICAgaWYgKCEoJ3B1Ymxpc2hhYmxlQ2xpZW50S2V5JyBpbiB0aGlzLm9wdGlvbnMpKSB7XG4gICAgICAgICAgICAvLyBUT0RPIHN1cHBvcnQgaXRcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFkbWluIHNlc3Npb24gdG9rZW4gaXMgY3VycmVudGx5IG5vdCBzdXBwb3J0ZWQgZm9yIGZldGNoaW5nIG5ldyBhY2Nlc3MgdG9rZW4uIERpZCB5b3UgdHJ5IHRvIGxvZyBpbiBvbiBhIFN0YWNrQXBwIGluaXRpYXRlZCB3aXRoIHRoZSBhZG1pbiBzZXNzaW9uP1wiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhcyA9IHtcbiAgICAgICAgICAgIGlzc3VlcjogdGhpcy5vcHRpb25zLmJhc2VVcmwsXG4gICAgICAgICAgICBhbGdvcml0aG06ICdvYXV0aDInLFxuICAgICAgICAgICAgdG9rZW5fZW5kcG9pbnQ6IHRoaXMuZ2V0QXBpVXJsKCkgKyAnL2F1dGgvb2F1dGgvdG9rZW4nLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBjbGllbnQgPSB7XG4gICAgICAgICAgICBjbGllbnRfaWQ6IHRoaXMucHJvamVjdElkLFxuICAgICAgICAgICAgY2xpZW50X3NlY3JldDogdGhpcy5vcHRpb25zLnB1Ymxpc2hhYmxlQ2xpZW50S2V5LFxuICAgICAgICAgICAgdG9rZW5fZW5kcG9pbnRfYXV0aF9tZXRob2Q6ICdjbGllbnRfc2VjcmV0X3Bvc3QnLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByYXdSZXNwb25zZSA9IGF3YWl0IHRoaXMuX25ldHdvcmtSZXRyeUV4Y2VwdGlvbihhc3luYyAoKSA9PiBhd2FpdCBvYXV0aC5yZWZyZXNoVG9rZW5HcmFudFJlcXVlc3QoYXMsIGNsaWVudCwgcmVmcmVzaFRva2VuLnRva2VuKSk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5fcHJvY2Vzc1Jlc3BvbnNlKHJhd1Jlc3BvbnNlKTtcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IHJlc3BvbnNlLmVycm9yO1xuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgS25vd25FcnJvcnMuUmVmcmVzaFRva2VuRXJyb3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcmVzcG9uc2UuZGF0YS5vaykge1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IGF3YWl0IHJlc3BvbnNlLmRhdGEudGV4dCgpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gc2VuZCByZWZyZXNoIHRva2VuIHJlcXVlc3Q6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke2JvZHl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb2F1dGgucHJvY2Vzc1JlZnJlc2hUb2tlblJlc3BvbnNlKGFzLCBjbGllbnQsIHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICBpZiAob2F1dGguaXNPQXV0aDJFcnJvcihyZXN1bHQpKSB7XG4gICAgICAgICAgICAvLyBUT0RPIEhhbmRsZSBPQXV0aCAyLjAgcmVzcG9uc2UgYm9keSBlcnJvclxuICAgICAgICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJPQXV0aCBlcnJvclwiLCB7IHJlc3VsdCB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJlc3VsdC5hY2Nlc3NfdG9rZW4pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiQWNjZXNzIHRva2VuIG5vdCBmb3VuZCBpbiB0b2tlbiBlbmRwb2ludCByZXNwb25zZSwgdGhpcyBpcyB3ZWlyZCFcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBBY2Nlc3NUb2tlbihyZXN1bHQuYWNjZXNzX3Rva2VuKTtcbiAgICB9XG4gICAgYXN5bmMgc2VuZENsaWVudFJlcXVlc3QocGF0aCwgcmVxdWVzdE9wdGlvbnMsIHNlc3Npb24sIHJlcXVlc3RUeXBlID0gXCJjbGllbnRcIikge1xuICAgICAgICBzZXNzaW9uID8/PSB0aGlzLmNyZWF0ZVNlc3Npb24oe1xuICAgICAgICAgICAgcmVmcmVzaFRva2VuOiBudWxsLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX25ldHdvcmtSZXRyeSgoKSA9PiB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0SW5uZXIocGF0aCwgcmVxdWVzdE9wdGlvbnMsIHNlc3Npb24sIHJlcXVlc3RUeXBlKSwgc2Vzc2lvbiwgcmVxdWVzdFR5cGUpO1xuICAgIH1cbiAgICBjcmVhdGVTZXNzaW9uKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IG5ldyBJbnRlcm5hbFNlc3Npb24oe1xuICAgICAgICAgICAgcmVmcmVzaEFjY2Vzc1Rva2VuQ2FsbGJhY2s6IGFzeW5jIChyZWZyZXNoVG9rZW4pID0+IGF3YWl0IHRoaXMuZmV0Y2hOZXdBY2Nlc3NUb2tlbihyZWZyZXNoVG9rZW4pLFxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBzZXNzaW9uO1xuICAgIH1cbiAgICBhc3luYyBzZW5kQ2xpZW50UmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihwYXRoLCByZXF1ZXN0T3B0aW9ucywgdG9rZW5TdG9yZU9yTnVsbCwgZXJyb3JzVG9DYXRjaCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIFJlc3VsdC5vayhhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KHBhdGgsIHJlcXVlc3RPcHRpb25zLCB0b2tlblN0b3JlT3JOdWxsKSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZXJyb3JUeXBlIG9mIGVycm9yc1RvQ2F0Y2gpIHtcbiAgICAgICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIGVycm9yVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmVzdWx0LmVycm9yKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgc2VuZENsaWVudFJlcXVlc3RJbm5lcihwYXRoLCBvcHRpb25zLCBzZXNzaW9uLCByZXF1ZXN0VHlwZSkge1xuICAgICAgICAvKipcbiAgICAgICAgICogYHRva2VuT2JqID09PSBudWxsYCBtZWFucyB0aGUgc2Vzc2lvbiBpcyBpbnZhbGlkL25vdCBsb2dnZWQgaW5cbiAgICAgICAgICovXG4gICAgICAgIGxldCB0b2tlbk9iaiA9IGF3YWl0IHNlc3Npb24uZ2V0UG90ZW50aWFsbHlFeHBpcmVkVG9rZW5zKCk7XG4gICAgICAgIGxldCBhZG1pblNlc3Npb24gPSBcInByb2plY3RPd25lclNlc3Npb25cIiBpbiB0aGlzLm9wdGlvbnMgPyB0aGlzLm9wdGlvbnMucHJvamVjdE93bmVyU2Vzc2lvbiA6IG51bGw7XG4gICAgICAgIGxldCBhZG1pblRva2VuT2JqID0gYWRtaW5TZXNzaW9uID8gYXdhaXQgYWRtaW5TZXNzaW9uLmdldFBvdGVudGlhbGx5RXhwaXJlZFRva2VucygpIDogbnVsbDtcbiAgICAgICAgLy8gYWxsIHJlcXVlc3RzIHNob3VsZCBiZSBkeW5hbWljIHRvIHByZXZlbnQgTmV4dC5qcyBjYWNoaW5nXG4gICAgICAgIGNvb2tpZXM/LigpO1xuICAgICAgICBjb25zdCB1cmwgPSB0aGlzLmdldEFwaVVybCgpICsgcGF0aDtcbiAgICAgICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUaGlzIGZldGNoIG1hecKgYmUgY3Jvc3Mtb3JpZ2luLCBpbiB3aGljaCBjYXNlIHdlIGRvbid0IHdhbnQgdG8gc2VuZCBjb29raWVzIG9mIHRoZVxuICAgICAgICAgICAgICogb3JpZ2luYWwgb3JpZ2luICh0aGlzIGlzIHRoZSBkZWZhdWx0IGJlaGF2aW9yIG9mIGBjcmVkZW50aWFsc2ApLlxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIFRvIGhlbHAgZGVidWdnaW5nLCBhbHNvIG9taXQgY29va2llcyBvbiBzYW1lLW9yaWdpbiwgc28gd2UgZG9uJ3QgYWNjaWRlbnRhbGx5XG4gICAgICAgICAgICAgKiBpbXBsZW1lbnQgcmVsaWFuY2Ugb24gY29va2llcyBhbnl3aGVyZS5cbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBIb3dldmVyLCBDbG91ZGZsYXJlIFdvcmtlcnMgZG9uJ3QgYWN0dWFsbHkgc3VwcG9ydCBgY3JlZGVudGlhbHNgLCBzbyB3ZSBvbmx5IHNldCBpdFxuICAgICAgICAgICAgICogaWYgQ2xvdWRmbGFyZS1leGNsdXNpdmUgZ2xvYmFscyBhcmUgbm90IGRldGVjdGVkLiBodHRwczovL2dpdGh1Yi5jb20vY2xvdWRmbGFyZS93b3JrZXJzLXNkay9pc3N1ZXMvMjUxNFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICAuLi4oXCJXZWJTb2NrZXRQYWlyXCIgaW4gZ2xvYmFsVmFyID8ge30gOiB7XG4gICAgICAgICAgICAgICAgY3JlZGVudGlhbHM6IFwib21pdFwiLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiWC1TdGFjay1PdmVycmlkZS1FcnJvci1TdGF0dXNcIjogXCJ0cnVlXCIsXG4gICAgICAgICAgICAgICAgXCJYLVN0YWNrLVByb2plY3QtSWRcIjogdGhpcy5wcm9qZWN0SWQsXG4gICAgICAgICAgICAgICAgXCJYLVN0YWNrLUFjY2Vzcy1UeXBlXCI6IHJlcXVlc3RUeXBlLFxuICAgICAgICAgICAgICAgIFwiWC1TdGFjay1DbGllbnQtVmVyc2lvblwiOiB0aGlzLm9wdGlvbnMuY2xpZW50VmVyc2lvbixcbiAgICAgICAgICAgICAgICAuLi4odG9rZW5PYmogPyB7XG4gICAgICAgICAgICAgICAgICAgIFwiWC1TdGFjay1BY2Nlc3MtVG9rZW5cIjogdG9rZW5PYmouYWNjZXNzVG9rZW4udG9rZW4sXG4gICAgICAgICAgICAgICAgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICAuLi4odG9rZW5PYmo/LnJlZnJlc2hUb2tlbiA/IHtcbiAgICAgICAgICAgICAgICAgICAgXCJYLVN0YWNrLVJlZnJlc2gtVG9rZW5cIjogdG9rZW5PYmoucmVmcmVzaFRva2VuLnRva2VuLFxuICAgICAgICAgICAgICAgIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgLi4uKCdwdWJsaXNoYWJsZUNsaWVudEtleScgaW4gdGhpcy5vcHRpb25zID8ge1xuICAgICAgICAgICAgICAgICAgICBcIlgtU3RhY2stUHVibGlzaGFibGUtQ2xpZW50LUtleVwiOiB0aGlzLm9wdGlvbnMucHVibGlzaGFibGVDbGllbnRLZXksXG4gICAgICAgICAgICAgICAgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICAuLi4oYWRtaW5Ub2tlbk9iaiA/IHtcbiAgICAgICAgICAgICAgICAgICAgXCJYLVN0YWNrLUFkbWluLUFjY2Vzcy1Ub2tlblwiOiBhZG1pblRva2VuT2JqLmFjY2Vzc1Rva2VuLnRva2VuLFxuICAgICAgICAgICAgICAgIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogTmV4dC5qcyB1bnRpbCB2MTUgd291bGQgY2FjaGUgZmV0Y2ggcmVxdWVzdHMgYnkgZGVmYXVsdCwgYW5kIGZvcmNlZnVsbHkgZGlzYWJsaW5nIGl0IHdhcyBuZWFybHkgaW1wb3NzaWJsZS5cbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIFRoaXMgaGVhZGVyIGlzIHVzZWQgdG8gY2hhbmdlIHRoZSBjYWNoZSBrZXkgYW5kIGhlbmNlIGFsd2F5cyBkaXNhYmxlIGl0LCBiZWNhdXNlIHdlIGRvIG91ciBvd24gY2FjaGluZy5cbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIFdoZW4gd2UgZHJvcCBzdXBwb3J0IGZvciBOZXh0LmpzIDwxNSwgd2UgbWF5IGJlIGFibGUgdG8gcmVtb3ZlIHRoaXMgaGVhZGVyLCBidXQgcGxlYXNlIG1ha2Ugc3VyZSB0aGF0IHRoaXMgaXNcbiAgICAgICAgICAgICAgICAgKiB0aGUgY2FzZSAoSSBoYXZlbid0IGFjdHVhbGx5IHRlc3RlZC4pXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgXCJYLVN0YWNrLVJhbmRvbS1Ob25jZVwiOiBnZW5lcmF0ZVNlY3VyZVJhbmRvbVN0cmluZygpLFxuICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMuaGVhZGVycyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENsb3VkZmxhcmUgV29ya2VycyBkb2VzIG5vdCBzdXBwb3J0IGNhY2hlLCBzbyBkb24ndCBwYXNzIGl0IHRoZXJlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIC4uLihcIldlYlNvY2tldFBhaXJcIiBpbiBnbG9iYWxWYXIgPyB7fSA6IHtcbiAgICAgICAgICAgICAgICBjYWNoZTogXCJuby1zdG9yZVwiLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH07XG4gICAgICAgIGxldCByYXdSZXM7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByYXdSZXMgPSBhd2FpdCBmZXRjaCh1cmwsIHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgVHlwZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgLy8gTmV0d29yayBlcnJvciwgcmV0cnlcbiAgICAgICAgICAgICAgICByZXR1cm4gUmVzdWx0LmVycm9yKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9jZXNzZWRSZXMgPSBhd2FpdCB0aGlzLl9wcm9jZXNzUmVzcG9uc2UocmF3UmVzKTtcbiAgICAgICAgaWYgKHByb2Nlc3NlZFJlcy5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgICAgICAgLy8gSWYgdGhlIGFjY2VzcyB0b2tlbiBpcyBpbnZhbGlkLCByZXNldCBpdCBhbmQgcmV0cnlcbiAgICAgICAgICAgIGlmIChwcm9jZXNzZWRSZXMuZXJyb3IgaW5zdGFuY2VvZiBLbm93bkVycm9ycy5JbnZhbGlkQWNjZXNzVG9rZW4pIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRva2VuT2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiUmVjZWl2ZWQgaW52YWxpZCBhY2Nlc3MgdG9rZW4sIGJ1dCBzZXNzaW9uIGlzIG5vdCBsb2dnZWQgaW5cIiwgeyB0b2tlbk9iaiwgcHJvY2Vzc2VkUmVzIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZXNzaW9uLm1hcmtBY2Nlc3NUb2tlbkV4cGlyZWQodG9rZW5PYmouYWNjZXNzVG9rZW4pO1xuICAgICAgICAgICAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IocHJvY2Vzc2VkUmVzLmVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFNhbWUgZm9yIHRoZSBhZG1pbiBhY2Nlc3MgdG9rZW5cbiAgICAgICAgICAgIC8vIFRPRE8gSEFDSzogU29tZSBvZiB0aGUgYmFja2VuZCBoYXNuJ3QgYmVlbiBwb3J0ZWQgdG8gdXNlIHRoZSBuZXcgZXJyb3IgY29kZXMsIHNvIGlmIHdlIGhhdmUgcHJvamVjdCBvd25lciB0b2tlbnMgd2UgbmVlZCB0byBjaGVjayBmb3IgQXBpS2V5Tm90Rm91bmQgdG9vLiBPbmNlIHRoZSBtaWdyYXRpb24gdG8gc21hcnRSb3V0ZUhhbmRsZXJzIGlzIGNvbXBsZXRlLCB3ZSBjYW4gY2hlY2sgZm9yIEludmFsaWRBZG1pbkFjY2Vzc1Rva2VuIG9ubHkuXG4gICAgICAgICAgICBpZiAoYWRtaW5TZXNzaW9uICYmIChwcm9jZXNzZWRSZXMuZXJyb3IgaW5zdGFuY2VvZiBLbm93bkVycm9ycy5JbnZhbGlkQWRtaW5BY2Nlc3NUb2tlbiB8fCBwcm9jZXNzZWRSZXMuZXJyb3IgaW5zdGFuY2VvZiBLbm93bkVycm9ycy5BcGlLZXlOb3RGb3VuZCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWFkbWluVG9rZW5PYmopIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJSZWNlaXZlZCBpbnZhbGlkIGFkbWluIGFjY2VzcyB0b2tlbiwgYnV0IGFkbWluIHNlc3Npb24gaXMgbm90IGxvZ2dlZCBpblwiLCB7IGFkbWluVG9rZW5PYmosIHByb2Nlc3NlZFJlcyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYWRtaW5TZXNzaW9uLm1hcmtBY2Nlc3NUb2tlbkV4cGlyZWQoYWRtaW5Ub2tlbk9iai5hY2Nlc3NUb2tlbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcihwcm9jZXNzZWRSZXMuZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gS25vd24gZXJyb3JzIGFyZSBjbGllbnQgc2lkZSBlcnJvcnMsIHNvIGV4Y2VwdCBmb3IgdGhlIG9uZXMgYWJvdmUgdGhleSBzaG91bGQgbm90IGJlIHJldHJpZWRcbiAgICAgICAgICAgIC8vIEhlbmNlLCB0aHJvdyBpbnN0ZWFkIG9mIHJldHVybmluZyBhbiBlcnJvclxuICAgICAgICAgICAgdGhyb3cgcHJvY2Vzc2VkUmVzLmVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlcyA9IE9iamVjdC5hc3NpZ24ocHJvY2Vzc2VkUmVzLmRhdGEsIHtcbiAgICAgICAgICAgIHVzZWRUb2tlbnM6IHRva2VuT2JqLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgICAgcmV0dXJuIFJlc3VsdC5vayhyZXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBhd2FpdCByZXMudGV4dCgpO1xuICAgICAgICAgICAgLy8gRG8gbm90IHJldHJ5LCB0aHJvdyBlcnJvciBpbnN0ZWFkIG9mIHJldHVybmluZyBvbmVcbiAgICAgICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKGBGYWlsZWQgdG8gc2VuZCByZXF1ZXN0IHRvICR7dXJsfTogJHtyZXMuc3RhdHVzfSAke2Vycm9yfWAsIHsgcmVxdWVzdDogcGFyYW1zLCByZXMgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgX3Byb2Nlc3NSZXNwb25zZShyYXdSZXMpIHtcbiAgICAgICAgbGV0IHJlcyA9IHJhd1JlcztcbiAgICAgICAgaWYgKHJhd1Jlcy5oZWFkZXJzLmhhcyhcIngtc3RhY2stYWN0dWFsLXN0YXR1c1wiKSkge1xuICAgICAgICAgICAgY29uc3QgYWN0dWFsU3RhdHVzID0gTnVtYmVyKHJhd1Jlcy5oZWFkZXJzLmdldChcIngtc3RhY2stYWN0dWFsLXN0YXR1c1wiKSk7XG4gICAgICAgICAgICByZXMgPSBuZXcgUmVzcG9uc2UocmF3UmVzLmJvZHksIHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IGFjdHVhbFN0YXR1cyxcbiAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiByYXdSZXMuc3RhdHVzVGV4dCxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiByYXdSZXMuaGVhZGVycyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIEhhbmRsZSBrbm93biBlcnJvcnNcbiAgICAgICAgaWYgKHJlcy5oZWFkZXJzLmhhcyhcIngtc3RhY2sta25vd24tZXJyb3JcIikpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9ySnNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgICAgICBpZiAocmVzLmhlYWRlcnMuZ2V0KFwieC1zdGFjay1rbm93bi1lcnJvclwiKSAhPT0gZXJyb3JKc29uLmNvZGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIk1pc21hdGNoIGJldHdlZW4geC1zdGFjay1rbm93bi1lcnJvciBoZWFkZXIgYW5kIGVycm9yIGNvZGUgaW4gYm9keTsgdGhlIHNlcnZlcidzIHJlc3BvbnNlIGlzIGludmFsaWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IEtub3duRXJyb3IuZnJvbUpzb24oZXJyb3JKc29uKTtcbiAgICAgICAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBSZXN1bHQub2socmVzKTtcbiAgICB9XG4gICAgYXN5bmMgY2hlY2tGZWF0dXJlU3VwcG9ydChvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXCIvY2hlY2stZmVhdHVyZS1zdXBwb3J0XCIsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkob3B0aW9ucyksXG4gICAgICAgIH0sIG51bGwpO1xuICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihhd2FpdCByZXMudGV4dCgpKTtcbiAgICB9XG4gICAgYXN5bmMgc2VuZEZvcmdvdFBhc3N3b3JkRW1haWwoZW1haWwsIGNhbGxiYWNrVXJsKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3RBbmRDYXRjaEtub3duRXJyb3IoXCIvYXV0aC9wYXNzd29yZC9zZW5kLXJlc2V0LWNvZGVcIiwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBlbWFpbCxcbiAgICAgICAgICAgICAgICBjYWxsYmFja191cmw6IGNhbGxiYWNrVXJsLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0sIG51bGwsIFtLbm93bkVycm9ycy5Vc2VyTm90Rm91bmRdKTtcbiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5lcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBzZW5kVmVyaWZpY2F0aW9uRW1haWwoZW1haWwsIGNhbGxiYWNrVXJsLCBzZXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3RBbmRDYXRjaEtub3duRXJyb3IoXCIvY29udGFjdC1jaGFubmVscy9zZW5kLXZlcmlmaWNhdGlvbi1jb2RlXCIsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgZW1haWwsXG4gICAgICAgICAgICAgICAgY2FsbGJhY2tfdXJsOiBjYWxsYmFja1VybCxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9LCBzZXNzaW9uLCBbS25vd25FcnJvcnMuRW1haWxBbHJlYWR5VmVyaWZpZWRdKTtcbiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5lcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBzZW5kTWFnaWNMaW5rRW1haWwoZW1haWwsIGNhbGxiYWNrVXJsKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3RBbmRDYXRjaEtub3duRXJyb3IoXCIvYXV0aC9vdHAvc2VuZC1zaWduLWluLWNvZGVcIiwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBlbWFpbCxcbiAgICAgICAgICAgICAgICBjYWxsYmFja191cmw6IGNhbGxiYWNrVXJsLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0sIG51bGwsIFtLbm93bkVycm9ycy5SZWRpcmVjdFVybE5vdFdoaXRlbGlzdGVkXSk7XG4gICAgICAgIGlmIChyZXMuc3RhdHVzID09PSBcImVycm9yXCIpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgcmVzZXRQYXNzd29yZChvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3RBbmRDYXRjaEtub3duRXJyb3IoXCJvbmx5VmVyaWZ5Q29kZVwiIGluIG9wdGlvbnMgPyBcIi9hdXRoL3Bhc3N3b3JkL3Jlc2V0L2NoZWNrLWNvZGVcIiA6IFwiL2F1dGgvcGFzc3dvcmQvcmVzZXRcIiwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBjb2RlOiBvcHRpb25zLmNvZGUsXG4gICAgICAgICAgICAgICAgLi4uKFwicGFzc3dvcmRcIiBpbiBvcHRpb25zID8geyBwYXNzd29yZDogb3B0aW9ucy5wYXNzd29yZCB9IDoge30pLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0sIG51bGwsIFtLbm93bkVycm9ycy5WZXJpZmljYXRpb25Db2RlRXJyb3JdKTtcbiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5lcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyB1cGRhdGVQYXNzd29yZChvcHRpb25zLCBzZXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3RBbmRDYXRjaEtub3duRXJyb3IoXCIvYXV0aC9wYXNzd29yZC91cGRhdGVcIiwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBvbGRfcGFzc3dvcmQ6IG9wdGlvbnMub2xkUGFzc3dvcmQsXG4gICAgICAgICAgICAgICAgbmV3X3Bhc3N3b3JkOiBvcHRpb25zLm5ld1Bhc3N3b3JkLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0sIHNlc3Npb24sIFtLbm93bkVycm9ycy5QYXNzd29yZENvbmZpcm1hdGlvbk1pc21hdGNoLCBLbm93bkVycm9ycy5QYXNzd29yZFJlcXVpcmVtZW50c05vdE1ldF0pO1xuICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmVycm9yO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHZlcmlmeVBhc3N3b3JkUmVzZXRDb2RlKGNvZGUpIHtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5yZXNldFBhc3N3b3JkKHsgY29kZSwgb25seVZlcmlmeUNvZGU6IHRydWUgfSk7XG4gICAgICAgIGlmIChyZXMgJiYgIShyZXMgaW5zdGFuY2VvZiBLbm93bkVycm9ycy5WZXJpZmljYXRpb25Db2RlRXJyb3IpKSB7XG4gICAgICAgICAgICB0aHJvdyByZXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG4gICAgYXN5bmMgdmVyaWZ5RW1haWwoY29kZSkge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0QW5kQ2F0Y2hLbm93bkVycm9yKFwiL2NvbnRhY3QtY2hhbm5lbHMvdmVyaWZ5XCIsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgY29kZSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9LCBudWxsLCBbS25vd25FcnJvcnMuVmVyaWZpY2F0aW9uQ29kZUVycm9yXSk7XG4gICAgICAgIGlmIChyZXMuc3RhdHVzID09PSBcImVycm9yXCIpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgc2VuZFRlYW1JbnZpdGF0aW9uKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihcIi90ZWFtLWludml0YXRpb25zL3NlbmQtY29kZVwiLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIGVtYWlsOiBvcHRpb25zLmVtYWlsLFxuICAgICAgICAgICAgICAgIHRlYW1faWQ6IG9wdGlvbnMudGVhbUlkLFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrX3VybDogb3B0aW9ucy5jYWxsYmFja1VybCxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9LCBvcHRpb25zLnNlc3Npb24sIFtLbm93bkVycm9ycy5UZWFtUGVybWlzc2lvblJlcXVpcmVkXSk7XG4gICAgICAgIGlmIChyZXMuc3RhdHVzID09PSBcImVycm9yXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IocmVzLmVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBSZXN1bHQub2sodW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBhY2NlcHRUZWFtSW52aXRhdGlvbihvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3RBbmRDYXRjaEtub3duRXJyb3Iob3B0aW9ucy50eXBlID09PSAnY2hlY2snID9cbiAgICAgICAgICAgIFwiL3RlYW0taW52aXRhdGlvbnMvYWNjZXB0L2NoZWNrLWNvZGVcIiA6XG4gICAgICAgICAgICBvcHRpb25zLnR5cGUgPT09ICdkZXRhaWxzJyA/XG4gICAgICAgICAgICAgICAgXCIvdGVhbS1pbnZpdGF0aW9ucy9hY2NlcHQvZGV0YWlsc1wiIDpcbiAgICAgICAgICAgICAgICBcIi90ZWFtLWludml0YXRpb25zL2FjY2VwdFwiLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIGNvZGU6IG9wdGlvbnMuY29kZSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9LCBvcHRpb25zLnNlc3Npb24sIFtLbm93bkVycm9ycy5WZXJpZmljYXRpb25Db2RlRXJyb3JdKTtcbiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcihyZXMuZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFJlc3VsdC5vayhhd2FpdCByZXMuZGF0YS5qc29uKCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHRvdHBNZmEoYXR0ZW1wdENvZGUsIHRvdHAsIHNlc3Npb24pIHtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdChcIi9hdXRoL21mYS9zaWduLWluXCIsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgY29kZTogYXR0ZW1wdENvZGUsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJ0b3RwXCIsXG4gICAgICAgICAgICAgICAgdG90cDogdG90cCxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9LCBzZXNzaW9uKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiByZXN1bHQuYWNjZXNzX3Rva2VuLFxuICAgICAgICAgICAgcmVmcmVzaFRva2VuOiByZXN1bHQucmVmcmVzaF90b2tlbixcbiAgICAgICAgICAgIG5ld1VzZXI6IHJlc3VsdC5pc19uZXdfdXNlcixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXN5bmMgc2lnbkluV2l0aENyZWRlbnRpYWwoZW1haWwsIHBhc3N3b3JkLCBzZXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3RBbmRDYXRjaEtub3duRXJyb3IoXCIvYXV0aC9wYXNzd29yZC9zaWduLWluXCIsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgZW1haWwsXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSwgc2Vzc2lvbiwgW0tub3duRXJyb3JzLkVtYWlsUGFzc3dvcmRNaXNtYXRjaF0pO1xuICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlcy5kYXRhLmpzb24oKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiByZXN1bHQuYWNjZXNzX3Rva2VuLFxuICAgICAgICAgICAgcmVmcmVzaFRva2VuOiByZXN1bHQucmVmcmVzaF90b2tlbixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXN5bmMgc2lnblVwV2l0aENyZWRlbnRpYWwoZW1haWwsIHBhc3N3b3JkLCBlbWFpbFZlcmlmaWNhdGlvblJlZGlyZWN0VXJsLCBzZXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3RBbmRDYXRjaEtub3duRXJyb3IoXCIvYXV0aC9wYXNzd29yZC9zaWduLXVwXCIsIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgZW1haWwsXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQsXG4gICAgICAgICAgICAgICAgdmVyaWZpY2F0aW9uX2NhbGxiYWNrX3VybDogZW1haWxWZXJpZmljYXRpb25SZWRpcmVjdFVybCxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9LCBzZXNzaW9uLCBbS25vd25FcnJvcnMuVXNlckVtYWlsQWxyZWFkeUV4aXN0cywgS25vd25FcnJvcnMuUGFzc3dvcmRSZXF1aXJlbWVudHNOb3RNZXRdKTtcbiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5lcnJvcjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXMuZGF0YS5qc29uKCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhY2Nlc3NUb2tlbjogcmVzdWx0LmFjY2Vzc190b2tlbixcbiAgICAgICAgICAgIHJlZnJlc2hUb2tlbjogcmVzdWx0LnJlZnJlc2hfdG9rZW4sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jIHNpZ25JbldpdGhNYWdpY0xpbmsoY29kZSkge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0QW5kQ2F0Y2hLbm93bkVycm9yKFwiL2F1dGgvb3RwL3NpZ24taW5cIiwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBjb2RlLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0sIG51bGwsIFtLbm93bkVycm9ycy5WZXJpZmljYXRpb25Db2RlRXJyb3JdKTtcbiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5lcnJvcjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXMuZGF0YS5qc29uKCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhY2Nlc3NUb2tlbjogcmVzdWx0LmFjY2Vzc190b2tlbixcbiAgICAgICAgICAgIHJlZnJlc2hUb2tlbjogcmVzdWx0LnJlZnJlc2hfdG9rZW4sXG4gICAgICAgICAgICBuZXdVc2VyOiByZXN1bHQuaXNfbmV3X3VzZXIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jIGdldE9BdXRoVXJsKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgdXBkYXRlZFJlZGlyZWN0VXJsID0gbmV3IFVSTChvcHRpb25zLnJlZGlyZWN0VXJsKTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgW1wiY29kZVwiLCBcInN0YXRlXCJdKSB7XG4gICAgICAgICAgICBpZiAodXBkYXRlZFJlZGlyZWN0VXJsLnNlYXJjaFBhcmFtcy5oYXMoa2V5KSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIlJlZGlyZWN0IFVSTCBhbHJlYWR5IGNvbnRhaW5zIFwiICsga2V5ICsgXCIgcGFyYW1ldGVyLCByZW1vdmluZyBpdCBhcyBpdCB3aWxsIGJlIG92ZXJ3cml0dGVuIGJ5IHRoZSBPQXV0aCBjYWxsYmFja1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVwZGF0ZWRSZWRpcmVjdFVybC5zZWFyY2hQYXJhbXMuZGVsZXRlKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEoJ3B1Ymxpc2hhYmxlQ2xpZW50S2V5JyBpbiB0aGlzLm9wdGlvbnMpKSB7XG4gICAgICAgICAgICAvLyBUT0RPIGZpeFxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQWRtaW4gc2Vzc2lvbiB0b2tlbiBpcyBjdXJyZW50bHkgbm90IHN1cHBvcnRlZCBmb3IgT0F1dGhcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdXJsID0gbmV3IFVSTCh0aGlzLmdldEFwaVVybCgpICsgXCIvYXV0aC9vYXV0aC9hdXRob3JpemUvXCIgKyBvcHRpb25zLnByb3ZpZGVyLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcImNsaWVudF9pZFwiLCB0aGlzLnByb2plY3RJZCk7XG4gICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwiY2xpZW50X3NlY3JldFwiLCB0aGlzLm9wdGlvbnMucHVibGlzaGFibGVDbGllbnRLZXkpO1xuICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcInJlZGlyZWN0X3VyaVwiLCB1cGRhdGVkUmVkaXJlY3RVcmwudG9TdHJpbmcoKSk7XG4gICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwic2NvcGVcIiwgXCJsZWdhY3lcIik7XG4gICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwic3RhdGVcIiwgb3B0aW9ucy5zdGF0ZSk7XG4gICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwiZ3JhbnRfdHlwZVwiLCBcImF1dGhvcml6YXRpb25fY29kZVwiKTtcbiAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJjb2RlX2NoYWxsZW5nZVwiLCBvcHRpb25zLmNvZGVDaGFsbGVuZ2UpO1xuICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcImNvZGVfY2hhbGxlbmdlX21ldGhvZFwiLCBcIlMyNTZcIik7XG4gICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwicmVzcG9uc2VfdHlwZVwiLCBcImNvZGVcIik7XG4gICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwidHlwZVwiLCBvcHRpb25zLnR5cGUpO1xuICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcImVycm9yX3JlZGlyZWN0X3VybFwiLCBvcHRpb25zLmVycm9yUmVkaXJlY3RVcmwpO1xuICAgICAgICBpZiAob3B0aW9ucy5hZnRlckNhbGxiYWNrUmVkaXJlY3RVcmwpIHtcbiAgICAgICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwiYWZ0ZXJfY2FsbGJhY2tfcmVkaXJlY3RfdXJsXCIsIG9wdGlvbnMuYWZ0ZXJDYWxsYmFja1JlZGlyZWN0VXJsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy50eXBlID09PSBcImxpbmtcIikge1xuICAgICAgICAgICAgY29uc3QgdG9rZW5zID0gYXdhaXQgb3B0aW9ucy5zZXNzaW9uLmdldFBvdGVudGlhbGx5RXhwaXJlZFRva2VucygpO1xuICAgICAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJ0b2tlblwiLCB0b2tlbnM/LmFjY2Vzc1Rva2VuLnRva2VuIHx8IFwiXCIpO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMucHJvdmlkZXJTY29wZSkge1xuICAgICAgICAgICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwicHJvdmlkZXJfc2NvcGVcIiwgb3B0aW9ucy5wcm92aWRlclNjb3BlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXJsLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIGFzeW5jIGNhbGxPQXV0aENhbGxiYWNrKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCEoJ3B1Ymxpc2hhYmxlQ2xpZW50S2V5JyBpbiB0aGlzLm9wdGlvbnMpKSB7XG4gICAgICAgICAgICAvLyBUT0RPIGZpeFxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQWRtaW4gc2Vzc2lvbiB0b2tlbiBpcyBjdXJyZW50bHkgbm90IHN1cHBvcnRlZCBmb3IgT0F1dGhcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXMgPSB7XG4gICAgICAgICAgICBpc3N1ZXI6IHRoaXMub3B0aW9ucy5iYXNlVXJsLFxuICAgICAgICAgICAgYWxnb3JpdGhtOiAnb2F1dGgyJyxcbiAgICAgICAgICAgIHRva2VuX2VuZHBvaW50OiB0aGlzLmdldEFwaVVybCgpICsgJy9hdXRoL29hdXRoL3Rva2VuJyxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgY2xpZW50ID0ge1xuICAgICAgICAgICAgY2xpZW50X2lkOiB0aGlzLnByb2plY3RJZCxcbiAgICAgICAgICAgIGNsaWVudF9zZWNyZXQ6IHRoaXMub3B0aW9ucy5wdWJsaXNoYWJsZUNsaWVudEtleSxcbiAgICAgICAgICAgIHRva2VuX2VuZHBvaW50X2F1dGhfbWV0aG9kOiAnY2xpZW50X3NlY3JldF9wb3N0JyxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcGFyYW1zID0gYXdhaXQgdGhpcy5fbmV0d29ya1JldHJ5RXhjZXB0aW9uKGFzeW5jICgpID0+IG9hdXRoLnZhbGlkYXRlQXV0aFJlc3BvbnNlKGFzLCBjbGllbnQsIG9wdGlvbnMub2F1dGhQYXJhbXMsIG9wdGlvbnMuc3RhdGUpKTtcbiAgICAgICAgaWYgKG9hdXRoLmlzT0F1dGgyRXJyb3IocGFyYW1zKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJFcnJvciB2YWxpZGF0aW5nIG91dGVyIE9BdXRoIHJlc3BvbnNlXCIsIHsgcGFyYW1zIH0pOyAvLyBIYW5kbGUgT0F1dGggMi4wIHJlZGlyZWN0IGVycm9yXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBvYXV0aC5hdXRob3JpemF0aW9uQ29kZUdyYW50UmVxdWVzdChhcywgY2xpZW50LCBwYXJhbXMsIG9wdGlvbnMucmVkaXJlY3RVcmksIG9wdGlvbnMuY29kZVZlcmlmaWVyKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb2F1dGgucHJvY2Vzc0F1dGhvcml6YXRpb25Db2RlT0F1dGgyUmVzcG9uc2UoYXMsIGNsaWVudCwgcmVzcG9uc2UpO1xuICAgICAgICBpZiAob2F1dGguaXNPQXV0aDJFcnJvcihyZXN1bHQpKSB7XG4gICAgICAgICAgICBpZiAoXCJjb2RlXCIgaW4gcmVzdWx0ICYmIHJlc3VsdC5jb2RlID09PSBcIk1VTFRJX0ZBQ1RPUl9BVVRIRU5USUNBVElPTl9SRVFVSVJFRFwiKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEtub3duRXJyb3JzLk11bHRpRmFjdG9yQXV0aGVudGljYXRpb25SZXF1aXJlZChyZXN1bHQuZGV0YWlscy5hdHRlbXB0X2NvZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVE9ETyBIYW5kbGUgT0F1dGggMi4wIHJlc3BvbnNlIGJvZHkgZXJyb3JcbiAgICAgICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiT3V0ZXIgT0F1dGggZXJyb3IgZHVyaW5nIGF1dGhvcml6YXRpb24gY29kZSByZXNwb25zZVwiLCB7IHJlc3VsdCB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmV3VXNlcjogcmVzdWx0LmlzX25ld191c2VyLFxuICAgICAgICAgICAgYWZ0ZXJDYWxsYmFja1JlZGlyZWN0VXJsOiByZXN1bHQuYWZ0ZXJfY2FsbGJhY2tfcmVkaXJlY3RfdXJsLFxuICAgICAgICAgICAgYWNjZXNzVG9rZW46IHJlc3VsdC5hY2Nlc3NfdG9rZW4sXG4gICAgICAgICAgICByZWZyZXNoVG9rZW46IHJlc3VsdC5yZWZyZXNoX3Rva2VuID8/IHRocm93RXJyKFwiUmVmcmVzaCB0b2tlbiBub3QgZm91bmQgaW4gb3V0ZXIgT0F1dGggcmVzcG9uc2VcIiksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jIHNpZ25PdXQoc2Vzc2lvbikge1xuICAgICAgICBjb25zdCB0b2tlbk9iaiA9IGF3YWl0IHNlc3Npb24uZ2V0UG90ZW50aWFsbHlFeHBpcmVkVG9rZW5zKCk7XG4gICAgICAgIGlmICh0b2tlbk9iaikge1xuICAgICAgICAgICAgY29uc3QgcmVzT3JFcnJvciA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3RBbmRDYXRjaEtub3duRXJyb3IoXCIvYXV0aC9zZXNzaW9ucy9jdXJyZW50XCIsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe30pLFxuICAgICAgICAgICAgfSwgc2Vzc2lvbiwgW0tub3duRXJyb3JzLlJlZnJlc2hUb2tlbkVycm9yXSk7XG4gICAgICAgICAgICBpZiAocmVzT3JFcnJvci5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgICAgICAgICAgIGlmIChyZXNPckVycm9yLmVycm9yIGluc3RhbmNlb2YgS25vd25FcnJvcnMuUmVmcmVzaFRva2VuRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVmcmVzaCB0b2tlbiB3YXMgYWxyZWFkeSBpbnZhbGlkLCBqdXN0IGNvbnRpbnVlIGxpa2Ugbm90aGluZyBoYXBwZW5lZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyBzaG91bGQgbmV2ZXIgaGFwcGVuXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiVW5leHBlY3RlZCBlcnJvclwiLCB7IGVycm9yOiByZXNPckVycm9yLmVycm9yIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIHVzZXIgd2FzIHNpZ25lZCBvdXQgc3VjY2Vzc2Z1bGx5LCBhbGwgZ29vZFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNlc3Npb24ubWFya0ludmFsaWQoKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0Q2xpZW50VXNlckJ5VG9rZW4oc2Vzc2lvbikge1xuICAgICAgICBjb25zdCByZXNwb25zZU9yRXJyb3IgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0QW5kQ2F0Y2hLbm93bkVycm9yKFwiL3VzZXJzL21lXCIsIHt9LCBzZXNzaW9uLCBbS25vd25FcnJvcnMuQ2Fubm90R2V0T3duVXNlcldpdGhvdXRVc2VyXSk7XG4gICAgICAgIGlmIChyZXNwb25zZU9yRXJyb3Iuc3RhdHVzID09PSBcImVycm9yXCIpIHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZU9yRXJyb3IuZXJyb3IgaW5zdGFuY2VvZiBLbm93bkVycm9ycy5DYW5ub3RHZXRPd25Vc2VyV2l0aG91dFVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiVW5leHBlY3RlZCB1bmNhdWdodCBlcnJvclwiLCB7IGNhdXNlOiByZXNwb25zZU9yRXJyb3IuZXJyb3IgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSByZXNwb25zZU9yRXJyb3IuZGF0YTtcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgaWYgKCF1c2VyKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJVc2VyIGVuZHBvaW50IHJldHVybmVkIG51bGw7IHRoaXMgc2hvdWxkIG5ldmVyIGhhcHBlblwiKTtcbiAgICAgICAgcmV0dXJuIHVzZXI7XG4gICAgfVxuICAgIGFzeW5jIGxpc3RUZWFtTWVtYmVyUHJvZmlsZXMob3B0aW9ucywgc2Vzc2lvbikge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXCIvdGVhbS1tZW1iZXItcHJvZmlsZXM/XCIgKyBuZXcgVVJMU2VhcmNoUGFyYW1zKGZpbHRlclVuZGVmaW5lZCh7XG4gICAgICAgICAgICB0ZWFtX2lkOiBvcHRpb25zLnRlYW1JZCxcbiAgICAgICAgICAgIHVzZXJfaWQ6IG9wdGlvbnMudXNlcklkLFxuICAgICAgICB9KSksIHt9LCBzZXNzaW9uKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICByZXR1cm4gcmVzdWx0Lml0ZW1zO1xuICAgIH1cbiAgICBhc3luYyBnZXRUZWFtTWVtYmVyUHJvZmlsZShvcHRpb25zLCBzZXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdChgL3RlYW0tbWVtYmVyLXByb2ZpbGVzLyR7b3B0aW9ucy50ZWFtSWR9LyR7b3B0aW9ucy51c2VySWR9YCwge30sIHNlc3Npb24pO1xuICAgICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH1cbiAgICBhc3luYyBsZWF2ZVRlYW0odGVhbUlkLCBzZXNzaW9uKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoYC90ZWFtLW1lbWJlcnNoaXBzLyR7dGVhbUlkfS9tZWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7fSksXG4gICAgICAgIH0sIHNlc3Npb24pO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVUZWFtTWVtYmVyUHJvZmlsZShvcHRpb25zLCBzZXNzaW9uKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoYC90ZWFtLW1lbWJlci1wcm9maWxlcy8ke29wdGlvbnMudGVhbUlkfS8ke29wdGlvbnMudXNlcklkfWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMucHJvZmlsZSksXG4gICAgICAgIH0sIHNlc3Npb24pO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVUZWFtKG9wdGlvbnMsIHNlc3Npb24pIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdChgL3RlYW1zLyR7b3B0aW9ucy50ZWFtSWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkob3B0aW9ucy5kYXRhKSxcbiAgICAgICAgfSwgc2Vzc2lvbik7XG4gICAgfVxuICAgIGFzeW5jIGxpc3RDdXJyZW50VXNlclRlYW1QZXJtaXNzaW9ucyhvcHRpb25zLCBzZXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdChgL3RlYW0tcGVybWlzc2lvbnM/dGVhbV9pZD0ke29wdGlvbnMudGVhbUlkfSZ1c2VyX2lkPW1lJnJlY3Vyc2l2ZT0ke29wdGlvbnMucmVjdXJzaXZlfWAsIHt9LCBzZXNzaW9uKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICByZXR1cm4gcmVzdWx0Lml0ZW1zO1xuICAgIH1cbiAgICBhc3luYyBsaXN0Q3VycmVudFVzZXJUZWFtcyhzZXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdChcIi90ZWFtcz91c2VyX2lkPW1lXCIsIHt9LCBzZXNzaW9uKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICByZXR1cm4gcmVzdWx0Lml0ZW1zO1xuICAgIH1cbiAgICBhc3luYyBnZXRDbGllbnRQcm9qZWN0KCkge1xuICAgICAgICBjb25zdCByZXNwb25zZU9yRXJyb3IgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0QW5kQ2F0Y2hLbm93bkVycm9yKFwiL3Byb2plY3RzL2N1cnJlbnRcIiwge30sIG51bGwsIFtLbm93bkVycm9ycy5Qcm9qZWN0Tm90Rm91bmRdKTtcbiAgICAgICAgaWYgKHJlc3BvbnNlT3JFcnJvci5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcihyZXNwb25zZU9yRXJyb3IuZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gcmVzcG9uc2VPckVycm9yLmRhdGE7XG4gICAgICAgIGNvbnN0IHByb2plY3QgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIHJldHVybiBSZXN1bHQub2socHJvamVjdCk7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZUNsaWVudFVzZXIodXBkYXRlLCBzZXNzaW9uKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXCIvdXNlcnMvbWVcIiwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodXBkYXRlKSxcbiAgICAgICAgfSwgc2Vzc2lvbik7XG4gICAgfVxuICAgIGFzeW5jIGxpc3RQcm9qZWN0cyhzZXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdChcIi9pbnRlcm5hbC9wcm9qZWN0c1wiLCB7fSwgc2Vzc2lvbik7XG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBsaXN0IHByb2plY3RzOiBcIiArIHJlc3BvbnNlLnN0YXR1cyArIFwiIFwiICsgKGF3YWl0IHJlc3BvbnNlLnRleHQoKSkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIHJldHVybiBqc29uLml0ZW1zO1xuICAgIH1cbiAgICBhc3luYyBjcmVhdGVQcm9qZWN0KHByb2plY3QsIHNlc3Npb24pIHtcbiAgICAgICAgY29uc3QgZmV0Y2hSZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXCIvaW50ZXJuYWwvcHJvamVjdHNcIiwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwcm9qZWN0KSxcbiAgICAgICAgfSwgc2Vzc2lvbik7XG4gICAgICAgIGlmICghZmV0Y2hSZXNwb25zZS5vaykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGNyZWF0ZSBwcm9qZWN0OiBcIiArIGZldGNoUmVzcG9uc2Uuc3RhdHVzICsgXCIgXCIgKyAoYXdhaXQgZmV0Y2hSZXNwb25zZS50ZXh0KCkpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBqc29uID0gYXdhaXQgZmV0Y2hSZXNwb25zZS5qc29uKCk7XG4gICAgICAgIHJldHVybiBqc29uO1xuICAgIH1cbiAgICBhc3luYyBjcmVhdGVQcm92aWRlckFjY2Vzc1Rva2VuKHByb3ZpZGVyLCBzY29wZSwgc2Vzc2lvbikge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoYC9jb25uZWN0ZWQtYWNjb3VudHMvbWUvJHtwcm92aWRlcn0vYWNjZXNzLXRva2VuYCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHNjb3BlIH0pLFxuICAgICAgICB9LCBzZXNzaW9uKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9XG4gICAgYXN5bmMgY3JlYXRlVGVhbUZvckN1cnJlbnRVc2VyKGRhdGEsIHNlc3Npb24pIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KFwiL3RlYW1zP2FkZF9jdXJyZW50X3VzZXI9dHJ1ZVwiLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgICB9LCBzZXNzaW9uKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9XG4gICAgYXN5bmMgZGVsZXRlQ3VycmVudFVzZXIoc2Vzc2lvbikge1xuICAgICAgICBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KFwiL3VzZXJzL21lXCIsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgICAgfSwgc2Vzc2lvbik7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackframe/stack-shared/dist/interface/clientInterface.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stackframe/stack-shared/dist/interface/serverInterface.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/interface/serverInterface.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StackServerInterface: () => (/* binding */ StackServerInterface)\n/* harmony export */ });\n/* harmony import */ var _known_errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../known-errors */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/known-errors.js\");\n/* harmony import */ var _utils_errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/errors */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js\");\n/* harmony import */ var _utils_objects__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/objects */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/objects.js\");\n/* harmony import */ var _utils_results__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/results */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/results.js\");\n/* harmony import */ var _clientInterface__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./clientInterface */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/interface/clientInterface.js\");\n\n\n\n\n\nclass StackServerInterface extends _clientInterface__WEBPACK_IMPORTED_MODULE_4__.StackClientInterface {\n    constructor(options) {\n        super(options);\n        this.options = options;\n    }\n    async sendServerRequest(path, options, session, requestType = \"server\") {\n        return await this.sendClientRequest(path, {\n            ...options,\n            headers: {\n                \"x-stack-secret-server-key\": \"secretServerKey\" in this.options ? this.options.secretServerKey : \"\",\n                ...options.headers,\n            },\n        }, session, requestType);\n    }\n    async sendServerRequestAndCatchKnownError(path, requestOptions, tokenStoreOrNull, errorsToCatch) {\n        try {\n            return _utils_results__WEBPACK_IMPORTED_MODULE_3__.Result.ok(await this.sendServerRequest(path, requestOptions, tokenStoreOrNull));\n        }\n        catch (e) {\n            for (const errorType of errorsToCatch) {\n                if (e instanceof errorType) {\n                    return _utils_results__WEBPACK_IMPORTED_MODULE_3__.Result.error(e);\n                }\n            }\n            throw e;\n        }\n    }\n    async createServerUser(data) {\n        const response = await this.sendServerRequest(\"/users\", {\n            method: \"POST\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(data),\n        }, null);\n        return await response.json();\n    }\n    async getServerUserByToken(session) {\n        const responseOrError = await this.sendServerRequestAndCatchKnownError(\"/users/me\", {}, session, [_known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.CannotGetOwnUserWithoutUser]);\n        if (responseOrError.status === \"error\") {\n            if (responseOrError.error instanceof _known_errors__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.CannotGetOwnUserWithoutUser) {\n                return null;\n            }\n            else {\n                throw new _utils_errors__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"Unexpected uncaught error\", { cause: responseOrError.error });\n            }\n        }\n        const response = responseOrError.data;\n        const user = await response.json();\n        if (!user)\n            throw new _utils_errors__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"User endpoint returned null; this should never happen\");\n        return user;\n    }\n    async getServerUserById(userId) {\n        const response = await this.sendServerRequest(`/users/${userId}`, {}, null);\n        const user = await response.json();\n        if (!user)\n            return _utils_results__WEBPACK_IMPORTED_MODULE_3__.Result.error(new Error(\"Failed to get user\"));\n        return _utils_results__WEBPACK_IMPORTED_MODULE_3__.Result.ok(user);\n    }\n    async listServerTeamMemberProfiles(options) {\n        const response = await this.sendServerRequest(\"/team-member-profiles?team_id=\" + options.teamId, {}, null);\n        const result = await response.json();\n        return result.items;\n    }\n    async getServerTeamMemberProfile(options) {\n        const response = await this.sendServerRequest(`/team-member-profiles/${options.teamId}/${options.userId}`, {}, null);\n        return await response.json();\n    }\n    async listServerTeamPermissions(options, session) {\n        const response = await this.sendServerRequest(\"/team-permissions?\" + new URLSearchParams((0,_utils_objects__WEBPACK_IMPORTED_MODULE_2__.filterUndefined)({\n            user_id: options.userId,\n            team_id: options.teamId,\n            recursive: options.recursive.toString(),\n        })), {}, session);\n        const result = await response.json();\n        return result.items;\n    }\n    async listServerUsers() {\n        const response = await this.sendServerRequest(\"/users\", {}, null);\n        const result = await response.json();\n        return result.items;\n    }\n    async listServerTeams(options) {\n        const response = await this.sendServerRequest(\"/teams?\" + new URLSearchParams((0,_utils_objects__WEBPACK_IMPORTED_MODULE_2__.filterUndefined)({\n            user_id: options?.userId,\n        })), {}, null);\n        const result = await response.json();\n        return result.items;\n    }\n    async listServerTeamUsers(teamId) {\n        const response = await this.sendServerRequest(`/users?team_id=${teamId}`, {}, null);\n        const result = await response.json();\n        return result.items;\n    }\n    /* when passing a session, the user will be added to the team */\n    async createServerTeam(data, session) {\n        const response = await this.sendServerRequest(\"/teams\", {\n            method: \"POST\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(data),\n        }, session || null);\n        return await response.json();\n    }\n    async updateServerTeam(teamId, data) {\n        const response = await this.sendServerRequest(`/teams/${teamId}`, {\n            method: \"PATCH\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(data),\n        }, null);\n        return await response.json();\n    }\n    async deleteServerTeam(teamId) {\n        await this.sendServerRequest(`/teams/${teamId}`, { method: \"DELETE\" }, null);\n    }\n    async addServerUserToTeam(options) {\n        const response = await this.sendServerRequest(`/team-memberships/${options.teamId}/${options.userId}`, {\n            method: \"POST\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify({}),\n        }, null);\n        return await response.json();\n    }\n    async removeServerUserFromTeam(options) {\n        await this.sendServerRequest(`/team-memberships/${options.teamId}/${options.userId}`, {\n            method: \"DELETE\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify({}),\n        }, null);\n    }\n    async updateServerUser(userId, update) {\n        const response = await this.sendServerRequest(`/users/${userId}`, {\n            method: \"PATCH\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(update),\n        }, null);\n        return await response.json();\n    }\n    async createServerProviderAccessToken(userId, provider, scope) {\n        const response = await this.sendServerRequest(`/connected-accounts/${userId}/${provider}/access-token`, {\n            method: \"POST\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify({ scope }),\n        }, null);\n        return await response.json();\n    }\n    async createServerUserSession(userId, expiresInMillis) {\n        const response = await this.sendServerRequest(\"/auth/sessions\", {\n            method: \"POST\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify({\n                user_id: userId,\n                expires_in_millis: expiresInMillis,\n            }),\n        }, null);\n        const result = await response.json();\n        return {\n            accessToken: result.access_token,\n            refreshToken: result.refresh_token,\n        };\n    }\n    async leaveServerTeam(options) {\n        await this.sendClientRequest(`/team-memberships/${options.teamId}/${options.userId}`, {\n            method: \"DELETE\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify({}),\n        }, null);\n    }\n    async grantServerTeamUserPermission(teamId, userId, permissionId) {\n        await this.sendServerRequest(`/team-permissions/${teamId}/${userId}/${permissionId}`, {\n            method: \"POST\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify({}),\n        }, null);\n    }\n    async revokeServerTeamUserPermission(teamId, userId, permissionId) {\n        await this.sendServerRequest(`/team-permissions/${teamId}/${userId}/${permissionId}`, {\n            method: \"DELETE\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify({}),\n        }, null);\n    }\n    async deleteServerServerUser(userId) {\n        await this.sendServerRequest(`/users/${userId}`, {\n            method: \"DELETE\",\n            headers: {\n                \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify({}),\n        }, null);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvaW50ZXJmYWNlL3NlcnZlckludGVyZmFjZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBOEM7QUFDUTtBQUNIO0FBQ1Q7QUFDZTtBQUNsRCxtQ0FBbUMsa0VBQW9CO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsa0RBQU07QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsa0RBQU07QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsOEZBQThGLFlBQVksc0RBQVc7QUFDckg7QUFDQSxpREFBaUQsc0RBQVc7QUFDNUQ7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDhEQUFtQixnQ0FBZ0MsOEJBQThCO0FBQzNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsOERBQW1CLCtCQUErQjtBQUN4RTtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0UsT0FBTyxLQUFLO0FBQzVFO0FBQ0E7QUFDQSxtQkFBbUIsa0RBQU07QUFDekIsZUFBZSxrREFBTTtBQUNyQjtBQUNBO0FBQ0EsMkdBQTJHO0FBQzNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0VBQStFLGVBQWUsR0FBRyxlQUFlLEtBQUs7QUFDckg7QUFDQTtBQUNBO0FBQ0EsaUdBQWlHLCtEQUFlO0FBQ2hIO0FBQ0E7QUFDQTtBQUNBLFNBQVMsTUFBTTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0ZBQXNGLCtEQUFlO0FBQ3JHO0FBQ0EsU0FBUyxNQUFNO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3RUFBd0UsT0FBTyxLQUFLO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0UsT0FBTztBQUN2RTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLE9BQU8sS0FBSyxrQkFBa0I7QUFDN0U7QUFDQTtBQUNBLDJFQUEyRSxlQUFlLEdBQUcsZUFBZTtBQUM1RztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsbUNBQW1DO0FBQ25DLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSwwREFBMEQsZUFBZSxHQUFHLGVBQWU7QUFDM0Y7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLG1DQUFtQztBQUNuQyxTQUFTO0FBQ1Q7QUFDQTtBQUNBLGdFQUFnRSxPQUFPO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSw2RUFBNkUsT0FBTyxHQUFHLFNBQVM7QUFDaEc7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLG1DQUFtQyxPQUFPO0FBQzFDLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELGVBQWUsR0FBRyxlQUFlO0FBQzNGO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixtQ0FBbUM7QUFDbkMsU0FBUztBQUNUO0FBQ0E7QUFDQSwwREFBMEQsT0FBTyxHQUFHLE9BQU8sR0FBRyxhQUFhO0FBQzNGO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixtQ0FBbUM7QUFDbkMsU0FBUztBQUNUO0FBQ0E7QUFDQSwwREFBMEQsT0FBTyxHQUFHLE9BQU8sR0FBRyxhQUFhO0FBQzNGO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixtQ0FBbUM7QUFDbkMsU0FBUztBQUNUO0FBQ0E7QUFDQSwrQ0FBK0MsT0FBTztBQUN0RDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsbUNBQW1DO0FBQ25DLFNBQVM7QUFDVDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWFya2VycGxBSWNlLy4vbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L2ludGVyZmFjZS9zZXJ2ZXJJbnRlcmZhY2UuanM/Zjk2YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBLbm93bkVycm9ycyB9IGZyb20gXCIuLi9rbm93bi1lcnJvcnNcIjtcbmltcG9ydCB7IFN0YWNrQXNzZXJ0aW9uRXJyb3IgfSBmcm9tIFwiLi4vdXRpbHMvZXJyb3JzXCI7XG5pbXBvcnQgeyBmaWx0ZXJVbmRlZmluZWQgfSBmcm9tIFwiLi4vdXRpbHMvb2JqZWN0c1wiO1xuaW1wb3J0IHsgUmVzdWx0IH0gZnJvbSBcIi4uL3V0aWxzL3Jlc3VsdHNcIjtcbmltcG9ydCB7IFN0YWNrQ2xpZW50SW50ZXJmYWNlIH0gZnJvbSBcIi4vY2xpZW50SW50ZXJmYWNlXCI7XG5leHBvcnQgY2xhc3MgU3RhY2tTZXJ2ZXJJbnRlcmZhY2UgZXh0ZW5kcyBTdGFja0NsaWVudEludGVyZmFjZSB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB9XG4gICAgYXN5bmMgc2VuZFNlcnZlclJlcXVlc3QocGF0aCwgb3B0aW9ucywgc2Vzc2lvbiwgcmVxdWVzdFR5cGUgPSBcInNlcnZlclwiKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KHBhdGgsIHtcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJ4LXN0YWNrLXNlY3JldC1zZXJ2ZXIta2V5XCI6IFwic2VjcmV0U2VydmVyS2V5XCIgaW4gdGhpcy5vcHRpb25zID8gdGhpcy5vcHRpb25zLnNlY3JldFNlcnZlcktleSA6IFwiXCIsXG4gICAgICAgICAgICAgICAgLi4ub3B0aW9ucy5oZWFkZXJzLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSwgc2Vzc2lvbiwgcmVxdWVzdFR5cGUpO1xuICAgIH1cbiAgICBhc3luYyBzZW5kU2VydmVyUmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihwYXRoLCByZXF1ZXN0T3B0aW9ucywgdG9rZW5TdG9yZU9yTnVsbCwgZXJyb3JzVG9DYXRjaCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIFJlc3VsdC5vayhhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KHBhdGgsIHJlcXVlc3RPcHRpb25zLCB0b2tlblN0b3JlT3JOdWxsKSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZXJyb3JUeXBlIG9mIGVycm9yc1RvQ2F0Y2gpIHtcbiAgICAgICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIGVycm9yVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmVzdWx0LmVycm9yKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgY3JlYXRlU2VydmVyVXNlcihkYXRhKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcIi91c2Vyc1wiLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgICB9LCBudWxsKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0U2VydmVyVXNlckJ5VG9rZW4oc2Vzc2lvbikge1xuICAgICAgICBjb25zdCByZXNwb25zZU9yRXJyb3IgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0QW5kQ2F0Y2hLbm93bkVycm9yKFwiL3VzZXJzL21lXCIsIHt9LCBzZXNzaW9uLCBbS25vd25FcnJvcnMuQ2Fubm90R2V0T3duVXNlcldpdGhvdXRVc2VyXSk7XG4gICAgICAgIGlmIChyZXNwb25zZU9yRXJyb3Iuc3RhdHVzID09PSBcImVycm9yXCIpIHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZU9yRXJyb3IuZXJyb3IgaW5zdGFuY2VvZiBLbm93bkVycm9ycy5DYW5ub3RHZXRPd25Vc2VyV2l0aG91dFVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiVW5leHBlY3RlZCB1bmNhdWdodCBlcnJvclwiLCB7IGNhdXNlOiByZXNwb25zZU9yRXJyb3IuZXJyb3IgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSByZXNwb25zZU9yRXJyb3IuZGF0YTtcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgaWYgKCF1c2VyKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJVc2VyIGVuZHBvaW50IHJldHVybmVkIG51bGw7IHRoaXMgc2hvdWxkIG5ldmVyIGhhcHBlblwiKTtcbiAgICAgICAgcmV0dXJuIHVzZXI7XG4gICAgfVxuICAgIGFzeW5jIGdldFNlcnZlclVzZXJCeUlkKHVzZXJJZCkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoYC91c2Vycy8ke3VzZXJJZH1gLCB7fSwgbnVsbCk7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIGlmICghdXNlcilcbiAgICAgICAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IobmV3IEVycm9yKFwiRmFpbGVkIHRvIGdldCB1c2VyXCIpKTtcbiAgICAgICAgcmV0dXJuIFJlc3VsdC5vayh1c2VyKTtcbiAgICB9XG4gICAgYXN5bmMgbGlzdFNlcnZlclRlYW1NZW1iZXJQcm9maWxlcyhvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcIi90ZWFtLW1lbWJlci1wcm9maWxlcz90ZWFtX2lkPVwiICsgb3B0aW9ucy50ZWFtSWQsIHt9LCBudWxsKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICByZXR1cm4gcmVzdWx0Lml0ZW1zO1xuICAgIH1cbiAgICBhc3luYyBnZXRTZXJ2ZXJUZWFtTWVtYmVyUHJvZmlsZShvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChgL3RlYW0tbWVtYmVyLXByb2ZpbGVzLyR7b3B0aW9ucy50ZWFtSWR9LyR7b3B0aW9ucy51c2VySWR9YCwge30sIG51bGwpO1xuICAgICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH1cbiAgICBhc3luYyBsaXN0U2VydmVyVGVhbVBlcm1pc3Npb25zKG9wdGlvbnMsIHNlc3Npb24pIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFwiL3RlYW0tcGVybWlzc2lvbnM/XCIgKyBuZXcgVVJMU2VhcmNoUGFyYW1zKGZpbHRlclVuZGVmaW5lZCh7XG4gICAgICAgICAgICB1c2VyX2lkOiBvcHRpb25zLnVzZXJJZCxcbiAgICAgICAgICAgIHRlYW1faWQ6IG9wdGlvbnMudGVhbUlkLFxuICAgICAgICAgICAgcmVjdXJzaXZlOiBvcHRpb25zLnJlY3Vyc2l2ZS50b1N0cmluZygpLFxuICAgICAgICB9KSksIHt9LCBzZXNzaW9uKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICByZXR1cm4gcmVzdWx0Lml0ZW1zO1xuICAgIH1cbiAgICBhc3luYyBsaXN0U2VydmVyVXNlcnMoKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcIi91c2Vyc1wiLCB7fSwgbnVsbCk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5pdGVtcztcbiAgICB9XG4gICAgYXN5bmMgbGlzdFNlcnZlclRlYW1zKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFwiL3RlYW1zP1wiICsgbmV3IFVSTFNlYXJjaFBhcmFtcyhmaWx0ZXJVbmRlZmluZWQoe1xuICAgICAgICAgICAgdXNlcl9pZDogb3B0aW9ucz8udXNlcklkLFxuICAgICAgICB9KSksIHt9LCBudWxsKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICByZXR1cm4gcmVzdWx0Lml0ZW1zO1xuICAgIH1cbiAgICBhc3luYyBsaXN0U2VydmVyVGVhbVVzZXJzKHRlYW1JZCkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoYC91c2Vycz90ZWFtX2lkPSR7dGVhbUlkfWAsIHt9LCBudWxsKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICByZXR1cm4gcmVzdWx0Lml0ZW1zO1xuICAgIH1cbiAgICAvKiB3aGVuIHBhc3NpbmcgYSBzZXNzaW9uLCB0aGUgdXNlciB3aWxsIGJlIGFkZGVkIHRvIHRoZSB0ZWFtICovXG4gICAgYXN5bmMgY3JlYXRlU2VydmVyVGVhbShkYXRhLCBzZXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcIi90ZWFtc1wiLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgICB9LCBzZXNzaW9uIHx8IG51bGwpO1xuICAgICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVTZXJ2ZXJUZWFtKHRlYW1JZCwgZGF0YSkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoYC90ZWFtcy8ke3RlYW1JZH1gLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcbiAgICAgICAgfSwgbnVsbCk7XG4gICAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgfVxuICAgIGFzeW5jIGRlbGV0ZVNlcnZlclRlYW0odGVhbUlkKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoYC90ZWFtcy8ke3RlYW1JZH1gLCB7IG1ldGhvZDogXCJERUxFVEVcIiB9LCBudWxsKTtcbiAgICB9XG4gICAgYXN5bmMgYWRkU2VydmVyVXNlclRvVGVhbShvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChgL3RlYW0tbWVtYmVyc2hpcHMvJHtvcHRpb25zLnRlYW1JZH0vJHtvcHRpb25zLnVzZXJJZH1gLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHt9KSxcbiAgICAgICAgfSwgbnVsbCk7XG4gICAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgfVxuICAgIGFzeW5jIHJlbW92ZVNlcnZlclVzZXJGcm9tVGVhbShvcHRpb25zKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoYC90ZWFtLW1lbWJlcnNoaXBzLyR7b3B0aW9ucy50ZWFtSWR9LyR7b3B0aW9ucy51c2VySWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHt9KSxcbiAgICAgICAgfSwgbnVsbCk7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZVNlcnZlclVzZXIodXNlcklkLCB1cGRhdGUpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KGAvdXNlcnMvJHt1c2VySWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodXBkYXRlKSxcbiAgICAgICAgfSwgbnVsbCk7XG4gICAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgfVxuICAgIGFzeW5jIGNyZWF0ZVNlcnZlclByb3ZpZGVyQWNjZXNzVG9rZW4odXNlcklkLCBwcm92aWRlciwgc2NvcGUpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KGAvY29ubmVjdGVkLWFjY291bnRzLyR7dXNlcklkfS8ke3Byb3ZpZGVyfS9hY2Nlc3MtdG9rZW5gLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgc2NvcGUgfSksXG4gICAgICAgIH0sIG51bGwpO1xuICAgICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH1cbiAgICBhc3luYyBjcmVhdGVTZXJ2ZXJVc2VyU2Vzc2lvbih1c2VySWQsIGV4cGlyZXNJbk1pbGxpcykge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoXCIvYXV0aC9zZXNzaW9uc1wiLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgICAgICAgICAgICAgZXhwaXJlc19pbl9taWxsaXM6IGV4cGlyZXNJbk1pbGxpcyxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9LCBudWxsKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYWNjZXNzVG9rZW46IHJlc3VsdC5hY2Nlc3NfdG9rZW4sXG4gICAgICAgICAgICByZWZyZXNoVG9rZW46IHJlc3VsdC5yZWZyZXNoX3Rva2VuLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBhc3luYyBsZWF2ZVNlcnZlclRlYW0ob3B0aW9ucykge1xuICAgICAgICBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KGAvdGVhbS1tZW1iZXJzaGlwcy8ke29wdGlvbnMudGVhbUlkfS8ke29wdGlvbnMudXNlcklkfWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7fSksXG4gICAgICAgIH0sIG51bGwpO1xuICAgIH1cbiAgICBhc3luYyBncmFudFNlcnZlclRlYW1Vc2VyUGVybWlzc2lvbih0ZWFtSWQsIHVzZXJJZCwgcGVybWlzc2lvbklkKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoYC90ZWFtLXBlcm1pc3Npb25zLyR7dGVhbUlkfS8ke3VzZXJJZH0vJHtwZXJtaXNzaW9uSWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7fSksXG4gICAgICAgIH0sIG51bGwpO1xuICAgIH1cbiAgICBhc3luYyByZXZva2VTZXJ2ZXJUZWFtVXNlclBlcm1pc3Npb24odGVhbUlkLCB1c2VySWQsIHBlcm1pc3Npb25JZCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KGAvdGVhbS1wZXJtaXNzaW9ucy8ke3RlYW1JZH0vJHt1c2VySWR9LyR7cGVybWlzc2lvbklkfWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7fSksXG4gICAgICAgIH0sIG51bGwpO1xuICAgIH1cbiAgICBhc3luYyBkZWxldGVTZXJ2ZXJTZXJ2ZXJVc2VyKHVzZXJJZCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KGAvdXNlcnMvJHt1c2VySWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHt9KSxcbiAgICAgICAgfSwgbnVsbCk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackframe/stack-shared/dist/interface/serverInterface.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stackframe/stack-shared/dist/known-errors.js":
/*!********************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/known-errors.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KnownError: () => (/* binding */ KnownError),\n/* harmony export */   KnownErrors: () => (/* binding */ KnownErrors)\n/* harmony export */ });\n/* harmony import */ var _utils_errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/errors */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js\");\n/* harmony import */ var _utils_functions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/functions */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/functions.js\");\n/* harmony import */ var _utils_strings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/strings */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/strings.js\");\n\n\n\nclass KnownError extends _utils_errors__WEBPACK_IMPORTED_MODULE_0__.StatusError {\n    constructor(statusCode, humanReadableMessage, details) {\n        super(statusCode, humanReadableMessage);\n        this.statusCode = statusCode;\n        this.humanReadableMessage = humanReadableMessage;\n        this.details = details;\n        this.name = \"KnownError\";\n    }\n    getBody() {\n        return new TextEncoder().encode(JSON.stringify(this.toDescriptiveJson(), undefined, 2));\n    }\n    getHeaders() {\n        return {\n            \"Content-Type\": [\"application/json; charset=utf-8\"],\n            \"X-Stack-Known-Error\": [this.errorCode],\n        };\n    }\n    toDescriptiveJson() {\n        return {\n            code: this.errorCode,\n            ...this.details ? { details: this.details } : {},\n            error: this.humanReadableMessage,\n        };\n    }\n    get errorCode() {\n        return this.constructor.errorCode ?? (0,_utils_errors__WEBPACK_IMPORTED_MODULE_0__.throwErr)(`Can't find error code for this KnownError. Is its constructor a KnownErrorConstructor? ${this}`);\n    }\n    static constructorArgsFromJson(json) {\n        return [\n            400,\n            json.message,\n            json,\n        ];\n    }\n    static fromJson(json) {\n        for (const [_, KnownErrorType] of Object.entries(KnownErrors)) {\n            if (json.code === KnownErrorType.prototype.errorCode) {\n                const constructorArgs = KnownErrorType.constructorArgsFromJson(json);\n                return new KnownErrorType(\n                // @ts-expect-error\n                ...constructorArgs);\n            }\n        }\n        throw new Error(`Unknown KnownError code. You may need to update your version of Stack to see more detailed information. ${json.code}: ${json.message}`);\n    }\n}\nconst knownErrorConstructorErrorCodeSentinel = Symbol(\"knownErrorConstructorErrorCodeSentinel\");\nfunction createKnownErrorConstructor(SuperClass, errorCode, create, constructorArgsFromJson) {\n    const createFn = create === \"inherit\" ? _utils_functions__WEBPACK_IMPORTED_MODULE_1__.identityArgs : create;\n    const constructorArgsFromJsonFn = constructorArgsFromJson === \"inherit\" ? SuperClass.constructorArgsFromJson : constructorArgsFromJson;\n    // @ts-expect-error this is not a mixin, but TS detects it as one\n    class KnownErrorImpl extends SuperClass {\n        constructor(...args) {\n            // @ts-expect-error\n            super(...createFn(...args));\n            this.name = `KnownError<${errorCode}>`;\n            this.constructorArgs = args;\n        }\n        static constructorArgsFromJson(json) {\n            return constructorArgsFromJsonFn(json.details);\n        }\n    }\n    KnownErrorImpl.errorCode = errorCode;\n    ;\n    // @ts-expect-error\n    return KnownErrorImpl;\n}\nconst UnsupportedError = createKnownErrorConstructor(KnownError, \"UNSUPPORTED_ERROR\", (originalErrorCode) => [\n    500,\n    `An error occurred that is not currently supported (possibly because it was added in a version of Stack that is newer than this client). The original unsupported error code was: ${originalErrorCode}`,\n    {\n        originalErrorCode,\n    },\n], (json) => [\n    json?.originalErrorCode ?? (0,_utils_errors__WEBPACK_IMPORTED_MODULE_0__.throwErr)(\"originalErrorCode not found in UnsupportedError details\"),\n]);\nconst BodyParsingError = createKnownErrorConstructor(KnownError, \"BODY_PARSING_ERROR\", (message) => [\n    400,\n    message,\n], (json) => [json.message]);\nconst SchemaError = createKnownErrorConstructor(KnownError, \"SCHEMA_ERROR\", (message) => [\n    400,\n    message || (0,_utils_errors__WEBPACK_IMPORTED_MODULE_0__.throwErr)(\"SchemaError requires a message\"),\n    {\n        message,\n    },\n], (json) => [json.message]);\nconst AllOverloadsFailed = createKnownErrorConstructor(KnownError, \"ALL_OVERLOADS_FAILED\", (overloadErrors) => [\n    400,\n    (0,_utils_strings__WEBPACK_IMPORTED_MODULE_2__.deindent) `\n      This endpoint has multiple overloads, but they all failed to process the request.\n\n        ${overloadErrors.map((e, i) => (0,_utils_strings__WEBPACK_IMPORTED_MODULE_2__.deindent) `\n          Overload ${i + 1}: ${JSON.stringify(e, undefined, 2)}\n        `).join(\"\\n\\n\")}\n    `,\n    {\n        overload_errors: overloadErrors,\n    },\n], (json) => [\n    json?.overload_errors ?? (0,_utils_errors__WEBPACK_IMPORTED_MODULE_0__.throwErr)(\"overload_errors not found in AllOverloadsFailed details\"),\n]);\nconst ProjectAuthenticationError = createKnownErrorConstructor(KnownError, \"PROJECT_AUTHENTICATION_ERROR\", \"inherit\", \"inherit\");\nconst InvalidProjectAuthentication = createKnownErrorConstructor(ProjectAuthenticationError, \"INVALID_PROJECT_AUTHENTICATION\", \"inherit\", \"inherit\");\n// TODO next-release: delete deprecated error type\n/**\n * @deprecated Use ProjectKeyWithoutAccessType instead\n */\nconst ProjectKeyWithoutRequestType = createKnownErrorConstructor(InvalidProjectAuthentication, \"PROJECT_KEY_WITHOUT_REQUEST_TYPE\", () => [\n    400,\n    \"Either an API key or an admin access token was provided, but the x-stack-access-type header is missing. Set it to 'client', 'server', or 'admin' as appropriate.\",\n], () => []);\n// TODO next-release: delete deprecated error type\n/**\n * @deprecated Use InvalidAccessType instead\n */\nconst InvalidRequestType = createKnownErrorConstructor(InvalidProjectAuthentication, \"INVALID_REQUEST_TYPE\", (requestType) => [\n    400,\n    `The x-stack-access-type header must be 'client', 'server', or 'admin', but was '${requestType}'.`,\n], (json) => [\n    json?.requestType ?? (0,_utils_errors__WEBPACK_IMPORTED_MODULE_0__.throwErr)(\"requestType not found in InvalidRequestType details\"),\n]);\n// TODO next-release: delete deprecated error type\n/**\n * @deprecated Use AccessTypeWithoutProjectId instead\n */\nconst RequestTypeWithoutProjectId = createKnownErrorConstructor(InvalidProjectAuthentication, \"REQUEST_TYPE_WITHOUT_PROJECT_ID\", (requestType) => [\n    400,\n    `The x-stack-access-type header was '${requestType}', but the x-stack-project-id header was not provided.`,\n    {\n        request_type: requestType,\n    },\n], (json) => [json.request_type]);\nconst ProjectKeyWithoutAccessType = createKnownErrorConstructor(InvalidProjectAuthentication, \"PROJECT_KEY_WITHOUT_ACCESS_TYPE\", () => [\n    400,\n    \"Either an API key or an admin access token was provided, but the x-stack-access-type header is missing. Set it to 'client', 'server', or 'admin' as appropriate.\",\n], () => []);\nconst InvalidAccessType = createKnownErrorConstructor(InvalidProjectAuthentication, \"INVALID_ACCESS_TYPE\", (accessType) => [\n    400,\n    `The x-stack-access-type header must be 'client', 'server', or 'admin', but was '${accessType}'.`,\n], (json) => [\n    json?.accessType ?? (0,_utils_errors__WEBPACK_IMPORTED_MODULE_0__.throwErr)(\"accessType not found in InvalidAccessType details\"),\n]);\nconst AccessTypeWithoutProjectId = createKnownErrorConstructor(InvalidProjectAuthentication, \"ACCESS_TYPE_WITHOUT_PROJECT_ID\", (accessType) => [\n    400,\n    (0,_utils_strings__WEBPACK_IMPORTED_MODULE_2__.deindent) `\n      The x-stack-access-type header was '${accessType}', but the x-stack-project-id header was not provided.\n      \n      For more information, see the docs on REST API authentication: https://docs.stack-auth.com/rest-api/auth#authentication\n    `,\n    {\n        request_type: accessType,\n    },\n], (json) => [json.request_type]);\nconst AccessTypeRequired = createKnownErrorConstructor(InvalidProjectAuthentication, \"ACCESS_TYPE_REQUIRED\", () => [\n    400,\n    (0,_utils_strings__WEBPACK_IMPORTED_MODULE_2__.deindent) `\n      You must specify an access level for this Stack project. Make sure project API keys are provided (eg. x-stack-publishable-client-key) and you set the x-stack-access-type header to 'client', 'server', or 'admin'.\n      \n      For more information, see the docs on REST API authentication: https://docs.stack-auth.com/rest-api/auth#authentication\n    `,\n], () => []);\nconst InsufficientAccessType = createKnownErrorConstructor(InvalidProjectAuthentication, \"INSUFFICIENT_ACCESS_TYPE\", (actualAccessType, allowedAccessTypes) => [\n    401,\n    `The x-stack-access-type header must be ${allowedAccessTypes.map(s => `'${s}'`).join(\" or \")}, but was '${actualAccessType}'.`,\n    {\n        actual_access_type: actualAccessType,\n        allowed_access_types: allowedAccessTypes,\n    },\n], (json) => [\n    json.actual_access_type,\n    json.allowed_access_types,\n]);\nconst InvalidPublishableClientKey = createKnownErrorConstructor(InvalidProjectAuthentication, \"INVALID_PUBLISHABLE_CLIENT_KEY\", (projectId) => [\n    401,\n    `The publishable key is not valid for the project ${JSON.stringify(projectId)}. Does the project and/or the key exist?`,\n    {\n        project_id: projectId,\n    },\n], (json) => [json.project_id]);\nconst InvalidSecretServerKey = createKnownErrorConstructor(InvalidProjectAuthentication, \"INVALID_SECRET_SERVER_KEY\", (projectId) => [\n    401,\n    `The secret server key is not valid for the project ${JSON.stringify(projectId)}. Does the project and/or the key exist?`,\n    {\n        project_id: projectId,\n    },\n], (json) => [json.project_id]);\nconst InvalidSuperSecretAdminKey = createKnownErrorConstructor(InvalidProjectAuthentication, \"INVALID_SUPER_SECRET_ADMIN_KEY\", (projectId) => [\n    401,\n    `The super secret admin key is not valid for the project ${JSON.stringify(projectId)}. Does the project and/or the key exist?`,\n    {\n        project_id: projectId,\n    },\n], (json) => [json.project_id]);\nconst InvalidAdminAccessToken = createKnownErrorConstructor(InvalidProjectAuthentication, \"INVALID_ADMIN_ACCESS_TOKEN\", \"inherit\", \"inherit\");\nconst UnparsableAdminAccessToken = createKnownErrorConstructor(InvalidAdminAccessToken, \"UNPARSABLE_ADMIN_ACCESS_TOKEN\", () => [\n    401,\n    \"Admin access token is not parsable.\",\n], () => []);\nconst AdminAccessTokenExpired = createKnownErrorConstructor(InvalidAdminAccessToken, \"ADMIN_ACCESS_TOKEN_EXPIRED\", () => [\n    401,\n    \"Admin access token has expired. Please refresh it and try again.\",\n], () => []);\nconst InvalidProjectForAdminAccessToken = createKnownErrorConstructor(InvalidAdminAccessToken, \"INVALID_PROJECT_FOR_ADMIN_ACCESS_TOKEN\", () => [\n    401,\n    \"Admin access tokens must be created on the internal project.\",\n], () => []);\nconst AdminAccessTokenIsNotAdmin = createKnownErrorConstructor(InvalidAdminAccessToken, \"ADMIN_ACCESS_TOKEN_IS_NOT_ADMIN\", () => [\n    401,\n    \"Admin access token does not have the required permissions to access this project.\",\n], () => []);\n/**\n * @deprecated Use InsufficientAccessType instead\n */\nconst ProjectAuthenticationRequired = createKnownErrorConstructor(ProjectAuthenticationError, \"PROJECT_AUTHENTICATION_REQUIRED\", \"inherit\", \"inherit\");\n/**\n * @deprecated Use InsufficientAccessType instead\n */\nconst ClientAuthenticationRequired = createKnownErrorConstructor(ProjectAuthenticationRequired, \"CLIENT_AUTHENTICATION_REQUIRED\", () => [\n    401,\n    \"The publishable client key must be provided.\",\n], () => []);\n/**\n * @deprecated Use InsufficientAccessType instead\n */\nconst ServerAuthenticationRequired = createKnownErrorConstructor(ProjectAuthenticationRequired, \"SERVER_AUTHENTICATION_REQUIRED\", () => [\n    401,\n    \"The secret server key must be provided.\",\n], () => []);\n/**\n * @deprecated Use InsufficientAccessType instead\n */\nconst ClientOrServerAuthenticationRequired = createKnownErrorConstructor(ProjectAuthenticationRequired, \"CLIENT_OR_SERVER_AUTHENTICATION_REQUIRED\", () => [\n    401,\n    \"Either the publishable client key or the secret server key must be provided.\",\n], () => []);\n/**\n * @deprecated Use InsufficientAccessType instead\n */\nconst ClientOrAdminAuthenticationRequired = createKnownErrorConstructor(ProjectAuthenticationRequired, \"CLIENT_OR_ADMIN_AUTHENTICATION_REQUIRED\", () => [\n    401,\n    \"Either the publishable client key or the super secret admin key must be provided.\",\n], () => []);\n/**\n * @deprecated Use InsufficientAccessType instead\n */\nconst ClientOrServerOrAdminAuthenticationRequired = createKnownErrorConstructor(ProjectAuthenticationRequired, \"CLIENT_OR_SERVER_OR_ADMIN_AUTHENTICATION_REQUIRED\", () => [\n    401,\n    \"Either the publishable client key, the secret server key, or the super secret admin key must be provided.\",\n], () => []);\n/**\n * @deprecated Use InsufficientAccessType instead\n */\nconst AdminAuthenticationRequired = createKnownErrorConstructor(ProjectAuthenticationRequired, \"ADMIN_AUTHENTICATION_REQUIRED\", () => [\n    401,\n    \"The super secret admin key must be provided.\",\n], () => []);\nconst ExpectedInternalProject = createKnownErrorConstructor(ProjectAuthenticationError, \"EXPECTED_INTERNAL_PROJECT\", () => [\n    401,\n    \"The project ID is expected to be internal.\",\n], () => []);\nconst SessionAuthenticationError = createKnownErrorConstructor(KnownError, \"SESSION_AUTHENTICATION_ERROR\", \"inherit\", \"inherit\");\nconst InvalidSessionAuthentication = createKnownErrorConstructor(SessionAuthenticationError, \"INVALID_SESSION_AUTHENTICATION\", \"inherit\", \"inherit\");\nconst InvalidAccessToken = createKnownErrorConstructor(InvalidSessionAuthentication, \"INVALID_ACCESS_TOKEN\", \"inherit\", \"inherit\");\nconst UnparsableAccessToken = createKnownErrorConstructor(InvalidAccessToken, \"UNPARSABLE_ACCESS_TOKEN\", () => [\n    401,\n    \"Access token is not parsable.\",\n], () => []);\nconst AccessTokenExpired = createKnownErrorConstructor(InvalidAccessToken, \"ACCESS_TOKEN_EXPIRED\", () => [\n    401,\n    \"Access token has expired. Please refresh it and try again.\",\n], () => []);\nconst InvalidProjectForAccessToken = createKnownErrorConstructor(InvalidAccessToken, \"INVALID_PROJECT_FOR_ACCESS_TOKEN\", () => [\n    401,\n    \"Access token not valid for this project.\",\n], () => []);\nconst RefreshTokenError = createKnownErrorConstructor(KnownError, \"REFRESH_TOKEN_ERROR\", \"inherit\", \"inherit\");\nconst RefreshTokenNotFoundOrExpired = createKnownErrorConstructor(RefreshTokenError, \"REFRESH_TOKEN_NOT_FOUND_OR_EXPIRED\", () => [\n    401,\n    \"Refresh token not found for this project, or the session has expired/been revoked.\",\n], () => []);\nconst ProviderRejected = createKnownErrorConstructor(RefreshTokenError, \"PROVIDER_REJECTED\", () => [\n    401,\n    \"The provider refused to refresh their token. This usually means that the provider used to authenticate the user no longer regards this session as valid, and the user must re-authenticate.\",\n], () => []);\nconst UserEmailAlreadyExists = createKnownErrorConstructor(KnownError, \"USER_EMAIL_ALREADY_EXISTS\", () => [\n    400,\n    \"User already exists.\",\n], () => []);\nconst CannotGetOwnUserWithoutUser = createKnownErrorConstructor(KnownError, \"CANNOT_GET_OWN_USER_WITHOUT_USER\", () => [\n    400,\n    \"You have specified 'me' as a userId, but did not provide authentication for a user.\",\n], () => []);\nconst UserIdDoesNotExist = createKnownErrorConstructor(KnownError, \"USER_ID_DOES_NOT_EXIST\", (userId) => [\n    400,\n    `The given user with the ID ${userId} does not exist.`,\n    {\n        user_id: userId,\n    },\n], (json) => [json.user_id]);\nconst UserNotFound = createKnownErrorConstructor(KnownError, \"USER_NOT_FOUND\", () => [\n    404,\n    \"User not found.\",\n], () => []);\nconst ApiKeyNotFound = createKnownErrorConstructor(KnownError, \"API_KEY_NOT_FOUND\", () => [\n    404,\n    \"API key not found.\",\n], () => []);\nconst ProjectNotFound = createKnownErrorConstructor(KnownError, \"PROJECT_NOT_FOUND\", (projectId) => {\n    if (typeof projectId !== \"string\")\n        throw new _utils_errors__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"projectId of KnownErrors.ProjectNotFound must be a string\");\n    return [\n        404,\n        `Project ${projectId} not found or is not accessible with the current user.`,\n        {\n            project_id: projectId,\n        },\n    ];\n}, (json) => [json.project_id]);\nconst SignUpNotEnabled = createKnownErrorConstructor(KnownError, \"SIGN_UP_NOT_ENABLED\", () => [\n    400,\n    \"Creation of new accounts is not enabled for this project. Please ask the project owner to enable it.\",\n], () => []);\nconst PasswordAuthenticationNotEnabled = createKnownErrorConstructor(KnownError, \"PASSWORD_AUTHENTICATION_NOT_ENABLED\", () => [\n    400,\n    \"Password authentication is not enabled for this project.\",\n], () => []);\nconst EmailPasswordMismatch = createKnownErrorConstructor(KnownError, \"EMAIL_PASSWORD_MISMATCH\", () => [\n    400,\n    \"Wrong e-mail or password.\",\n], () => []);\nconst RedirectUrlNotWhitelisted = createKnownErrorConstructor(KnownError, \"REDIRECT_URL_NOT_WHITELISTED\", () => [\n    400,\n    \"Redirect URL not whitelisted.\",\n], () => []);\nconst PasswordRequirementsNotMet = createKnownErrorConstructor(KnownError, \"PASSWORD_REQUIREMENTS_NOT_MET\", \"inherit\", \"inherit\");\nconst PasswordTooShort = createKnownErrorConstructor(PasswordRequirementsNotMet, \"PASSWORD_TOO_SHORT\", (minLength) => [\n    400,\n    `Password too short. Minimum length is ${minLength}.`,\n    {\n        min_length: minLength,\n    },\n], (json) => [\n    json?.min_length ?? (0,_utils_errors__WEBPACK_IMPORTED_MODULE_0__.throwErr)(\"min_length not found in PasswordTooShort details\"),\n]);\nconst PasswordTooLong = createKnownErrorConstructor(PasswordRequirementsNotMet, \"PASSWORD_TOO_LONG\", (maxLength) => [\n    400,\n    `Password too long. Maximum length is ${maxLength}.`,\n    {\n        maxLength,\n    },\n], (json) => [\n    json?.maxLength ?? (0,_utils_errors__WEBPACK_IMPORTED_MODULE_0__.throwErr)(\"maxLength not found in PasswordTooLong details\"),\n]);\nconst UserDoesNotHavePassword = createKnownErrorConstructor(KnownError, \"USER_DOES_NOT_HAVE_PASSWORD\", () => [\n    400,\n    \"This user does not have password authentication enabled.\",\n], () => []);\nconst VerificationCodeError = createKnownErrorConstructor(KnownError, \"VERIFICATION_ERROR\", \"inherit\", \"inherit\");\nconst VerificationCodeNotFound = createKnownErrorConstructor(VerificationCodeError, \"VERIFICATION_CODE_NOT_FOUND\", () => [\n    404,\n    \"The verification code does not exist for this project.\",\n], () => []);\nconst VerificationCodeExpired = createKnownErrorConstructor(VerificationCodeError, \"VERIFICATION_CODE_EXPIRED\", () => [\n    400,\n    \"The verification code has expired.\",\n], () => []);\nconst VerificationCodeAlreadyUsed = createKnownErrorConstructor(VerificationCodeError, \"VERIFICATION_CODE_ALREADY_USED\", () => [\n    400,\n    \"The verification link has already been used.\",\n], () => []);\nconst PasswordConfirmationMismatch = createKnownErrorConstructor(KnownError, \"PASSWORD_CONFIRMATION_MISMATCH\", () => [\n    400,\n    \"Passwords do not match.\",\n], () => []);\nconst EmailAlreadyVerified = createKnownErrorConstructor(KnownError, \"EMAIL_ALREADY_VERIFIED\", () => [\n    400,\n    \"The e-mail is already verified.\",\n], () => []);\nconst EmailNotAssociatedWithUser = createKnownErrorConstructor(KnownError, \"EMAIL_NOT_ASSOCIATED_WITH_USER\", () => [\n    400,\n    \"The e-mail is not associated with a user that could log in with that e-mail.\",\n], () => []);\nconst EmailIsNotPrimaryEmail = createKnownErrorConstructor(KnownError, \"EMAIL_IS_NOT_PRIMARY_EMAIL\", (email, primaryEmail) => [\n    400,\n    `The given e-mail (${email}) must equal the user's primary e-mail (${primaryEmail}).`,\n    {\n        email,\n        primary_email: primaryEmail,\n    },\n], (json) => [json.email, json.primary_email]);\nconst PermissionNotFound = createKnownErrorConstructor(KnownError, \"PERMISSION_NOT_FOUND\", (permissionId) => [\n    404,\n    `Permission \"${permissionId}\" not found. Make sure you created it on the dashboard.`,\n    {\n        permission_id: permissionId,\n    },\n], (json) => [json.permission_id]);\nconst ContainedPermissionNotFound = createKnownErrorConstructor(KnownError, \"CONTAINED_PERMISSION_NOT_FOUND\", (permissionId) => [\n    400,\n    `Contained permission with ID \"${permissionId}\" not found. Make sure you created it on the dashboard.`,\n    {\n        permission_id: permissionId,\n    },\n], (json) => [json.permission_id]);\nconst TeamNotFound = createKnownErrorConstructor(KnownError, \"TEAM_NOT_FOUND\", (teamId) => [\n    404,\n    `Team ${teamId} not found.`,\n    {\n        team_id: teamId,\n    },\n], (json) => [json.team_id]);\nconst TeamAlreadyExists = createKnownErrorConstructor(KnownError, \"TEAM_ALREADY_EXISTS\", (teamId) => [\n    400,\n    `Team ${teamId} already exists.`,\n    {\n        team_id: teamId,\n    },\n], (json) => [json.team_id]);\nconst TeamMembershipNotFound = createKnownErrorConstructor(KnownError, \"TEAM_MEMBERSHIP_NOT_FOUND\", (teamId, userId) => [\n    404,\n    `User ${userId} is not found in team ${teamId}.`,\n    {\n        team_id: teamId,\n        user_id: userId,\n    },\n], (json) => [json.team_id, json.user_id]);\nconst EmailTemplateAlreadyExists = createKnownErrorConstructor(KnownError, \"EMAIL_TEMPLATE_ALREADY_EXISTS\", () => [\n    400,\n    \"Email template already exists.\",\n], () => []);\nconst OAuthConnectionNotConnectedToUser = createKnownErrorConstructor(KnownError, \"OAUTH_CONNECTION_NOT_CONNECTED_TO_USER\", () => [\n    400,\n    \"The OAuth connection is not connected to any user.\",\n], () => []);\nconst OAuthConnectionAlreadyConnectedToAnotherUser = createKnownErrorConstructor(KnownError, \"OAUTH_CONNECTION_ALREADY_CONNECTED_TO_ANOTHER_USER\", () => [\n    400,\n    \"The OAuth connection is already connected to another user.\",\n], () => []);\nconst OAuthConnectionDoesNotHaveRequiredScope = createKnownErrorConstructor(KnownError, \"OAUTH_CONNECTION_DOES_NOT_HAVE_REQUIRED_SCOPE\", () => [\n    400,\n    \"The OAuth connection does not have the required scope.\",\n], () => []);\nconst OAuthExtraScopeNotAvailableWithSharedOAuthKeys = createKnownErrorConstructor(KnownError, \"OAUTH_EXTRA_SCOPE_NOT_AVAILABLE_WITH_SHARED_OAUTH_KEYS\", () => [\n    400,\n    \"Extra scopes are not available with shared OAuth keys. Please add your own OAuth keys on the Stack dashboard to use extra scopes.\",\n], () => []);\nconst OAuthAccessTokenNotAvailableWithSharedOAuthKeys = createKnownErrorConstructor(KnownError, \"OAUTH_ACCESS_TOKEN_NOT_AVAILABLE_WITH_SHARED_OAUTH_KEYS\", () => [\n    400,\n    \"Access tokens are not available with shared OAuth keys. Please add your own OAuth keys on the Stack dashboard to use access tokens.\",\n], () => []);\nconst InvalidOAuthClientIdOrSecret = createKnownErrorConstructor(KnownError, \"INVALID_OAUTH_CLIENT_ID_OR_SECRET\", (clientId) => [\n    400,\n    \"The OAuth client ID or secret is invalid. The client ID must be equal to the project ID, and the client secret must be a publishable client key.\",\n    {\n        client_id: clientId ?? null,\n    },\n], (json) => [json.client_id ?? undefined]);\nconst InvalidScope = createKnownErrorConstructor(KnownError, \"INVALID_SCOPE\", (scope) => [\n    400,\n    `The scope \"${scope}\" is not a valid OAuth scope for Stack.`,\n], (json) => [json.scope]);\nconst UserAlreadyConnectedToAnotherOAuthConnection = createKnownErrorConstructor(KnownError, \"USER_ALREADY_CONNECTED_TO_ANOTHER_OAUTH_CONNECTION\", () => [\n    400,\n    \"The user is already connected to another OAuth account. Did you maybe selected the wrong account?\",\n], () => []);\nconst OuterOAuthTimeout = createKnownErrorConstructor(KnownError, \"OUTER_OAUTH_TIMEOUT\", () => [\n    408,\n    \"The OAuth flow has timed out. Please sign in again.\",\n], () => []);\nconst OAuthProviderNotFoundOrNotEnabled = createKnownErrorConstructor(KnownError, \"OAUTH_PROVIDER_NOT_FOUND_OR_NOT_ENABLED\", () => [\n    400,\n    \"The OAuth provider is not found or not enabled.\",\n], () => []);\nconst MultiFactorAuthenticationRequired = createKnownErrorConstructor(KnownError, \"MULTI_FACTOR_AUTHENTICATION_REQUIRED\", (attemptCode) => [\n    400,\n    `Multi-factor authentication is required for this user.`,\n    {\n        attempt_code: attemptCode,\n    },\n], (json) => [json.attempt_code]);\nconst InvalidTotpCode = createKnownErrorConstructor(KnownError, \"INVALID_TOTP_CODE\", () => [\n    400,\n    \"The TOTP code is invalid. Please try again.\",\n], () => []);\nconst UserAuthenticationRequired = createKnownErrorConstructor(KnownError, \"USER_AUTHENTICATION_REQUIRED\", () => [\n    401,\n    \"User authentication required for this endpoint.\",\n], () => []);\nconst TeamMembershipAlreadyExists = createKnownErrorConstructor(KnownError, \"TEAM_MEMBERSHIP_ALREADY_EXISTS\", () => [\n    400,\n    \"Team membership already exists.\",\n], () => []);\nconst TeamPermissionRequired = createKnownErrorConstructor(KnownError, \"TEAM_PERMISSION_REQUIRED\", (teamId, userId, permissionId) => [\n    401,\n    `User ${userId} does not have permission ${permissionId} in team ${teamId}.`,\n    {\n        team_id: teamId,\n        user_id: userId,\n        permission_id: permissionId,\n    },\n], (json) => [json.team_id, json.user_id, json.permission_id]);\nconst TeamPermissionNotFound = createKnownErrorConstructor(KnownError, \"TEAM_PERMISSION_NOT_FOUND\", (teamId, userId, permissionId) => [\n    401,\n    `User ${userId} does not have permission ${permissionId} in team ${teamId}.`,\n    {\n        team_id: teamId,\n        user_id: userId,\n        permission_id: permissionId,\n    },\n], (json) => [json.team_id, json.user_id, json.permission_id]);\nconst InvalidSharedOAuthProviderId = createKnownErrorConstructor(KnownError, \"INVALID_SHARED_OAUTH_PROVIDER_ID\", (providerId) => [\n    400,\n    `The shared OAuth provider with ID ${providerId} is not valid.`,\n    {\n        provider_id: providerId,\n    },\n], (json) => [json.provider_id]);\nconst InvalidStandardOAuthProviderId = createKnownErrorConstructor(KnownError, \"INVALID_STANDARD_OAUTH_PROVIDER_ID\", (providerId) => [\n    400,\n    `The standard OAuth provider with ID ${providerId} is not valid.`,\n    {\n        provider_id: providerId,\n    },\n], (json) => [json.provider_id]);\nconst InvalidAuthorizationCode = createKnownErrorConstructor(KnownError, \"INVALID_AUTHORIZATION_CODE\", () => [\n    400,\n    \"The given authorization code is invalid.\",\n], () => []);\nconst KnownErrors = {\n    UnsupportedError,\n    BodyParsingError,\n    SchemaError,\n    AllOverloadsFailed,\n    ProjectAuthenticationError,\n    InvalidProjectAuthentication,\n    ProjectKeyWithoutRequestType,\n    InvalidRequestType,\n    RequestTypeWithoutProjectId,\n    ProjectKeyWithoutAccessType,\n    InvalidAccessType,\n    AccessTypeWithoutProjectId,\n    AccessTypeRequired,\n    CannotGetOwnUserWithoutUser,\n    InsufficientAccessType,\n    InvalidPublishableClientKey,\n    InvalidSecretServerKey,\n    InvalidSuperSecretAdminKey,\n    InvalidAdminAccessToken,\n    UnparsableAdminAccessToken,\n    AdminAccessTokenExpired,\n    InvalidProjectForAdminAccessToken,\n    AdminAccessTokenIsNotAdmin,\n    ProjectAuthenticationRequired,\n    ClientAuthenticationRequired,\n    ServerAuthenticationRequired,\n    ClientOrServerAuthenticationRequired,\n    ClientOrAdminAuthenticationRequired,\n    ClientOrServerOrAdminAuthenticationRequired,\n    AdminAuthenticationRequired,\n    ExpectedInternalProject,\n    SessionAuthenticationError,\n    InvalidSessionAuthentication,\n    InvalidAccessToken,\n    UnparsableAccessToken,\n    AccessTokenExpired,\n    InvalidProjectForAccessToken,\n    RefreshTokenError,\n    ProviderRejected,\n    RefreshTokenNotFoundOrExpired,\n    UserEmailAlreadyExists,\n    UserIdDoesNotExist,\n    UserNotFound,\n    ApiKeyNotFound,\n    ProjectNotFound,\n    SignUpNotEnabled,\n    PasswordAuthenticationNotEnabled,\n    EmailPasswordMismatch,\n    RedirectUrlNotWhitelisted,\n    PasswordRequirementsNotMet,\n    PasswordTooShort,\n    PasswordTooLong,\n    UserDoesNotHavePassword,\n    VerificationCodeError,\n    VerificationCodeNotFound,\n    VerificationCodeExpired,\n    VerificationCodeAlreadyUsed,\n    PasswordConfirmationMismatch,\n    EmailAlreadyVerified,\n    EmailNotAssociatedWithUser,\n    EmailIsNotPrimaryEmail,\n    PermissionNotFound,\n    ContainedPermissionNotFound,\n    TeamNotFound,\n    TeamMembershipNotFound,\n    EmailTemplateAlreadyExists,\n    OAuthConnectionNotConnectedToUser,\n    OAuthConnectionAlreadyConnectedToAnotherUser,\n    OAuthConnectionDoesNotHaveRequiredScope,\n    OAuthExtraScopeNotAvailableWithSharedOAuthKeys,\n    OAuthAccessTokenNotAvailableWithSharedOAuthKeys,\n    InvalidOAuthClientIdOrSecret,\n    InvalidScope,\n    UserAlreadyConnectedToAnotherOAuthConnection,\n    OuterOAuthTimeout,\n    OAuthProviderNotFoundOrNotEnabled,\n    MultiFactorAuthenticationRequired,\n    InvalidTotpCode,\n    UserAuthenticationRequired,\n    TeamMembershipAlreadyExists,\n    TeamPermissionRequired,\n    InvalidSharedOAuthProviderId,\n    InvalidStandardOAuthProviderId,\n    InvalidAuthorizationCode,\n    TeamPermissionNotFound,\n};\n// ensure that all known error codes are unique\nconst knownErrorCodes = new Set();\nfor (const [_, KnownError] of Object.entries(KnownErrors)) {\n    if (knownErrorCodes.has(KnownError.errorCode)) {\n        throw new Error(`Duplicate known error code: ${KnownError.errorCode}`);\n    }\n    knownErrorCodes.add(KnownError.errorCode);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3Qva25vd24tZXJyb3JzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTRFO0FBQzNCO0FBQ047QUFDcEMseUJBQXlCLHNEQUFXO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRDtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0Msd0JBQXdCLElBQUk7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsdURBQVEsMkZBQTJGLEtBQUs7QUFDcko7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1JQUFtSSxVQUFVLElBQUksYUFBYTtBQUM5SjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QywwREFBWTtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsVUFBVTtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdMQUF3TCxrQkFBa0I7QUFDMU07QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLCtCQUErQix1REFBUTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsdURBQVE7QUFDdkI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxJQUFJLHdEQUFRO0FBQ1o7O0FBRUEsVUFBVSw2QkFBNkIsd0RBQVE7QUFDL0MscUJBQXFCLE1BQU0sSUFBSTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLDZCQUE2Qix1REFBUTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUZBQXVGLFlBQVk7QUFDbkc7QUFDQSx5QkFBeUIsdURBQVE7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsWUFBWTtBQUN2RDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUZBQXVGLFdBQVc7QUFDbEc7QUFDQSx3QkFBd0IsdURBQVE7QUFDaEM7QUFDQTtBQUNBO0FBQ0EsSUFBSSx3REFBUTtBQUNaLDRDQUE0QyxXQUFXO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsSUFBSSx3REFBUTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLGdDQUFnQyxFQUFFLGlCQUFpQixhQUFhLGlCQUFpQjtBQUMvSDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELDBCQUEwQjtBQUNsRjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCwwQkFBMEI7QUFDcEY7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSwrREFBK0QsMEJBQTBCO0FBQ3pGO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLFFBQVE7QUFDMUM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDhEQUFtQjtBQUNyQztBQUNBO0FBQ0EsbUJBQW1CLFdBQVc7QUFDOUI7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxVQUFVO0FBQ3ZEO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSx3QkFBd0IsdURBQVE7QUFDaEM7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLFVBQVU7QUFDdEQ7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLHVCQUF1Qix1REFBUTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLE1BQU0sMENBQTBDLGFBQWE7QUFDdEY7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixhQUFhO0FBQ2hDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLGFBQWE7QUFDbEQ7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxZQUFZLFFBQVE7QUFDcEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxZQUFZLFFBQVE7QUFDcEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxZQUFZLFFBQVEsdUJBQXVCLE9BQU87QUFDbEQ7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsTUFBTTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxRQUFRLDJCQUEyQixjQUFjLFVBQVUsT0FBTztBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxZQUFZLFFBQVEsMkJBQTJCLGNBQWMsVUFBVSxPQUFPO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxZQUFZO0FBQ3JEO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLFlBQVk7QUFDdkQ7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBdUQscUJBQXFCO0FBQzVFO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL21hcmtlcnBsQUljZS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9rbm93bi1lcnJvcnMuanM/MWMxYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdGFja0Fzc2VydGlvbkVycm9yLCBTdGF0dXNFcnJvciwgdGhyb3dFcnIgfSBmcm9tIFwiLi91dGlscy9lcnJvcnNcIjtcbmltcG9ydCB7IGlkZW50aXR5QXJncyB9IGZyb20gXCIuL3V0aWxzL2Z1bmN0aW9uc1wiO1xuaW1wb3J0IHsgZGVpbmRlbnQgfSBmcm9tIFwiLi91dGlscy9zdHJpbmdzXCI7XG5leHBvcnQgY2xhc3MgS25vd25FcnJvciBleHRlbmRzIFN0YXR1c0Vycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihzdGF0dXNDb2RlLCBodW1hblJlYWRhYmxlTWVzc2FnZSwgZGV0YWlscykge1xuICAgICAgICBzdXBlcihzdGF0dXNDb2RlLCBodW1hblJlYWRhYmxlTWVzc2FnZSk7XG4gICAgICAgIHRoaXMuc3RhdHVzQ29kZSA9IHN0YXR1c0NvZGU7XG4gICAgICAgIHRoaXMuaHVtYW5SZWFkYWJsZU1lc3NhZ2UgPSBodW1hblJlYWRhYmxlTWVzc2FnZTtcbiAgICAgICAgdGhpcy5kZXRhaWxzID0gZGV0YWlscztcbiAgICAgICAgdGhpcy5uYW1lID0gXCJLbm93bkVycm9yXCI7XG4gICAgfVxuICAgIGdldEJvZHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoSlNPTi5zdHJpbmdpZnkodGhpcy50b0Rlc2NyaXB0aXZlSnNvbigpLCB1bmRlZmluZWQsIDIpKTtcbiAgICB9XG4gICAgZ2V0SGVhZGVycygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFtcImFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLThcIl0sXG4gICAgICAgICAgICBcIlgtU3RhY2stS25vd24tRXJyb3JcIjogW3RoaXMuZXJyb3JDb2RlXSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgdG9EZXNjcmlwdGl2ZUpzb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb2RlOiB0aGlzLmVycm9yQ29kZSxcbiAgICAgICAgICAgIC4uLnRoaXMuZGV0YWlscyA/IHsgZGV0YWlsczogdGhpcy5kZXRhaWxzIH0gOiB7fSxcbiAgICAgICAgICAgIGVycm9yOiB0aGlzLmh1bWFuUmVhZGFibGVNZXNzYWdlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXQgZXJyb3JDb2RlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci5lcnJvckNvZGUgPz8gdGhyb3dFcnIoYENhbid0IGZpbmQgZXJyb3IgY29kZSBmb3IgdGhpcyBLbm93bkVycm9yLiBJcyBpdHMgY29uc3RydWN0b3IgYSBLbm93bkVycm9yQ29uc3RydWN0b3I/ICR7dGhpc31gKTtcbiAgICB9XG4gICAgc3RhdGljIGNvbnN0cnVjdG9yQXJnc0Zyb21Kc29uKGpzb24pIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIDQwMCxcbiAgICAgICAgICAgIGpzb24ubWVzc2FnZSxcbiAgICAgICAgICAgIGpzb24sXG4gICAgICAgIF07XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tSnNvbihqc29uKSB7XG4gICAgICAgIGZvciAoY29uc3QgW18sIEtub3duRXJyb3JUeXBlXSBvZiBPYmplY3QuZW50cmllcyhLbm93bkVycm9ycykpIHtcbiAgICAgICAgICAgIGlmIChqc29uLmNvZGUgPT09IEtub3duRXJyb3JUeXBlLnByb3RvdHlwZS5lcnJvckNvZGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb25zdHJ1Y3RvckFyZ3MgPSBLbm93bkVycm9yVHlwZS5jb25zdHJ1Y3RvckFyZ3NGcm9tSnNvbihqc29uKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEtub3duRXJyb3JUeXBlKFxuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgICAgICAgICAuLi5jb25zdHJ1Y3RvckFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBLbm93bkVycm9yIGNvZGUuIFlvdSBtYXkgbmVlZCB0byB1cGRhdGUgeW91ciB2ZXJzaW9uIG9mIFN0YWNrIHRvIHNlZSBtb3JlIGRldGFpbGVkIGluZm9ybWF0aW9uLiAke2pzb24uY29kZX06ICR7anNvbi5tZXNzYWdlfWApO1xuICAgIH1cbn1cbmNvbnN0IGtub3duRXJyb3JDb25zdHJ1Y3RvckVycm9yQ29kZVNlbnRpbmVsID0gU3ltYm9sKFwia25vd25FcnJvckNvbnN0cnVjdG9yRXJyb3JDb2RlU2VudGluZWxcIik7XG5mdW5jdGlvbiBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoU3VwZXJDbGFzcywgZXJyb3JDb2RlLCBjcmVhdGUsIGNvbnN0cnVjdG9yQXJnc0Zyb21Kc29uKSB7XG4gICAgY29uc3QgY3JlYXRlRm4gPSBjcmVhdGUgPT09IFwiaW5oZXJpdFwiID8gaWRlbnRpdHlBcmdzIDogY3JlYXRlO1xuICAgIGNvbnN0IGNvbnN0cnVjdG9yQXJnc0Zyb21Kc29uRm4gPSBjb25zdHJ1Y3RvckFyZ3NGcm9tSnNvbiA9PT0gXCJpbmhlcml0XCIgPyBTdXBlckNsYXNzLmNvbnN0cnVjdG9yQXJnc0Zyb21Kc29uIDogY29uc3RydWN0b3JBcmdzRnJvbUpzb247XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciB0aGlzIGlzIG5vdCBhIG1peGluLCBidXQgVFMgZGV0ZWN0cyBpdCBhcyBvbmVcbiAgICBjbGFzcyBLbm93bkVycm9ySW1wbCBleHRlbmRzIFN1cGVyQ2xhc3Mge1xuICAgICAgICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7XG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICAgICAgICBzdXBlciguLi5jcmVhdGVGbiguLi5hcmdzKSk7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBgS25vd25FcnJvcjwke2Vycm9yQ29kZX0+YDtcbiAgICAgICAgICAgIHRoaXMuY29uc3RydWN0b3JBcmdzID0gYXJncztcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgY29uc3RydWN0b3JBcmdzRnJvbUpzb24oanNvbikge1xuICAgICAgICAgICAgcmV0dXJuIGNvbnN0cnVjdG9yQXJnc0Zyb21Kc29uRm4oanNvbi5kZXRhaWxzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBLbm93bkVycm9ySW1wbC5lcnJvckNvZGUgPSBlcnJvckNvZGU7XG4gICAgO1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICByZXR1cm4gS25vd25FcnJvckltcGw7XG59XG5jb25zdCBVbnN1cHBvcnRlZEVycm9yID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiVU5TVVBQT1JURURfRVJST1JcIiwgKG9yaWdpbmFsRXJyb3JDb2RlKSA9PiBbXG4gICAgNTAwLFxuICAgIGBBbiBlcnJvciBvY2N1cnJlZCB0aGF0IGlzIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkIChwb3NzaWJseSBiZWNhdXNlIGl0IHdhcyBhZGRlZCBpbiBhIHZlcnNpb24gb2YgU3RhY2sgdGhhdCBpcyBuZXdlciB0aGFuIHRoaXMgY2xpZW50KS4gVGhlIG9yaWdpbmFsIHVuc3VwcG9ydGVkIGVycm9yIGNvZGUgd2FzOiAke29yaWdpbmFsRXJyb3JDb2RlfWAsXG4gICAge1xuICAgICAgICBvcmlnaW5hbEVycm9yQ29kZSxcbiAgICB9LFxuXSwgKGpzb24pID0+IFtcbiAgICBqc29uPy5vcmlnaW5hbEVycm9yQ29kZSA/PyB0aHJvd0VycihcIm9yaWdpbmFsRXJyb3JDb2RlIG5vdCBmb3VuZCBpbiBVbnN1cHBvcnRlZEVycm9yIGRldGFpbHNcIiksXG5dKTtcbmNvbnN0IEJvZHlQYXJzaW5nRXJyb3IgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJCT0RZX1BBUlNJTkdfRVJST1JcIiwgKG1lc3NhZ2UpID0+IFtcbiAgICA0MDAsXG4gICAgbWVzc2FnZSxcbl0sIChqc29uKSA9PiBbanNvbi5tZXNzYWdlXSk7XG5jb25zdCBTY2hlbWFFcnJvciA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihLbm93bkVycm9yLCBcIlNDSEVNQV9FUlJPUlwiLCAobWVzc2FnZSkgPT4gW1xuICAgIDQwMCxcbiAgICBtZXNzYWdlIHx8IHRocm93RXJyKFwiU2NoZW1hRXJyb3IgcmVxdWlyZXMgYSBtZXNzYWdlXCIpLFxuICAgIHtcbiAgICAgICAgbWVzc2FnZSxcbiAgICB9LFxuXSwgKGpzb24pID0+IFtqc29uLm1lc3NhZ2VdKTtcbmNvbnN0IEFsbE92ZXJsb2Fkc0ZhaWxlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihLbm93bkVycm9yLCBcIkFMTF9PVkVSTE9BRFNfRkFJTEVEXCIsIChvdmVybG9hZEVycm9ycykgPT4gW1xuICAgIDQwMCxcbiAgICBkZWluZGVudCBgXG4gICAgICBUaGlzIGVuZHBvaW50IGhhcyBtdWx0aXBsZSBvdmVybG9hZHMsIGJ1dCB0aGV5IGFsbCBmYWlsZWQgdG8gcHJvY2VzcyB0aGUgcmVxdWVzdC5cblxuICAgICAgICAke292ZXJsb2FkRXJyb3JzLm1hcCgoZSwgaSkgPT4gZGVpbmRlbnQgYFxuICAgICAgICAgIE92ZXJsb2FkICR7aSArIDF9OiAke0pTT04uc3RyaW5naWZ5KGUsIHVuZGVmaW5lZCwgMil9XG4gICAgICAgIGApLmpvaW4oXCJcXG5cXG5cIil9XG4gICAgYCxcbiAgICB7XG4gICAgICAgIG92ZXJsb2FkX2Vycm9yczogb3ZlcmxvYWRFcnJvcnMsXG4gICAgfSxcbl0sIChqc29uKSA9PiBbXG4gICAganNvbj8ub3ZlcmxvYWRfZXJyb3JzID8/IHRocm93RXJyKFwib3ZlcmxvYWRfZXJyb3JzIG5vdCBmb3VuZCBpbiBBbGxPdmVybG9hZHNGYWlsZWQgZGV0YWlsc1wiKSxcbl0pO1xuY29uc3QgUHJvamVjdEF1dGhlbnRpY2F0aW9uRXJyb3IgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJQUk9KRUNUX0FVVEhFTlRJQ0FUSU9OX0VSUk9SXCIsIFwiaW5oZXJpdFwiLCBcImluaGVyaXRcIik7XG5jb25zdCBJbnZhbGlkUHJvamVjdEF1dGhlbnRpY2F0aW9uID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFByb2plY3RBdXRoZW50aWNhdGlvbkVycm9yLCBcIklOVkFMSURfUFJPSkVDVF9BVVRIRU5USUNBVElPTlwiLCBcImluaGVyaXRcIiwgXCJpbmhlcml0XCIpO1xuLy8gVE9ETyBuZXh0LXJlbGVhc2U6IGRlbGV0ZSBkZXByZWNhdGVkIGVycm9yIHR5cGVcbi8qKlxuICogQGRlcHJlY2F0ZWQgVXNlIFByb2plY3RLZXlXaXRob3V0QWNjZXNzVHlwZSBpbnN0ZWFkXG4gKi9cbmNvbnN0IFByb2plY3RLZXlXaXRob3V0UmVxdWVzdFR5cGUgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoSW52YWxpZFByb2plY3RBdXRoZW50aWNhdGlvbiwgXCJQUk9KRUNUX0tFWV9XSVRIT1VUX1JFUVVFU1RfVFlQRVwiLCAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiRWl0aGVyIGFuIEFQSSBrZXkgb3IgYW4gYWRtaW4gYWNjZXNzIHRva2VuIHdhcyBwcm92aWRlZCwgYnV0IHRoZSB4LXN0YWNrLWFjY2Vzcy10eXBlIGhlYWRlciBpcyBtaXNzaW5nLiBTZXQgaXQgdG8gJ2NsaWVudCcsICdzZXJ2ZXInLCBvciAnYWRtaW4nIGFzIGFwcHJvcHJpYXRlLlwiLFxuXSwgKCkgPT4gW10pO1xuLy8gVE9ETyBuZXh0LXJlbGVhc2U6IGRlbGV0ZSBkZXByZWNhdGVkIGVycm9yIHR5cGVcbi8qKlxuICogQGRlcHJlY2F0ZWQgVXNlIEludmFsaWRBY2Nlc3NUeXBlIGluc3RlYWRcbiAqL1xuY29uc3QgSW52YWxpZFJlcXVlc3RUeXBlID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEludmFsaWRQcm9qZWN0QXV0aGVudGljYXRpb24sIFwiSU5WQUxJRF9SRVFVRVNUX1RZUEVcIiwgKHJlcXVlc3RUeXBlKSA9PiBbXG4gICAgNDAwLFxuICAgIGBUaGUgeC1zdGFjay1hY2Nlc3MtdHlwZSBoZWFkZXIgbXVzdCBiZSAnY2xpZW50JywgJ3NlcnZlcicsIG9yICdhZG1pbicsIGJ1dCB3YXMgJyR7cmVxdWVzdFR5cGV9Jy5gLFxuXSwgKGpzb24pID0+IFtcbiAgICBqc29uPy5yZXF1ZXN0VHlwZSA/PyB0aHJvd0VycihcInJlcXVlc3RUeXBlIG5vdCBmb3VuZCBpbiBJbnZhbGlkUmVxdWVzdFR5cGUgZGV0YWlsc1wiKSxcbl0pO1xuLy8gVE9ETyBuZXh0LXJlbGVhc2U6IGRlbGV0ZSBkZXByZWNhdGVkIGVycm9yIHR5cGVcbi8qKlxuICogQGRlcHJlY2F0ZWQgVXNlIEFjY2Vzc1R5cGVXaXRob3V0UHJvamVjdElkIGluc3RlYWRcbiAqL1xuY29uc3QgUmVxdWVzdFR5cGVXaXRob3V0UHJvamVjdElkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEludmFsaWRQcm9qZWN0QXV0aGVudGljYXRpb24sIFwiUkVRVUVTVF9UWVBFX1dJVEhPVVRfUFJPSkVDVF9JRFwiLCAocmVxdWVzdFR5cGUpID0+IFtcbiAgICA0MDAsXG4gICAgYFRoZSB4LXN0YWNrLWFjY2Vzcy10eXBlIGhlYWRlciB3YXMgJyR7cmVxdWVzdFR5cGV9JywgYnV0IHRoZSB4LXN0YWNrLXByb2plY3QtaWQgaGVhZGVyIHdhcyBub3QgcHJvdmlkZWQuYCxcbiAgICB7XG4gICAgICAgIHJlcXVlc3RfdHlwZTogcmVxdWVzdFR5cGUsXG4gICAgfSxcbl0sIChqc29uKSA9PiBbanNvbi5yZXF1ZXN0X3R5cGVdKTtcbmNvbnN0IFByb2plY3RLZXlXaXRob3V0QWNjZXNzVHlwZSA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihJbnZhbGlkUHJvamVjdEF1dGhlbnRpY2F0aW9uLCBcIlBST0pFQ1RfS0VZX1dJVEhPVVRfQUNDRVNTX1RZUEVcIiwgKCkgPT4gW1xuICAgIDQwMCxcbiAgICBcIkVpdGhlciBhbiBBUEkga2V5IG9yIGFuIGFkbWluIGFjY2VzcyB0b2tlbiB3YXMgcHJvdmlkZWQsIGJ1dCB0aGUgeC1zdGFjay1hY2Nlc3MtdHlwZSBoZWFkZXIgaXMgbWlzc2luZy4gU2V0IGl0IHRvICdjbGllbnQnLCAnc2VydmVyJywgb3IgJ2FkbWluJyBhcyBhcHByb3ByaWF0ZS5cIixcbl0sICgpID0+IFtdKTtcbmNvbnN0IEludmFsaWRBY2Nlc3NUeXBlID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEludmFsaWRQcm9qZWN0QXV0aGVudGljYXRpb24sIFwiSU5WQUxJRF9BQ0NFU1NfVFlQRVwiLCAoYWNjZXNzVHlwZSkgPT4gW1xuICAgIDQwMCxcbiAgICBgVGhlIHgtc3RhY2stYWNjZXNzLXR5cGUgaGVhZGVyIG11c3QgYmUgJ2NsaWVudCcsICdzZXJ2ZXInLCBvciAnYWRtaW4nLCBidXQgd2FzICcke2FjY2Vzc1R5cGV9Jy5gLFxuXSwgKGpzb24pID0+IFtcbiAgICBqc29uPy5hY2Nlc3NUeXBlID8/IHRocm93RXJyKFwiYWNjZXNzVHlwZSBub3QgZm91bmQgaW4gSW52YWxpZEFjY2Vzc1R5cGUgZGV0YWlsc1wiKSxcbl0pO1xuY29uc3QgQWNjZXNzVHlwZVdpdGhvdXRQcm9qZWN0SWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoSW52YWxpZFByb2plY3RBdXRoZW50aWNhdGlvbiwgXCJBQ0NFU1NfVFlQRV9XSVRIT1VUX1BST0pFQ1RfSURcIiwgKGFjY2Vzc1R5cGUpID0+IFtcbiAgICA0MDAsXG4gICAgZGVpbmRlbnQgYFxuICAgICAgVGhlIHgtc3RhY2stYWNjZXNzLXR5cGUgaGVhZGVyIHdhcyAnJHthY2Nlc3NUeXBlfScsIGJ1dCB0aGUgeC1zdGFjay1wcm9qZWN0LWlkIGhlYWRlciB3YXMgbm90IHByb3ZpZGVkLlxuICAgICAgXG4gICAgICBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgc2VlIHRoZSBkb2NzIG9uIFJFU1QgQVBJIGF1dGhlbnRpY2F0aW9uOiBodHRwczovL2RvY3Muc3RhY2stYXV0aC5jb20vcmVzdC1hcGkvYXV0aCNhdXRoZW50aWNhdGlvblxuICAgIGAsXG4gICAge1xuICAgICAgICByZXF1ZXN0X3R5cGU6IGFjY2Vzc1R5cGUsXG4gICAgfSxcbl0sIChqc29uKSA9PiBbanNvbi5yZXF1ZXN0X3R5cGVdKTtcbmNvbnN0IEFjY2Vzc1R5cGVSZXF1aXJlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihJbnZhbGlkUHJvamVjdEF1dGhlbnRpY2F0aW9uLCBcIkFDQ0VTU19UWVBFX1JFUVVJUkVEXCIsICgpID0+IFtcbiAgICA0MDAsXG4gICAgZGVpbmRlbnQgYFxuICAgICAgWW91IG11c3Qgc3BlY2lmeSBhbiBhY2Nlc3MgbGV2ZWwgZm9yIHRoaXMgU3RhY2sgcHJvamVjdC4gTWFrZSBzdXJlIHByb2plY3QgQVBJIGtleXMgYXJlIHByb3ZpZGVkIChlZy4geC1zdGFjay1wdWJsaXNoYWJsZS1jbGllbnQta2V5KSBhbmQgeW91IHNldCB0aGUgeC1zdGFjay1hY2Nlc3MtdHlwZSBoZWFkZXIgdG8gJ2NsaWVudCcsICdzZXJ2ZXInLCBvciAnYWRtaW4nLlxuICAgICAgXG4gICAgICBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgc2VlIHRoZSBkb2NzIG9uIFJFU1QgQVBJIGF1dGhlbnRpY2F0aW9uOiBodHRwczovL2RvY3Muc3RhY2stYXV0aC5jb20vcmVzdC1hcGkvYXV0aCNhdXRoZW50aWNhdGlvblxuICAgIGAsXG5dLCAoKSA9PiBbXSk7XG5jb25zdCBJbnN1ZmZpY2llbnRBY2Nlc3NUeXBlID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEludmFsaWRQcm9qZWN0QXV0aGVudGljYXRpb24sIFwiSU5TVUZGSUNJRU5UX0FDQ0VTU19UWVBFXCIsIChhY3R1YWxBY2Nlc3NUeXBlLCBhbGxvd2VkQWNjZXNzVHlwZXMpID0+IFtcbiAgICA0MDEsXG4gICAgYFRoZSB4LXN0YWNrLWFjY2Vzcy10eXBlIGhlYWRlciBtdXN0IGJlICR7YWxsb3dlZEFjY2Vzc1R5cGVzLm1hcChzID0+IGAnJHtzfSdgKS5qb2luKFwiIG9yIFwiKX0sIGJ1dCB3YXMgJyR7YWN0dWFsQWNjZXNzVHlwZX0nLmAsXG4gICAge1xuICAgICAgICBhY3R1YWxfYWNjZXNzX3R5cGU6IGFjdHVhbEFjY2Vzc1R5cGUsXG4gICAgICAgIGFsbG93ZWRfYWNjZXNzX3R5cGVzOiBhbGxvd2VkQWNjZXNzVHlwZXMsXG4gICAgfSxcbl0sIChqc29uKSA9PiBbXG4gICAganNvbi5hY3R1YWxfYWNjZXNzX3R5cGUsXG4gICAganNvbi5hbGxvd2VkX2FjY2Vzc190eXBlcyxcbl0pO1xuY29uc3QgSW52YWxpZFB1Ymxpc2hhYmxlQ2xpZW50S2V5ID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEludmFsaWRQcm9qZWN0QXV0aGVudGljYXRpb24sIFwiSU5WQUxJRF9QVUJMSVNIQUJMRV9DTElFTlRfS0VZXCIsIChwcm9qZWN0SWQpID0+IFtcbiAgICA0MDEsXG4gICAgYFRoZSBwdWJsaXNoYWJsZSBrZXkgaXMgbm90IHZhbGlkIGZvciB0aGUgcHJvamVjdCAke0pTT04uc3RyaW5naWZ5KHByb2plY3RJZCl9LiBEb2VzIHRoZSBwcm9qZWN0IGFuZC9vciB0aGUga2V5IGV4aXN0P2AsXG4gICAge1xuICAgICAgICBwcm9qZWN0X2lkOiBwcm9qZWN0SWQsXG4gICAgfSxcbl0sIChqc29uKSA9PiBbanNvbi5wcm9qZWN0X2lkXSk7XG5jb25zdCBJbnZhbGlkU2VjcmV0U2VydmVyS2V5ID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEludmFsaWRQcm9qZWN0QXV0aGVudGljYXRpb24sIFwiSU5WQUxJRF9TRUNSRVRfU0VSVkVSX0tFWVwiLCAocHJvamVjdElkKSA9PiBbXG4gICAgNDAxLFxuICAgIGBUaGUgc2VjcmV0IHNlcnZlciBrZXkgaXMgbm90IHZhbGlkIGZvciB0aGUgcHJvamVjdCAke0pTT04uc3RyaW5naWZ5KHByb2plY3RJZCl9LiBEb2VzIHRoZSBwcm9qZWN0IGFuZC9vciB0aGUga2V5IGV4aXN0P2AsXG4gICAge1xuICAgICAgICBwcm9qZWN0X2lkOiBwcm9qZWN0SWQsXG4gICAgfSxcbl0sIChqc29uKSA9PiBbanNvbi5wcm9qZWN0X2lkXSk7XG5jb25zdCBJbnZhbGlkU3VwZXJTZWNyZXRBZG1pbktleSA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihJbnZhbGlkUHJvamVjdEF1dGhlbnRpY2F0aW9uLCBcIklOVkFMSURfU1VQRVJfU0VDUkVUX0FETUlOX0tFWVwiLCAocHJvamVjdElkKSA9PiBbXG4gICAgNDAxLFxuICAgIGBUaGUgc3VwZXIgc2VjcmV0IGFkbWluIGtleSBpcyBub3QgdmFsaWQgZm9yIHRoZSBwcm9qZWN0ICR7SlNPTi5zdHJpbmdpZnkocHJvamVjdElkKX0uIERvZXMgdGhlIHByb2plY3QgYW5kL29yIHRoZSBrZXkgZXhpc3Q/YCxcbiAgICB7XG4gICAgICAgIHByb2plY3RfaWQ6IHByb2plY3RJZCxcbiAgICB9LFxuXSwgKGpzb24pID0+IFtqc29uLnByb2plY3RfaWRdKTtcbmNvbnN0IEludmFsaWRBZG1pbkFjY2Vzc1Rva2VuID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEludmFsaWRQcm9qZWN0QXV0aGVudGljYXRpb24sIFwiSU5WQUxJRF9BRE1JTl9BQ0NFU1NfVE9LRU5cIiwgXCJpbmhlcml0XCIsIFwiaW5oZXJpdFwiKTtcbmNvbnN0IFVucGFyc2FibGVBZG1pbkFjY2Vzc1Rva2VuID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEludmFsaWRBZG1pbkFjY2Vzc1Rva2VuLCBcIlVOUEFSU0FCTEVfQURNSU5fQUNDRVNTX1RPS0VOXCIsICgpID0+IFtcbiAgICA0MDEsXG4gICAgXCJBZG1pbiBhY2Nlc3MgdG9rZW4gaXMgbm90IHBhcnNhYmxlLlwiLFxuXSwgKCkgPT4gW10pO1xuY29uc3QgQWRtaW5BY2Nlc3NUb2tlbkV4cGlyZWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoSW52YWxpZEFkbWluQWNjZXNzVG9rZW4sIFwiQURNSU5fQUNDRVNTX1RPS0VOX0VYUElSRURcIiwgKCkgPT4gW1xuICAgIDQwMSxcbiAgICBcIkFkbWluIGFjY2VzcyB0b2tlbiBoYXMgZXhwaXJlZC4gUGxlYXNlIHJlZnJlc2ggaXQgYW5kIHRyeSBhZ2Fpbi5cIixcbl0sICgpID0+IFtdKTtcbmNvbnN0IEludmFsaWRQcm9qZWN0Rm9yQWRtaW5BY2Nlc3NUb2tlbiA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihJbnZhbGlkQWRtaW5BY2Nlc3NUb2tlbiwgXCJJTlZBTElEX1BST0pFQ1RfRk9SX0FETUlOX0FDQ0VTU19UT0tFTlwiLCAoKSA9PiBbXG4gICAgNDAxLFxuICAgIFwiQWRtaW4gYWNjZXNzIHRva2VucyBtdXN0IGJlIGNyZWF0ZWQgb24gdGhlIGludGVybmFsIHByb2plY3QuXCIsXG5dLCAoKSA9PiBbXSk7XG5jb25zdCBBZG1pbkFjY2Vzc1Rva2VuSXNOb3RBZG1pbiA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihJbnZhbGlkQWRtaW5BY2Nlc3NUb2tlbiwgXCJBRE1JTl9BQ0NFU1NfVE9LRU5fSVNfTk9UX0FETUlOXCIsICgpID0+IFtcbiAgICA0MDEsXG4gICAgXCJBZG1pbiBhY2Nlc3MgdG9rZW4gZG9lcyBub3QgaGF2ZSB0aGUgcmVxdWlyZWQgcGVybWlzc2lvbnMgdG8gYWNjZXNzIHRoaXMgcHJvamVjdC5cIixcbl0sICgpID0+IFtdKTtcbi8qKlxuICogQGRlcHJlY2F0ZWQgVXNlIEluc3VmZmljaWVudEFjY2Vzc1R5cGUgaW5zdGVhZFxuICovXG5jb25zdCBQcm9qZWN0QXV0aGVudGljYXRpb25SZXF1aXJlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihQcm9qZWN0QXV0aGVudGljYXRpb25FcnJvciwgXCJQUk9KRUNUX0FVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEXCIsIFwiaW5oZXJpdFwiLCBcImluaGVyaXRcIik7XG4vKipcbiAqIEBkZXByZWNhdGVkIFVzZSBJbnN1ZmZpY2llbnRBY2Nlc3NUeXBlIGluc3RlYWRcbiAqL1xuY29uc3QgQ2xpZW50QXV0aGVudGljYXRpb25SZXF1aXJlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihQcm9qZWN0QXV0aGVudGljYXRpb25SZXF1aXJlZCwgXCJDTElFTlRfQVVUSEVOVElDQVRJT05fUkVRVUlSRURcIiwgKCkgPT4gW1xuICAgIDQwMSxcbiAgICBcIlRoZSBwdWJsaXNoYWJsZSBjbGllbnQga2V5IG11c3QgYmUgcHJvdmlkZWQuXCIsXG5dLCAoKSA9PiBbXSk7XG4vKipcbiAqIEBkZXByZWNhdGVkIFVzZSBJbnN1ZmZpY2llbnRBY2Nlc3NUeXBlIGluc3RlYWRcbiAqL1xuY29uc3QgU2VydmVyQXV0aGVudGljYXRpb25SZXF1aXJlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihQcm9qZWN0QXV0aGVudGljYXRpb25SZXF1aXJlZCwgXCJTRVJWRVJfQVVUSEVOVElDQVRJT05fUkVRVUlSRURcIiwgKCkgPT4gW1xuICAgIDQwMSxcbiAgICBcIlRoZSBzZWNyZXQgc2VydmVyIGtleSBtdXN0IGJlIHByb3ZpZGVkLlwiLFxuXSwgKCkgPT4gW10pO1xuLyoqXG4gKiBAZGVwcmVjYXRlZCBVc2UgSW5zdWZmaWNpZW50QWNjZXNzVHlwZSBpbnN0ZWFkXG4gKi9cbmNvbnN0IENsaWVudE9yU2VydmVyQXV0aGVudGljYXRpb25SZXF1aXJlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihQcm9qZWN0QXV0aGVudGljYXRpb25SZXF1aXJlZCwgXCJDTElFTlRfT1JfU0VSVkVSX0FVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEXCIsICgpID0+IFtcbiAgICA0MDEsXG4gICAgXCJFaXRoZXIgdGhlIHB1Ymxpc2hhYmxlIGNsaWVudCBrZXkgb3IgdGhlIHNlY3JldCBzZXJ2ZXIga2V5IG11c3QgYmUgcHJvdmlkZWQuXCIsXG5dLCAoKSA9PiBbXSk7XG4vKipcbiAqIEBkZXByZWNhdGVkIFVzZSBJbnN1ZmZpY2llbnRBY2Nlc3NUeXBlIGluc3RlYWRcbiAqL1xuY29uc3QgQ2xpZW50T3JBZG1pbkF1dGhlbnRpY2F0aW9uUmVxdWlyZWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoUHJvamVjdEF1dGhlbnRpY2F0aW9uUmVxdWlyZWQsIFwiQ0xJRU5UX09SX0FETUlOX0FVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEXCIsICgpID0+IFtcbiAgICA0MDEsXG4gICAgXCJFaXRoZXIgdGhlIHB1Ymxpc2hhYmxlIGNsaWVudCBrZXkgb3IgdGhlIHN1cGVyIHNlY3JldCBhZG1pbiBrZXkgbXVzdCBiZSBwcm92aWRlZC5cIixcbl0sICgpID0+IFtdKTtcbi8qKlxuICogQGRlcHJlY2F0ZWQgVXNlIEluc3VmZmljaWVudEFjY2Vzc1R5cGUgaW5zdGVhZFxuICovXG5jb25zdCBDbGllbnRPclNlcnZlck9yQWRtaW5BdXRoZW50aWNhdGlvblJlcXVpcmVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFByb2plY3RBdXRoZW50aWNhdGlvblJlcXVpcmVkLCBcIkNMSUVOVF9PUl9TRVJWRVJfT1JfQURNSU5fQVVUSEVOVElDQVRJT05fUkVRVUlSRURcIiwgKCkgPT4gW1xuICAgIDQwMSxcbiAgICBcIkVpdGhlciB0aGUgcHVibGlzaGFibGUgY2xpZW50IGtleSwgdGhlIHNlY3JldCBzZXJ2ZXIga2V5LCBvciB0aGUgc3VwZXIgc2VjcmV0IGFkbWluIGtleSBtdXN0IGJlIHByb3ZpZGVkLlwiLFxuXSwgKCkgPT4gW10pO1xuLyoqXG4gKiBAZGVwcmVjYXRlZCBVc2UgSW5zdWZmaWNpZW50QWNjZXNzVHlwZSBpbnN0ZWFkXG4gKi9cbmNvbnN0IEFkbWluQXV0aGVudGljYXRpb25SZXF1aXJlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihQcm9qZWN0QXV0aGVudGljYXRpb25SZXF1aXJlZCwgXCJBRE1JTl9BVVRIRU5USUNBVElPTl9SRVFVSVJFRFwiLCAoKSA9PiBbXG4gICAgNDAxLFxuICAgIFwiVGhlIHN1cGVyIHNlY3JldCBhZG1pbiBrZXkgbXVzdCBiZSBwcm92aWRlZC5cIixcbl0sICgpID0+IFtdKTtcbmNvbnN0IEV4cGVjdGVkSW50ZXJuYWxQcm9qZWN0ID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFByb2plY3RBdXRoZW50aWNhdGlvbkVycm9yLCBcIkVYUEVDVEVEX0lOVEVSTkFMX1BST0pFQ1RcIiwgKCkgPT4gW1xuICAgIDQwMSxcbiAgICBcIlRoZSBwcm9qZWN0IElEIGlzIGV4cGVjdGVkIHRvIGJlIGludGVybmFsLlwiLFxuXSwgKCkgPT4gW10pO1xuY29uc3QgU2Vzc2lvbkF1dGhlbnRpY2F0aW9uRXJyb3IgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJTRVNTSU9OX0FVVEhFTlRJQ0FUSU9OX0VSUk9SXCIsIFwiaW5oZXJpdFwiLCBcImluaGVyaXRcIik7XG5jb25zdCBJbnZhbGlkU2Vzc2lvbkF1dGhlbnRpY2F0aW9uID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFNlc3Npb25BdXRoZW50aWNhdGlvbkVycm9yLCBcIklOVkFMSURfU0VTU0lPTl9BVVRIRU5USUNBVElPTlwiLCBcImluaGVyaXRcIiwgXCJpbmhlcml0XCIpO1xuY29uc3QgSW52YWxpZEFjY2Vzc1Rva2VuID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEludmFsaWRTZXNzaW9uQXV0aGVudGljYXRpb24sIFwiSU5WQUxJRF9BQ0NFU1NfVE9LRU5cIiwgXCJpbmhlcml0XCIsIFwiaW5oZXJpdFwiKTtcbmNvbnN0IFVucGFyc2FibGVBY2Nlc3NUb2tlbiA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihJbnZhbGlkQWNjZXNzVG9rZW4sIFwiVU5QQVJTQUJMRV9BQ0NFU1NfVE9LRU5cIiwgKCkgPT4gW1xuICAgIDQwMSxcbiAgICBcIkFjY2VzcyB0b2tlbiBpcyBub3QgcGFyc2FibGUuXCIsXG5dLCAoKSA9PiBbXSk7XG5jb25zdCBBY2Nlc3NUb2tlbkV4cGlyZWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoSW52YWxpZEFjY2Vzc1Rva2VuLCBcIkFDQ0VTU19UT0tFTl9FWFBJUkVEXCIsICgpID0+IFtcbiAgICA0MDEsXG4gICAgXCJBY2Nlc3MgdG9rZW4gaGFzIGV4cGlyZWQuIFBsZWFzZSByZWZyZXNoIGl0IGFuZCB0cnkgYWdhaW4uXCIsXG5dLCAoKSA9PiBbXSk7XG5jb25zdCBJbnZhbGlkUHJvamVjdEZvckFjY2Vzc1Rva2VuID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEludmFsaWRBY2Nlc3NUb2tlbiwgXCJJTlZBTElEX1BST0pFQ1RfRk9SX0FDQ0VTU19UT0tFTlwiLCAoKSA9PiBbXG4gICAgNDAxLFxuICAgIFwiQWNjZXNzIHRva2VuIG5vdCB2YWxpZCBmb3IgdGhpcyBwcm9qZWN0LlwiLFxuXSwgKCkgPT4gW10pO1xuY29uc3QgUmVmcmVzaFRva2VuRXJyb3IgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJSRUZSRVNIX1RPS0VOX0VSUk9SXCIsIFwiaW5oZXJpdFwiLCBcImluaGVyaXRcIik7XG5jb25zdCBSZWZyZXNoVG9rZW5Ob3RGb3VuZE9yRXhwaXJlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihSZWZyZXNoVG9rZW5FcnJvciwgXCJSRUZSRVNIX1RPS0VOX05PVF9GT1VORF9PUl9FWFBJUkVEXCIsICgpID0+IFtcbiAgICA0MDEsXG4gICAgXCJSZWZyZXNoIHRva2VuIG5vdCBmb3VuZCBmb3IgdGhpcyBwcm9qZWN0LCBvciB0aGUgc2Vzc2lvbiBoYXMgZXhwaXJlZC9iZWVuIHJldm9rZWQuXCIsXG5dLCAoKSA9PiBbXSk7XG5jb25zdCBQcm92aWRlclJlamVjdGVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFJlZnJlc2hUb2tlbkVycm9yLCBcIlBST1ZJREVSX1JFSkVDVEVEXCIsICgpID0+IFtcbiAgICA0MDEsXG4gICAgXCJUaGUgcHJvdmlkZXIgcmVmdXNlZCB0byByZWZyZXNoIHRoZWlyIHRva2VuLiBUaGlzIHVzdWFsbHkgbWVhbnMgdGhhdCB0aGUgcHJvdmlkZXIgdXNlZCB0byBhdXRoZW50aWNhdGUgdGhlIHVzZXIgbm8gbG9uZ2VyIHJlZ2FyZHMgdGhpcyBzZXNzaW9uIGFzIHZhbGlkLCBhbmQgdGhlIHVzZXIgbXVzdCByZS1hdXRoZW50aWNhdGUuXCIsXG5dLCAoKSA9PiBbXSk7XG5jb25zdCBVc2VyRW1haWxBbHJlYWR5RXhpc3RzID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiVVNFUl9FTUFJTF9BTFJFQURZX0VYSVNUU1wiLCAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiVXNlciBhbHJlYWR5IGV4aXN0cy5cIixcbl0sICgpID0+IFtdKTtcbmNvbnN0IENhbm5vdEdldE93blVzZXJXaXRob3V0VXNlciA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihLbm93bkVycm9yLCBcIkNBTk5PVF9HRVRfT1dOX1VTRVJfV0lUSE9VVF9VU0VSXCIsICgpID0+IFtcbiAgICA0MDAsXG4gICAgXCJZb3UgaGF2ZSBzcGVjaWZpZWQgJ21lJyBhcyBhIHVzZXJJZCwgYnV0IGRpZCBub3QgcHJvdmlkZSBhdXRoZW50aWNhdGlvbiBmb3IgYSB1c2VyLlwiLFxuXSwgKCkgPT4gW10pO1xuY29uc3QgVXNlcklkRG9lc05vdEV4aXN0ID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiVVNFUl9JRF9ET0VTX05PVF9FWElTVFwiLCAodXNlcklkKSA9PiBbXG4gICAgNDAwLFxuICAgIGBUaGUgZ2l2ZW4gdXNlciB3aXRoIHRoZSBJRCAke3VzZXJJZH0gZG9lcyBub3QgZXhpc3QuYCxcbiAgICB7XG4gICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICB9LFxuXSwgKGpzb24pID0+IFtqc29uLnVzZXJfaWRdKTtcbmNvbnN0IFVzZXJOb3RGb3VuZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihLbm93bkVycm9yLCBcIlVTRVJfTk9UX0ZPVU5EXCIsICgpID0+IFtcbiAgICA0MDQsXG4gICAgXCJVc2VyIG5vdCBmb3VuZC5cIixcbl0sICgpID0+IFtdKTtcbmNvbnN0IEFwaUtleU5vdEZvdW5kID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiQVBJX0tFWV9OT1RfRk9VTkRcIiwgKCkgPT4gW1xuICAgIDQwNCxcbiAgICBcIkFQSSBrZXkgbm90IGZvdW5kLlwiLFxuXSwgKCkgPT4gW10pO1xuY29uc3QgUHJvamVjdE5vdEZvdW5kID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiUFJPSkVDVF9OT1RfRk9VTkRcIiwgKHByb2plY3RJZCkgPT4ge1xuICAgIGlmICh0eXBlb2YgcHJvamVjdElkICE9PSBcInN0cmluZ1wiKVxuICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcInByb2plY3RJZCBvZiBLbm93bkVycm9ycy5Qcm9qZWN0Tm90Rm91bmQgbXVzdCBiZSBhIHN0cmluZ1wiKTtcbiAgICByZXR1cm4gW1xuICAgICAgICA0MDQsXG4gICAgICAgIGBQcm9qZWN0ICR7cHJvamVjdElkfSBub3QgZm91bmQgb3IgaXMgbm90IGFjY2Vzc2libGUgd2l0aCB0aGUgY3VycmVudCB1c2VyLmAsXG4gICAgICAgIHtcbiAgICAgICAgICAgIHByb2plY3RfaWQ6IHByb2plY3RJZCxcbiAgICAgICAgfSxcbiAgICBdO1xufSwgKGpzb24pID0+IFtqc29uLnByb2plY3RfaWRdKTtcbmNvbnN0IFNpZ25VcE5vdEVuYWJsZWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJTSUdOX1VQX05PVF9FTkFCTEVEXCIsICgpID0+IFtcbiAgICA0MDAsXG4gICAgXCJDcmVhdGlvbiBvZiBuZXcgYWNjb3VudHMgaXMgbm90IGVuYWJsZWQgZm9yIHRoaXMgcHJvamVjdC4gUGxlYXNlIGFzayB0aGUgcHJvamVjdCBvd25lciB0byBlbmFibGUgaXQuXCIsXG5dLCAoKSA9PiBbXSk7XG5jb25zdCBQYXNzd29yZEF1dGhlbnRpY2F0aW9uTm90RW5hYmxlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihLbm93bkVycm9yLCBcIlBBU1NXT1JEX0FVVEhFTlRJQ0FUSU9OX05PVF9FTkFCTEVEXCIsICgpID0+IFtcbiAgICA0MDAsXG4gICAgXCJQYXNzd29yZCBhdXRoZW50aWNhdGlvbiBpcyBub3QgZW5hYmxlZCBmb3IgdGhpcyBwcm9qZWN0LlwiLFxuXSwgKCkgPT4gW10pO1xuY29uc3QgRW1haWxQYXNzd29yZE1pc21hdGNoID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiRU1BSUxfUEFTU1dPUkRfTUlTTUFUQ0hcIiwgKCkgPT4gW1xuICAgIDQwMCxcbiAgICBcIldyb25nIGUtbWFpbCBvciBwYXNzd29yZC5cIixcbl0sICgpID0+IFtdKTtcbmNvbnN0IFJlZGlyZWN0VXJsTm90V2hpdGVsaXN0ZWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJSRURJUkVDVF9VUkxfTk9UX1dISVRFTElTVEVEXCIsICgpID0+IFtcbiAgICA0MDAsXG4gICAgXCJSZWRpcmVjdCBVUkwgbm90IHdoaXRlbGlzdGVkLlwiLFxuXSwgKCkgPT4gW10pO1xuY29uc3QgUGFzc3dvcmRSZXF1aXJlbWVudHNOb3RNZXQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJQQVNTV09SRF9SRVFVSVJFTUVOVFNfTk9UX01FVFwiLCBcImluaGVyaXRcIiwgXCJpbmhlcml0XCIpO1xuY29uc3QgUGFzc3dvcmRUb29TaG9ydCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihQYXNzd29yZFJlcXVpcmVtZW50c05vdE1ldCwgXCJQQVNTV09SRF9UT09fU0hPUlRcIiwgKG1pbkxlbmd0aCkgPT4gW1xuICAgIDQwMCxcbiAgICBgUGFzc3dvcmQgdG9vIHNob3J0LiBNaW5pbXVtIGxlbmd0aCBpcyAke21pbkxlbmd0aH0uYCxcbiAgICB7XG4gICAgICAgIG1pbl9sZW5ndGg6IG1pbkxlbmd0aCxcbiAgICB9LFxuXSwgKGpzb24pID0+IFtcbiAgICBqc29uPy5taW5fbGVuZ3RoID8/IHRocm93RXJyKFwibWluX2xlbmd0aCBub3QgZm91bmQgaW4gUGFzc3dvcmRUb29TaG9ydCBkZXRhaWxzXCIpLFxuXSk7XG5jb25zdCBQYXNzd29yZFRvb0xvbmcgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoUGFzc3dvcmRSZXF1aXJlbWVudHNOb3RNZXQsIFwiUEFTU1dPUkRfVE9PX0xPTkdcIiwgKG1heExlbmd0aCkgPT4gW1xuICAgIDQwMCxcbiAgICBgUGFzc3dvcmQgdG9vIGxvbmcuIE1heGltdW0gbGVuZ3RoIGlzICR7bWF4TGVuZ3RofS5gLFxuICAgIHtcbiAgICAgICAgbWF4TGVuZ3RoLFxuICAgIH0sXG5dLCAoanNvbikgPT4gW1xuICAgIGpzb24/Lm1heExlbmd0aCA/PyB0aHJvd0VycihcIm1heExlbmd0aCBub3QgZm91bmQgaW4gUGFzc3dvcmRUb29Mb25nIGRldGFpbHNcIiksXG5dKTtcbmNvbnN0IFVzZXJEb2VzTm90SGF2ZVBhc3N3b3JkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiVVNFUl9ET0VTX05PVF9IQVZFX1BBU1NXT1JEXCIsICgpID0+IFtcbiAgICA0MDAsXG4gICAgXCJUaGlzIHVzZXIgZG9lcyBub3QgaGF2ZSBwYXNzd29yZCBhdXRoZW50aWNhdGlvbiBlbmFibGVkLlwiLFxuXSwgKCkgPT4gW10pO1xuY29uc3QgVmVyaWZpY2F0aW9uQ29kZUVycm9yID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiVkVSSUZJQ0FUSU9OX0VSUk9SXCIsIFwiaW5oZXJpdFwiLCBcImluaGVyaXRcIik7XG5jb25zdCBWZXJpZmljYXRpb25Db2RlTm90Rm91bmQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoVmVyaWZpY2F0aW9uQ29kZUVycm9yLCBcIlZFUklGSUNBVElPTl9DT0RFX05PVF9GT1VORFwiLCAoKSA9PiBbXG4gICAgNDA0LFxuICAgIFwiVGhlIHZlcmlmaWNhdGlvbiBjb2RlIGRvZXMgbm90IGV4aXN0IGZvciB0aGlzIHByb2plY3QuXCIsXG5dLCAoKSA9PiBbXSk7XG5jb25zdCBWZXJpZmljYXRpb25Db2RlRXhwaXJlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihWZXJpZmljYXRpb25Db2RlRXJyb3IsIFwiVkVSSUZJQ0FUSU9OX0NPREVfRVhQSVJFRFwiLCAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiVGhlIHZlcmlmaWNhdGlvbiBjb2RlIGhhcyBleHBpcmVkLlwiLFxuXSwgKCkgPT4gW10pO1xuY29uc3QgVmVyaWZpY2F0aW9uQ29kZUFscmVhZHlVc2VkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFZlcmlmaWNhdGlvbkNvZGVFcnJvciwgXCJWRVJJRklDQVRJT05fQ09ERV9BTFJFQURZX1VTRURcIiwgKCkgPT4gW1xuICAgIDQwMCxcbiAgICBcIlRoZSB2ZXJpZmljYXRpb24gbGluayBoYXMgYWxyZWFkeSBiZWVuIHVzZWQuXCIsXG5dLCAoKSA9PiBbXSk7XG5jb25zdCBQYXNzd29yZENvbmZpcm1hdGlvbk1pc21hdGNoID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiUEFTU1dPUkRfQ09ORklSTUFUSU9OX01JU01BVENIXCIsICgpID0+IFtcbiAgICA0MDAsXG4gICAgXCJQYXNzd29yZHMgZG8gbm90IG1hdGNoLlwiLFxuXSwgKCkgPT4gW10pO1xuY29uc3QgRW1haWxBbHJlYWR5VmVyaWZpZWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJFTUFJTF9BTFJFQURZX1ZFUklGSUVEXCIsICgpID0+IFtcbiAgICA0MDAsXG4gICAgXCJUaGUgZS1tYWlsIGlzIGFscmVhZHkgdmVyaWZpZWQuXCIsXG5dLCAoKSA9PiBbXSk7XG5jb25zdCBFbWFpbE5vdEFzc29jaWF0ZWRXaXRoVXNlciA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihLbm93bkVycm9yLCBcIkVNQUlMX05PVF9BU1NPQ0lBVEVEX1dJVEhfVVNFUlwiLCAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiVGhlIGUtbWFpbCBpcyBub3QgYXNzb2NpYXRlZCB3aXRoIGEgdXNlciB0aGF0IGNvdWxkIGxvZyBpbiB3aXRoIHRoYXQgZS1tYWlsLlwiLFxuXSwgKCkgPT4gW10pO1xuY29uc3QgRW1haWxJc05vdFByaW1hcnlFbWFpbCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihLbm93bkVycm9yLCBcIkVNQUlMX0lTX05PVF9QUklNQVJZX0VNQUlMXCIsIChlbWFpbCwgcHJpbWFyeUVtYWlsKSA9PiBbXG4gICAgNDAwLFxuICAgIGBUaGUgZ2l2ZW4gZS1tYWlsICgke2VtYWlsfSkgbXVzdCBlcXVhbCB0aGUgdXNlcidzIHByaW1hcnkgZS1tYWlsICgke3ByaW1hcnlFbWFpbH0pLmAsXG4gICAge1xuICAgICAgICBlbWFpbCxcbiAgICAgICAgcHJpbWFyeV9lbWFpbDogcHJpbWFyeUVtYWlsLFxuICAgIH0sXG5dLCAoanNvbikgPT4gW2pzb24uZW1haWwsIGpzb24ucHJpbWFyeV9lbWFpbF0pO1xuY29uc3QgUGVybWlzc2lvbk5vdEZvdW5kID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiUEVSTUlTU0lPTl9OT1RfRk9VTkRcIiwgKHBlcm1pc3Npb25JZCkgPT4gW1xuICAgIDQwNCxcbiAgICBgUGVybWlzc2lvbiBcIiR7cGVybWlzc2lvbklkfVwiIG5vdCBmb3VuZC4gTWFrZSBzdXJlIHlvdSBjcmVhdGVkIGl0IG9uIHRoZSBkYXNoYm9hcmQuYCxcbiAgICB7XG4gICAgICAgIHBlcm1pc3Npb25faWQ6IHBlcm1pc3Npb25JZCxcbiAgICB9LFxuXSwgKGpzb24pID0+IFtqc29uLnBlcm1pc3Npb25faWRdKTtcbmNvbnN0IENvbnRhaW5lZFBlcm1pc3Npb25Ob3RGb3VuZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihLbm93bkVycm9yLCBcIkNPTlRBSU5FRF9QRVJNSVNTSU9OX05PVF9GT1VORFwiLCAocGVybWlzc2lvbklkKSA9PiBbXG4gICAgNDAwLFxuICAgIGBDb250YWluZWQgcGVybWlzc2lvbiB3aXRoIElEIFwiJHtwZXJtaXNzaW9uSWR9XCIgbm90IGZvdW5kLiBNYWtlIHN1cmUgeW91IGNyZWF0ZWQgaXQgb24gdGhlIGRhc2hib2FyZC5gLFxuICAgIHtcbiAgICAgICAgcGVybWlzc2lvbl9pZDogcGVybWlzc2lvbklkLFxuICAgIH0sXG5dLCAoanNvbikgPT4gW2pzb24ucGVybWlzc2lvbl9pZF0pO1xuY29uc3QgVGVhbU5vdEZvdW5kID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiVEVBTV9OT1RfRk9VTkRcIiwgKHRlYW1JZCkgPT4gW1xuICAgIDQwNCxcbiAgICBgVGVhbSAke3RlYW1JZH0gbm90IGZvdW5kLmAsXG4gICAge1xuICAgICAgICB0ZWFtX2lkOiB0ZWFtSWQsXG4gICAgfSxcbl0sIChqc29uKSA9PiBbanNvbi50ZWFtX2lkXSk7XG5jb25zdCBUZWFtQWxyZWFkeUV4aXN0cyA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihLbm93bkVycm9yLCBcIlRFQU1fQUxSRUFEWV9FWElTVFNcIiwgKHRlYW1JZCkgPT4gW1xuICAgIDQwMCxcbiAgICBgVGVhbSAke3RlYW1JZH0gYWxyZWFkeSBleGlzdHMuYCxcbiAgICB7XG4gICAgICAgIHRlYW1faWQ6IHRlYW1JZCxcbiAgICB9LFxuXSwgKGpzb24pID0+IFtqc29uLnRlYW1faWRdKTtcbmNvbnN0IFRlYW1NZW1iZXJzaGlwTm90Rm91bmQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJURUFNX01FTUJFUlNISVBfTk9UX0ZPVU5EXCIsICh0ZWFtSWQsIHVzZXJJZCkgPT4gW1xuICAgIDQwNCxcbiAgICBgVXNlciAke3VzZXJJZH0gaXMgbm90IGZvdW5kIGluIHRlYW0gJHt0ZWFtSWR9LmAsXG4gICAge1xuICAgICAgICB0ZWFtX2lkOiB0ZWFtSWQsXG4gICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICB9LFxuXSwgKGpzb24pID0+IFtqc29uLnRlYW1faWQsIGpzb24udXNlcl9pZF0pO1xuY29uc3QgRW1haWxUZW1wbGF0ZUFscmVhZHlFeGlzdHMgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJFTUFJTF9URU1QTEFURV9BTFJFQURZX0VYSVNUU1wiLCAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiRW1haWwgdGVtcGxhdGUgYWxyZWFkeSBleGlzdHMuXCIsXG5dLCAoKSA9PiBbXSk7XG5jb25zdCBPQXV0aENvbm5lY3Rpb25Ob3RDb25uZWN0ZWRUb1VzZXIgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJPQVVUSF9DT05ORUNUSU9OX05PVF9DT05ORUNURURfVE9fVVNFUlwiLCAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiVGhlIE9BdXRoIGNvbm5lY3Rpb24gaXMgbm90IGNvbm5lY3RlZCB0byBhbnkgdXNlci5cIixcbl0sICgpID0+IFtdKTtcbmNvbnN0IE9BdXRoQ29ubmVjdGlvbkFscmVhZHlDb25uZWN0ZWRUb0Fub3RoZXJVc2VyID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiT0FVVEhfQ09OTkVDVElPTl9BTFJFQURZX0NPTk5FQ1RFRF9UT19BTk9USEVSX1VTRVJcIiwgKCkgPT4gW1xuICAgIDQwMCxcbiAgICBcIlRoZSBPQXV0aCBjb25uZWN0aW9uIGlzIGFscmVhZHkgY29ubmVjdGVkIHRvIGFub3RoZXIgdXNlci5cIixcbl0sICgpID0+IFtdKTtcbmNvbnN0IE9BdXRoQ29ubmVjdGlvbkRvZXNOb3RIYXZlUmVxdWlyZWRTY29wZSA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihLbm93bkVycm9yLCBcIk9BVVRIX0NPTk5FQ1RJT05fRE9FU19OT1RfSEFWRV9SRVFVSVJFRF9TQ09QRVwiLCAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiVGhlIE9BdXRoIGNvbm5lY3Rpb24gZG9lcyBub3QgaGF2ZSB0aGUgcmVxdWlyZWQgc2NvcGUuXCIsXG5dLCAoKSA9PiBbXSk7XG5jb25zdCBPQXV0aEV4dHJhU2NvcGVOb3RBdmFpbGFibGVXaXRoU2hhcmVkT0F1dGhLZXlzID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiT0FVVEhfRVhUUkFfU0NPUEVfTk9UX0FWQUlMQUJMRV9XSVRIX1NIQVJFRF9PQVVUSF9LRVlTXCIsICgpID0+IFtcbiAgICA0MDAsXG4gICAgXCJFeHRyYSBzY29wZXMgYXJlIG5vdCBhdmFpbGFibGUgd2l0aCBzaGFyZWQgT0F1dGgga2V5cy4gUGxlYXNlIGFkZCB5b3VyIG93biBPQXV0aCBrZXlzIG9uIHRoZSBTdGFjayBkYXNoYm9hcmQgdG8gdXNlIGV4dHJhIHNjb3Blcy5cIixcbl0sICgpID0+IFtdKTtcbmNvbnN0IE9BdXRoQWNjZXNzVG9rZW5Ob3RBdmFpbGFibGVXaXRoU2hhcmVkT0F1dGhLZXlzID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiT0FVVEhfQUNDRVNTX1RPS0VOX05PVF9BVkFJTEFCTEVfV0lUSF9TSEFSRURfT0FVVEhfS0VZU1wiLCAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiQWNjZXNzIHRva2VucyBhcmUgbm90IGF2YWlsYWJsZSB3aXRoIHNoYXJlZCBPQXV0aCBrZXlzLiBQbGVhc2UgYWRkIHlvdXIgb3duIE9BdXRoIGtleXMgb24gdGhlIFN0YWNrIGRhc2hib2FyZCB0byB1c2UgYWNjZXNzIHRva2Vucy5cIixcbl0sICgpID0+IFtdKTtcbmNvbnN0IEludmFsaWRPQXV0aENsaWVudElkT3JTZWNyZXQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJJTlZBTElEX09BVVRIX0NMSUVOVF9JRF9PUl9TRUNSRVRcIiwgKGNsaWVudElkKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiVGhlIE9BdXRoIGNsaWVudCBJRCBvciBzZWNyZXQgaXMgaW52YWxpZC4gVGhlIGNsaWVudCBJRCBtdXN0IGJlIGVxdWFsIHRvIHRoZSBwcm9qZWN0IElELCBhbmQgdGhlIGNsaWVudCBzZWNyZXQgbXVzdCBiZSBhIHB1Ymxpc2hhYmxlIGNsaWVudCBrZXkuXCIsXG4gICAge1xuICAgICAgICBjbGllbnRfaWQ6IGNsaWVudElkID8/IG51bGwsXG4gICAgfSxcbl0sIChqc29uKSA9PiBbanNvbi5jbGllbnRfaWQgPz8gdW5kZWZpbmVkXSk7XG5jb25zdCBJbnZhbGlkU2NvcGUgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJJTlZBTElEX1NDT1BFXCIsIChzY29wZSkgPT4gW1xuICAgIDQwMCxcbiAgICBgVGhlIHNjb3BlIFwiJHtzY29wZX1cIiBpcyBub3QgYSB2YWxpZCBPQXV0aCBzY29wZSBmb3IgU3RhY2suYCxcbl0sIChqc29uKSA9PiBbanNvbi5zY29wZV0pO1xuY29uc3QgVXNlckFscmVhZHlDb25uZWN0ZWRUb0Fub3RoZXJPQXV0aENvbm5lY3Rpb24gPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJVU0VSX0FMUkVBRFlfQ09OTkVDVEVEX1RPX0FOT1RIRVJfT0FVVEhfQ09OTkVDVElPTlwiLCAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiVGhlIHVzZXIgaXMgYWxyZWFkeSBjb25uZWN0ZWQgdG8gYW5vdGhlciBPQXV0aCBhY2NvdW50LiBEaWQgeW91IG1heWJlIHNlbGVjdGVkIHRoZSB3cm9uZyBhY2NvdW50P1wiLFxuXSwgKCkgPT4gW10pO1xuY29uc3QgT3V0ZXJPQXV0aFRpbWVvdXQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJPVVRFUl9PQVVUSF9USU1FT1VUXCIsICgpID0+IFtcbiAgICA0MDgsXG4gICAgXCJUaGUgT0F1dGggZmxvdyBoYXMgdGltZWQgb3V0LiBQbGVhc2Ugc2lnbiBpbiBhZ2Fpbi5cIixcbl0sICgpID0+IFtdKTtcbmNvbnN0IE9BdXRoUHJvdmlkZXJOb3RGb3VuZE9yTm90RW5hYmxlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihLbm93bkVycm9yLCBcIk9BVVRIX1BST1ZJREVSX05PVF9GT1VORF9PUl9OT1RfRU5BQkxFRFwiLCAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiVGhlIE9BdXRoIHByb3ZpZGVyIGlzIG5vdCBmb3VuZCBvciBub3QgZW5hYmxlZC5cIixcbl0sICgpID0+IFtdKTtcbmNvbnN0IE11bHRpRmFjdG9yQXV0aGVudGljYXRpb25SZXF1aXJlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihLbm93bkVycm9yLCBcIk1VTFRJX0ZBQ1RPUl9BVVRIRU5USUNBVElPTl9SRVFVSVJFRFwiLCAoYXR0ZW1wdENvZGUpID0+IFtcbiAgICA0MDAsXG4gICAgYE11bHRpLWZhY3RvciBhdXRoZW50aWNhdGlvbiBpcyByZXF1aXJlZCBmb3IgdGhpcyB1c2VyLmAsXG4gICAge1xuICAgICAgICBhdHRlbXB0X2NvZGU6IGF0dGVtcHRDb2RlLFxuICAgIH0sXG5dLCAoanNvbikgPT4gW2pzb24uYXR0ZW1wdF9jb2RlXSk7XG5jb25zdCBJbnZhbGlkVG90cENvZGUgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJJTlZBTElEX1RPVFBfQ09ERVwiLCAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiVGhlIFRPVFAgY29kZSBpcyBpbnZhbGlkLiBQbGVhc2UgdHJ5IGFnYWluLlwiLFxuXSwgKCkgPT4gW10pO1xuY29uc3QgVXNlckF1dGhlbnRpY2F0aW9uUmVxdWlyZWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJVU0VSX0FVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEXCIsICgpID0+IFtcbiAgICA0MDEsXG4gICAgXCJVc2VyIGF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkIGZvciB0aGlzIGVuZHBvaW50LlwiLFxuXSwgKCkgPT4gW10pO1xuY29uc3QgVGVhbU1lbWJlcnNoaXBBbHJlYWR5RXhpc3RzID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiVEVBTV9NRU1CRVJTSElQX0FMUkVBRFlfRVhJU1RTXCIsICgpID0+IFtcbiAgICA0MDAsXG4gICAgXCJUZWFtIG1lbWJlcnNoaXAgYWxyZWFkeSBleGlzdHMuXCIsXG5dLCAoKSA9PiBbXSk7XG5jb25zdCBUZWFtUGVybWlzc2lvblJlcXVpcmVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiVEVBTV9QRVJNSVNTSU9OX1JFUVVJUkVEXCIsICh0ZWFtSWQsIHVzZXJJZCwgcGVybWlzc2lvbklkKSA9PiBbXG4gICAgNDAxLFxuICAgIGBVc2VyICR7dXNlcklkfSBkb2VzIG5vdCBoYXZlIHBlcm1pc3Npb24gJHtwZXJtaXNzaW9uSWR9IGluIHRlYW0gJHt0ZWFtSWR9LmAsXG4gICAge1xuICAgICAgICB0ZWFtX2lkOiB0ZWFtSWQsXG4gICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICAgICAgcGVybWlzc2lvbl9pZDogcGVybWlzc2lvbklkLFxuICAgIH0sXG5dLCAoanNvbikgPT4gW2pzb24udGVhbV9pZCwganNvbi51c2VyX2lkLCBqc29uLnBlcm1pc3Npb25faWRdKTtcbmNvbnN0IFRlYW1QZXJtaXNzaW9uTm90Rm91bmQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJURUFNX1BFUk1JU1NJT05fTk9UX0ZPVU5EXCIsICh0ZWFtSWQsIHVzZXJJZCwgcGVybWlzc2lvbklkKSA9PiBbXG4gICAgNDAxLFxuICAgIGBVc2VyICR7dXNlcklkfSBkb2VzIG5vdCBoYXZlIHBlcm1pc3Npb24gJHtwZXJtaXNzaW9uSWR9IGluIHRlYW0gJHt0ZWFtSWR9LmAsXG4gICAge1xuICAgICAgICB0ZWFtX2lkOiB0ZWFtSWQsXG4gICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICAgICAgcGVybWlzc2lvbl9pZDogcGVybWlzc2lvbklkLFxuICAgIH0sXG5dLCAoanNvbikgPT4gW2pzb24udGVhbV9pZCwganNvbi51c2VyX2lkLCBqc29uLnBlcm1pc3Npb25faWRdKTtcbmNvbnN0IEludmFsaWRTaGFyZWRPQXV0aFByb3ZpZGVySWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJJTlZBTElEX1NIQVJFRF9PQVVUSF9QUk9WSURFUl9JRFwiLCAocHJvdmlkZXJJZCkgPT4gW1xuICAgIDQwMCxcbiAgICBgVGhlIHNoYXJlZCBPQXV0aCBwcm92aWRlciB3aXRoIElEICR7cHJvdmlkZXJJZH0gaXMgbm90IHZhbGlkLmAsXG4gICAge1xuICAgICAgICBwcm92aWRlcl9pZDogcHJvdmlkZXJJZCxcbiAgICB9LFxuXSwgKGpzb24pID0+IFtqc29uLnByb3ZpZGVyX2lkXSk7XG5jb25zdCBJbnZhbGlkU3RhbmRhcmRPQXV0aFByb3ZpZGVySWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoS25vd25FcnJvciwgXCJJTlZBTElEX1NUQU5EQVJEX09BVVRIX1BST1ZJREVSX0lEXCIsIChwcm92aWRlcklkKSA9PiBbXG4gICAgNDAwLFxuICAgIGBUaGUgc3RhbmRhcmQgT0F1dGggcHJvdmlkZXIgd2l0aCBJRCAke3Byb3ZpZGVySWR9IGlzIG5vdCB2YWxpZC5gLFxuICAgIHtcbiAgICAgICAgcHJvdmlkZXJfaWQ6IHByb3ZpZGVySWQsXG4gICAgfSxcbl0sIChqc29uKSA9PiBbanNvbi5wcm92aWRlcl9pZF0pO1xuY29uc3QgSW52YWxpZEF1dGhvcml6YXRpb25Db2RlID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKEtub3duRXJyb3IsIFwiSU5WQUxJRF9BVVRIT1JJWkFUSU9OX0NPREVcIiwgKCkgPT4gW1xuICAgIDQwMCxcbiAgICBcIlRoZSBnaXZlbiBhdXRob3JpemF0aW9uIGNvZGUgaXMgaW52YWxpZC5cIixcbl0sICgpID0+IFtdKTtcbmV4cG9ydCBjb25zdCBLbm93bkVycm9ycyA9IHtcbiAgICBVbnN1cHBvcnRlZEVycm9yLFxuICAgIEJvZHlQYXJzaW5nRXJyb3IsXG4gICAgU2NoZW1hRXJyb3IsXG4gICAgQWxsT3ZlcmxvYWRzRmFpbGVkLFxuICAgIFByb2plY3RBdXRoZW50aWNhdGlvbkVycm9yLFxuICAgIEludmFsaWRQcm9qZWN0QXV0aGVudGljYXRpb24sXG4gICAgUHJvamVjdEtleVdpdGhvdXRSZXF1ZXN0VHlwZSxcbiAgICBJbnZhbGlkUmVxdWVzdFR5cGUsXG4gICAgUmVxdWVzdFR5cGVXaXRob3V0UHJvamVjdElkLFxuICAgIFByb2plY3RLZXlXaXRob3V0QWNjZXNzVHlwZSxcbiAgICBJbnZhbGlkQWNjZXNzVHlwZSxcbiAgICBBY2Nlc3NUeXBlV2l0aG91dFByb2plY3RJZCxcbiAgICBBY2Nlc3NUeXBlUmVxdWlyZWQsXG4gICAgQ2Fubm90R2V0T3duVXNlcldpdGhvdXRVc2VyLFxuICAgIEluc3VmZmljaWVudEFjY2Vzc1R5cGUsXG4gICAgSW52YWxpZFB1Ymxpc2hhYmxlQ2xpZW50S2V5LFxuICAgIEludmFsaWRTZWNyZXRTZXJ2ZXJLZXksXG4gICAgSW52YWxpZFN1cGVyU2VjcmV0QWRtaW5LZXksXG4gICAgSW52YWxpZEFkbWluQWNjZXNzVG9rZW4sXG4gICAgVW5wYXJzYWJsZUFkbWluQWNjZXNzVG9rZW4sXG4gICAgQWRtaW5BY2Nlc3NUb2tlbkV4cGlyZWQsXG4gICAgSW52YWxpZFByb2plY3RGb3JBZG1pbkFjY2Vzc1Rva2VuLFxuICAgIEFkbWluQWNjZXNzVG9rZW5Jc05vdEFkbWluLFxuICAgIFByb2plY3RBdXRoZW50aWNhdGlvblJlcXVpcmVkLFxuICAgIENsaWVudEF1dGhlbnRpY2F0aW9uUmVxdWlyZWQsXG4gICAgU2VydmVyQXV0aGVudGljYXRpb25SZXF1aXJlZCxcbiAgICBDbGllbnRPclNlcnZlckF1dGhlbnRpY2F0aW9uUmVxdWlyZWQsXG4gICAgQ2xpZW50T3JBZG1pbkF1dGhlbnRpY2F0aW9uUmVxdWlyZWQsXG4gICAgQ2xpZW50T3JTZXJ2ZXJPckFkbWluQXV0aGVudGljYXRpb25SZXF1aXJlZCxcbiAgICBBZG1pbkF1dGhlbnRpY2F0aW9uUmVxdWlyZWQsXG4gICAgRXhwZWN0ZWRJbnRlcm5hbFByb2plY3QsXG4gICAgU2Vzc2lvbkF1dGhlbnRpY2F0aW9uRXJyb3IsXG4gICAgSW52YWxpZFNlc3Npb25BdXRoZW50aWNhdGlvbixcbiAgICBJbnZhbGlkQWNjZXNzVG9rZW4sXG4gICAgVW5wYXJzYWJsZUFjY2Vzc1Rva2VuLFxuICAgIEFjY2Vzc1Rva2VuRXhwaXJlZCxcbiAgICBJbnZhbGlkUHJvamVjdEZvckFjY2Vzc1Rva2VuLFxuICAgIFJlZnJlc2hUb2tlbkVycm9yLFxuICAgIFByb3ZpZGVyUmVqZWN0ZWQsXG4gICAgUmVmcmVzaFRva2VuTm90Rm91bmRPckV4cGlyZWQsXG4gICAgVXNlckVtYWlsQWxyZWFkeUV4aXN0cyxcbiAgICBVc2VySWREb2VzTm90RXhpc3QsXG4gICAgVXNlck5vdEZvdW5kLFxuICAgIEFwaUtleU5vdEZvdW5kLFxuICAgIFByb2plY3ROb3RGb3VuZCxcbiAgICBTaWduVXBOb3RFbmFibGVkLFxuICAgIFBhc3N3b3JkQXV0aGVudGljYXRpb25Ob3RFbmFibGVkLFxuICAgIEVtYWlsUGFzc3dvcmRNaXNtYXRjaCxcbiAgICBSZWRpcmVjdFVybE5vdFdoaXRlbGlzdGVkLFxuICAgIFBhc3N3b3JkUmVxdWlyZW1lbnRzTm90TWV0LFxuICAgIFBhc3N3b3JkVG9vU2hvcnQsXG4gICAgUGFzc3dvcmRUb29Mb25nLFxuICAgIFVzZXJEb2VzTm90SGF2ZVBhc3N3b3JkLFxuICAgIFZlcmlmaWNhdGlvbkNvZGVFcnJvcixcbiAgICBWZXJpZmljYXRpb25Db2RlTm90Rm91bmQsXG4gICAgVmVyaWZpY2F0aW9uQ29kZUV4cGlyZWQsXG4gICAgVmVyaWZpY2F0aW9uQ29kZUFscmVhZHlVc2VkLFxuICAgIFBhc3N3b3JkQ29uZmlybWF0aW9uTWlzbWF0Y2gsXG4gICAgRW1haWxBbHJlYWR5VmVyaWZpZWQsXG4gICAgRW1haWxOb3RBc3NvY2lhdGVkV2l0aFVzZXIsXG4gICAgRW1haWxJc05vdFByaW1hcnlFbWFpbCxcbiAgICBQZXJtaXNzaW9uTm90Rm91bmQsXG4gICAgQ29udGFpbmVkUGVybWlzc2lvbk5vdEZvdW5kLFxuICAgIFRlYW1Ob3RGb3VuZCxcbiAgICBUZWFtTWVtYmVyc2hpcE5vdEZvdW5kLFxuICAgIEVtYWlsVGVtcGxhdGVBbHJlYWR5RXhpc3RzLFxuICAgIE9BdXRoQ29ubmVjdGlvbk5vdENvbm5lY3RlZFRvVXNlcixcbiAgICBPQXV0aENvbm5lY3Rpb25BbHJlYWR5Q29ubmVjdGVkVG9Bbm90aGVyVXNlcixcbiAgICBPQXV0aENvbm5lY3Rpb25Eb2VzTm90SGF2ZVJlcXVpcmVkU2NvcGUsXG4gICAgT0F1dGhFeHRyYVNjb3BlTm90QXZhaWxhYmxlV2l0aFNoYXJlZE9BdXRoS2V5cyxcbiAgICBPQXV0aEFjY2Vzc1Rva2VuTm90QXZhaWxhYmxlV2l0aFNoYXJlZE9BdXRoS2V5cyxcbiAgICBJbnZhbGlkT0F1dGhDbGllbnRJZE9yU2VjcmV0LFxuICAgIEludmFsaWRTY29wZSxcbiAgICBVc2VyQWxyZWFkeUNvbm5lY3RlZFRvQW5vdGhlck9BdXRoQ29ubmVjdGlvbixcbiAgICBPdXRlck9BdXRoVGltZW91dCxcbiAgICBPQXV0aFByb3ZpZGVyTm90Rm91bmRPck5vdEVuYWJsZWQsXG4gICAgTXVsdGlGYWN0b3JBdXRoZW50aWNhdGlvblJlcXVpcmVkLFxuICAgIEludmFsaWRUb3RwQ29kZSxcbiAgICBVc2VyQXV0aGVudGljYXRpb25SZXF1aXJlZCxcbiAgICBUZWFtTWVtYmVyc2hpcEFscmVhZHlFeGlzdHMsXG4gICAgVGVhbVBlcm1pc3Npb25SZXF1aXJlZCxcbiAgICBJbnZhbGlkU2hhcmVkT0F1dGhQcm92aWRlcklkLFxuICAgIEludmFsaWRTdGFuZGFyZE9BdXRoUHJvdmlkZXJJZCxcbiAgICBJbnZhbGlkQXV0aG9yaXphdGlvbkNvZGUsXG4gICAgVGVhbVBlcm1pc3Npb25Ob3RGb3VuZCxcbn07XG4vLyBlbnN1cmUgdGhhdCBhbGwga25vd24gZXJyb3IgY29kZXMgYXJlIHVuaXF1ZVxuY29uc3Qga25vd25FcnJvckNvZGVzID0gbmV3IFNldCgpO1xuZm9yIChjb25zdCBbXywgS25vd25FcnJvcl0gb2YgT2JqZWN0LmVudHJpZXMoS25vd25FcnJvcnMpKSB7XG4gICAgaWYgKGtub3duRXJyb3JDb2Rlcy5oYXMoS25vd25FcnJvci5lcnJvckNvZGUpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRHVwbGljYXRlIGtub3duIGVycm9yIGNvZGU6ICR7S25vd25FcnJvci5lcnJvckNvZGV9YCk7XG4gICAgfVxuICAgIGtub3duRXJyb3JDb2Rlcy5hZGQoS25vd25FcnJvci5lcnJvckNvZGUpO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackframe/stack-shared/dist/known-errors.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stackframe/stack-shared/dist/sessions.js":
/*!****************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/sessions.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AccessToken: () => (/* binding */ AccessToken),\n/* harmony export */   InternalSession: () => (/* binding */ InternalSession),\n/* harmony export */   RefreshToken: () => (/* binding */ RefreshToken)\n/* harmony export */ });\n/* harmony import */ var _utils_errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/errors */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js\");\n/* harmony import */ var _utils_stores__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/stores */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/stores.js\");\n\n\nclass AccessToken {\n    constructor(token) {\n        this.token = token;\n        if (token === \"undefined\") {\n            throw new _utils_errors__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"Access token is the string 'undefined'; it's unlikely this is the correct value. They're supposed to be unguessable!\");\n        }\n    }\n}\nclass RefreshToken {\n    constructor(token) {\n        this.token = token;\n        if (token === \"undefined\") {\n            throw new _utils_errors__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"Refresh token is the string 'undefined'; it's unlikely this is the correct value. They're supposed to be unguessable!\");\n        }\n    }\n}\n/**\n * An InternalSession represents a user's session, which may or may not be valid. It may contain an access token, a refresh token, or both.\n *\n * A session never changes which user or session it belongs to, but the tokens in it may change over time.\n */\nclass InternalSession {\n    constructor(_options) {\n        this._options = _options;\n        /**\n         * Whether the session as a whole is known to be invalid. Used as a cache to avoid making multiple requests to the server (sessions never go back to being valid after being invalidated).\n         *\n         * Applies to both the access token and the refresh token (it is possible for the access token to be invalid but the refresh token to be valid, in which case the session is still valid).\n         */\n        this._knownToBeInvalid = new _utils_stores__WEBPACK_IMPORTED_MODULE_1__.Store(false);\n        this._refreshPromise = null;\n        this._accessToken = new _utils_stores__WEBPACK_IMPORTED_MODULE_1__.Store(_options.accessToken ? new AccessToken(_options.accessToken) : null);\n        this._refreshToken = _options.refreshToken ? new RefreshToken(_options.refreshToken) : null;\n        this.sessionKey = InternalSession.calculateSessionKey({ accessToken: _options.accessToken ?? null, refreshToken: _options.refreshToken });\n    }\n    static calculateSessionKey(ofTokens) {\n        if (ofTokens.refreshToken) {\n            return `refresh-${ofTokens.refreshToken}`;\n        }\n        else if (ofTokens.accessToken) {\n            return `access-${ofTokens.accessToken}`;\n        }\n        else {\n            return \"not-logged-in\";\n        }\n    }\n    isKnownToBeInvalid() {\n        return this._knownToBeInvalid.get();\n    }\n    /**\n     * Marks the session object as invalid, meaning that the refresh and access tokens can no longer be used.\n     */\n    markInvalid() {\n        this._accessToken.set(null);\n        this._knownToBeInvalid.set(true);\n    }\n    onInvalidate(callback) {\n        return this._knownToBeInvalid.onChange(() => callback());\n    }\n    /**\n     * Returns the access token if it is found in the cache, fetching it otherwise.\n     *\n     * This is usually the function you want to call to get an access token. When using the access token, you should catch errors that occur if it expires, and call `markAccessTokenExpired` to mark the token as expired if so (after which a call to this function will always refetch the token).\n     *\n     * @returns null if the session is known to be invalid, cached tokens if they exist in the cache (which may or may not be valid still), or new tokens otherwise.\n     */\n    async getPotentiallyExpiredTokens() {\n        const accessToken = await this._getPotentiallyExpiredAccessToken();\n        return accessToken ? { accessToken, refreshToken: this._refreshToken } : null;\n    }\n    /**\n     * Fetches new tokens that are, at the time of fetching, guaranteed to be valid.\n     *\n     * The newly generated tokens are shortlived, so it's good practice not to rely on their validity (if possible). However, this function is useful in some cases where you only want to pass access tokens to a service, and you want to make sure said access token has the longest possible lifetime.\n     *\n     * In most cases, you should prefer `getPotentiallyExpiredTokens` with a fallback to `markAccessTokenExpired` and a retry mechanism if the endpoint rejects the token.\n     *\n     * @returns null if the session is known to be invalid, or new tokens otherwise (which, at the time of fetching, are guaranteed to be valid).\n     */\n    async fetchNewTokens() {\n        const accessToken = await this._getNewlyFetchedAccessToken();\n        return accessToken ? { accessToken, refreshToken: this._refreshToken } : null;\n    }\n    markAccessTokenExpired(accessToken) {\n        if (this._accessToken.get() === accessToken) {\n            this._accessToken.set(null);\n        }\n    }\n    /**\n     * Note that a callback invocation with `null` does not mean the session has been invalidated; the access token may just have expired. Use `onInvalidate` to detect invalidation.\n     */\n    onAccessTokenChange(callback) {\n        return this._accessToken.onChange(callback);\n    }\n    /**\n     * @returns An access token (cached if possible), or null if the session either does not represent a user or the session is invalid.\n     */\n    async _getPotentiallyExpiredAccessToken() {\n        if (!this._refreshToken)\n            return null;\n        if (this._knownToBeInvalid.get())\n            return null;\n        const oldAccessToken = this._accessToken.get();\n        if (oldAccessToken)\n            return oldAccessToken;\n        // refresh access token\n        if (!this._refreshPromise) {\n            this._refreshAndSetRefreshPromise(this._refreshToken);\n        }\n        return await this._refreshPromise;\n    }\n    /**\n     * You should prefer `getPotentiallyExpiredAccessToken` in almost all cases.\n     *\n     * @returns A newly fetched access token (never read from cache), or null if the session either does not represent a user or the session is invalid.\n     */\n    async _getNewlyFetchedAccessToken() {\n        if (!this._refreshToken)\n            return null;\n        if (this._knownToBeInvalid.get())\n            return null;\n        this._refreshAndSetRefreshPromise(this._refreshToken);\n        return await this._refreshPromise;\n    }\n    _refreshAndSetRefreshPromise(refreshToken) {\n        let refreshPromise = this._options.refreshAccessTokenCallback(refreshToken).then((accessToken) => {\n            if (refreshPromise === this._refreshPromise) {\n                this._refreshPromise = null;\n                this._accessToken.set(accessToken);\n                if (!accessToken) {\n                    this.markInvalid();\n                }\n            }\n            return accessToken;\n        });\n        this._refreshPromise = refreshPromise;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3Qvc2Vzc2lvbnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBcUQ7QUFDZDtBQUNoQztBQUNQO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiw4REFBbUIsMENBQTBDO0FBQ25GO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDhEQUFtQiwyQ0FBMkM7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsZ0RBQUs7QUFDMUM7QUFDQSxnQ0FBZ0MsZ0RBQUs7QUFDckM7QUFDQSxnRUFBZ0UsZ0ZBQWdGO0FBQ2hKO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixzQkFBc0I7QUFDcEQ7QUFDQTtBQUNBLDZCQUE2QixxQkFBcUI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGdEQUFnRDtBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsZ0RBQWdEO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUdBQW1HO0FBQ25HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWFya2VycGxBSWNlLy4vbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L3Nlc3Npb25zLmpzPzgxYjYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU3RhY2tBc3NlcnRpb25FcnJvciB9IGZyb20gXCIuL3V0aWxzL2Vycm9yc1wiO1xuaW1wb3J0IHsgU3RvcmUgfSBmcm9tIFwiLi91dGlscy9zdG9yZXNcIjtcbmV4cG9ydCBjbGFzcyBBY2Nlc3NUb2tlbiB7XG4gICAgY29uc3RydWN0b3IodG9rZW4pIHtcbiAgICAgICAgdGhpcy50b2tlbiA9IHRva2VuO1xuICAgICAgICBpZiAodG9rZW4gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiQWNjZXNzIHRva2VuIGlzIHRoZSBzdHJpbmcgJ3VuZGVmaW5lZCc7IGl0J3MgdW5saWtlbHkgdGhpcyBpcyB0aGUgY29ycmVjdCB2YWx1ZS4gVGhleSdyZSBzdXBwb3NlZCB0byBiZSB1bmd1ZXNzYWJsZSFcIik7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUmVmcmVzaFRva2VuIHtcbiAgICBjb25zdHJ1Y3Rvcih0b2tlbikge1xuICAgICAgICB0aGlzLnRva2VuID0gdG9rZW47XG4gICAgICAgIGlmICh0b2tlbiA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJSZWZyZXNoIHRva2VuIGlzIHRoZSBzdHJpbmcgJ3VuZGVmaW5lZCc7IGl0J3MgdW5saWtlbHkgdGhpcyBpcyB0aGUgY29ycmVjdCB2YWx1ZS4gVGhleSdyZSBzdXBwb3NlZCB0byBiZSB1bmd1ZXNzYWJsZSFcIik7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIEFuIEludGVybmFsU2Vzc2lvbiByZXByZXNlbnRzIGEgdXNlcidzIHNlc3Npb24sIHdoaWNoIG1heSBvciBtYXkgbm90IGJlIHZhbGlkLiBJdCBtYXkgY29udGFpbiBhbiBhY2Nlc3MgdG9rZW4sIGEgcmVmcmVzaCB0b2tlbiwgb3IgYm90aC5cbiAqXG4gKiBBIHNlc3Npb24gbmV2ZXIgY2hhbmdlcyB3aGljaCB1c2VyIG9yIHNlc3Npb24gaXQgYmVsb25ncyB0bywgYnV0IHRoZSB0b2tlbnMgaW4gaXQgbWF5IGNoYW5nZSBvdmVyIHRpbWUuXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnRlcm5hbFNlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKF9vcHRpb25zKSB7XG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSBfb3B0aW9ucztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgdGhlIHNlc3Npb24gYXMgYSB3aG9sZSBpcyBrbm93biB0byBiZSBpbnZhbGlkLiBVc2VkIGFzIGEgY2FjaGUgdG8gYXZvaWQgbWFraW5nIG11bHRpcGxlIHJlcXVlc3RzIHRvIHRoZSBzZXJ2ZXIgKHNlc3Npb25zIG5ldmVyIGdvIGJhY2sgdG8gYmVpbmcgdmFsaWQgYWZ0ZXIgYmVpbmcgaW52YWxpZGF0ZWQpLlxuICAgICAgICAgKlxuICAgICAgICAgKiBBcHBsaWVzIHRvIGJvdGggdGhlIGFjY2VzcyB0b2tlbiBhbmQgdGhlIHJlZnJlc2ggdG9rZW4gKGl0IGlzIHBvc3NpYmxlIGZvciB0aGUgYWNjZXNzIHRva2VuIHRvIGJlIGludmFsaWQgYnV0IHRoZSByZWZyZXNoIHRva2VuIHRvIGJlIHZhbGlkLCBpbiB3aGljaCBjYXNlIHRoZSBzZXNzaW9uIGlzIHN0aWxsIHZhbGlkKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2tub3duVG9CZUludmFsaWQgPSBuZXcgU3RvcmUoZmFsc2UpO1xuICAgICAgICB0aGlzLl9yZWZyZXNoUHJvbWlzZSA9IG51bGw7XG4gICAgICAgIHRoaXMuX2FjY2Vzc1Rva2VuID0gbmV3IFN0b3JlKF9vcHRpb25zLmFjY2Vzc1Rva2VuID8gbmV3IEFjY2Vzc1Rva2VuKF9vcHRpb25zLmFjY2Vzc1Rva2VuKSA6IG51bGwpO1xuICAgICAgICB0aGlzLl9yZWZyZXNoVG9rZW4gPSBfb3B0aW9ucy5yZWZyZXNoVG9rZW4gPyBuZXcgUmVmcmVzaFRva2VuKF9vcHRpb25zLnJlZnJlc2hUb2tlbikgOiBudWxsO1xuICAgICAgICB0aGlzLnNlc3Npb25LZXkgPSBJbnRlcm5hbFNlc3Npb24uY2FsY3VsYXRlU2Vzc2lvbktleSh7IGFjY2Vzc1Rva2VuOiBfb3B0aW9ucy5hY2Nlc3NUb2tlbiA/PyBudWxsLCByZWZyZXNoVG9rZW46IF9vcHRpb25zLnJlZnJlc2hUb2tlbiB9KTtcbiAgICB9XG4gICAgc3RhdGljIGNhbGN1bGF0ZVNlc3Npb25LZXkob2ZUb2tlbnMpIHtcbiAgICAgICAgaWYgKG9mVG9rZW5zLnJlZnJlc2hUb2tlbikge1xuICAgICAgICAgICAgcmV0dXJuIGByZWZyZXNoLSR7b2ZUb2tlbnMucmVmcmVzaFRva2VufWA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob2ZUb2tlbnMuYWNjZXNzVG9rZW4pIHtcbiAgICAgICAgICAgIHJldHVybiBgYWNjZXNzLSR7b2ZUb2tlbnMuYWNjZXNzVG9rZW59YDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBcIm5vdC1sb2dnZWQtaW5cIjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpc0tub3duVG9CZUludmFsaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rbm93blRvQmVJbnZhbGlkLmdldCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYXJrcyB0aGUgc2Vzc2lvbiBvYmplY3QgYXMgaW52YWxpZCwgbWVhbmluZyB0aGF0IHRoZSByZWZyZXNoIGFuZCBhY2Nlc3MgdG9rZW5zIGNhbiBubyBsb25nZXIgYmUgdXNlZC5cbiAgICAgKi9cbiAgICBtYXJrSW52YWxpZCgpIHtcbiAgICAgICAgdGhpcy5fYWNjZXNzVG9rZW4uc2V0KG51bGwpO1xuICAgICAgICB0aGlzLl9rbm93blRvQmVJbnZhbGlkLnNldCh0cnVlKTtcbiAgICB9XG4gICAgb25JbnZhbGlkYXRlKGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rbm93blRvQmVJbnZhbGlkLm9uQ2hhbmdlKCgpID0+IGNhbGxiYWNrKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBhY2Nlc3MgdG9rZW4gaWYgaXQgaXMgZm91bmQgaW4gdGhlIGNhY2hlLCBmZXRjaGluZyBpdCBvdGhlcndpc2UuXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIHVzdWFsbHkgdGhlIGZ1bmN0aW9uIHlvdSB3YW50IHRvIGNhbGwgdG8gZ2V0IGFuIGFjY2VzcyB0b2tlbi4gV2hlbiB1c2luZyB0aGUgYWNjZXNzIHRva2VuLCB5b3Ugc2hvdWxkIGNhdGNoIGVycm9ycyB0aGF0IG9jY3VyIGlmIGl0IGV4cGlyZXMsIGFuZCBjYWxsIGBtYXJrQWNjZXNzVG9rZW5FeHBpcmVkYCB0byBtYXJrIHRoZSB0b2tlbiBhcyBleHBpcmVkIGlmIHNvIChhZnRlciB3aGljaCBhIGNhbGwgdG8gdGhpcyBmdW5jdGlvbiB3aWxsIGFsd2F5cyByZWZldGNoIHRoZSB0b2tlbikuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBudWxsIGlmIHRoZSBzZXNzaW9uIGlzIGtub3duIHRvIGJlIGludmFsaWQsIGNhY2hlZCB0b2tlbnMgaWYgdGhleSBleGlzdCBpbiB0aGUgY2FjaGUgKHdoaWNoIG1heSBvciBtYXkgbm90IGJlIHZhbGlkIHN0aWxsKSwgb3IgbmV3IHRva2VucyBvdGhlcndpc2UuXG4gICAgICovXG4gICAgYXN5bmMgZ2V0UG90ZW50aWFsbHlFeHBpcmVkVG9rZW5zKCkge1xuICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IGF3YWl0IHRoaXMuX2dldFBvdGVudGlhbGx5RXhwaXJlZEFjY2Vzc1Rva2VuKCk7XG4gICAgICAgIHJldHVybiBhY2Nlc3NUb2tlbiA/IHsgYWNjZXNzVG9rZW4sIHJlZnJlc2hUb2tlbjogdGhpcy5fcmVmcmVzaFRva2VuIH0gOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGZXRjaGVzIG5ldyB0b2tlbnMgdGhhdCBhcmUsIGF0IHRoZSB0aW1lIG9mIGZldGNoaW5nLCBndWFyYW50ZWVkIHRvIGJlIHZhbGlkLlxuICAgICAqXG4gICAgICogVGhlIG5ld2x5IGdlbmVyYXRlZCB0b2tlbnMgYXJlIHNob3J0bGl2ZWQsIHNvIGl0J3MgZ29vZCBwcmFjdGljZSBub3QgdG8gcmVseSBvbiB0aGVpciB2YWxpZGl0eSAoaWYgcG9zc2libGUpLiBIb3dldmVyLCB0aGlzIGZ1bmN0aW9uIGlzIHVzZWZ1bCBpbiBzb21lIGNhc2VzIHdoZXJlIHlvdSBvbmx5IHdhbnQgdG8gcGFzcyBhY2Nlc3MgdG9rZW5zIHRvIGEgc2VydmljZSwgYW5kIHlvdSB3YW50IHRvIG1ha2Ugc3VyZSBzYWlkIGFjY2VzcyB0b2tlbiBoYXMgdGhlIGxvbmdlc3QgcG9zc2libGUgbGlmZXRpbWUuXG4gICAgICpcbiAgICAgKiBJbiBtb3N0IGNhc2VzLCB5b3Ugc2hvdWxkIHByZWZlciBgZ2V0UG90ZW50aWFsbHlFeHBpcmVkVG9rZW5zYCB3aXRoIGEgZmFsbGJhY2sgdG8gYG1hcmtBY2Nlc3NUb2tlbkV4cGlyZWRgIGFuZCBhIHJldHJ5IG1lY2hhbmlzbSBpZiB0aGUgZW5kcG9pbnQgcmVqZWN0cyB0aGUgdG9rZW4uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBudWxsIGlmIHRoZSBzZXNzaW9uIGlzIGtub3duIHRvIGJlIGludmFsaWQsIG9yIG5ldyB0b2tlbnMgb3RoZXJ3aXNlICh3aGljaCwgYXQgdGhlIHRpbWUgb2YgZmV0Y2hpbmcsIGFyZSBndWFyYW50ZWVkIHRvIGJlIHZhbGlkKS5cbiAgICAgKi9cbiAgICBhc3luYyBmZXRjaE5ld1Rva2VucygpIHtcbiAgICAgICAgY29uc3QgYWNjZXNzVG9rZW4gPSBhd2FpdCB0aGlzLl9nZXROZXdseUZldGNoZWRBY2Nlc3NUb2tlbigpO1xuICAgICAgICByZXR1cm4gYWNjZXNzVG9rZW4gPyB7IGFjY2Vzc1Rva2VuLCByZWZyZXNoVG9rZW46IHRoaXMuX3JlZnJlc2hUb2tlbiB9IDogbnVsbDtcbiAgICB9XG4gICAgbWFya0FjY2Vzc1Rva2VuRXhwaXJlZChhY2Nlc3NUb2tlbikge1xuICAgICAgICBpZiAodGhpcy5fYWNjZXNzVG9rZW4uZ2V0KCkgPT09IGFjY2Vzc1Rva2VuKSB7XG4gICAgICAgICAgICB0aGlzLl9hY2Nlc3NUb2tlbi5zZXQobnVsbCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogTm90ZSB0aGF0IGEgY2FsbGJhY2sgaW52b2NhdGlvbiB3aXRoIGBudWxsYCBkb2VzIG5vdCBtZWFuIHRoZSBzZXNzaW9uIGhhcyBiZWVuIGludmFsaWRhdGVkOyB0aGUgYWNjZXNzIHRva2VuIG1heSBqdXN0IGhhdmUgZXhwaXJlZC4gVXNlIGBvbkludmFsaWRhdGVgIHRvIGRldGVjdCBpbnZhbGlkYXRpb24uXG4gICAgICovXG4gICAgb25BY2Nlc3NUb2tlbkNoYW5nZShjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWNjZXNzVG9rZW4ub25DaGFuZ2UoY2FsbGJhY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBBbiBhY2Nlc3MgdG9rZW4gKGNhY2hlZCBpZiBwb3NzaWJsZSksIG9yIG51bGwgaWYgdGhlIHNlc3Npb24gZWl0aGVyIGRvZXMgbm90IHJlcHJlc2VudCBhIHVzZXIgb3IgdGhlIHNlc3Npb24gaXMgaW52YWxpZC5cbiAgICAgKi9cbiAgICBhc3luYyBfZ2V0UG90ZW50aWFsbHlFeHBpcmVkQWNjZXNzVG9rZW4oKSB7XG4gICAgICAgIGlmICghdGhpcy5fcmVmcmVzaFRva2VuKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGlmICh0aGlzLl9rbm93blRvQmVJbnZhbGlkLmdldCgpKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IG9sZEFjY2Vzc1Rva2VuID0gdGhpcy5fYWNjZXNzVG9rZW4uZ2V0KCk7XG4gICAgICAgIGlmIChvbGRBY2Nlc3NUb2tlbilcbiAgICAgICAgICAgIHJldHVybiBvbGRBY2Nlc3NUb2tlbjtcbiAgICAgICAgLy8gcmVmcmVzaCBhY2Nlc3MgdG9rZW5cbiAgICAgICAgaWYgKCF0aGlzLl9yZWZyZXNoUHJvbWlzZSkge1xuICAgICAgICAgICAgdGhpcy5fcmVmcmVzaEFuZFNldFJlZnJlc2hQcm9taXNlKHRoaXMuX3JlZnJlc2hUb2tlbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX3JlZnJlc2hQcm9taXNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBZb3Ugc2hvdWxkIHByZWZlciBgZ2V0UG90ZW50aWFsbHlFeHBpcmVkQWNjZXNzVG9rZW5gIGluIGFsbW9zdCBhbGwgY2FzZXMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBIG5ld2x5IGZldGNoZWQgYWNjZXNzIHRva2VuIChuZXZlciByZWFkIGZyb20gY2FjaGUpLCBvciBudWxsIGlmIHRoZSBzZXNzaW9uIGVpdGhlciBkb2VzIG5vdCByZXByZXNlbnQgYSB1c2VyIG9yIHRoZSBzZXNzaW9uIGlzIGludmFsaWQuXG4gICAgICovXG4gICAgYXN5bmMgX2dldE5ld2x5RmV0Y2hlZEFjY2Vzc1Rva2VuKCkge1xuICAgICAgICBpZiAoIXRoaXMuX3JlZnJlc2hUb2tlbilcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBpZiAodGhpcy5fa25vd25Ub0JlSW52YWxpZC5nZXQoKSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB0aGlzLl9yZWZyZXNoQW5kU2V0UmVmcmVzaFByb21pc2UodGhpcy5fcmVmcmVzaFRva2VuKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX3JlZnJlc2hQcm9taXNlO1xuICAgIH1cbiAgICBfcmVmcmVzaEFuZFNldFJlZnJlc2hQcm9taXNlKHJlZnJlc2hUb2tlbikge1xuICAgICAgICBsZXQgcmVmcmVzaFByb21pc2UgPSB0aGlzLl9vcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbkNhbGxiYWNrKHJlZnJlc2hUb2tlbikudGhlbigoYWNjZXNzVG9rZW4pID0+IHtcbiAgICAgICAgICAgIGlmIChyZWZyZXNoUHJvbWlzZSA9PT0gdGhpcy5fcmVmcmVzaFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZWZyZXNoUHJvbWlzZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy5fYWNjZXNzVG9rZW4uc2V0KGFjY2Vzc1Rva2VuKTtcbiAgICAgICAgICAgICAgICBpZiAoIWFjY2Vzc1Rva2VuKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFya0ludmFsaWQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYWNjZXNzVG9rZW47XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9yZWZyZXNoUHJvbWlzZSA9IHJlZnJlc2hQcm9taXNlO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackframe/stack-shared/dist/sessions.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/arrays.js":
/*!********************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/arrays.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   enumerate: () => (/* binding */ enumerate),\n/* harmony export */   findLastIndex: () => (/* binding */ findLastIndex),\n/* harmony export */   groupBy: () => (/* binding */ groupBy),\n/* harmony export */   isShallowEqual: () => (/* binding */ isShallowEqual),\n/* harmony export */   outerProduct: () => (/* binding */ outerProduct),\n/* harmony export */   range: () => (/* binding */ range),\n/* harmony export */   rotateLeft: () => (/* binding */ rotateLeft),\n/* harmony export */   rotateRight: () => (/* binding */ rotateRight),\n/* harmony export */   shuffle: () => (/* binding */ shuffle),\n/* harmony export */   typedIncludes: () => (/* binding */ typedIncludes),\n/* harmony export */   unique: () => (/* binding */ unique)\n/* harmony export */ });\n/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./math */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/math.js\");\n\nfunction typedIncludes(arr, item) {\n    return arr.includes(item);\n}\nfunction enumerate(arr) {\n    return arr.map((item, index) => [index, item]);\n}\nfunction isShallowEqual(a, b) {\n    if (a.length !== b.length)\n        return false;\n    for (let i = 0; i < a.length; i++) {\n        if (a[i] !== b[i])\n            return false;\n    }\n    return true;\n}\n/**\n * Ponyfill for ES2023's findLastIndex.\n */\nfunction findLastIndex(arr, predicate) {\n    for (let i = arr.length - 1; i >= 0; i--) {\n        if (predicate(arr[i]))\n            return i;\n    }\n    return -1;\n}\nfunction groupBy(arr, key) {\n    const result = new Map;\n    for (const item of arr) {\n        const k = key(item);\n        if (result.get(k) === undefined)\n            result.set(k, []);\n        result.get(k).push(item);\n    }\n    return result;\n}\nfunction range(startInclusive, endExclusive, step) {\n    if (endExclusive === undefined) {\n        endExclusive = startInclusive;\n        startInclusive = 0;\n    }\n    if (step === undefined)\n        step = 1;\n    const result = [];\n    for (let i = startInclusive; step > 0 ? (i < endExclusive) : (i > endExclusive); i += step) {\n        result.push(i);\n    }\n    return result;\n}\nfunction rotateLeft(arr, n) {\n    const index = (0,_math__WEBPACK_IMPORTED_MODULE_0__.remainder)(n, arr.length);\n    return [...arr.slice(n), arr.slice(0, n)];\n}\nfunction rotateRight(arr, n) {\n    return rotateLeft(arr, -n);\n}\nfunction shuffle(arr) {\n    const result = [...arr];\n    for (let i = result.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [result[i], result[j]] = [result[j], result[i]];\n    }\n    return result;\n}\nfunction outerProduct(arr1, arr2) {\n    return arr1.flatMap((item1) => arr2.map((item2) => [item1, item2]));\n}\nfunction unique(arr) {\n    return [...new Set(arr)];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvYXJyYXlzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFtQztBQUM1QjtBQUNQO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSxvQkFBb0IsY0FBYztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxpQ0FBaUMsUUFBUTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLG9EQUFvRDtBQUNyRjtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1Asa0JBQWtCLGdEQUFTO0FBQzNCO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDTztBQUNQO0FBQ0Esb0NBQW9DLE9BQU87QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL21hcmtlcnBsQUljZS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9hcnJheXMuanM/MzdhNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZW1haW5kZXIgfSBmcm9tIFwiLi9tYXRoXCI7XG5leHBvcnQgZnVuY3Rpb24gdHlwZWRJbmNsdWRlcyhhcnIsIGl0ZW0pIHtcbiAgICByZXR1cm4gYXJyLmluY2x1ZGVzKGl0ZW0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGVudW1lcmF0ZShhcnIpIHtcbiAgICByZXR1cm4gYXJyLm1hcCgoaXRlbSwgaW5kZXgpID0+IFtpbmRleCwgaXRlbV0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzU2hhbGxvd0VxdWFsKGEsIGIpIHtcbiAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChhW2ldICE9PSBiW2ldKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuICogUG9ueWZpbGwgZm9yIEVTMjAyMydzIGZpbmRMYXN0SW5kZXguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaW5kTGFzdEluZGV4KGFyciwgcHJlZGljYXRlKSB7XG4gICAgZm9yIChsZXQgaSA9IGFyci5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICBpZiAocHJlZGljYXRlKGFycltpXSkpXG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICB9XG4gICAgcmV0dXJuIC0xO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdyb3VwQnkoYXJyLCBrZXkpIHtcbiAgICBjb25zdCByZXN1bHQgPSBuZXcgTWFwO1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBhcnIpIHtcbiAgICAgICAgY29uc3QgayA9IGtleShpdGVtKTtcbiAgICAgICAgaWYgKHJlc3VsdC5nZXQoaykgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJlc3VsdC5zZXQoaywgW10pO1xuICAgICAgICByZXN1bHQuZ2V0KGspLnB1c2goaXRlbSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5leHBvcnQgZnVuY3Rpb24gcmFuZ2Uoc3RhcnRJbmNsdXNpdmUsIGVuZEV4Y2x1c2l2ZSwgc3RlcCkge1xuICAgIGlmIChlbmRFeGNsdXNpdmUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBlbmRFeGNsdXNpdmUgPSBzdGFydEluY2x1c2l2ZTtcbiAgICAgICAgc3RhcnRJbmNsdXNpdmUgPSAwO1xuICAgIH1cbiAgICBpZiAoc3RlcCA9PT0gdW5kZWZpbmVkKVxuICAgICAgICBzdGVwID0gMTtcbiAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gc3RhcnRJbmNsdXNpdmU7IHN0ZXAgPiAwID8gKGkgPCBlbmRFeGNsdXNpdmUpIDogKGkgPiBlbmRFeGNsdXNpdmUpOyBpICs9IHN0ZXApIHtcbiAgICAgICAgcmVzdWx0LnB1c2goaSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5leHBvcnQgZnVuY3Rpb24gcm90YXRlTGVmdChhcnIsIG4pIHtcbiAgICBjb25zdCBpbmRleCA9IHJlbWFpbmRlcihuLCBhcnIubGVuZ3RoKTtcbiAgICByZXR1cm4gWy4uLmFyci5zbGljZShuKSwgYXJyLnNsaWNlKDAsIG4pXTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVSaWdodChhcnIsIG4pIHtcbiAgICByZXR1cm4gcm90YXRlTGVmdChhcnIsIC1uKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzaHVmZmxlKGFycikge1xuICAgIGNvbnN0IHJlc3VsdCA9IFsuLi5hcnJdO1xuICAgIGZvciAobGV0IGkgPSByZXN1bHQubGVuZ3RoIC0gMTsgaSA+IDA7IGktLSkge1xuICAgICAgICBjb25zdCBqID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGkgKyAxKSk7XG4gICAgICAgIFtyZXN1bHRbaV0sIHJlc3VsdFtqXV0gPSBbcmVzdWx0W2pdLCByZXN1bHRbaV1dO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZXhwb3J0IGZ1bmN0aW9uIG91dGVyUHJvZHVjdChhcnIxLCBhcnIyKSB7XG4gICAgcmV0dXJuIGFycjEuZmxhdE1hcCgoaXRlbTEpID0+IGFycjIubWFwKChpdGVtMikgPT4gW2l0ZW0xLCBpdGVtMl0pKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB1bmlxdWUoYXJyKSB7XG4gICAgcmV0dXJuIFsuLi5uZXcgU2V0KGFycildO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/arrays.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/bytes.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/bytes.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decodeBase32: () => (/* binding */ decodeBase32),\n/* harmony export */   decodeBase64: () => (/* binding */ decodeBase64),\n/* harmony export */   encodeBase32: () => (/* binding */ encodeBase32),\n/* harmony export */   encodeBase64: () => (/* binding */ encodeBase64),\n/* harmony export */   isBase32: () => (/* binding */ isBase32),\n/* harmony export */   isBase64: () => (/* binding */ isBase64)\n/* harmony export */ });\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js\");\n\nconst crockfordAlphabet = \"0123456789ABCDEFGHJKMNPQRSTVWXYZ\";\nconst crockfordReplacements = new Map([\n    [\"o\", \"0\"],\n    [\"i\", \"1\"],\n    [\"l\", \"1\"],\n]);\nfunction encodeBase32(input) {\n    let bits = 0;\n    let value = 0;\n    let output = \"\";\n    for (let i = 0; i < input.length; i++) {\n        value = (value << 8) | input[i];\n        bits += 8;\n        while (bits >= 5) {\n            output += crockfordAlphabet[(value >>> (bits - 5)) & 31];\n            bits -= 5;\n        }\n    }\n    if (bits > 0) {\n        output += crockfordAlphabet[(value << (5 - bits)) & 31];\n    }\n    // sanity check\n    if (!isBase32(output)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"Invalid base32 output; this should never happen\");\n    }\n    return output;\n}\nfunction decodeBase32(input) {\n    if (!isBase32(input)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"Invalid base32 string\");\n    }\n    const output = new Uint8Array((input.length * 5 / 8) | 0);\n    let bits = 0;\n    let value = 0;\n    let outputIndex = 0;\n    for (let i = 0; i < input.length; i++) {\n        let char = input[i].toLowerCase();\n        if (char === \" \")\n            continue;\n        if (crockfordReplacements.has(char)) {\n            char = crockfordReplacements.get(char);\n        }\n        const index = crockfordAlphabet.indexOf(char);\n        if (index === -1) {\n            throw new Error(`Invalid character: ${char}`);\n        }\n        value = (value << 5) | index;\n        bits += 5;\n        if (bits >= 8) {\n            output[outputIndex++] = (value >>> (bits - 8)) & 255;\n            bits -= 8;\n        }\n    }\n    return output;\n}\nfunction encodeBase64(input) {\n    const res = btoa(String.fromCharCode(...input));\n    // sanity check\n    if (!isBase64(res)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"Invalid base64 output; this should never happen\");\n    }\n    return res;\n}\nfunction decodeBase64(input) {\n    if (!isBase64(input)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"Invalid base64 string\");\n    }\n    return new Uint8Array(atob(input).split(\"\").map((char) => char.charCodeAt(0)));\n}\nfunction isBase32(input) {\n    for (const char of input) {\n        if (char === \" \")\n            continue;\n        if (!crockfordAlphabet.includes(char)) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction isBase64(input) {\n    const regex = /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/;\n    return regex.test(input);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvYnl0ZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUErQztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixrQkFBa0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHdEQUFtQix5QkFBeUI7QUFDOUQ7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLGtCQUFrQix3REFBbUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixrQkFBa0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxLQUFLO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isd0RBQW1CLHlCQUF5QjtBQUM5RDtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0Esa0JBQWtCLHdEQUFtQjtBQUNyQztBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsbUNBQW1DLEVBQUUsa0JBQWtCLEVBQUUsbUJBQW1CLEVBQUU7QUFDOUU7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL21hcmtlcnBsQUljZS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9ieXRlcy5qcz8yMDk3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN0YWNrQXNzZXJ0aW9uRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnNcIjtcbmNvbnN0IGNyb2NrZm9yZEFscGhhYmV0ID0gXCIwMTIzNDU2Nzg5QUJDREVGR0hKS01OUFFSU1RWV1hZWlwiO1xuY29uc3QgY3JvY2tmb3JkUmVwbGFjZW1lbnRzID0gbmV3IE1hcChbXG4gICAgW1wib1wiLCBcIjBcIl0sXG4gICAgW1wiaVwiLCBcIjFcIl0sXG4gICAgW1wibFwiLCBcIjFcIl0sXG5dKTtcbmV4cG9ydCBmdW5jdGlvbiBlbmNvZGVCYXNlMzIoaW5wdXQpIHtcbiAgICBsZXQgYml0cyA9IDA7XG4gICAgbGV0IHZhbHVlID0gMDtcbiAgICBsZXQgb3V0cHV0ID0gXCJcIjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhbHVlID0gKHZhbHVlIDw8IDgpIHwgaW5wdXRbaV07XG4gICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgd2hpbGUgKGJpdHMgPj0gNSkge1xuICAgICAgICAgICAgb3V0cHV0ICs9IGNyb2NrZm9yZEFscGhhYmV0Wyh2YWx1ZSA+Pj4gKGJpdHMgLSA1KSkgJiAzMV07XG4gICAgICAgICAgICBiaXRzIC09IDU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGJpdHMgPiAwKSB7XG4gICAgICAgIG91dHB1dCArPSBjcm9ja2ZvcmRBbHBoYWJldFsodmFsdWUgPDwgKDUgLSBiaXRzKSkgJiAzMV07XG4gICAgfVxuICAgIC8vIHNhbml0eSBjaGVja1xuICAgIGlmICghaXNCYXNlMzIob3V0cHV0KSkge1xuICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIkludmFsaWQgYmFzZTMyIG91dHB1dDsgdGhpcyBzaG91bGQgbmV2ZXIgaGFwcGVuXCIpO1xuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRlY29kZUJhc2UzMihpbnB1dCkge1xuICAgIGlmICghaXNCYXNlMzIoaW5wdXQpKSB7XG4gICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiSW52YWxpZCBiYXNlMzIgc3RyaW5nXCIpO1xuICAgIH1cbiAgICBjb25zdCBvdXRwdXQgPSBuZXcgVWludDhBcnJheSgoaW5wdXQubGVuZ3RoICogNSAvIDgpIHwgMCk7XG4gICAgbGV0IGJpdHMgPSAwO1xuICAgIGxldCB2YWx1ZSA9IDA7XG4gICAgbGV0IG91dHB1dEluZGV4ID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBjaGFyID0gaW5wdXRbaV0udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgaWYgKGNoYXIgPT09IFwiIFwiKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIGlmIChjcm9ja2ZvcmRSZXBsYWNlbWVudHMuaGFzKGNoYXIpKSB7XG4gICAgICAgICAgICBjaGFyID0gY3JvY2tmb3JkUmVwbGFjZW1lbnRzLmdldChjaGFyKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbmRleCA9IGNyb2NrZm9yZEFscGhhYmV0LmluZGV4T2YoY2hhcik7XG4gICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBjaGFyYWN0ZXI6ICR7Y2hhcn1gKTtcbiAgICAgICAgfVxuICAgICAgICB2YWx1ZSA9ICh2YWx1ZSA8PCA1KSB8IGluZGV4O1xuICAgICAgICBiaXRzICs9IDU7XG4gICAgICAgIGlmIChiaXRzID49IDgpIHtcbiAgICAgICAgICAgIG91dHB1dFtvdXRwdXRJbmRleCsrXSA9ICh2YWx1ZSA+Pj4gKGJpdHMgLSA4KSkgJiAyNTU7XG4gICAgICAgICAgICBiaXRzIC09IDg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBlbmNvZGVCYXNlNjQoaW5wdXQpIHtcbiAgICBjb25zdCByZXMgPSBidG9hKFN0cmluZy5mcm9tQ2hhckNvZGUoLi4uaW5wdXQpKTtcbiAgICAvLyBzYW5pdHkgY2hlY2tcbiAgICBpZiAoIWlzQmFzZTY0KHJlcykpIHtcbiAgICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJJbnZhbGlkIGJhc2U2NCBvdXRwdXQ7IHRoaXMgc2hvdWxkIG5ldmVyIGhhcHBlblwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cbmV4cG9ydCBmdW5jdGlvbiBkZWNvZGVCYXNlNjQoaW5wdXQpIHtcbiAgICBpZiAoIWlzQmFzZTY0KGlucHV0KSkge1xuICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIkludmFsaWQgYmFzZTY0IHN0cmluZ1wiKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGF0b2IoaW5wdXQpLnNwbGl0KFwiXCIpLm1hcCgoY2hhcikgPT4gY2hhci5jaGFyQ29kZUF0KDApKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNCYXNlMzIoaW5wdXQpIHtcbiAgICBmb3IgKGNvbnN0IGNoYXIgb2YgaW5wdXQpIHtcbiAgICAgICAgaWYgKGNoYXIgPT09IFwiIFwiKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIGlmICghY3JvY2tmb3JkQWxwaGFiZXQuaW5jbHVkZXMoY2hhcikpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0Jhc2U2NChpbnB1dCkge1xuICAgIGNvbnN0IHJlZ2V4ID0gL14oWzAtOWEtekEtWisvXXs0fSkqKChbMC05YS16QS1aKy9dezJ9PT0pfChbMC05YS16QS1aKy9dezN9PSkpPyQvO1xuICAgIHJldHVybiByZWdleC50ZXN0KGlucHV0KTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/bytes.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/caches.js":
/*!********************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/caches.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncCache: () => (/* binding */ AsyncCache),\n/* harmony export */   cacheFunction: () => (/* binding */ cacheFunction)\n/* harmony export */ });\n/* harmony import */ var _maps__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./maps */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/maps.js\");\n/* harmony import */ var _objects__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./objects */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/objects.js\");\n/* harmony import */ var _promises__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./promises */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/promises.js\");\n/* harmony import */ var _stores__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./stores */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/stores.js\");\n\n\n\n\n/**\n * Can be used to cache the result of a function call, for example for the `use` hook in React.\n */\nfunction cacheFunction(f) {\n    const dependenciesMap = new _maps__WEBPACK_IMPORTED_MODULE_0__.DependenciesMap();\n    return ((...args) => {\n        if (dependenciesMap.has(args)) {\n            return dependenciesMap.get(args);\n        }\n        const value = f(...args);\n        dependenciesMap.set(args, value);\n        return value;\n    });\n}\nclass AsyncCache {\n    constructor(_fetcher, _options = {}) {\n        this._fetcher = _fetcher;\n        this._options = _options;\n        this._map = new _maps__WEBPACK_IMPORTED_MODULE_0__.DependenciesMap();\n        this.isCacheAvailable = this._createKeyed(\"isCacheAvailable\");\n        this.getIfCached = this._createKeyed(\"getIfCached\");\n        this.getOrWait = this._createKeyed(\"getOrWait\");\n        this.forceSetCachedValue = this._createKeyed(\"forceSetCachedValue\");\n        this.forceSetCachedValueAsync = this._createKeyed(\"forceSetCachedValueAsync\");\n        this.refresh = this._createKeyed(\"refresh\");\n        this.invalidate = this._createKeyed(\"invalidate\");\n        this.onStateChange = this._createKeyed(\"onStateChange\");\n        // nothing here yet\n    }\n    _createKeyed(functionName) {\n        return (key, ...args) => {\n            const valueCache = this.getValueCache(key);\n            return valueCache[functionName].apply(valueCache, args);\n        };\n    }\n    getValueCache(dependencies) {\n        let cache = this._map.get(dependencies);\n        if (!cache) {\n            cache = new AsyncValueCache(async () => await this._fetcher(dependencies), {\n                ...this._options,\n                onSubscribe: this._options.onSubscribe ? (cb) => this._options.onSubscribe(dependencies, cb) : undefined,\n            });\n            this._map.set(dependencies, cache);\n        }\n        return cache;\n    }\n}\nclass AsyncValueCache {\n    constructor(fetcher, _options = {}) {\n        this._options = _options;\n        this._subscriptionsCount = 0;\n        this._unsubscribers = [];\n        this._store = new _stores__WEBPACK_IMPORTED_MODULE_3__.AsyncStore();\n        this._rateLimitOptions = {\n            concurrency: 1,\n            throttleMs: 300,\n            ...(0,_objects__WEBPACK_IMPORTED_MODULE_1__.filterUndefined)(_options.rateLimiter ?? {}),\n        };\n        this._fetcher = (0,_promises__WEBPACK_IMPORTED_MODULE_2__.rateLimited)(fetcher, {\n            ...this._rateLimitOptions,\n            batchCalls: true,\n        });\n    }\n    isCacheAvailable() {\n        return this._store.isAvailable();\n    }\n    getIfCached() {\n        return this._store.get();\n    }\n    getOrWait(cacheStrategy) {\n        const cached = this.getIfCached();\n        if (cacheStrategy === \"read-write\" && cached.status === \"ok\") {\n            return (0,_promises__WEBPACK_IMPORTED_MODULE_2__.resolved)(cached.data);\n        }\n        return this._refetch(cacheStrategy);\n    }\n    _set(value) {\n        this._store.set(value);\n    }\n    _setAsync(value) {\n        const promise = (0,_promises__WEBPACK_IMPORTED_MODULE_2__.pending)(value);\n        this._pendingPromise = promise;\n        return (0,_promises__WEBPACK_IMPORTED_MODULE_2__.pending)(this._store.setAsync(promise));\n    }\n    _refetch(cacheStrategy) {\n        if (cacheStrategy === \"read-write\" && this._pendingPromise) {\n            return this._pendingPromise;\n        }\n        const promise = (0,_promises__WEBPACK_IMPORTED_MODULE_2__.pending)(this._fetcher());\n        if (cacheStrategy === \"never\") {\n            return promise;\n        }\n        return (0,_promises__WEBPACK_IMPORTED_MODULE_2__.pending)(this._setAsync(promise).then(() => promise));\n    }\n    forceSetCachedValue(value) {\n        this._set(value);\n    }\n    forceSetCachedValueAsync(value) {\n        return this._setAsync(value);\n    }\n    async refresh() {\n        return await this.getOrWait(\"write-only\");\n    }\n    async invalidate() {\n        this._store.setUnavailable();\n        this._pendingPromise = undefined;\n        return await this.refresh();\n    }\n    onStateChange(callback) {\n        const storeObj = this._store.onChange(callback);\n        if (this._subscriptionsCount++ === 0 && this._options.onSubscribe) {\n            const unsubscribe = this._options.onSubscribe(() => {\n                (0,_promises__WEBPACK_IMPORTED_MODULE_2__.runAsynchronously)(this.refresh());\n            });\n            this._unsubscribers.push(unsubscribe);\n        }\n        (0,_promises__WEBPACK_IMPORTED_MODULE_2__.runAsynchronously)(this.refresh());\n        let hasUnsubscribed = false;\n        return {\n            unsubscribe: () => {\n                if (hasUnsubscribed)\n                    return;\n                hasUnsubscribed = true;\n                storeObj.unsubscribe();\n                if (--this._subscriptionsCount === 0) {\n                    for (const unsubscribe of this._unsubscribers) {\n                        unsubscribe();\n                    }\n                }\n            },\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvY2FjaGVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUF5QztBQUNHO0FBQ21DO0FBQ3pDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsZ0NBQWdDLGtEQUFlO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ087QUFDUCx1Q0FBdUM7QUFDdkM7QUFDQTtBQUNBLHdCQUF3QixrREFBZTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLCtDQUFVO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLGVBQWUseURBQWUsMkJBQTJCO0FBQ3pEO0FBQ0Esd0JBQXdCLHNEQUFXO0FBQ25DO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsbURBQVE7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isa0RBQU87QUFDL0I7QUFDQSxlQUFlLGtEQUFPO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isa0RBQU87QUFDL0I7QUFDQTtBQUNBO0FBQ0EsZUFBZSxrREFBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiw0REFBaUI7QUFDakMsYUFBYTtBQUNiO0FBQ0E7QUFDQSxRQUFRLDREQUFpQjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWFya2VycGxBSWNlLy4vbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L3V0aWxzL2NhY2hlcy5qcz9kZDJiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERlcGVuZGVuY2llc01hcCB9IGZyb20gXCIuL21hcHNcIjtcbmltcG9ydCB7IGZpbHRlclVuZGVmaW5lZCB9IGZyb20gXCIuL29iamVjdHNcIjtcbmltcG9ydCB7IHBlbmRpbmcsIHJhdGVMaW1pdGVkLCByZXNvbHZlZCwgcnVuQXN5bmNocm9ub3VzbHkgfSBmcm9tIFwiLi9wcm9taXNlc1wiO1xuaW1wb3J0IHsgQXN5bmNTdG9yZSB9IGZyb20gXCIuL3N0b3Jlc1wiO1xuLyoqXG4gKiBDYW4gYmUgdXNlZCB0byBjYWNoZSB0aGUgcmVzdWx0IG9mIGEgZnVuY3Rpb24gY2FsbCwgZm9yIGV4YW1wbGUgZm9yIHRoZSBgdXNlYCBob29rIGluIFJlYWN0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FjaGVGdW5jdGlvbihmKSB7XG4gICAgY29uc3QgZGVwZW5kZW5jaWVzTWFwID0gbmV3IERlcGVuZGVuY2llc01hcCgpO1xuICAgIHJldHVybiAoKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgaWYgKGRlcGVuZGVuY2llc01hcC5oYXMoYXJncykpIHtcbiAgICAgICAgICAgIHJldHVybiBkZXBlbmRlbmNpZXNNYXAuZ2V0KGFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbHVlID0gZiguLi5hcmdzKTtcbiAgICAgICAgZGVwZW5kZW5jaWVzTWFwLnNldChhcmdzLCB2YWx1ZSk7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9KTtcbn1cbmV4cG9ydCBjbGFzcyBBc3luY0NhY2hlIHtcbiAgICBjb25zdHJ1Y3RvcihfZmV0Y2hlciwgX29wdGlvbnMgPSB7fSkge1xuICAgICAgICB0aGlzLl9mZXRjaGVyID0gX2ZldGNoZXI7XG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSBfb3B0aW9ucztcbiAgICAgICAgdGhpcy5fbWFwID0gbmV3IERlcGVuZGVuY2llc01hcCgpO1xuICAgICAgICB0aGlzLmlzQ2FjaGVBdmFpbGFibGUgPSB0aGlzLl9jcmVhdGVLZXllZChcImlzQ2FjaGVBdmFpbGFibGVcIik7XG4gICAgICAgIHRoaXMuZ2V0SWZDYWNoZWQgPSB0aGlzLl9jcmVhdGVLZXllZChcImdldElmQ2FjaGVkXCIpO1xuICAgICAgICB0aGlzLmdldE9yV2FpdCA9IHRoaXMuX2NyZWF0ZUtleWVkKFwiZ2V0T3JXYWl0XCIpO1xuICAgICAgICB0aGlzLmZvcmNlU2V0Q2FjaGVkVmFsdWUgPSB0aGlzLl9jcmVhdGVLZXllZChcImZvcmNlU2V0Q2FjaGVkVmFsdWVcIik7XG4gICAgICAgIHRoaXMuZm9yY2VTZXRDYWNoZWRWYWx1ZUFzeW5jID0gdGhpcy5fY3JlYXRlS2V5ZWQoXCJmb3JjZVNldENhY2hlZFZhbHVlQXN5bmNcIik7XG4gICAgICAgIHRoaXMucmVmcmVzaCA9IHRoaXMuX2NyZWF0ZUtleWVkKFwicmVmcmVzaFwiKTtcbiAgICAgICAgdGhpcy5pbnZhbGlkYXRlID0gdGhpcy5fY3JlYXRlS2V5ZWQoXCJpbnZhbGlkYXRlXCIpO1xuICAgICAgICB0aGlzLm9uU3RhdGVDaGFuZ2UgPSB0aGlzLl9jcmVhdGVLZXllZChcIm9uU3RhdGVDaGFuZ2VcIik7XG4gICAgICAgIC8vIG5vdGhpbmcgaGVyZSB5ZXRcbiAgICB9XG4gICAgX2NyZWF0ZUtleWVkKGZ1bmN0aW9uTmFtZSkge1xuICAgICAgICByZXR1cm4gKGtleSwgLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWVDYWNoZSA9IHRoaXMuZ2V0VmFsdWVDYWNoZShrZXkpO1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlQ2FjaGVbZnVuY3Rpb25OYW1lXS5hcHBseSh2YWx1ZUNhY2hlLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZ2V0VmFsdWVDYWNoZShkZXBlbmRlbmNpZXMpIHtcbiAgICAgICAgbGV0IGNhY2hlID0gdGhpcy5fbWFwLmdldChkZXBlbmRlbmNpZXMpO1xuICAgICAgICBpZiAoIWNhY2hlKSB7XG4gICAgICAgICAgICBjYWNoZSA9IG5ldyBBc3luY1ZhbHVlQ2FjaGUoYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5fZmV0Y2hlcihkZXBlbmRlbmNpZXMpLCB7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5fb3B0aW9ucyxcbiAgICAgICAgICAgICAgICBvblN1YnNjcmliZTogdGhpcy5fb3B0aW9ucy5vblN1YnNjcmliZSA/IChjYikgPT4gdGhpcy5fb3B0aW9ucy5vblN1YnNjcmliZShkZXBlbmRlbmNpZXMsIGNiKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5fbWFwLnNldChkZXBlbmRlbmNpZXMsIGNhY2hlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2FjaGU7XG4gICAgfVxufVxuY2xhc3MgQXN5bmNWYWx1ZUNhY2hlIHtcbiAgICBjb25zdHJ1Y3RvcihmZXRjaGVyLCBfb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSBfb3B0aW9ucztcbiAgICAgICAgdGhpcy5fc3Vic2NyaXB0aW9uc0NvdW50ID0gMDtcbiAgICAgICAgdGhpcy5fdW5zdWJzY3JpYmVycyA9IFtdO1xuICAgICAgICB0aGlzLl9zdG9yZSA9IG5ldyBBc3luY1N0b3JlKCk7XG4gICAgICAgIHRoaXMuX3JhdGVMaW1pdE9wdGlvbnMgPSB7XG4gICAgICAgICAgICBjb25jdXJyZW5jeTogMSxcbiAgICAgICAgICAgIHRocm90dGxlTXM6IDMwMCxcbiAgICAgICAgICAgIC4uLmZpbHRlclVuZGVmaW5lZChfb3B0aW9ucy5yYXRlTGltaXRlciA/PyB7fSksXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX2ZldGNoZXIgPSByYXRlTGltaXRlZChmZXRjaGVyLCB7XG4gICAgICAgICAgICAuLi50aGlzLl9yYXRlTGltaXRPcHRpb25zLFxuICAgICAgICAgICAgYmF0Y2hDYWxsczogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlzQ2FjaGVBdmFpbGFibGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdG9yZS5pc0F2YWlsYWJsZSgpO1xuICAgIH1cbiAgICBnZXRJZkNhY2hlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0b3JlLmdldCgpO1xuICAgIH1cbiAgICBnZXRPcldhaXQoY2FjaGVTdHJhdGVneSkge1xuICAgICAgICBjb25zdCBjYWNoZWQgPSB0aGlzLmdldElmQ2FjaGVkKCk7XG4gICAgICAgIGlmIChjYWNoZVN0cmF0ZWd5ID09PSBcInJlYWQtd3JpdGVcIiAmJiBjYWNoZWQuc3RhdHVzID09PSBcIm9rXCIpIHtcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlZChjYWNoZWQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlZmV0Y2goY2FjaGVTdHJhdGVneSk7XG4gICAgfVxuICAgIF9zZXQodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fc3RvcmUuc2V0KHZhbHVlKTtcbiAgICB9XG4gICAgX3NldEFzeW5jKHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHByb21pc2UgPSBwZW5kaW5nKHZhbHVlKTtcbiAgICAgICAgdGhpcy5fcGVuZGluZ1Byb21pc2UgPSBwcm9taXNlO1xuICAgICAgICByZXR1cm4gcGVuZGluZyh0aGlzLl9zdG9yZS5zZXRBc3luYyhwcm9taXNlKSk7XG4gICAgfVxuICAgIF9yZWZldGNoKGNhY2hlU3RyYXRlZ3kpIHtcbiAgICAgICAgaWYgKGNhY2hlU3RyYXRlZ3kgPT09IFwicmVhZC13cml0ZVwiICYmIHRoaXMuX3BlbmRpbmdQcm9taXNlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcGVuZGluZ1Byb21pc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHBlbmRpbmcodGhpcy5fZmV0Y2hlcigpKTtcbiAgICAgICAgaWYgKGNhY2hlU3RyYXRlZ3kgPT09IFwibmV2ZXJcIikge1xuICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBlbmRpbmcodGhpcy5fc2V0QXN5bmMocHJvbWlzZSkudGhlbigoKSA9PiBwcm9taXNlKSk7XG4gICAgfVxuICAgIGZvcmNlU2V0Q2FjaGVkVmFsdWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fc2V0KHZhbHVlKTtcbiAgICB9XG4gICAgZm9yY2VTZXRDYWNoZWRWYWx1ZUFzeW5jKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXRBc3luYyh2YWx1ZSk7XG4gICAgfVxuICAgIGFzeW5jIHJlZnJlc2goKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdldE9yV2FpdChcIndyaXRlLW9ubHlcIik7XG4gICAgfVxuICAgIGFzeW5jIGludmFsaWRhdGUoKSB7XG4gICAgICAgIHRoaXMuX3N0b3JlLnNldFVuYXZhaWxhYmxlKCk7XG4gICAgICAgIHRoaXMuX3BlbmRpbmdQcm9taXNlID0gdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5yZWZyZXNoKCk7XG4gICAgfVxuICAgIG9uU3RhdGVDaGFuZ2UoY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3Qgc3RvcmVPYmogPSB0aGlzLl9zdG9yZS5vbkNoYW5nZShjYWxsYmFjayk7XG4gICAgICAgIGlmICh0aGlzLl9zdWJzY3JpcHRpb25zQ291bnQrKyA9PT0gMCAmJiB0aGlzLl9vcHRpb25zLm9uU3Vic2NyaWJlKSB7XG4gICAgICAgICAgICBjb25zdCB1bnN1YnNjcmliZSA9IHRoaXMuX29wdGlvbnMub25TdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJ1bkFzeW5jaHJvbm91c2x5KHRoaXMucmVmcmVzaCgpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5fdW5zdWJzY3JpYmVycy5wdXNoKHVuc3Vic2NyaWJlKTtcbiAgICAgICAgfVxuICAgICAgICBydW5Bc3luY2hyb25vdXNseSh0aGlzLnJlZnJlc2goKSk7XG4gICAgICAgIGxldCBoYXNVbnN1YnNjcmliZWQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGhhc1Vuc3Vic2NyaWJlZClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGhhc1Vuc3Vic2NyaWJlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgc3RvcmVPYmoudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICBpZiAoLS10aGlzLl9zdWJzY3JpcHRpb25zQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB1bnN1YnNjcmliZSBvZiB0aGlzLl91bnN1YnNjcmliZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/caches.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/compile-time.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/compile-time.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   scrambleDuringCompileTime: () => (/* binding */ scrambleDuringCompileTime)\n/* harmony export */ });\n/**\n * Returns the first argument passed to it, but compilers won't be able to optimize it out. This is useful in some\n * cases where compiler warnings go awry; for example, when importing things that may not exist (but are guaranteed\n * to exist at runtime).\n */\nfunction scrambleDuringCompileTime(t) {\n    return t;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvY29tcGlsZS10aW1lLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7QUFDTztBQUNQO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tYXJrZXJwbEFJY2UvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvY29tcGlsZS10aW1lLmpzP2NmMTciXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBSZXR1cm5zIHRoZSBmaXJzdCBhcmd1bWVudCBwYXNzZWQgdG8gaXQsIGJ1dCBjb21waWxlcnMgd29uJ3QgYmUgYWJsZSB0byBvcHRpbWl6ZSBpdCBvdXQuIFRoaXMgaXMgdXNlZnVsIGluIHNvbWVcbiAqIGNhc2VzIHdoZXJlIGNvbXBpbGVyIHdhcm5pbmdzIGdvIGF3cnk7IGZvciBleGFtcGxlLCB3aGVuIGltcG9ydGluZyB0aGluZ3MgdGhhdCBtYXkgbm90IGV4aXN0IChidXQgYXJlIGd1YXJhbnRlZWRcbiAqIHRvIGV4aXN0IGF0IHJ1bnRpbWUpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2NyYW1ibGVEdXJpbmdDb21waWxlVGltZSh0KSB7XG4gICAgcmV0dXJuIHQ7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/compile-time.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/crypto.js":
/*!********************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/crypto.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateRandomValues: () => (/* binding */ generateRandomValues),\n/* harmony export */   generateSecureRandomString: () => (/* binding */ generateSecureRandomString)\n/* harmony export */ });\n/* harmony import */ var _bytes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bytes */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/bytes.js\");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errors */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js\");\n/* harmony import */ var _globals__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./globals */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/globals.js\");\n\n\n\nfunction generateRandomValues(array) {\n    if (!_globals__WEBPACK_IMPORTED_MODULE_2__.globalVar.crypto) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"Crypto API is not available in this environment. Are you using an old browser?\");\n    }\n    if (!_globals__WEBPACK_IMPORTED_MODULE_2__.globalVar.crypto.getRandomValues) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"crypto.getRandomValues is not available in this environment. Are you using an old browser?\");\n    }\n    return _globals__WEBPACK_IMPORTED_MODULE_2__.globalVar.crypto.getRandomValues(array);\n}\n/**\n * Generates a secure alphanumeric string using the system's cryptographically secure\n * random number generator.\n */\nfunction generateSecureRandomString(minBitsOfEntropy = 224) {\n    const base32CharactersCount = Math.ceil(minBitsOfEntropy / 5);\n    const bytesCount = Math.ceil(base32CharactersCount * 5 / 8);\n    const randomBytes = generateRandomValues(new Uint8Array(bytesCount));\n    const str = (0,_bytes__WEBPACK_IMPORTED_MODULE_0__.encodeBase32)(randomBytes);\n    return str.slice(str.length - base32CharactersCount).toLowerCase();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvY3J5cHRvLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXVDO0FBQ1E7QUFDVDtBQUMvQjtBQUNQLFNBQVMsK0NBQVM7QUFDbEIsa0JBQWtCLHdEQUFtQjtBQUNyQztBQUNBLFNBQVMsK0NBQVM7QUFDbEIsa0JBQWtCLHdEQUFtQjtBQUNyQztBQUNBLFdBQVcsK0NBQVM7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLG9EQUFZO0FBQzVCO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tYXJrZXJwbEFJY2UvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvY3J5cHRvLmpzP2VjMjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZW5jb2RlQmFzZTMyIH0gZnJvbSBcIi4vYnl0ZXNcIjtcbmltcG9ydCB7IFN0YWNrQXNzZXJ0aW9uRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnNcIjtcbmltcG9ydCB7IGdsb2JhbFZhciB9IGZyb20gXCIuL2dsb2JhbHNcIjtcbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVJhbmRvbVZhbHVlcyhhcnJheSkge1xuICAgIGlmICghZ2xvYmFsVmFyLmNyeXB0bykge1xuICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIkNyeXB0byBBUEkgaXMgbm90IGF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50LiBBcmUgeW91IHVzaW5nIGFuIG9sZCBicm93c2VyP1wiKTtcbiAgICB9XG4gICAgaWYgKCFnbG9iYWxWYXIuY3J5cHRvLmdldFJhbmRvbVZhbHVlcykge1xuICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcImNyeXB0by5nZXRSYW5kb21WYWx1ZXMgaXMgbm90IGF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50LiBBcmUgeW91IHVzaW5nIGFuIG9sZCBicm93c2VyP1wiKTtcbiAgICB9XG4gICAgcmV0dXJuIGdsb2JhbFZhci5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGFycmF5KTtcbn1cbi8qKlxuICogR2VuZXJhdGVzIGEgc2VjdXJlIGFscGhhbnVtZXJpYyBzdHJpbmcgdXNpbmcgdGhlIHN5c3RlbSdzIGNyeXB0b2dyYXBoaWNhbGx5IHNlY3VyZVxuICogcmFuZG9tIG51bWJlciBnZW5lcmF0b3IuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVNlY3VyZVJhbmRvbVN0cmluZyhtaW5CaXRzT2ZFbnRyb3B5ID0gMjI0KSB7XG4gICAgY29uc3QgYmFzZTMyQ2hhcmFjdGVyc0NvdW50ID0gTWF0aC5jZWlsKG1pbkJpdHNPZkVudHJvcHkgLyA1KTtcbiAgICBjb25zdCBieXRlc0NvdW50ID0gTWF0aC5jZWlsKGJhc2UzMkNoYXJhY3RlcnNDb3VudCAqIDUgLyA4KTtcbiAgICBjb25zdCByYW5kb21CeXRlcyA9IGdlbmVyYXRlUmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KGJ5dGVzQ291bnQpKTtcbiAgICBjb25zdCBzdHIgPSBlbmNvZGVCYXNlMzIocmFuZG9tQnl0ZXMpO1xuICAgIHJldHVybiBzdHIuc2xpY2Uoc3RyLmxlbmd0aCAtIGJhc2UzMkNoYXJhY3RlcnNDb3VudCkudG9Mb3dlckNhc2UoKTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/crypto.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/env.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/env.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEnvVariable: () => (/* binding */ getEnvVariable),\n/* harmony export */   getNodeEnvironment: () => (/* binding */ getNodeEnvironment),\n/* harmony export */   isBrowserLike: () => (/* binding */ isBrowserLike)\n/* harmony export */ });\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js\");\n/* harmony import */ var _strings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./strings */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/strings.js\");\n\n\nfunction isBrowserLike() {\n    return typeof window !== \"undefined\" && typeof document !== \"undefined\" && typeof document.createElement !== \"undefined\";\n}\n/**\n * Returns the environment variable with the given name, returning the default (if given) or throwing an error (otherwise) if it's undefined or the empty string.\n */\nfunction getEnvVariable(name, defaultValue) {\n    if (isBrowserLike()) {\n        throw new Error((0,_strings__WEBPACK_IMPORTED_MODULE_1__.deindent) `\n      Can't use getEnvVariable on the client because Next.js transpiles expressions of the kind process.env.XYZ at build-time on the client.\n    \n      Use process.env.XYZ directly instead.\n    `);\n    }\n    return ((process.env[name] || defaultValue) ?? (0,_errors__WEBPACK_IMPORTED_MODULE_0__.throwErr)(`Missing environment variable: ${name}`)) || (defaultValue ?? (0,_errors__WEBPACK_IMPORTED_MODULE_0__.throwErr)(`Empty environment variable: ${name}`));\n}\nfunction getNodeEnvironment() {\n    return getEnvVariable(\"NODE_ENV\", \"\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvZW52LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQW9DO0FBQ0M7QUFDOUI7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLHdCQUF3QixrREFBUTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELGlEQUFRLGtDQUFrQyxLQUFLLHdCQUF3QixpREFBUSxnQ0FBZ0MsS0FBSztBQUN2SztBQUNPO0FBQ1A7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL21hcmtlcnBsQUljZS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9lbnYuanM/MTc0MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0aHJvd0VyciB9IGZyb20gXCIuL2Vycm9yc1wiO1xuaW1wb3J0IHsgZGVpbmRlbnQgfSBmcm9tIFwiLi9zdHJpbmdzXCI7XG5leHBvcnQgZnVuY3Rpb24gaXNCcm93c2VyTGlrZSgpIHtcbiAgICByZXR1cm4gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2YgZG9jdW1lbnQgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgIT09IFwidW5kZWZpbmVkXCI7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIGVudmlyb25tZW50IHZhcmlhYmxlIHdpdGggdGhlIGdpdmVuIG5hbWUsIHJldHVybmluZyB0aGUgZGVmYXVsdCAoaWYgZ2l2ZW4pIG9yIHRocm93aW5nIGFuIGVycm9yIChvdGhlcndpc2UpIGlmIGl0J3MgdW5kZWZpbmVkIG9yIHRoZSBlbXB0eSBzdHJpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbnZWYXJpYWJsZShuYW1lLCBkZWZhdWx0VmFsdWUpIHtcbiAgICBpZiAoaXNCcm93c2VyTGlrZSgpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihkZWluZGVudCBgXG4gICAgICBDYW4ndCB1c2UgZ2V0RW52VmFyaWFibGUgb24gdGhlIGNsaWVudCBiZWNhdXNlIE5leHQuanMgdHJhbnNwaWxlcyBleHByZXNzaW9ucyBvZiB0aGUga2luZCBwcm9jZXNzLmVudi5YWVogYXQgYnVpbGQtdGltZSBvbiB0aGUgY2xpZW50LlxuICAgIFxuICAgICAgVXNlIHByb2Nlc3MuZW52LlhZWiBkaXJlY3RseSBpbnN0ZWFkLlxuICAgIGApO1xuICAgIH1cbiAgICByZXR1cm4gKChwcm9jZXNzLmVudltuYW1lXSB8fCBkZWZhdWx0VmFsdWUpID8/IHRocm93RXJyKGBNaXNzaW5nIGVudmlyb25tZW50IHZhcmlhYmxlOiAke25hbWV9YCkpIHx8IChkZWZhdWx0VmFsdWUgPz8gdGhyb3dFcnIoYEVtcHR5IGVudmlyb25tZW50IHZhcmlhYmxlOiAke25hbWV9YCkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldE5vZGVFbnZpcm9ubWVudCgpIHtcbiAgICByZXR1cm4gZ2V0RW52VmFyaWFibGUoXCJOT0RFX0VOVlwiLCBcIlwiKTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/env.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js":
/*!********************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/errors.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StackAssertionError: () => (/* binding */ StackAssertionError),\n/* harmony export */   StatusError: () => (/* binding */ StatusError),\n/* harmony export */   captureError: () => (/* binding */ captureError),\n/* harmony export */   registerErrorSink: () => (/* binding */ registerErrorSink),\n/* harmony export */   throwErr: () => (/* binding */ throwErr)\n/* harmony export */ });\n/* harmony import */ var _globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./globals */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/globals.js\");\n\nfunction throwErr(...args) {\n    if (typeof args[0] === \"string\") {\n        throw new StackAssertionError(args[0], args[1]);\n    }\n    else if (args[0] instanceof Error) {\n        throw args[0];\n    }\n    else {\n        // @ts-expect-error\n        throw new StatusError(...args);\n    }\n}\nclass StackAssertionError extends Error {\n    constructor(message, extraData, options) {\n        const disclaimer = `\\n\\nThis is likely an error in Stack. Please make sure you are running the newest version and report it.`;\n        super(`${message}${message.endsWith(disclaimer) ? \"\" : disclaimer}`, options);\n        this.extraData = extraData;\n        this.customCaptureExtraArgs = [\n            {\n                ...this.extraData,\n                ...this.cause ? { cause: this.cause } : {},\n            },\n        ];\n    }\n}\nStackAssertionError.prototype.name = \"StackAssertionError\";\nconst errorSinks = new Set();\nfunction registerErrorSink(sink) {\n    if (errorSinks.has(sink)) {\n        return;\n    }\n    errorSinks.add(sink);\n}\nregisterErrorSink((location, ...args) => {\n    console.error(`\\x1b[41mError in ${location}:`, ...args, \"\\x1b[0m\");\n});\nregisterErrorSink((location, error, ...extraArgs) => {\n    _globals__WEBPACK_IMPORTED_MODULE_0__.globalVar.stackCapturedErrors = _globals__WEBPACK_IMPORTED_MODULE_0__.globalVar.stackCapturedErrors ?? [];\n    _globals__WEBPACK_IMPORTED_MODULE_0__.globalVar.stackCapturedErrors.push({ location, error, extraArgs });\n});\nfunction captureError(location, error) {\n    for (const sink of errorSinks) {\n        sink(location, error, ...error && (typeof error === 'object' || typeof error === 'function') && \"customCaptureExtraArgs\" in error && Array.isArray(error.customCaptureExtraArgs) ? error.customCaptureExtraArgs : []);\n    }\n}\nclass StatusError extends Error {\n    constructor(status, message) {\n        if (typeof status === \"object\") {\n            message ??= status.message;\n            status = status.statusCode;\n        }\n        super(message);\n        this.name = \"StatusError\";\n        this.statusCode = status;\n        if (!message) {\n            throw new StackAssertionError(\"StatusError always requires a message unless a Status object is passed\", {}, { cause: this });\n        }\n    }\n    isClientError() {\n        return this.statusCode >= 400 && this.statusCode < 500;\n    }\n    isServerError() {\n        return !this.isClientError();\n    }\n    getStatusCode() {\n        return this.statusCode;\n    }\n    getBody() {\n        return new TextEncoder().encode(this.message);\n    }\n    getHeaders() {\n        return {\n            \"Content-Type\": [\"text/plain; charset=utf-8\"],\n        };\n    }\n    toDescriptiveJson() {\n        return {\n            status_code: this.getStatusCode(),\n            message: this.message,\n            headers: this.getHeaders(),\n        };\n    }\n    /**\n     * @deprecated this is not a good way to make status errors human-readable, use toDescriptiveJson instead\n     */\n    toHttpJson() {\n        return {\n            status_code: this.statusCode,\n            body: this.message,\n            headers: this.getHeaders(),\n        };\n    }\n}\nStatusError.BadRequest = { statusCode: 400, message: \"Bad Request\" };\nStatusError.Unauthorized = { statusCode: 401, message: \"Unauthorized\" };\nStatusError.PaymentRequired = { statusCode: 402, message: \"Payment Required\" };\nStatusError.Forbidden = { statusCode: 403, message: \"Forbidden\" };\nStatusError.NotFound = { statusCode: 404, message: \"Not Found\" };\nStatusError.MethodNotAllowed = { statusCode: 405, message: \"Method Not Allowed\" };\nStatusError.NotAcceptable = { statusCode: 406, message: \"Not Acceptable\" };\nStatusError.ProxyAuthenticationRequired = { statusCode: 407, message: \"Proxy Authentication Required\" };\nStatusError.RequestTimeout = { statusCode: 408, message: \"Request Timeout\" };\nStatusError.Conflict = { statusCode: 409, message: \"Conflict\" };\nStatusError.Gone = { statusCode: 410, message: \"Gone\" };\nStatusError.LengthRequired = { statusCode: 411, message: \"Length Required\" };\nStatusError.PreconditionFailed = { statusCode: 412, message: \"Precondition Failed\" };\nStatusError.PayloadTooLarge = { statusCode: 413, message: \"Payload Too Large\" };\nStatusError.URITooLong = { statusCode: 414, message: \"URI Too Long\" };\nStatusError.UnsupportedMediaType = { statusCode: 415, message: \"Unsupported Media Type\" };\nStatusError.RangeNotSatisfiable = { statusCode: 416, message: \"Range Not Satisfiable\" };\nStatusError.ExpectationFailed = { statusCode: 417, message: \"Expectation Failed\" };\nStatusError.ImATeapot = { statusCode: 418, message: \"I'm a teapot\" };\nStatusError.MisdirectedRequest = { statusCode: 421, message: \"Misdirected Request\" };\nStatusError.UnprocessableEntity = { statusCode: 422, message: \"Unprocessable Entity\" };\nStatusError.Locked = { statusCode: 423, message: \"Locked\" };\nStatusError.FailedDependency = { statusCode: 424, message: \"Failed Dependency\" };\nStatusError.TooEarly = { statusCode: 425, message: \"Too Early\" };\nStatusError.UpgradeRequired = { statusCode: 426, message: \"Upgrade Required\" };\nStatusError.PreconditionRequired = { statusCode: 428, message: \"Precondition Required\" };\nStatusError.TooManyRequests = { statusCode: 429, message: \"Too Many Requests\" };\nStatusError.RequestHeaderFieldsTooLarge = { statusCode: 431, message: \"Request Header Fields Too Large\" };\nStatusError.UnavailableForLegalReasons = { statusCode: 451, message: \"Unavailable For Legal Reasons\" };\nStatusError.InternalServerError = { statusCode: 500, message: \"Internal Server Error\" };\nStatusError.NotImplemented = { statusCode: 501, message: \"Not Implemented\" };\nStatusError.BadGateway = { statusCode: 502, message: \"Bad Gateway\" };\nStatusError.ServiceUnavailable = { statusCode: 503, message: \"Service Unavailable\" };\nStatusError.GatewayTimeout = { statusCode: 504, message: \"Gateway Timeout\" };\nStatusError.HTTPVersionNotSupported = { statusCode: 505, message: \"HTTP Version Not Supported\" };\nStatusError.VariantAlsoNegotiates = { statusCode: 506, message: \"Variant Also Negotiates\" };\nStatusError.InsufficientStorage = { statusCode: 507, message: \"Insufficient Storage\" };\nStatusError.LoopDetected = { statusCode: 508, message: \"Loop Detected\" };\nStatusError.NotExtended = { statusCode: 510, message: \"Not Extended\" };\nStatusError.NetworkAuthenticationRequired = { statusCode: 511, message: \"Network Authentication Required\" };\nStatusError.prototype.name = \"StatusError\";\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvZXJyb3JzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFzQztBQUMvQjtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSxpQkFBaUIsUUFBUSxFQUFFLCtDQUErQztBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxvQkFBb0IsSUFBSTtBQUMxRCxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLFNBQVM7QUFDL0MsQ0FBQztBQUNEO0FBQ0EsSUFBSSwrQ0FBUyx1QkFBdUIsK0NBQVM7QUFDN0MsSUFBSSwrQ0FBUyw0QkFBNEIsNEJBQTRCO0FBQ3JFLENBQUM7QUFDTTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzSEFBc0gsSUFBSSxhQUFhO0FBQ3ZJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0IsNkJBQTZCO0FBQzdCLGdDQUFnQztBQUNoQywwQkFBMEI7QUFDMUIseUJBQXlCO0FBQ3pCLGlDQUFpQztBQUNqQyw4QkFBOEI7QUFDOUIsNENBQTRDO0FBQzVDLCtCQUErQjtBQUMvQix5QkFBeUI7QUFDekIscUJBQXFCO0FBQ3JCLCtCQUErQjtBQUMvQixtQ0FBbUM7QUFDbkMsZ0NBQWdDO0FBQ2hDLDJCQUEyQjtBQUMzQixxQ0FBcUM7QUFDckMsb0NBQW9DO0FBQ3BDLGtDQUFrQztBQUNsQywwQkFBMEI7QUFDMUIsbUNBQW1DO0FBQ25DLG9DQUFvQztBQUNwQyx1QkFBdUI7QUFDdkIsaUNBQWlDO0FBQ2pDLHlCQUF5QjtBQUN6QixnQ0FBZ0M7QUFDaEMscUNBQXFDO0FBQ3JDLGdDQUFnQztBQUNoQyw0Q0FBNEM7QUFDNUMsMkNBQTJDO0FBQzNDLG9DQUFvQztBQUNwQywrQkFBK0I7QUFDL0IsMkJBQTJCO0FBQzNCLG1DQUFtQztBQUNuQywrQkFBK0I7QUFDL0Isd0NBQXdDO0FBQ3hDLHNDQUFzQztBQUN0QyxvQ0FBb0M7QUFDcEMsNkJBQTZCO0FBQzdCLDRCQUE0QjtBQUM1Qiw4Q0FBOEM7QUFDOUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tYXJrZXJwbEFJY2UvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvZXJyb3JzLmpzPzUyYzMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2xvYmFsVmFyIH0gZnJvbSBcIi4vZ2xvYmFsc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHRocm93RXJyKC4uLmFyZ3MpIHtcbiAgICBpZiAodHlwZW9mIGFyZ3NbMF0gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoYXJnc1swXSwgYXJnc1sxXSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGFyZ3NbMF0gaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICB0aHJvdyBhcmdzWzBdO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICB0aHJvdyBuZXcgU3RhdHVzRXJyb3IoLi4uYXJncyk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFN0YWNrQXNzZXJ0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgZXh0cmFEYXRhLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGRpc2NsYWltZXIgPSBgXFxuXFxuVGhpcyBpcyBsaWtlbHkgYW4gZXJyb3IgaW4gU3RhY2suIFBsZWFzZSBtYWtlIHN1cmUgeW91IGFyZSBydW5uaW5nIHRoZSBuZXdlc3QgdmVyc2lvbiBhbmQgcmVwb3J0IGl0LmA7XG4gICAgICAgIHN1cGVyKGAke21lc3NhZ2V9JHttZXNzYWdlLmVuZHNXaXRoKGRpc2NsYWltZXIpID8gXCJcIiA6IGRpc2NsYWltZXJ9YCwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMuZXh0cmFEYXRhID0gZXh0cmFEYXRhO1xuICAgICAgICB0aGlzLmN1c3RvbUNhcHR1cmVFeHRyYUFyZ3MgPSBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5leHRyYURhdGEsXG4gICAgICAgICAgICAgICAgLi4udGhpcy5jYXVzZSA/IHsgY2F1c2U6IHRoaXMuY2F1c2UgfSA6IHt9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgXTtcbiAgICB9XG59XG5TdGFja0Fzc2VydGlvbkVycm9yLnByb3RvdHlwZS5uYW1lID0gXCJTdGFja0Fzc2VydGlvbkVycm9yXCI7XG5jb25zdCBlcnJvclNpbmtzID0gbmV3IFNldCgpO1xuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyRXJyb3JTaW5rKHNpbmspIHtcbiAgICBpZiAoZXJyb3JTaW5rcy5oYXMoc2luaykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlcnJvclNpbmtzLmFkZChzaW5rKTtcbn1cbnJlZ2lzdGVyRXJyb3JTaW5rKChsb2NhdGlvbiwgLi4uYXJncykgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoYFxceDFiWzQxbUVycm9yIGluICR7bG9jYXRpb259OmAsIC4uLmFyZ3MsIFwiXFx4MWJbMG1cIik7XG59KTtcbnJlZ2lzdGVyRXJyb3JTaW5rKChsb2NhdGlvbiwgZXJyb3IsIC4uLmV4dHJhQXJncykgPT4ge1xuICAgIGdsb2JhbFZhci5zdGFja0NhcHR1cmVkRXJyb3JzID0gZ2xvYmFsVmFyLnN0YWNrQ2FwdHVyZWRFcnJvcnMgPz8gW107XG4gICAgZ2xvYmFsVmFyLnN0YWNrQ2FwdHVyZWRFcnJvcnMucHVzaCh7IGxvY2F0aW9uLCBlcnJvciwgZXh0cmFBcmdzIH0pO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gY2FwdHVyZUVycm9yKGxvY2F0aW9uLCBlcnJvcikge1xuICAgIGZvciAoY29uc3Qgc2luayBvZiBlcnJvclNpbmtzKSB7XG4gICAgICAgIHNpbmsobG9jYXRpb24sIGVycm9yLCAuLi5lcnJvciAmJiAodHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyB8fCB0eXBlb2YgZXJyb3IgPT09ICdmdW5jdGlvbicpICYmIFwiY3VzdG9tQ2FwdHVyZUV4dHJhQXJnc1wiIGluIGVycm9yICYmIEFycmF5LmlzQXJyYXkoZXJyb3IuY3VzdG9tQ2FwdHVyZUV4dHJhQXJncykgPyBlcnJvci5jdXN0b21DYXB0dXJlRXh0cmFBcmdzIDogW10pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBTdGF0dXNFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihzdGF0dXMsIG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzdGF0dXMgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgPz89IHN0YXR1cy5tZXNzYWdlO1xuICAgICAgICAgICAgc3RhdHVzID0gc3RhdHVzLnN0YXR1c0NvZGU7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiU3RhdHVzRXJyb3JcIjtcbiAgICAgICAgdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzO1xuICAgICAgICBpZiAoIW1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiU3RhdHVzRXJyb3IgYWx3YXlzIHJlcXVpcmVzIGEgbWVzc2FnZSB1bmxlc3MgYSBTdGF0dXMgb2JqZWN0IGlzIHBhc3NlZFwiLCB7fSwgeyBjYXVzZTogdGhpcyB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpc0NsaWVudEVycm9yKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXNDb2RlID49IDQwMCAmJiB0aGlzLnN0YXR1c0NvZGUgPCA1MDA7XG4gICAgfVxuICAgIGlzU2VydmVyRXJyb3IoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5pc0NsaWVudEVycm9yKCk7XG4gICAgfVxuICAgIGdldFN0YXR1c0NvZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1c0NvZGU7XG4gICAgfVxuICAgIGdldEJvZHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUodGhpcy5tZXNzYWdlKTtcbiAgICB9XG4gICAgZ2V0SGVhZGVycygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFtcInRleHQvcGxhaW47IGNoYXJzZXQ9dXRmLThcIl0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIHRvRGVzY3JpcHRpdmVKc29uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzX2NvZGU6IHRoaXMuZ2V0U3RhdHVzQ29kZSgpLFxuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5tZXNzYWdlLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5nZXRIZWFkZXJzKCksXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIHRoaXMgaXMgbm90IGEgZ29vZCB3YXkgdG8gbWFrZSBzdGF0dXMgZXJyb3JzIGh1bWFuLXJlYWRhYmxlLCB1c2UgdG9EZXNjcmlwdGl2ZUpzb24gaW5zdGVhZFxuICAgICAqL1xuICAgIHRvSHR0cEpzb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGF0dXNfY29kZTogdGhpcy5zdGF0dXNDb2RlLFxuICAgICAgICAgICAgYm9keTogdGhpcy5tZXNzYWdlLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5nZXRIZWFkZXJzKCksXG4gICAgICAgIH07XG4gICAgfVxufVxuU3RhdHVzRXJyb3IuQmFkUmVxdWVzdCA9IHsgc3RhdHVzQ29kZTogNDAwLCBtZXNzYWdlOiBcIkJhZCBSZXF1ZXN0XCIgfTtcblN0YXR1c0Vycm9yLlVuYXV0aG9yaXplZCA9IHsgc3RhdHVzQ29kZTogNDAxLCBtZXNzYWdlOiBcIlVuYXV0aG9yaXplZFwiIH07XG5TdGF0dXNFcnJvci5QYXltZW50UmVxdWlyZWQgPSB7IHN0YXR1c0NvZGU6IDQwMiwgbWVzc2FnZTogXCJQYXltZW50IFJlcXVpcmVkXCIgfTtcblN0YXR1c0Vycm9yLkZvcmJpZGRlbiA9IHsgc3RhdHVzQ29kZTogNDAzLCBtZXNzYWdlOiBcIkZvcmJpZGRlblwiIH07XG5TdGF0dXNFcnJvci5Ob3RGb3VuZCA9IHsgc3RhdHVzQ29kZTogNDA0LCBtZXNzYWdlOiBcIk5vdCBGb3VuZFwiIH07XG5TdGF0dXNFcnJvci5NZXRob2ROb3RBbGxvd2VkID0geyBzdGF0dXNDb2RlOiA0MDUsIG1lc3NhZ2U6IFwiTWV0aG9kIE5vdCBBbGxvd2VkXCIgfTtcblN0YXR1c0Vycm9yLk5vdEFjY2VwdGFibGUgPSB7IHN0YXR1c0NvZGU6IDQwNiwgbWVzc2FnZTogXCJOb3QgQWNjZXB0YWJsZVwiIH07XG5TdGF0dXNFcnJvci5Qcm94eUF1dGhlbnRpY2F0aW9uUmVxdWlyZWQgPSB7IHN0YXR1c0NvZGU6IDQwNywgbWVzc2FnZTogXCJQcm94eSBBdXRoZW50aWNhdGlvbiBSZXF1aXJlZFwiIH07XG5TdGF0dXNFcnJvci5SZXF1ZXN0VGltZW91dCA9IHsgc3RhdHVzQ29kZTogNDA4LCBtZXNzYWdlOiBcIlJlcXVlc3QgVGltZW91dFwiIH07XG5TdGF0dXNFcnJvci5Db25mbGljdCA9IHsgc3RhdHVzQ29kZTogNDA5LCBtZXNzYWdlOiBcIkNvbmZsaWN0XCIgfTtcblN0YXR1c0Vycm9yLkdvbmUgPSB7IHN0YXR1c0NvZGU6IDQxMCwgbWVzc2FnZTogXCJHb25lXCIgfTtcblN0YXR1c0Vycm9yLkxlbmd0aFJlcXVpcmVkID0geyBzdGF0dXNDb2RlOiA0MTEsIG1lc3NhZ2U6IFwiTGVuZ3RoIFJlcXVpcmVkXCIgfTtcblN0YXR1c0Vycm9yLlByZWNvbmRpdGlvbkZhaWxlZCA9IHsgc3RhdHVzQ29kZTogNDEyLCBtZXNzYWdlOiBcIlByZWNvbmRpdGlvbiBGYWlsZWRcIiB9O1xuU3RhdHVzRXJyb3IuUGF5bG9hZFRvb0xhcmdlID0geyBzdGF0dXNDb2RlOiA0MTMsIG1lc3NhZ2U6IFwiUGF5bG9hZCBUb28gTGFyZ2VcIiB9O1xuU3RhdHVzRXJyb3IuVVJJVG9vTG9uZyA9IHsgc3RhdHVzQ29kZTogNDE0LCBtZXNzYWdlOiBcIlVSSSBUb28gTG9uZ1wiIH07XG5TdGF0dXNFcnJvci5VbnN1cHBvcnRlZE1lZGlhVHlwZSA9IHsgc3RhdHVzQ29kZTogNDE1LCBtZXNzYWdlOiBcIlVuc3VwcG9ydGVkIE1lZGlhIFR5cGVcIiB9O1xuU3RhdHVzRXJyb3IuUmFuZ2VOb3RTYXRpc2ZpYWJsZSA9IHsgc3RhdHVzQ29kZTogNDE2LCBtZXNzYWdlOiBcIlJhbmdlIE5vdCBTYXRpc2ZpYWJsZVwiIH07XG5TdGF0dXNFcnJvci5FeHBlY3RhdGlvbkZhaWxlZCA9IHsgc3RhdHVzQ29kZTogNDE3LCBtZXNzYWdlOiBcIkV4cGVjdGF0aW9uIEZhaWxlZFwiIH07XG5TdGF0dXNFcnJvci5JbUFUZWFwb3QgPSB7IHN0YXR1c0NvZGU6IDQxOCwgbWVzc2FnZTogXCJJJ20gYSB0ZWFwb3RcIiB9O1xuU3RhdHVzRXJyb3IuTWlzZGlyZWN0ZWRSZXF1ZXN0ID0geyBzdGF0dXNDb2RlOiA0MjEsIG1lc3NhZ2U6IFwiTWlzZGlyZWN0ZWQgUmVxdWVzdFwiIH07XG5TdGF0dXNFcnJvci5VbnByb2Nlc3NhYmxlRW50aXR5ID0geyBzdGF0dXNDb2RlOiA0MjIsIG1lc3NhZ2U6IFwiVW5wcm9jZXNzYWJsZSBFbnRpdHlcIiB9O1xuU3RhdHVzRXJyb3IuTG9ja2VkID0geyBzdGF0dXNDb2RlOiA0MjMsIG1lc3NhZ2U6IFwiTG9ja2VkXCIgfTtcblN0YXR1c0Vycm9yLkZhaWxlZERlcGVuZGVuY3kgPSB7IHN0YXR1c0NvZGU6IDQyNCwgbWVzc2FnZTogXCJGYWlsZWQgRGVwZW5kZW5jeVwiIH07XG5TdGF0dXNFcnJvci5Ub29FYXJseSA9IHsgc3RhdHVzQ29kZTogNDI1LCBtZXNzYWdlOiBcIlRvbyBFYXJseVwiIH07XG5TdGF0dXNFcnJvci5VcGdyYWRlUmVxdWlyZWQgPSB7IHN0YXR1c0NvZGU6IDQyNiwgbWVzc2FnZTogXCJVcGdyYWRlIFJlcXVpcmVkXCIgfTtcblN0YXR1c0Vycm9yLlByZWNvbmRpdGlvblJlcXVpcmVkID0geyBzdGF0dXNDb2RlOiA0MjgsIG1lc3NhZ2U6IFwiUHJlY29uZGl0aW9uIFJlcXVpcmVkXCIgfTtcblN0YXR1c0Vycm9yLlRvb01hbnlSZXF1ZXN0cyA9IHsgc3RhdHVzQ29kZTogNDI5LCBtZXNzYWdlOiBcIlRvbyBNYW55IFJlcXVlc3RzXCIgfTtcblN0YXR1c0Vycm9yLlJlcXVlc3RIZWFkZXJGaWVsZHNUb29MYXJnZSA9IHsgc3RhdHVzQ29kZTogNDMxLCBtZXNzYWdlOiBcIlJlcXVlc3QgSGVhZGVyIEZpZWxkcyBUb28gTGFyZ2VcIiB9O1xuU3RhdHVzRXJyb3IuVW5hdmFpbGFibGVGb3JMZWdhbFJlYXNvbnMgPSB7IHN0YXR1c0NvZGU6IDQ1MSwgbWVzc2FnZTogXCJVbmF2YWlsYWJsZSBGb3IgTGVnYWwgUmVhc29uc1wiIH07XG5TdGF0dXNFcnJvci5JbnRlcm5hbFNlcnZlckVycm9yID0geyBzdGF0dXNDb2RlOiA1MDAsIG1lc3NhZ2U6IFwiSW50ZXJuYWwgU2VydmVyIEVycm9yXCIgfTtcblN0YXR1c0Vycm9yLk5vdEltcGxlbWVudGVkID0geyBzdGF0dXNDb2RlOiA1MDEsIG1lc3NhZ2U6IFwiTm90IEltcGxlbWVudGVkXCIgfTtcblN0YXR1c0Vycm9yLkJhZEdhdGV3YXkgPSB7IHN0YXR1c0NvZGU6IDUwMiwgbWVzc2FnZTogXCJCYWQgR2F0ZXdheVwiIH07XG5TdGF0dXNFcnJvci5TZXJ2aWNlVW5hdmFpbGFibGUgPSB7IHN0YXR1c0NvZGU6IDUwMywgbWVzc2FnZTogXCJTZXJ2aWNlIFVuYXZhaWxhYmxlXCIgfTtcblN0YXR1c0Vycm9yLkdhdGV3YXlUaW1lb3V0ID0geyBzdGF0dXNDb2RlOiA1MDQsIG1lc3NhZ2U6IFwiR2F0ZXdheSBUaW1lb3V0XCIgfTtcblN0YXR1c0Vycm9yLkhUVFBWZXJzaW9uTm90U3VwcG9ydGVkID0geyBzdGF0dXNDb2RlOiA1MDUsIG1lc3NhZ2U6IFwiSFRUUCBWZXJzaW9uIE5vdCBTdXBwb3J0ZWRcIiB9O1xuU3RhdHVzRXJyb3IuVmFyaWFudEFsc29OZWdvdGlhdGVzID0geyBzdGF0dXNDb2RlOiA1MDYsIG1lc3NhZ2U6IFwiVmFyaWFudCBBbHNvIE5lZ290aWF0ZXNcIiB9O1xuU3RhdHVzRXJyb3IuSW5zdWZmaWNpZW50U3RvcmFnZSA9IHsgc3RhdHVzQ29kZTogNTA3LCBtZXNzYWdlOiBcIkluc3VmZmljaWVudCBTdG9yYWdlXCIgfTtcblN0YXR1c0Vycm9yLkxvb3BEZXRlY3RlZCA9IHsgc3RhdHVzQ29kZTogNTA4LCBtZXNzYWdlOiBcIkxvb3AgRGV0ZWN0ZWRcIiB9O1xuU3RhdHVzRXJyb3IuTm90RXh0ZW5kZWQgPSB7IHN0YXR1c0NvZGU6IDUxMCwgbWVzc2FnZTogXCJOb3QgRXh0ZW5kZWRcIiB9O1xuU3RhdHVzRXJyb3IuTmV0d29ya0F1dGhlbnRpY2F0aW9uUmVxdWlyZWQgPSB7IHN0YXR1c0NvZGU6IDUxMSwgbWVzc2FnZTogXCJOZXR3b3JrIEF1dGhlbnRpY2F0aW9uIFJlcXVpcmVkXCIgfTtcblN0YXR1c0Vycm9yLnByb3RvdHlwZS5uYW1lID0gXCJTdGF0dXNFcnJvclwiO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/functions.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/functions.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   identity: () => (/* binding */ identity),\n/* harmony export */   identityArgs: () => (/* binding */ identityArgs)\n/* harmony export */ });\nfunction identity(t) {\n    return t;\n}\nfunction identityArgs(...args) {\n    return args;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvZnVuY3Rpb25zLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQU87QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWFya2VycGxBSWNlLy4vbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L3V0aWxzL2Z1bmN0aW9ucy5qcz84ZDMwIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBpZGVudGl0eSh0KSB7XG4gICAgcmV0dXJuIHQ7XG59XG5leHBvcnQgZnVuY3Rpb24gaWRlbnRpdHlBcmdzKC4uLmFyZ3MpIHtcbiAgICByZXR1cm4gYXJncztcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/functions.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/globals.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/globals.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createGlobal: () => (/* binding */ createGlobal),\n/* harmony export */   globalVar: () => (/* binding */ globalVar)\n/* harmony export */ });\nconst globalVar = typeof globalThis !== 'undefined' ? globalThis :\n    typeof global !== 'undefined' ? global :\n        typeof window !== 'undefined' ? window :\n            typeof self !== 'undefined' ? self :\n                {};\n\nif (typeof globalThis === 'undefined') {\n    globalVar.globalThis = globalVar;\n}\nconst stackGlobalsSymbol = Symbol.for('__stack-globals');\nglobalVar[stackGlobalsSymbol] ??= {};\nfunction createGlobal(key, init) {\n    if (!globalVar[stackGlobalsSymbol][key]) {\n        globalVar[stackGlobalsSymbol][key] = init();\n    }\n    return globalVar[stackGlobalsSymbol][key];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvZ2xvYmFscy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL21hcmtlcnBsQUljZS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9nbG9iYWxzLmpzPzQ3NTIiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZ2xvYmFsVmFyID0gdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsVGhpcyA6XG4gICAgdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOlxuICAgICAgICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6XG4gICAgICAgICAgICB0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDpcbiAgICAgICAgICAgICAgICB7fTtcbmV4cG9ydCB7IGdsb2JhbFZhciwgfTtcbmlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBnbG9iYWxWYXIuZ2xvYmFsVGhpcyA9IGdsb2JhbFZhcjtcbn1cbmNvbnN0IHN0YWNrR2xvYmFsc1N5bWJvbCA9IFN5bWJvbC5mb3IoJ19fc3RhY2stZ2xvYmFscycpO1xuZ2xvYmFsVmFyW3N0YWNrR2xvYmFsc1N5bWJvbF0gPz89IHt9O1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUdsb2JhbChrZXksIGluaXQpIHtcbiAgICBpZiAoIWdsb2JhbFZhcltzdGFja0dsb2JhbHNTeW1ib2xdW2tleV0pIHtcbiAgICAgICAgZ2xvYmFsVmFyW3N0YWNrR2xvYmFsc1N5bWJvbF1ba2V5XSA9IGluaXQoKTtcbiAgICB9XG4gICAgcmV0dXJuIGdsb2JhbFZhcltzdGFja0dsb2JhbHNTeW1ib2xdW2tleV07XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/globals.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/maps.js":
/*!******************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/maps.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DependenciesMap: () => (/* binding */ DependenciesMap),\n/* harmony export */   MaybeWeakMap: () => (/* binding */ MaybeWeakMap)\n/* harmony export */ });\n/* harmony import */ var _results__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./results */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/results.js\");\nvar _a, _b;\n\nclass MaybeWeakMap {\n    constructor(entries) {\n        this[_a] = \"MaybeWeakMap\";\n        const entriesArray = [...entries ?? []];\n        this._primitiveMap = new Map(entriesArray.filter((e) => !this._isAllowedInWeakMap(e[0])));\n        this._weakMap = new WeakMap(entriesArray.filter((e) => this._isAllowedInWeakMap(e[0])));\n    }\n    _isAllowedInWeakMap(key) {\n        return (typeof key === \"object\" && key !== null) || (typeof key === \"symbol\" && Symbol.keyFor(key) === undefined);\n    }\n    get(key) {\n        if (this._isAllowedInWeakMap(key)) {\n            return this._weakMap.get(key);\n        }\n        else {\n            return this._primitiveMap.get(key);\n        }\n    }\n    set(key, value) {\n        if (this._isAllowedInWeakMap(key)) {\n            this._weakMap.set(key, value);\n        }\n        else {\n            this._primitiveMap.set(key, value);\n        }\n        return this;\n    }\n    delete(key) {\n        if (this._isAllowedInWeakMap(key)) {\n            return this._weakMap.delete(key);\n        }\n        else {\n            return this._primitiveMap.delete(key);\n        }\n    }\n    has(key) {\n        if (this._isAllowedInWeakMap(key)) {\n            return this._weakMap.has(key);\n        }\n        else {\n            return this._primitiveMap.has(key);\n        }\n    }\n}\n_a = Symbol.toStringTag;\nclass DependenciesMap {\n    constructor() {\n        this._inner = { map: new MaybeWeakMap(), hasValue: false, value: undefined };\n        this[_b] = \"DependenciesMap\";\n    }\n    _valueToResult(inner) {\n        if (inner.hasValue) {\n            return _results__WEBPACK_IMPORTED_MODULE_0__.Result.ok(inner.value);\n        }\n        else {\n            return _results__WEBPACK_IMPORTED_MODULE_0__.Result.error(undefined);\n        }\n    }\n    _unwrapFromInner(dependencies, inner) {\n        if ((dependencies.length === 0)) {\n            return this._valueToResult(inner);\n        }\n        else {\n            const [key, ...rest] = dependencies;\n            const newInner = inner.map.get(key);\n            if (!newInner) {\n                return _results__WEBPACK_IMPORTED_MODULE_0__.Result.error(undefined);\n            }\n            return this._unwrapFromInner(rest, newInner);\n        }\n    }\n    _setInInner(dependencies, value, inner) {\n        if (dependencies.length === 0) {\n            const res = this._valueToResult(inner);\n            if (value.status === \"ok\") {\n                inner.hasValue = true;\n                inner.value = value.data;\n            }\n            else {\n                inner.hasValue = false;\n                inner.value = undefined;\n            }\n            return res;\n        }\n        else {\n            const [key, ...rest] = dependencies;\n            let newInner = inner.map.get(key);\n            if (!newInner) {\n                inner.map.set(key, newInner = { map: new MaybeWeakMap(), hasValue: false, value: undefined });\n            }\n            return this._setInInner(rest, value, newInner);\n        }\n    }\n    get(dependencies) {\n        return _results__WEBPACK_IMPORTED_MODULE_0__.Result.or(this._unwrapFromInner(dependencies, this._inner), undefined);\n    }\n    set(dependencies, value) {\n        this._setInInner(dependencies, _results__WEBPACK_IMPORTED_MODULE_0__.Result.ok(value), this._inner);\n        return this;\n    }\n    delete(dependencies) {\n        return this._setInInner(dependencies, _results__WEBPACK_IMPORTED_MODULE_0__.Result.error(undefined), this._inner).status === \"ok\";\n    }\n    has(dependencies) {\n        return this._unwrapFromInner(dependencies, this._inner).status === \"ok\";\n    }\n    clear() {\n        this._inner = { map: new MaybeWeakMap(), hasValue: false, value: undefined };\n    }\n}\n_b = Symbol.toStringTag;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvbWFwcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNtQztBQUM1QjtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDRDQUFNO0FBQ3pCO0FBQ0E7QUFDQSxtQkFBbUIsNENBQU07QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsNENBQU07QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELDREQUE0RDtBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSw0Q0FBTTtBQUNyQjtBQUNBO0FBQ0EsdUNBQXVDLDRDQUFNO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLDhDQUE4Qyw0Q0FBTTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL21hcmtlcnBsQUljZS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9tYXBzLmpzPzc1NDgiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIF9hLCBfYjtcbmltcG9ydCB7IFJlc3VsdCB9IGZyb20gXCIuL3Jlc3VsdHNcIjtcbmV4cG9ydCBjbGFzcyBNYXliZVdlYWtNYXAge1xuICAgIGNvbnN0cnVjdG9yKGVudHJpZXMpIHtcbiAgICAgICAgdGhpc1tfYV0gPSBcIk1heWJlV2Vha01hcFwiO1xuICAgICAgICBjb25zdCBlbnRyaWVzQXJyYXkgPSBbLi4uZW50cmllcyA/PyBbXV07XG4gICAgICAgIHRoaXMuX3ByaW1pdGl2ZU1hcCA9IG5ldyBNYXAoZW50cmllc0FycmF5LmZpbHRlcigoZSkgPT4gIXRoaXMuX2lzQWxsb3dlZEluV2Vha01hcChlWzBdKSkpO1xuICAgICAgICB0aGlzLl93ZWFrTWFwID0gbmV3IFdlYWtNYXAoZW50cmllc0FycmF5LmZpbHRlcigoZSkgPT4gdGhpcy5faXNBbGxvd2VkSW5XZWFrTWFwKGVbMF0pKSk7XG4gICAgfVxuICAgIF9pc0FsbG93ZWRJbldlYWtNYXAoa2V5KSB7XG4gICAgICAgIHJldHVybiAodHlwZW9mIGtleSA9PT0gXCJvYmplY3RcIiAmJiBrZXkgIT09IG51bGwpIHx8ICh0eXBlb2Yga2V5ID09PSBcInN5bWJvbFwiICYmIFN5bWJvbC5rZXlGb3Ioa2V5KSA9PT0gdW5kZWZpbmVkKTtcbiAgICB9XG4gICAgZ2V0KGtleSkge1xuICAgICAgICBpZiAodGhpcy5faXNBbGxvd2VkSW5XZWFrTWFwKGtleSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl93ZWFrTWFwLmdldChrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3ByaW1pdGl2ZU1hcC5nZXQoa2V5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXQoa2V5LCB2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5faXNBbGxvd2VkSW5XZWFrTWFwKGtleSkpIHtcbiAgICAgICAgICAgIHRoaXMuX3dlYWtNYXAuc2V0KGtleSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fcHJpbWl0aXZlTWFwLnNldChrZXksIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZGVsZXRlKGtleSkge1xuICAgICAgICBpZiAodGhpcy5faXNBbGxvd2VkSW5XZWFrTWFwKGtleSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl93ZWFrTWFwLmRlbGV0ZShrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3ByaW1pdGl2ZU1hcC5kZWxldGUoa2V5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYXMoa2V5KSB7XG4gICAgICAgIGlmICh0aGlzLl9pc0FsbG93ZWRJbldlYWtNYXAoa2V5KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3dlYWtNYXAuaGFzKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcHJpbWl0aXZlTWFwLmhhcyhrZXkpO1xuICAgICAgICB9XG4gICAgfVxufVxuX2EgPSBTeW1ib2wudG9TdHJpbmdUYWc7XG5leHBvcnQgY2xhc3MgRGVwZW5kZW5jaWVzTWFwIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5faW5uZXIgPSB7IG1hcDogbmV3IE1heWJlV2Vha01hcCgpLCBoYXNWYWx1ZTogZmFsc2UsIHZhbHVlOiB1bmRlZmluZWQgfTtcbiAgICAgICAgdGhpc1tfYl0gPSBcIkRlcGVuZGVuY2llc01hcFwiO1xuICAgIH1cbiAgICBfdmFsdWVUb1Jlc3VsdChpbm5lcikge1xuICAgICAgICBpZiAoaW5uZXIuaGFzVmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiBSZXN1bHQub2soaW5uZXIudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcih1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF91bndyYXBGcm9tSW5uZXIoZGVwZW5kZW5jaWVzLCBpbm5lcikge1xuICAgICAgICBpZiAoKGRlcGVuZGVuY2llcy5sZW5ndGggPT09IDApKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWVUb1Jlc3VsdChpbm5lcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBba2V5LCAuLi5yZXN0XSA9IGRlcGVuZGVuY2llcztcbiAgICAgICAgICAgIGNvbnN0IG5ld0lubmVyID0gaW5uZXIubWFwLmdldChrZXkpO1xuICAgICAgICAgICAgaWYgKCFuZXdJbm5lcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IodW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl91bndyYXBGcm9tSW5uZXIocmVzdCwgbmV3SW5uZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9zZXRJbklubmVyKGRlcGVuZGVuY2llcywgdmFsdWUsIGlubmVyKSB7XG4gICAgICAgIGlmIChkZXBlbmRlbmNpZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSB0aGlzLl92YWx1ZVRvUmVzdWx0KGlubmVyKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5zdGF0dXMgPT09IFwib2tcIikge1xuICAgICAgICAgICAgICAgIGlubmVyLmhhc1ZhbHVlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpbm5lci52YWx1ZSA9IHZhbHVlLmRhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbm5lci5oYXNWYWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlubmVyLnZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IFtrZXksIC4uLnJlc3RdID0gZGVwZW5kZW5jaWVzO1xuICAgICAgICAgICAgbGV0IG5ld0lubmVyID0gaW5uZXIubWFwLmdldChrZXkpO1xuICAgICAgICAgICAgaWYgKCFuZXdJbm5lcikge1xuICAgICAgICAgICAgICAgIGlubmVyLm1hcC5zZXQoa2V5LCBuZXdJbm5lciA9IHsgbWFwOiBuZXcgTWF5YmVXZWFrTWFwKCksIGhhc1ZhbHVlOiBmYWxzZSwgdmFsdWU6IHVuZGVmaW5lZCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zZXRJbklubmVyKHJlc3QsIHZhbHVlLCBuZXdJbm5lcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0KGRlcGVuZGVuY2llcykge1xuICAgICAgICByZXR1cm4gUmVzdWx0Lm9yKHRoaXMuX3Vud3JhcEZyb21Jbm5lcihkZXBlbmRlbmNpZXMsIHRoaXMuX2lubmVyKSwgdW5kZWZpbmVkKTtcbiAgICB9XG4gICAgc2V0KGRlcGVuZGVuY2llcywgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5fc2V0SW5Jbm5lcihkZXBlbmRlbmNpZXMsIFJlc3VsdC5vayh2YWx1ZSksIHRoaXMuX2lubmVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGRlbGV0ZShkZXBlbmRlbmNpZXMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldEluSW5uZXIoZGVwZW5kZW5jaWVzLCBSZXN1bHQuZXJyb3IodW5kZWZpbmVkKSwgdGhpcy5faW5uZXIpLnN0YXR1cyA9PT0gXCJva1wiO1xuICAgIH1cbiAgICBoYXMoZGVwZW5kZW5jaWVzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl91bndyYXBGcm9tSW5uZXIoZGVwZW5kZW5jaWVzLCB0aGlzLl9pbm5lcikuc3RhdHVzID09PSBcIm9rXCI7XG4gICAgfVxuICAgIGNsZWFyKCkge1xuICAgICAgICB0aGlzLl9pbm5lciA9IHsgbWFwOiBuZXcgTWF5YmVXZWFrTWFwKCksIGhhc1ZhbHVlOiBmYWxzZSwgdmFsdWU6IHVuZGVmaW5lZCB9O1xuICAgIH1cbn1cbl9iID0gU3ltYm9sLnRvU3RyaW5nVGFnO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/maps.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/math.js":
/*!******************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/math.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   remainder: () => (/* binding */ remainder)\n/* harmony export */ });\n/**\n * Similar to the modulo operator, but always returns a positive number (even when the input is negative).\n */\nfunction remainder(n, d) {\n    return ((n % d) + Math.abs(d)) % d;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvbWF0aC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWFya2VycGxBSWNlLy4vbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L3V0aWxzL21hdGguanM/ZWI2OSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFNpbWlsYXIgdG8gdGhlIG1vZHVsbyBvcGVyYXRvciwgYnV0IGFsd2F5cyByZXR1cm5zIGEgcG9zaXRpdmUgbnVtYmVyIChldmVuIHdoZW4gdGhlIGlucHV0IGlzIG5lZ2F0aXZlKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbWFpbmRlcihuLCBkKSB7XG4gICAgcmV0dXJuICgobiAlIGQpICsgTWF0aC5hYnMoZCkpICUgZDtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/math.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/objects.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/objects.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deepPlainCamelCaseToSnakeCase: () => (/* binding */ deepPlainCamelCaseToSnakeCase),\n/* harmony export */   deepPlainClone: () => (/* binding */ deepPlainClone),\n/* harmony export */   deepPlainEquals: () => (/* binding */ deepPlainEquals),\n/* harmony export */   deepPlainSnakeCaseToCamelCase: () => (/* binding */ deepPlainSnakeCaseToCamelCase),\n/* harmony export */   filterUndefined: () => (/* binding */ filterUndefined),\n/* harmony export */   omit: () => (/* binding */ omit),\n/* harmony export */   pick: () => (/* binding */ pick),\n/* harmony export */   split: () => (/* binding */ split),\n/* harmony export */   typedAssign: () => (/* binding */ typedAssign),\n/* harmony export */   typedEntries: () => (/* binding */ typedEntries),\n/* harmony export */   typedFromEntries: () => (/* binding */ typedFromEntries),\n/* harmony export */   typedKeys: () => (/* binding */ typedKeys),\n/* harmony export */   typedValues: () => (/* binding */ typedValues)\n/* harmony export */ });\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js\");\n/* harmony import */ var _strings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./strings */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/strings.js\");\n\n\n/**\n * Assumes both objects are primitives, arrays, or non-function plain objects, and compares them deeply.\n *\n * Note that since they are assumed to be plain objects, this function does not compare prototypes.\n */\nfunction deepPlainEquals(obj1, obj2, options = {}) {\n    if (typeof obj1 !== typeof obj2)\n        return false;\n    if (obj1 === obj2)\n        return true;\n    switch (typeof obj1) {\n        case 'object': {\n            if (!obj1 || !obj2)\n                return false;\n            if (Array.isArray(obj1) || Array.isArray(obj2)) {\n                if (!Array.isArray(obj1) || !Array.isArray(obj2))\n                    return false;\n                if (obj1.length !== obj2.length)\n                    return false;\n                return obj1.every((v, i) => deepPlainEquals(v, obj2[i], options));\n            }\n            const entries1 = Object.entries(obj1).filter(([k, v]) => !options.ignoreUndefinedValues || v !== undefined);\n            const entries2 = Object.entries(obj2).filter(([k, v]) => !options.ignoreUndefinedValues || v !== undefined);\n            if (entries1.length !== entries2.length)\n                return false;\n            return entries1.every(([k, v1]) => {\n                const e2 = entries2.find(([k2]) => k === k2);\n                if (!e2)\n                    return false;\n                return deepPlainEquals(v1, e2[1], options);\n            });\n        }\n        case 'undefined':\n        case 'string':\n        case 'number':\n        case 'boolean':\n        case 'bigint':\n        case 'symbol':\n        case 'function': {\n            return false;\n        }\n        default: {\n            throw new Error(\"Unexpected typeof \" + typeof obj1);\n        }\n    }\n}\nfunction deepPlainClone(obj) {\n    if (typeof obj === 'function')\n        throw new _errors__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"deepPlainClone does not support functions\");\n    if (typeof obj === 'symbol')\n        throw new _errors__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"deepPlainClone does not support symbols\");\n    if (typeof obj !== 'object' || !obj)\n        return obj;\n    if (Array.isArray(obj))\n        return obj.map(deepPlainClone);\n    return Object.fromEntries(Object.entries(obj).map(([k, v]) => [k, deepPlainClone(v)]));\n}\nfunction deepPlainSnakeCaseToCamelCase(snakeCaseObj) {\n    if (typeof snakeCaseObj === 'function')\n        throw new _errors__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"deepPlainSnakeCaseToCamelCase does not support functions\");\n    if (typeof snakeCaseObj !== 'object' || !snakeCaseObj)\n        return snakeCaseObj;\n    if (Array.isArray(snakeCaseObj))\n        return snakeCaseObj.map(o => deepPlainSnakeCaseToCamelCase(o));\n    return Object.fromEntries(Object.entries(snakeCaseObj).map(([k, v]) => [(0,_strings__WEBPACK_IMPORTED_MODULE_1__.snakeCaseToCamelCase)(k), deepPlainSnakeCaseToCamelCase(v)]));\n}\nfunction deepPlainCamelCaseToSnakeCase(camelCaseObj) {\n    if (typeof camelCaseObj === 'function')\n        throw new _errors__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"deepPlainCamelCaseToSnakeCase does not support functions\");\n    if (typeof camelCaseObj !== 'object' || !camelCaseObj)\n        return camelCaseObj;\n    if (Array.isArray(camelCaseObj))\n        return camelCaseObj.map(o => deepPlainCamelCaseToSnakeCase(o));\n    return Object.fromEntries(Object.entries(camelCaseObj).map(([k, v]) => [(0,_strings__WEBPACK_IMPORTED_MODULE_1__.camelCaseToSnakeCase)(k), deepPlainCamelCaseToSnakeCase(v)]));\n}\nfunction typedEntries(obj) {\n    return Object.entries(obj);\n}\nfunction typedFromEntries(entries) {\n    return Object.fromEntries(entries);\n}\nfunction typedKeys(obj) {\n    return Object.keys(obj);\n}\nfunction typedValues(obj) {\n    return Object.values(obj);\n}\nfunction typedAssign(target, source) {\n    return Object.assign(target, source);\n}\n/**\n * Returns a new object with all undefined values removed. Useful when spreading optional parameters on an object, as\n * TypeScript's `Partial<XYZ>` type allows `undefined` values.\n */\nfunction filterUndefined(obj) {\n    return Object.fromEntries(Object.entries(obj).filter(([, v]) => v !== undefined));\n}\nfunction pick(obj, keys) {\n    return Object.fromEntries(Object.entries(obj).filter(([k]) => keys.includes(k)));\n}\nfunction omit(obj, keys) {\n    return Object.fromEntries(Object.entries(obj).filter(([k]) => !keys.includes(k)));\n}\nfunction split(obj, keys) {\n    return [pick(obj, keys), omit(obj, keys)];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvb2JqZWN0cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBK0M7QUFDd0I7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLGlEQUFpRDtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLGtCQUFrQix3REFBbUI7QUFDckM7QUFDQSxrQkFBa0Isd0RBQW1CO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSxrQkFBa0Isd0RBQW1CO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEVBQTRFLDhEQUFvQjtBQUNoRztBQUNPO0FBQ1A7QUFDQSxrQkFBa0Isd0RBQW1CO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEVBQTRFLDhEQUFvQjtBQUNoRztBQUNPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWFya2VycGxBSWNlLy4vbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L3V0aWxzL29iamVjdHMuanM/ZTkzYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdGFja0Fzc2VydGlvbkVycm9yIH0gZnJvbSBcIi4vZXJyb3JzXCI7XG5pbXBvcnQgeyBjYW1lbENhc2VUb1NuYWtlQ2FzZSwgc25ha2VDYXNlVG9DYW1lbENhc2UgfSBmcm9tIFwiLi9zdHJpbmdzXCI7XG4vKipcbiAqIEFzc3VtZXMgYm90aCBvYmplY3RzIGFyZSBwcmltaXRpdmVzLCBhcnJheXMsIG9yIG5vbi1mdW5jdGlvbiBwbGFpbiBvYmplY3RzLCBhbmQgY29tcGFyZXMgdGhlbSBkZWVwbHkuXG4gKlxuICogTm90ZSB0aGF0IHNpbmNlIHRoZXkgYXJlIGFzc3VtZWQgdG8gYmUgcGxhaW4gb2JqZWN0cywgdGhpcyBmdW5jdGlvbiBkb2VzIG5vdCBjb21wYXJlIHByb3RvdHlwZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWVwUGxhaW5FcXVhbHMob2JqMSwgb2JqMiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgaWYgKHR5cGVvZiBvYmoxICE9PSB0eXBlb2Ygb2JqMilcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChvYmoxID09PSBvYmoyKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBzd2l0Y2ggKHR5cGVvZiBvYmoxKSB7XG4gICAgICAgIGNhc2UgJ29iamVjdCc6IHtcbiAgICAgICAgICAgIGlmICghb2JqMSB8fCAhb2JqMilcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvYmoxKSB8fCBBcnJheS5pc0FycmF5KG9iajIpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG9iajEpIHx8ICFBcnJheS5pc0FycmF5KG9iajIpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKG9iajEubGVuZ3RoICE9PSBvYmoyLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmoxLmV2ZXJ5KCh2LCBpKSA9PiBkZWVwUGxhaW5FcXVhbHModiwgb2JqMltpXSwgb3B0aW9ucykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZW50cmllczEgPSBPYmplY3QuZW50cmllcyhvYmoxKS5maWx0ZXIoKFtrLCB2XSkgPT4gIW9wdGlvbnMuaWdub3JlVW5kZWZpbmVkVmFsdWVzIHx8IHYgIT09IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICBjb25zdCBlbnRyaWVzMiA9IE9iamVjdC5lbnRyaWVzKG9iajIpLmZpbHRlcigoW2ssIHZdKSA9PiAhb3B0aW9ucy5pZ25vcmVVbmRlZmluZWRWYWx1ZXMgfHwgdiAhPT0gdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIGlmIChlbnRyaWVzMS5sZW5ndGggIT09IGVudHJpZXMyLmxlbmd0aClcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gZW50cmllczEuZXZlcnkoKFtrLCB2MV0pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlMiA9IGVudHJpZXMyLmZpbmQoKFtrMl0pID0+IGsgPT09IGsyKTtcbiAgICAgICAgICAgICAgICBpZiAoIWUyKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZXBQbGFpbkVxdWFscyh2MSwgZTJbMV0sIG9wdGlvbnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAndW5kZWZpbmVkJzpcbiAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICAgIGNhc2UgJ2JpZ2ludCc6XG4gICAgICAgIGNhc2UgJ3N5bWJvbCc6XG4gICAgICAgIGNhc2UgJ2Z1bmN0aW9uJzoge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgdHlwZW9mIFwiICsgdHlwZW9mIG9iajEpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGRlZXBQbGFpbkNsb25lKG9iaikge1xuICAgIGlmICh0eXBlb2Ygb2JqID09PSAnZnVuY3Rpb24nKVxuICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcImRlZXBQbGFpbkNsb25lIGRvZXMgbm90IHN1cHBvcnQgZnVuY3Rpb25zXCIpO1xuICAgIGlmICh0eXBlb2Ygb2JqID09PSAnc3ltYm9sJylcbiAgICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJkZWVwUGxhaW5DbG9uZSBkb2VzIG5vdCBzdXBwb3J0IHN5bWJvbHNcIik7XG4gICAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnIHx8ICFvYmopXG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSlcbiAgICAgICAgcmV0dXJuIG9iai5tYXAoZGVlcFBsYWluQ2xvbmUpO1xuICAgIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMob2JqKS5tYXAoKFtrLCB2XSkgPT4gW2ssIGRlZXBQbGFpbkNsb25lKHYpXSkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRlZXBQbGFpblNuYWtlQ2FzZVRvQ2FtZWxDYXNlKHNuYWtlQ2FzZU9iaikge1xuICAgIGlmICh0eXBlb2Ygc25ha2VDYXNlT2JqID09PSAnZnVuY3Rpb24nKVxuICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcImRlZXBQbGFpblNuYWtlQ2FzZVRvQ2FtZWxDYXNlIGRvZXMgbm90IHN1cHBvcnQgZnVuY3Rpb25zXCIpO1xuICAgIGlmICh0eXBlb2Ygc25ha2VDYXNlT2JqICE9PSAnb2JqZWN0JyB8fCAhc25ha2VDYXNlT2JqKVxuICAgICAgICByZXR1cm4gc25ha2VDYXNlT2JqO1xuICAgIGlmIChBcnJheS5pc0FycmF5KHNuYWtlQ2FzZU9iaikpXG4gICAgICAgIHJldHVybiBzbmFrZUNhc2VPYmoubWFwKG8gPT4gZGVlcFBsYWluU25ha2VDYXNlVG9DYW1lbENhc2UobykpO1xuICAgIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoc25ha2VDYXNlT2JqKS5tYXAoKFtrLCB2XSkgPT4gW3NuYWtlQ2FzZVRvQ2FtZWxDYXNlKGspLCBkZWVwUGxhaW5TbmFrZUNhc2VUb0NhbWVsQ2FzZSh2KV0pKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkZWVwUGxhaW5DYW1lbENhc2VUb1NuYWtlQ2FzZShjYW1lbENhc2VPYmopIHtcbiAgICBpZiAodHlwZW9mIGNhbWVsQ2FzZU9iaiA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJkZWVwUGxhaW5DYW1lbENhc2VUb1NuYWtlQ2FzZSBkb2VzIG5vdCBzdXBwb3J0IGZ1bmN0aW9uc1wiKTtcbiAgICBpZiAodHlwZW9mIGNhbWVsQ2FzZU9iaiAhPT0gJ29iamVjdCcgfHwgIWNhbWVsQ2FzZU9iailcbiAgICAgICAgcmV0dXJuIGNhbWVsQ2FzZU9iajtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShjYW1lbENhc2VPYmopKVxuICAgICAgICByZXR1cm4gY2FtZWxDYXNlT2JqLm1hcChvID0+IGRlZXBQbGFpbkNhbWVsQ2FzZVRvU25ha2VDYXNlKG8pKTtcbiAgICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKGNhbWVsQ2FzZU9iaikubWFwKChbaywgdl0pID0+IFtjYW1lbENhc2VUb1NuYWtlQ2FzZShrKSwgZGVlcFBsYWluQ2FtZWxDYXNlVG9TbmFrZUNhc2UodildKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gdHlwZWRFbnRyaWVzKG9iaikge1xuICAgIHJldHVybiBPYmplY3QuZW50cmllcyhvYmopO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHR5cGVkRnJvbUVudHJpZXMoZW50cmllcykge1xuICAgIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoZW50cmllcyk7XG59XG5leHBvcnQgZnVuY3Rpb24gdHlwZWRLZXlzKG9iaikge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHR5cGVkVmFsdWVzKG9iaikge1xuICAgIHJldHVybiBPYmplY3QudmFsdWVzKG9iaik7XG59XG5leHBvcnQgZnVuY3Rpb24gdHlwZWRBc3NpZ24odGFyZ2V0LCBzb3VyY2UpIHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih0YXJnZXQsIHNvdXJjZSk7XG59XG4vKipcbiAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggYWxsIHVuZGVmaW5lZCB2YWx1ZXMgcmVtb3ZlZC4gVXNlZnVsIHdoZW4gc3ByZWFkaW5nIG9wdGlvbmFsIHBhcmFtZXRlcnMgb24gYW4gb2JqZWN0LCBhc1xuICogVHlwZVNjcmlwdCdzIGBQYXJ0aWFsPFhZWj5gIHR5cGUgYWxsb3dzIGB1bmRlZmluZWRgIHZhbHVlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlclVuZGVmaW5lZChvYmopIHtcbiAgICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKG9iaikuZmlsdGVyKChbLCB2XSkgPT4gdiAhPT0gdW5kZWZpbmVkKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gcGljayhvYmosIGtleXMpIHtcbiAgICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKG9iaikuZmlsdGVyKChba10pID0+IGtleXMuaW5jbHVkZXMoaykpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBvbWl0KG9iaiwga2V5cykge1xuICAgIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMob2JqKS5maWx0ZXIoKFtrXSkgPT4gIWtleXMuaW5jbHVkZXMoaykpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzcGxpdChvYmosIGtleXMpIHtcbiAgICByZXR1cm4gW3BpY2sob2JqLCBrZXlzKSwgb21pdChvYmosIGtleXMpXTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/objects.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/promises.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/promises.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createPromise: () => (/* binding */ createPromise),\n/* harmony export */   ignoreUnhandledRejection: () => (/* binding */ ignoreUnhandledRejection),\n/* harmony export */   neverResolve: () => (/* binding */ neverResolve),\n/* harmony export */   pending: () => (/* binding */ pending),\n/* harmony export */   rateLimited: () => (/* binding */ rateLimited),\n/* harmony export */   rejected: () => (/* binding */ rejected),\n/* harmony export */   resolved: () => (/* binding */ resolved),\n/* harmony export */   runAsynchronously: () => (/* binding */ runAsynchronously),\n/* harmony export */   runAsynchronouslyWithAlert: () => (/* binding */ runAsynchronouslyWithAlert),\n/* harmony export */   throttled: () => (/* binding */ throttled),\n/* harmony export */   timeout: () => (/* binding */ timeout),\n/* harmony export */   timeoutThrow: () => (/* binding */ timeoutThrow),\n/* harmony export */   wait: () => (/* binding */ wait),\n/* harmony export */   waitUntil: () => (/* binding */ waitUntil)\n/* harmony export */ });\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js\");\n/* harmony import */ var _maps__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./maps */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/maps.js\");\n/* harmony import */ var _results__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./results */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/results.js\");\n/* harmony import */ var _uuids__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./uuids */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/uuids.js\");\n\n\n\n\nfunction createPromise(callback) {\n    let status = \"pending\";\n    let valueOrReason = undefined;\n    let resolve = null;\n    let reject = null;\n    const promise = new Promise((res, rej) => {\n        resolve = (value) => {\n            if (status !== \"pending\")\n                return;\n            status = \"fulfilled\";\n            valueOrReason = value;\n            res(value);\n        };\n        reject = (reason) => {\n            if (status !== \"pending\")\n                return;\n            status = \"rejected\";\n            valueOrReason = reason;\n            rej(reason);\n        };\n    });\n    callback(resolve, reject);\n    return Object.assign(promise, {\n        status: status,\n        ...status === \"fulfilled\" ? { value: valueOrReason } : {},\n        ...status === \"rejected\" ? { reason: valueOrReason } : {},\n    });\n}\nconst resolvedCache = new _maps__WEBPACK_IMPORTED_MODULE_1__.DependenciesMap();\n/**\n * Like Promise.resolve(...), but also adds the status and value properties for use with React's `use` hook, and caches\n * the value so that invoking `resolved` twice returns the same promise.\n */\nfunction resolved(value) {\n    if (resolvedCache.has([value])) {\n        return resolvedCache.get([value]);\n    }\n    const res = Object.assign(Promise.resolve(value), {\n        status: \"fulfilled\",\n        value,\n    });\n    resolvedCache.set([value], res);\n    return res;\n}\nconst rejectedCache = new _maps__WEBPACK_IMPORTED_MODULE_1__.DependenciesMap();\n/**\n * Like Promise.reject(...), but also adds the status and value properties for use with React's `use` hook, and caches\n * the value so that invoking `rejected` twice returns the same promise.\n */\nfunction rejected(reason) {\n    if (rejectedCache.has([reason])) {\n        return rejectedCache.get([reason]);\n    }\n    const res = Object.assign(Promise.reject(reason), {\n        status: \"rejected\",\n        reason: reason,\n    });\n    rejectedCache.set([reason], res);\n    return res;\n}\nconst neverResolvePromise = pending(new Promise(() => { }));\nfunction neverResolve() {\n    return neverResolvePromise;\n}\nfunction pending(promise, options = {}) {\n    const res = promise.then(value => {\n        res.status = \"fulfilled\";\n        res.value = value;\n        return value;\n    }, actualReason => {\n        res.status = \"rejected\";\n        res.reason = actualReason;\n        throw actualReason;\n    });\n    res.status = \"pending\";\n    return res;\n}\n/**\n * Should be used to wrap Promises that are not immediately awaited, so they don't throw an unhandled promise rejection\n * error.\n *\n * Vercel kills serverless functions on unhandled promise rejection errors, so this is important.\n */\nfunction ignoreUnhandledRejection(promise) {\n    promise.catch(() => { });\n    return promise;\n}\nasync function wait(ms) {\n    return await new Promise(resolve => setTimeout(resolve, ms));\n}\nasync function waitUntil(date) {\n    return await wait(date.getTime() - Date.now());\n}\nclass ErrorDuringRunAsynchronously extends Error {\n    constructor() {\n        super(\"The error above originated in a runAsynchronously() call. Here is the stacktrace associated with it.\");\n        this.name = \"ErrorDuringRunAsynchronously\";\n    }\n}\nfunction runAsynchronouslyWithAlert(...args) {\n    return runAsynchronously(args[0], {\n        ...args[1],\n        onError: error => {\n            alert(`An unhandled error occurred. Please ${ true ? `check the browser console for the full error. ${error}` : 0}\\n\\n${error}`);\n            args[1]?.onError?.(error);\n        },\n    }, ...args.slice(2));\n}\nfunction runAsynchronously(promiseOrFunc, options = {}) {\n    if (typeof promiseOrFunc === \"function\") {\n        promiseOrFunc = promiseOrFunc();\n    }\n    const duringError = new ErrorDuringRunAsynchronously();\n    promiseOrFunc?.catch(error => {\n        const newError = new _errors__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"Uncaught error in asynchronous function: \" + error.toString(), {\n            duringError,\n        }, {\n            cause: error,\n        });\n        options.onError?.(newError);\n        if (!options.noErrorLogging) {\n            (0,_errors__WEBPACK_IMPORTED_MODULE_0__.captureError)(\"runAsynchronously\", newError);\n        }\n    });\n}\nclass TimeoutError extends Error {\n    constructor(ms) {\n        super(`Timeout after ${ms}ms`);\n        this.ms = ms;\n        this.name = \"TimeoutError\";\n    }\n}\nasync function timeout(promise, ms) {\n    return await Promise.race([\n        promise.then(value => _results__WEBPACK_IMPORTED_MODULE_2__.Result.ok(value)),\n        wait(ms).then(() => _results__WEBPACK_IMPORTED_MODULE_2__.Result.error(new TimeoutError(ms))),\n    ]);\n}\nasync function timeoutThrow(promise, ms) {\n    return _results__WEBPACK_IMPORTED_MODULE_2__.Result.orThrow(await timeout(promise, ms));\n}\nfunction rateLimited(func, options) {\n    let waitUntil = performance.now();\n    let queue = [];\n    let addedToQueueCallbacks = new Map;\n    const next = async () => {\n        while (true) {\n            if (waitUntil > performance.now()) {\n                await wait(Math.max(1, waitUntil - performance.now() + 1));\n            }\n            else if (queue.length === 0) {\n                const uuid = (0,_uuids__WEBPACK_IMPORTED_MODULE_3__.generateUuid)();\n                await new Promise(resolve => {\n                    addedToQueueCallbacks.set(uuid, resolve);\n                });\n                addedToQueueCallbacks.delete(uuid);\n            }\n            else {\n                break;\n            }\n        }\n        const nextFuncs = options.batchCalls ? queue.splice(0, queue.length) : [queue.shift()];\n        const start = performance.now();\n        const value = await _results__WEBPACK_IMPORTED_MODULE_2__.Result.fromPromise(func());\n        const end = performance.now();\n        waitUntil = Math.max(waitUntil, start + (options.throttleMs ?? 0), end + (options.gapMs ?? 0));\n        for (const nextFunc of nextFuncs) {\n            if (value.status === \"ok\") {\n                nextFunc[0](value.data);\n            }\n            else {\n                nextFunc[1](value.error);\n            }\n        }\n    };\n    runAsynchronously(async () => {\n        while (true) {\n            await next();\n        }\n    });\n    return () => {\n        return new Promise((resolve, reject) => {\n            waitUntil = Math.max(waitUntil, performance.now() + (options.debounceMs ?? 0));\n            queue.push([resolve, reject]);\n            addedToQueueCallbacks.forEach(cb => cb());\n        });\n    };\n}\nfunction throttled(func, delayMs) {\n    let timeout = null;\n    let nextAvailable = null;\n    return async (...args) => {\n        while (nextAvailable !== null) {\n            await nextAvailable;\n        }\n        nextAvailable = new Promise(resolve => {\n            timeout = setTimeout(() => {\n                nextAvailable = null;\n                resolve(func(...args));\n            }, delayMs);\n        });\n        return await nextAvailable;\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvcHJvbWlzZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTZEO0FBQ3BCO0FBQ047QUFDSTtBQUNoQztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyx1QkFBdUIsSUFBSTtBQUNqRSxxQ0FBcUMsd0JBQXdCLElBQUk7QUFDakUsS0FBSztBQUNMO0FBQ0EsMEJBQTBCLGtEQUFlO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGtEQUFlO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EseURBQXlEO0FBQ2xEO0FBQ1A7QUFDQTtBQUNPLHNDQUFzQztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCwyQkFBMkI7QUFDM0I7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EseURBQXlELEtBQXNDLG9EQUFvRCxNQUFNLElBQUksQ0FBK0IsQ0FBQyxNQUFNLE1BQU07QUFDek07QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ08sc0RBQXNEO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsd0RBQW1CO0FBQ2hEO0FBQ0EsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxZQUFZLHFEQUFZO0FBQ3hCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixHQUFHO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLDhCQUE4Qiw0Q0FBTTtBQUNwQyw0QkFBNEIsNENBQU07QUFDbEM7QUFDQTtBQUNPO0FBQ1AsV0FBVyw0Q0FBTTtBQUNqQjtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLG9EQUFZO0FBQ3pDO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qiw0Q0FBTTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWFya2VycGxBSWNlLy4vbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L3V0aWxzL3Byb21pc2VzLmpzP2Q1ZWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU3RhY2tBc3NlcnRpb25FcnJvciwgY2FwdHVyZUVycm9yIH0gZnJvbSBcIi4vZXJyb3JzXCI7XG5pbXBvcnQgeyBEZXBlbmRlbmNpZXNNYXAgfSBmcm9tIFwiLi9tYXBzXCI7XG5pbXBvcnQgeyBSZXN1bHQgfSBmcm9tIFwiLi9yZXN1bHRzXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZVV1aWQgfSBmcm9tIFwiLi91dWlkc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVByb21pc2UoY2FsbGJhY2spIHtcbiAgICBsZXQgc3RhdHVzID0gXCJwZW5kaW5nXCI7XG4gICAgbGV0IHZhbHVlT3JSZWFzb24gPSB1bmRlZmluZWQ7XG4gICAgbGV0IHJlc29sdmUgPSBudWxsO1xuICAgIGxldCByZWplY3QgPSBudWxsO1xuICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IHtcbiAgICAgICAgcmVzb2x2ZSA9ICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gXCJwZW5kaW5nXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgc3RhdHVzID0gXCJmdWxmaWxsZWRcIjtcbiAgICAgICAgICAgIHZhbHVlT3JSZWFzb24gPSB2YWx1ZTtcbiAgICAgICAgICAgIHJlcyh2YWx1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIHJlamVjdCA9IChyZWFzb24pID0+IHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IFwicGVuZGluZ1wiKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHN0YXR1cyA9IFwicmVqZWN0ZWRcIjtcbiAgICAgICAgICAgIHZhbHVlT3JSZWFzb24gPSByZWFzb247XG4gICAgICAgICAgICByZWoocmVhc29uKTtcbiAgICAgICAgfTtcbiAgICB9KTtcbiAgICBjYWxsYmFjayhyZXNvbHZlLCByZWplY3QpO1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHByb21pc2UsIHtcbiAgICAgICAgc3RhdHVzOiBzdGF0dXMsXG4gICAgICAgIC4uLnN0YXR1cyA9PT0gXCJmdWxmaWxsZWRcIiA/IHsgdmFsdWU6IHZhbHVlT3JSZWFzb24gfSA6IHt9LFxuICAgICAgICAuLi5zdGF0dXMgPT09IFwicmVqZWN0ZWRcIiA/IHsgcmVhc29uOiB2YWx1ZU9yUmVhc29uIH0gOiB7fSxcbiAgICB9KTtcbn1cbmNvbnN0IHJlc29sdmVkQ2FjaGUgPSBuZXcgRGVwZW5kZW5jaWVzTWFwKCk7XG4vKipcbiAqIExpa2UgUHJvbWlzZS5yZXNvbHZlKC4uLiksIGJ1dCBhbHNvIGFkZHMgdGhlIHN0YXR1cyBhbmQgdmFsdWUgcHJvcGVydGllcyBmb3IgdXNlIHdpdGggUmVhY3QncyBgdXNlYCBob29rLCBhbmQgY2FjaGVzXG4gKiB0aGUgdmFsdWUgc28gdGhhdCBpbnZva2luZyBgcmVzb2x2ZWRgIHR3aWNlIHJldHVybnMgdGhlIHNhbWUgcHJvbWlzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmVkKHZhbHVlKSB7XG4gICAgaWYgKHJlc29sdmVkQ2FjaGUuaGFzKFt2YWx1ZV0pKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlZENhY2hlLmdldChbdmFsdWVdKTtcbiAgICB9XG4gICAgY29uc3QgcmVzID0gT2JqZWN0LmFzc2lnbihQcm9taXNlLnJlc29sdmUodmFsdWUpLCB7XG4gICAgICAgIHN0YXR1czogXCJmdWxmaWxsZWRcIixcbiAgICAgICAgdmFsdWUsXG4gICAgfSk7XG4gICAgcmVzb2x2ZWRDYWNoZS5zZXQoW3ZhbHVlXSwgcmVzKTtcbiAgICByZXR1cm4gcmVzO1xufVxuY29uc3QgcmVqZWN0ZWRDYWNoZSA9IG5ldyBEZXBlbmRlbmNpZXNNYXAoKTtcbi8qKlxuICogTGlrZSBQcm9taXNlLnJlamVjdCguLi4pLCBidXQgYWxzbyBhZGRzIHRoZSBzdGF0dXMgYW5kIHZhbHVlIHByb3BlcnRpZXMgZm9yIHVzZSB3aXRoIFJlYWN0J3MgYHVzZWAgaG9vaywgYW5kIGNhY2hlc1xuICogdGhlIHZhbHVlIHNvIHRoYXQgaW52b2tpbmcgYHJlamVjdGVkYCB0d2ljZSByZXR1cm5zIHRoZSBzYW1lIHByb21pc2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWplY3RlZChyZWFzb24pIHtcbiAgICBpZiAocmVqZWN0ZWRDYWNoZS5oYXMoW3JlYXNvbl0pKSB7XG4gICAgICAgIHJldHVybiByZWplY3RlZENhY2hlLmdldChbcmVhc29uXSk7XG4gICAgfVxuICAgIGNvbnN0IHJlcyA9IE9iamVjdC5hc3NpZ24oUHJvbWlzZS5yZWplY3QocmVhc29uKSwge1xuICAgICAgICBzdGF0dXM6IFwicmVqZWN0ZWRcIixcbiAgICAgICAgcmVhc29uOiByZWFzb24sXG4gICAgfSk7XG4gICAgcmVqZWN0ZWRDYWNoZS5zZXQoW3JlYXNvbl0sIHJlcyk7XG4gICAgcmV0dXJuIHJlcztcbn1cbmNvbnN0IG5ldmVyUmVzb2x2ZVByb21pc2UgPSBwZW5kaW5nKG5ldyBQcm9taXNlKCgpID0+IHsgfSkpO1xuZXhwb3J0IGZ1bmN0aW9uIG5ldmVyUmVzb2x2ZSgpIHtcbiAgICByZXR1cm4gbmV2ZXJSZXNvbHZlUHJvbWlzZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwZW5kaW5nKHByb21pc2UsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHJlcyA9IHByb21pc2UudGhlbih2YWx1ZSA9PiB7XG4gICAgICAgIHJlcy5zdGF0dXMgPSBcImZ1bGZpbGxlZFwiO1xuICAgICAgICByZXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sIGFjdHVhbFJlYXNvbiA9PiB7XG4gICAgICAgIHJlcy5zdGF0dXMgPSBcInJlamVjdGVkXCI7XG4gICAgICAgIHJlcy5yZWFzb24gPSBhY3R1YWxSZWFzb247XG4gICAgICAgIHRocm93IGFjdHVhbFJlYXNvbjtcbiAgICB9KTtcbiAgICByZXMuc3RhdHVzID0gXCJwZW5kaW5nXCI7XG4gICAgcmV0dXJuIHJlcztcbn1cbi8qKlxuICogU2hvdWxkIGJlIHVzZWQgdG8gd3JhcCBQcm9taXNlcyB0aGF0IGFyZSBub3QgaW1tZWRpYXRlbHkgYXdhaXRlZCwgc28gdGhleSBkb24ndCB0aHJvdyBhbiB1bmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb25cbiAqIGVycm9yLlxuICpcbiAqIFZlcmNlbCBraWxscyBzZXJ2ZXJsZXNzIGZ1bmN0aW9ucyBvbiB1bmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb24gZXJyb3JzLCBzbyB0aGlzIGlzIGltcG9ydGFudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlnbm9yZVVuaGFuZGxlZFJlamVjdGlvbihwcm9taXNlKSB7XG4gICAgcHJvbWlzZS5jYXRjaCgoKSA9PiB7IH0pO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdhaXQobXMpIHtcbiAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gd2FpdFVudGlsKGRhdGUpIHtcbiAgICByZXR1cm4gYXdhaXQgd2FpdChkYXRlLmdldFRpbWUoKSAtIERhdGUubm93KCkpO1xufVxuY2xhc3MgRXJyb3JEdXJpbmdSdW5Bc3luY2hyb25vdXNseSBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoXCJUaGUgZXJyb3IgYWJvdmUgb3JpZ2luYXRlZCBpbiBhIHJ1bkFzeW5jaHJvbm91c2x5KCkgY2FsbC4gSGVyZSBpcyB0aGUgc3RhY2t0cmFjZSBhc3NvY2lhdGVkIHdpdGggaXQuXCIpO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIkVycm9yRHVyaW5nUnVuQXN5bmNocm9ub3VzbHlcIjtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gcnVuQXN5bmNocm9ub3VzbHlXaXRoQWxlcnQoLi4uYXJncykge1xuICAgIHJldHVybiBydW5Bc3luY2hyb25vdXNseShhcmdzWzBdLCB7XG4gICAgICAgIC4uLmFyZ3NbMV0sXG4gICAgICAgIG9uRXJyb3I6IGVycm9yID0+IHtcbiAgICAgICAgICAgIGFsZXJ0KGBBbiB1bmhhbmRsZWQgZXJyb3Igb2NjdXJyZWQuIFBsZWFzZSAke3Byb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcImRldmVsb3BtZW50XCIgPyBgY2hlY2sgdGhlIGJyb3dzZXIgY29uc29sZSBmb3IgdGhlIGZ1bGwgZXJyb3IuICR7ZXJyb3J9YCA6IFwicmVwb3J0IHRoaXMgdG8gdGhlIGRldmVsb3Blci5cIn1cXG5cXG4ke2Vycm9yfWApO1xuICAgICAgICAgICAgYXJnc1sxXT8ub25FcnJvcj8uKGVycm9yKTtcbiAgICAgICAgfSxcbiAgICB9LCAuLi5hcmdzLnNsaWNlKDIpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBydW5Bc3luY2hyb25vdXNseShwcm9taXNlT3JGdW5jLCBvcHRpb25zID0ge30pIHtcbiAgICBpZiAodHlwZW9mIHByb21pc2VPckZ1bmMgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBwcm9taXNlT3JGdW5jID0gcHJvbWlzZU9yRnVuYygpO1xuICAgIH1cbiAgICBjb25zdCBkdXJpbmdFcnJvciA9IG5ldyBFcnJvckR1cmluZ1J1bkFzeW5jaHJvbm91c2x5KCk7XG4gICAgcHJvbWlzZU9yRnVuYz8uY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICBjb25zdCBuZXdFcnJvciA9IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiVW5jYXVnaHQgZXJyb3IgaW4gYXN5bmNocm9ub3VzIGZ1bmN0aW9uOiBcIiArIGVycm9yLnRvU3RyaW5nKCksIHtcbiAgICAgICAgICAgIGR1cmluZ0Vycm9yLFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBjYXVzZTogZXJyb3IsXG4gICAgICAgIH0pO1xuICAgICAgICBvcHRpb25zLm9uRXJyb3I/LihuZXdFcnJvcik7XG4gICAgICAgIGlmICghb3B0aW9ucy5ub0Vycm9yTG9nZ2luZykge1xuICAgICAgICAgICAgY2FwdHVyZUVycm9yKFwicnVuQXN5bmNocm9ub3VzbHlcIiwgbmV3RXJyb3IpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5jbGFzcyBUaW1lb3V0RXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobXMpIHtcbiAgICAgICAgc3VwZXIoYFRpbWVvdXQgYWZ0ZXIgJHttc31tc2ApO1xuICAgICAgICB0aGlzLm1zID0gbXM7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiVGltZW91dEVycm9yXCI7XG4gICAgfVxufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRpbWVvdXQocHJvbWlzZSwgbXMpIHtcbiAgICByZXR1cm4gYXdhaXQgUHJvbWlzZS5yYWNlKFtcbiAgICAgICAgcHJvbWlzZS50aGVuKHZhbHVlID0+IFJlc3VsdC5vayh2YWx1ZSkpLFxuICAgICAgICB3YWl0KG1zKS50aGVuKCgpID0+IFJlc3VsdC5lcnJvcihuZXcgVGltZW91dEVycm9yKG1zKSkpLFxuICAgIF0pO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRpbWVvdXRUaHJvdyhwcm9taXNlLCBtcykge1xuICAgIHJldHVybiBSZXN1bHQub3JUaHJvdyhhd2FpdCB0aW1lb3V0KHByb21pc2UsIG1zKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmF0ZUxpbWl0ZWQoZnVuYywgb3B0aW9ucykge1xuICAgIGxldCB3YWl0VW50aWwgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICBsZXQgcXVldWUgPSBbXTtcbiAgICBsZXQgYWRkZWRUb1F1ZXVlQ2FsbGJhY2tzID0gbmV3IE1hcDtcbiAgICBjb25zdCBuZXh0ID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgaWYgKHdhaXRVbnRpbCA+IHBlcmZvcm1hbmNlLm5vdygpKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgd2FpdChNYXRoLm1heCgxLCB3YWl0VW50aWwgLSBwZXJmb3JtYW5jZS5ub3coKSArIDEpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHV1aWQgPSBnZW5lcmF0ZVV1aWQoKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYWRkZWRUb1F1ZXVlQ2FsbGJhY2tzLnNldCh1dWlkLCByZXNvbHZlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBhZGRlZFRvUXVldWVDYWxsYmFja3MuZGVsZXRlKHV1aWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV4dEZ1bmNzID0gb3B0aW9ucy5iYXRjaENhbGxzID8gcXVldWUuc3BsaWNlKDAsIHF1ZXVlLmxlbmd0aCkgOiBbcXVldWUuc2hpZnQoKV07XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgUmVzdWx0LmZyb21Qcm9taXNlKGZ1bmMoKSk7XG4gICAgICAgIGNvbnN0IGVuZCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgICB3YWl0VW50aWwgPSBNYXRoLm1heCh3YWl0VW50aWwsIHN0YXJ0ICsgKG9wdGlvbnMudGhyb3R0bGVNcyA/PyAwKSwgZW5kICsgKG9wdGlvbnMuZ2FwTXMgPz8gMCkpO1xuICAgICAgICBmb3IgKGNvbnN0IG5leHRGdW5jIG9mIG5leHRGdW5jcykge1xuICAgICAgICAgICAgaWYgKHZhbHVlLnN0YXR1cyA9PT0gXCJva1wiKSB7XG4gICAgICAgICAgICAgICAgbmV4dEZ1bmNbMF0odmFsdWUuZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXh0RnVuY1sxXSh2YWx1ZS5lcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJ1bkFzeW5jaHJvbm91c2x5KGFzeW5jICgpID0+IHtcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgIGF3YWl0IG5leHQoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB3YWl0VW50aWwgPSBNYXRoLm1heCh3YWl0VW50aWwsIHBlcmZvcm1hbmNlLm5vdygpICsgKG9wdGlvbnMuZGVib3VuY2VNcyA/PyAwKSk7XG4gICAgICAgICAgICBxdWV1ZS5wdXNoKFtyZXNvbHZlLCByZWplY3RdKTtcbiAgICAgICAgICAgIGFkZGVkVG9RdWV1ZUNhbGxiYWNrcy5mb3JFYWNoKGNiID0+IGNiKCkpO1xuICAgICAgICB9KTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHRocm90dGxlZChmdW5jLCBkZWxheU1zKSB7XG4gICAgbGV0IHRpbWVvdXQgPSBudWxsO1xuICAgIGxldCBuZXh0QXZhaWxhYmxlID0gbnVsbDtcbiAgICByZXR1cm4gYXN5bmMgKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgd2hpbGUgKG5leHRBdmFpbGFibGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGF3YWl0IG5leHRBdmFpbGFibGU7XG4gICAgICAgIH1cbiAgICAgICAgbmV4dEF2YWlsYWJsZSA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIG5leHRBdmFpbGFibGUgPSBudWxsO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoZnVuYyguLi5hcmdzKSk7XG4gICAgICAgICAgICB9LCBkZWxheU1zKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBhd2FpdCBuZXh0QXZhaWxhYmxlO1xuICAgIH07XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/promises.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/react.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/react.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getNodeText: () => (/* binding */ getNodeText),\n/* harmony export */   suspend: () => (/* binding */ suspend),\n/* harmony export */   suspendIfSsr: () => (/* binding */ suspendIfSsr)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _promises__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./promises */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/promises.js\");\n/* harmony import */ var _strings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./strings */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/strings.js\");\n/* harmony import */ var _env__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./env */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/env.js\");\n\n\n\n\nfunction getNodeText(node) {\n    if ([\"number\", \"string\"].includes(typeof node)) {\n        return `${node}`;\n    }\n    if (!node) {\n        return \"\";\n    }\n    if (Array.isArray(node)) {\n        return node.map(getNodeText).join(\"\");\n    }\n    if (typeof node === \"object\" && \"props\" in node) {\n        return getNodeText(node.props.children);\n    }\n    throw new Error(`Unknown node type: ${typeof node}`);\n}\n/**\n * Suspends the currently rendered component indefinitely. Will not unsuspend unless the component rerenders.\n *\n * You can use this to translate older query- or AsyncResult-based code to new the Suspense system, for example: `if (query.isLoading) suspend();`\n */\nfunction suspend() {\n    react__WEBPACK_IMPORTED_MODULE_0___default().use((0,_promises__WEBPACK_IMPORTED_MODULE_1__.neverResolve)());\n    throw new Error(\"Somehow a Promise that never resolves was resolved?\");\n}\n/**\n * Use this in a component or a hook to disable SSR. Should be wrapped in a Suspense boundary, or it will throw an error.\n */\nfunction suspendIfSsr(caller) {\n    if (!(0,_env__WEBPACK_IMPORTED_MODULE_3__.isBrowserLike)()) {\n        const error = Object.assign(new Error((0,_strings__WEBPACK_IMPORTED_MODULE_2__.deindent) `\n        ${caller ?? \"This code path\"} attempted to display a loading indicator during SSR by falling back to the nearest Suspense boundary. If you see this error, it means no Suspense boundary was found, and no loading indicator could be displayed.\n        \n        This usually has one of three causes:\n        \n        1. You are missing a loading.tsx file in your app directory. Fix it by adding a loading.tsx file in your app directory.\n\n        2. The component is rendered in the root (outermost) layout.tsx or template.tsx file. Next.js does not wrap those files in a Suspense boundary, even if there is a loading.tsx file in the same folder. To fix it, wrap your layout inside a route group like this:\n\n          - app\n          - - layout.tsx  // contains <html> and <body>, alongside providers and other components that don't need ${caller ?? \"this code path\"}\n          - - loading.tsx  // required for suspense\n          - - (main)\n          - - - layout.tsx  // contains the main layout of your app, like a sidebar or a header, and can use ${caller ?? \"this code path\"}\n          - - - route.tsx  // your actual main page\n          - - - the rest of your app\n\n          For more information on this approach, see Next's documentation on route groups: https://nextjs.org/docs/app/building-your-application/routing/route-groups\n        \n        3. You caught this error with try-catch or a custom error boundary. Fix this by rethrowing the error or not catching it in the first place.\n\n        See: https://nextjs.org/docs/messages/missing-suspense-with-csr-bailout\n\n        More information on SSR and Suspense boundaries: https://react.dev/reference/react/Suspense#providing-a-fallback-for-server-errors-and-client-only-content\n      `), {\n            // set the digest so nextjs doesn't log the error\n            // https://github.com/vercel/next.js/blob/d01d6d9c35a8c2725b3d74c1402ab76d4779a6cf/packages/next/src/shared/lib/lazy-dynamic/bailout-to-csr.ts#L14\n            digest: \"BAILOUT_TO_CLIENT_SIDE_RENDERING\",\n            reason: caller ?? \"suspendIfSsr()\",\n        });\n        throw error;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvcmVhY3QuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBMEI7QUFDZ0I7QUFDTDtBQUNDO0FBQy9CO0FBQ1A7QUFDQSxrQkFBa0IsS0FBSztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxZQUFZO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUpBQWlKO0FBQ2pKO0FBQ087QUFDUCxJQUFJLGdEQUFTLENBQUMsdURBQVk7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsU0FBUyxtREFBYTtBQUN0Qiw4Q0FBOEMsa0RBQVE7QUFDdEQsVUFBVSw0QkFBNEI7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxvSEFBb0g7QUFDcEg7QUFDQTtBQUNBLCtHQUErRztBQUMvRztBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWFya2VycGxBSWNlLy4vbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L3V0aWxzL3JlYWN0LmpzP2FmNDMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgbmV2ZXJSZXNvbHZlIH0gZnJvbSBcIi4vcHJvbWlzZXNcIjtcbmltcG9ydCB7IGRlaW5kZW50IH0gZnJvbSBcIi4vc3RyaW5nc1wiO1xuaW1wb3J0IHsgaXNCcm93c2VyTGlrZSB9IGZyb20gXCIuL2VudlwiO1xuZXhwb3J0IGZ1bmN0aW9uIGdldE5vZGVUZXh0KG5vZGUpIHtcbiAgICBpZiAoW1wibnVtYmVyXCIsIFwic3RyaW5nXCJdLmluY2x1ZGVzKHR5cGVvZiBub2RlKSkge1xuICAgICAgICByZXR1cm4gYCR7bm9kZX1gO1xuICAgIH1cbiAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KG5vZGUpKSB7XG4gICAgICAgIHJldHVybiBub2RlLm1hcChnZXROb2RlVGV4dCkuam9pbihcIlwiKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBub2RlID09PSBcIm9iamVjdFwiICYmIFwicHJvcHNcIiBpbiBub2RlKSB7XG4gICAgICAgIHJldHVybiBnZXROb2RlVGV4dChub2RlLnByb3BzLmNoaWxkcmVuKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIG5vZGUgdHlwZTogJHt0eXBlb2Ygbm9kZX1gKTtcbn1cbi8qKlxuICogU3VzcGVuZHMgdGhlIGN1cnJlbnRseSByZW5kZXJlZCBjb21wb25lbnQgaW5kZWZpbml0ZWx5LiBXaWxsIG5vdCB1bnN1c3BlbmQgdW5sZXNzIHRoZSBjb21wb25lbnQgcmVyZW5kZXJzLlxuICpcbiAqIFlvdSBjYW4gdXNlIHRoaXMgdG8gdHJhbnNsYXRlIG9sZGVyIHF1ZXJ5LSBvciBBc3luY1Jlc3VsdC1iYXNlZCBjb2RlIHRvIG5ldyB0aGUgU3VzcGVuc2Ugc3lzdGVtLCBmb3IgZXhhbXBsZTogYGlmIChxdWVyeS5pc0xvYWRpbmcpIHN1c3BlbmQoKTtgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdXNwZW5kKCkge1xuICAgIFJlYWN0LnVzZShuZXZlclJlc29sdmUoKSk7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiU29tZWhvdyBhIFByb21pc2UgdGhhdCBuZXZlciByZXNvbHZlcyB3YXMgcmVzb2x2ZWQ/XCIpO1xufVxuLyoqXG4gKiBVc2UgdGhpcyBpbiBhIGNvbXBvbmVudCBvciBhIGhvb2sgdG8gZGlzYWJsZSBTU1IuIFNob3VsZCBiZSB3cmFwcGVkIGluIGEgU3VzcGVuc2UgYm91bmRhcnksIG9yIGl0IHdpbGwgdGhyb3cgYW4gZXJyb3IuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdXNwZW5kSWZTc3IoY2FsbGVyKSB7XG4gICAgaWYgKCFpc0Jyb3dzZXJMaWtlKCkpIHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSBPYmplY3QuYXNzaWduKG5ldyBFcnJvcihkZWluZGVudCBgXG4gICAgICAgICR7Y2FsbGVyID8/IFwiVGhpcyBjb2RlIHBhdGhcIn0gYXR0ZW1wdGVkIHRvIGRpc3BsYXkgYSBsb2FkaW5nIGluZGljYXRvciBkdXJpbmcgU1NSIGJ5IGZhbGxpbmcgYmFjayB0byB0aGUgbmVhcmVzdCBTdXNwZW5zZSBib3VuZGFyeS4gSWYgeW91IHNlZSB0aGlzIGVycm9yLCBpdCBtZWFucyBubyBTdXNwZW5zZSBib3VuZGFyeSB3YXMgZm91bmQsIGFuZCBubyBsb2FkaW5nIGluZGljYXRvciBjb3VsZCBiZSBkaXNwbGF5ZWQuXG4gICAgICAgIFxuICAgICAgICBUaGlzIHVzdWFsbHkgaGFzIG9uZSBvZiB0aHJlZSBjYXVzZXM6XG4gICAgICAgIFxuICAgICAgICAxLiBZb3UgYXJlIG1pc3NpbmcgYSBsb2FkaW5nLnRzeCBmaWxlIGluIHlvdXIgYXBwIGRpcmVjdG9yeS4gRml4IGl0IGJ5IGFkZGluZyBhIGxvYWRpbmcudHN4IGZpbGUgaW4geW91ciBhcHAgZGlyZWN0b3J5LlxuXG4gICAgICAgIDIuIFRoZSBjb21wb25lbnQgaXMgcmVuZGVyZWQgaW4gdGhlIHJvb3QgKG91dGVybW9zdCkgbGF5b3V0LnRzeCBvciB0ZW1wbGF0ZS50c3ggZmlsZS4gTmV4dC5qcyBkb2VzIG5vdCB3cmFwIHRob3NlIGZpbGVzIGluIGEgU3VzcGVuc2UgYm91bmRhcnksIGV2ZW4gaWYgdGhlcmUgaXMgYSBsb2FkaW5nLnRzeCBmaWxlIGluIHRoZSBzYW1lIGZvbGRlci4gVG8gZml4IGl0LCB3cmFwIHlvdXIgbGF5b3V0IGluc2lkZSBhIHJvdXRlIGdyb3VwIGxpa2UgdGhpczpcblxuICAgICAgICAgIC0gYXBwXG4gICAgICAgICAgLSAtIGxheW91dC50c3ggIC8vIGNvbnRhaW5zIDxodG1sPiBhbmQgPGJvZHk+LCBhbG9uZ3NpZGUgcHJvdmlkZXJzIGFuZCBvdGhlciBjb21wb25lbnRzIHRoYXQgZG9uJ3QgbmVlZCAke2NhbGxlciA/PyBcInRoaXMgY29kZSBwYXRoXCJ9XG4gICAgICAgICAgLSAtIGxvYWRpbmcudHN4ICAvLyByZXF1aXJlZCBmb3Igc3VzcGVuc2VcbiAgICAgICAgICAtIC0gKG1haW4pXG4gICAgICAgICAgLSAtIC0gbGF5b3V0LnRzeCAgLy8gY29udGFpbnMgdGhlIG1haW4gbGF5b3V0IG9mIHlvdXIgYXBwLCBsaWtlIGEgc2lkZWJhciBvciBhIGhlYWRlciwgYW5kIGNhbiB1c2UgJHtjYWxsZXIgPz8gXCJ0aGlzIGNvZGUgcGF0aFwifVxuICAgICAgICAgIC0gLSAtIHJvdXRlLnRzeCAgLy8geW91ciBhY3R1YWwgbWFpbiBwYWdlXG4gICAgICAgICAgLSAtIC0gdGhlIHJlc3Qgb2YgeW91ciBhcHBcblxuICAgICAgICAgIEZvciBtb3JlIGluZm9ybWF0aW9uIG9uIHRoaXMgYXBwcm9hY2gsIHNlZSBOZXh0J3MgZG9jdW1lbnRhdGlvbiBvbiByb3V0ZSBncm91cHM6IGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL2FwcC9idWlsZGluZy15b3VyLWFwcGxpY2F0aW9uL3JvdXRpbmcvcm91dGUtZ3JvdXBzXG4gICAgICAgIFxuICAgICAgICAzLiBZb3UgY2F1Z2h0IHRoaXMgZXJyb3Igd2l0aCB0cnktY2F0Y2ggb3IgYSBjdXN0b20gZXJyb3IgYm91bmRhcnkuIEZpeCB0aGlzIGJ5IHJldGhyb3dpbmcgdGhlIGVycm9yIG9yIG5vdCBjYXRjaGluZyBpdCBpbiB0aGUgZmlyc3QgcGxhY2UuXG5cbiAgICAgICAgU2VlOiBodHRwczovL25leHRqcy5vcmcvZG9jcy9tZXNzYWdlcy9taXNzaW5nLXN1c3BlbnNlLXdpdGgtY3NyLWJhaWxvdXRcblxuICAgICAgICBNb3JlIGluZm9ybWF0aW9uIG9uIFNTUiBhbmQgU3VzcGVuc2UgYm91bmRhcmllczogaHR0cHM6Ly9yZWFjdC5kZXYvcmVmZXJlbmNlL3JlYWN0L1N1c3BlbnNlI3Byb3ZpZGluZy1hLWZhbGxiYWNrLWZvci1zZXJ2ZXItZXJyb3JzLWFuZC1jbGllbnQtb25seS1jb250ZW50XG4gICAgICBgKSwge1xuICAgICAgICAgICAgLy8gc2V0IHRoZSBkaWdlc3Qgc28gbmV4dGpzIGRvZXNuJ3QgbG9nIHRoZSBlcnJvclxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3ZlcmNlbC9uZXh0LmpzL2Jsb2IvZDAxZDZkOWMzNWE4YzI3MjViM2Q3NGMxNDAyYWI3NmQ0Nzc5YTZjZi9wYWNrYWdlcy9uZXh0L3NyYy9zaGFyZWQvbGliL2xhenktZHluYW1pYy9iYWlsb3V0LXRvLWNzci50cyNMMTRcbiAgICAgICAgICAgIGRpZ2VzdDogXCJCQUlMT1VUX1RPX0NMSUVOVF9TSURFX1JFTkRFUklOR1wiLFxuICAgICAgICAgICAgcmVhc29uOiBjYWxsZXIgPz8gXCJzdXNwZW5kSWZTc3IoKVwiLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/react.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/results.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/results.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncResult: () => (/* binding */ AsyncResult),\n/* harmony export */   Result: () => (/* binding */ Result)\n/* harmony export */ });\n/* harmony import */ var _promises__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./promises */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/promises.js\");\n/* harmony import */ var _strings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./strings */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/strings.js\");\n\n\nconst Result = {\n    fromThrowing,\n    fromThrowingAsync,\n    fromPromise: promiseToResult,\n    ok(data) {\n        return {\n            status: \"ok\",\n            data,\n        };\n    },\n    error(error) {\n        return {\n            status: \"error\",\n            error,\n        };\n    },\n    map: mapResult,\n    or: (result, fallback) => {\n        return result.status === \"ok\" ? result.data : fallback;\n    },\n    orThrow: (result) => {\n        if (result.status === \"error\")\n            throw result.error;\n        return result.data;\n    },\n    orThrowAsync: async (result) => {\n        return Result.orThrow(await result);\n    },\n    retry,\n};\nconst AsyncResult = {\n    fromThrowing,\n    fromPromise: promiseToResult,\n    ok: Result.ok,\n    error: Result.error,\n    pending,\n    map: mapResult,\n    or: (result, fallback) => {\n        if (result.status === \"pending\")\n            return fallback;\n        return Result.or(result, fallback);\n    },\n    orThrow: (result) => {\n        if (result.status === \"pending\")\n            throw new Error(\"Result still pending\");\n        return Result.orThrow(result);\n    },\n    retry,\n};\nfunction pending(progress) {\n    return {\n        status: \"pending\",\n        progress: progress,\n    };\n}\nasync function promiseToResult(promise) {\n    try {\n        const value = await promise;\n        return Result.ok(value);\n    }\n    catch (error) {\n        return Result.error(error);\n    }\n}\nfunction fromThrowing(fn) {\n    try {\n        return Result.ok(fn());\n    }\n    catch (error) {\n        return Result.error(error);\n    }\n}\nasync function fromThrowingAsync(fn) {\n    try {\n        return Result.ok(await fn());\n    }\n    catch (error) {\n        return Result.error(error);\n    }\n}\nfunction mapResult(result, fn) {\n    if (result.status === \"error\")\n        return {\n            status: \"error\",\n            error: result.error,\n        };\n    if (result.status === \"pending\")\n        return {\n            status: \"pending\",\n            ...\"progress\" in result ? { progress: result.progress } : {},\n        };\n    return Result.ok(fn(result.data));\n}\nclass RetryError extends AggregateError {\n    constructor(errors) {\n        const strings = errors.map(e => String(e));\n        const isAllSame = strings.length > 1 && strings.every(s => s === strings[0]);\n        super(errors, (0,_strings__WEBPACK_IMPORTED_MODULE_1__.deindent) `\n      Error after retrying ${errors.length} times.\n      \n      ${isAllSame ? (0,_strings__WEBPACK_IMPORTED_MODULE_1__.deindent) `\n        Attempts 1-${errors.length}:\n          ${errors[0]}\n      ` : errors.map((e, i) => (0,_strings__WEBPACK_IMPORTED_MODULE_1__.deindent) `\n          Attempt ${i + 1}:\n            ${e}\n        `).join(\"\\n\\n\")}\n      `, { cause: errors[errors.length - 1] });\n        this.errors = errors;\n        this.name = \"RetryError\";\n    }\n    get retries() {\n        return this.errors.length;\n    }\n}\nRetryError.prototype.name = \"RetryError\";\nasync function retry(fn, retries, { exponentialDelayBase = 2000 }) {\n    const errors = [];\n    for (let i = 0; i < retries; i++) {\n        const res = await fn();\n        if (res.status === \"ok\") {\n            return Result.ok(res.data);\n        }\n        else {\n            errors.push(res.error);\n            if (i < retries - 1) {\n                await (0,_promises__WEBPACK_IMPORTED_MODULE_0__.wait)(Math.random() * exponentialDelayBase * 2 ** i);\n            }\n        }\n    }\n    return Result.error(new RetryError(errors));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvcmVzdWx0cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWtDO0FBQ0c7QUFDOUI7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLDRCQUE0QixJQUFJO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGtEQUFRO0FBQzlCLDZCQUE2QixlQUFlO0FBQzVDO0FBQ0EsUUFBUSxZQUFZLGtEQUFRO0FBQzVCLHFCQUFxQixjQUFjO0FBQ25DLFlBQVk7QUFDWiwrQkFBK0Isa0RBQVE7QUFDdkMsb0JBQW9CLE1BQU07QUFDMUIsY0FBYztBQUNkO0FBQ0EsV0FBVyxrQ0FBa0M7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyw2QkFBNkI7QUFDakU7QUFDQSxvQkFBb0IsYUFBYTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwrQ0FBSTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWFya2VycGxBSWNlLy4vbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L3V0aWxzL3Jlc3VsdHMuanM/M2RjNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB3YWl0IH0gZnJvbSBcIi4vcHJvbWlzZXNcIjtcbmltcG9ydCB7IGRlaW5kZW50IH0gZnJvbSBcIi4vc3RyaW5nc1wiO1xuZXhwb3J0IGNvbnN0IFJlc3VsdCA9IHtcbiAgICBmcm9tVGhyb3dpbmcsXG4gICAgZnJvbVRocm93aW5nQXN5bmMsXG4gICAgZnJvbVByb21pc2U6IHByb21pc2VUb1Jlc3VsdCxcbiAgICBvayhkYXRhKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGF0dXM6IFwib2tcIixcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICBlcnJvcihlcnJvcikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgICAgICBlcnJvcixcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIG1hcDogbWFwUmVzdWx0LFxuICAgIG9yOiAocmVzdWx0LCBmYWxsYmFjaykgPT4ge1xuICAgICAgICByZXR1cm4gcmVzdWx0LnN0YXR1cyA9PT0gXCJva1wiID8gcmVzdWx0LmRhdGEgOiBmYWxsYmFjaztcbiAgICB9LFxuICAgIG9yVGhyb3c6IChyZXN1bHQpID0+IHtcbiAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZXJyb3JcIilcbiAgICAgICAgICAgIHRocm93IHJlc3VsdC5lcnJvcjtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICAgIH0sXG4gICAgb3JUaHJvd0FzeW5jOiBhc3luYyAocmVzdWx0KSA9PiB7XG4gICAgICAgIHJldHVybiBSZXN1bHQub3JUaHJvdyhhd2FpdCByZXN1bHQpO1xuICAgIH0sXG4gICAgcmV0cnksXG59O1xuZXhwb3J0IGNvbnN0IEFzeW5jUmVzdWx0ID0ge1xuICAgIGZyb21UaHJvd2luZyxcbiAgICBmcm9tUHJvbWlzZTogcHJvbWlzZVRvUmVzdWx0LFxuICAgIG9rOiBSZXN1bHQub2ssXG4gICAgZXJyb3I6IFJlc3VsdC5lcnJvcixcbiAgICBwZW5kaW5nLFxuICAgIG1hcDogbWFwUmVzdWx0LFxuICAgIG9yOiAocmVzdWx0LCBmYWxsYmFjaykgPT4ge1xuICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJwZW5kaW5nXCIpXG4gICAgICAgICAgICByZXR1cm4gZmFsbGJhY2s7XG4gICAgICAgIHJldHVybiBSZXN1bHQub3IocmVzdWx0LCBmYWxsYmFjayk7XG4gICAgfSxcbiAgICBvclRocm93OiAocmVzdWx0KSA9PiB7XG4gICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcInBlbmRpbmdcIilcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJlc3VsdCBzdGlsbCBwZW5kaW5nXCIpO1xuICAgICAgICByZXR1cm4gUmVzdWx0Lm9yVGhyb3cocmVzdWx0KTtcbiAgICB9LFxuICAgIHJldHJ5LFxufTtcbmZ1bmN0aW9uIHBlbmRpbmcocHJvZ3Jlc3MpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBzdGF0dXM6IFwicGVuZGluZ1wiLFxuICAgICAgICBwcm9ncmVzczogcHJvZ3Jlc3MsXG4gICAgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHByb21pc2VUb1Jlc3VsdChwcm9taXNlKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBhd2FpdCBwcm9taXNlO1xuICAgICAgICByZXR1cm4gUmVzdWx0Lm9rKHZhbHVlKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IoZXJyb3IpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGZyb21UaHJvd2luZyhmbikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBSZXN1bHQub2soZm4oKSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICByZXR1cm4gUmVzdWx0LmVycm9yKGVycm9yKTtcbiAgICB9XG59XG5hc3luYyBmdW5jdGlvbiBmcm9tVGhyb3dpbmdBc3luYyhmbikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBSZXN1bHQub2soYXdhaXQgZm4oKSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICByZXR1cm4gUmVzdWx0LmVycm9yKGVycm9yKTtcbiAgICB9XG59XG5mdW5jdGlvbiBtYXBSZXN1bHQocmVzdWx0LCBmbikge1xuICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImVycm9yXCIpXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIixcbiAgICAgICAgICAgIGVycm9yOiByZXN1bHQuZXJyb3IsXG4gICAgICAgIH07XG4gICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwicGVuZGluZ1wiKVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzOiBcInBlbmRpbmdcIixcbiAgICAgICAgICAgIC4uLlwicHJvZ3Jlc3NcIiBpbiByZXN1bHQgPyB7IHByb2dyZXNzOiByZXN1bHQucHJvZ3Jlc3MgfSA6IHt9LFxuICAgICAgICB9O1xuICAgIHJldHVybiBSZXN1bHQub2soZm4ocmVzdWx0LmRhdGEpKTtcbn1cbmNsYXNzIFJldHJ5RXJyb3IgZXh0ZW5kcyBBZ2dyZWdhdGVFcnJvciB7XG4gICAgY29uc3RydWN0b3IoZXJyb3JzKSB7XG4gICAgICAgIGNvbnN0IHN0cmluZ3MgPSBlcnJvcnMubWFwKGUgPT4gU3RyaW5nKGUpKTtcbiAgICAgICAgY29uc3QgaXNBbGxTYW1lID0gc3RyaW5ncy5sZW5ndGggPiAxICYmIHN0cmluZ3MuZXZlcnkocyA9PiBzID09PSBzdHJpbmdzWzBdKTtcbiAgICAgICAgc3VwZXIoZXJyb3JzLCBkZWluZGVudCBgXG4gICAgICBFcnJvciBhZnRlciByZXRyeWluZyAke2Vycm9ycy5sZW5ndGh9IHRpbWVzLlxuICAgICAgXG4gICAgICAke2lzQWxsU2FtZSA/IGRlaW5kZW50IGBcbiAgICAgICAgQXR0ZW1wdHMgMS0ke2Vycm9ycy5sZW5ndGh9OlxuICAgICAgICAgICR7ZXJyb3JzWzBdfVxuICAgICAgYCA6IGVycm9ycy5tYXAoKGUsIGkpID0+IGRlaW5kZW50IGBcbiAgICAgICAgICBBdHRlbXB0ICR7aSArIDF9OlxuICAgICAgICAgICAgJHtlfVxuICAgICAgICBgKS5qb2luKFwiXFxuXFxuXCIpfVxuICAgICAgYCwgeyBjYXVzZTogZXJyb3JzW2Vycm9ycy5sZW5ndGggLSAxXSB9KTtcbiAgICAgICAgdGhpcy5lcnJvcnMgPSBlcnJvcnM7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiUmV0cnlFcnJvclwiO1xuICAgIH1cbiAgICBnZXQgcmV0cmllcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JzLmxlbmd0aDtcbiAgICB9XG59XG5SZXRyeUVycm9yLnByb3RvdHlwZS5uYW1lID0gXCJSZXRyeUVycm9yXCI7XG5hc3luYyBmdW5jdGlvbiByZXRyeShmbiwgcmV0cmllcywgeyBleHBvbmVudGlhbERlbGF5QmFzZSA9IDIwMDAgfSkge1xuICAgIGNvbnN0IGVycm9ycyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmV0cmllczsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZuKCk7XG4gICAgICAgIGlmIChyZXMuc3RhdHVzID09PSBcIm9rXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBSZXN1bHQub2socmVzLmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2gocmVzLmVycm9yKTtcbiAgICAgICAgICAgIGlmIChpIDwgcmV0cmllcyAtIDEpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB3YWl0KE1hdGgucmFuZG9tKCkgKiBleHBvbmVudGlhbERlbGF5QmFzZSAqIDIgKiogaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFJlc3VsdC5lcnJvcihuZXcgUmV0cnlFcnJvcihlcnJvcnMpKTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/results.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/stores.js":
/*!********************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/stores.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncStore: () => (/* binding */ AsyncStore),\n/* harmony export */   Store: () => (/* binding */ Store)\n/* harmony export */ });\n/* harmony import */ var _results__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./results */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/results.js\");\n/* harmony import */ var _uuids__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./uuids */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/uuids.js\");\n/* harmony import */ var _promises__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./promises */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/promises.js\");\n\n\n\nclass Store {\n    constructor(_value) {\n        this._value = _value;\n        this._callbacks = new Map();\n    }\n    get() {\n        return this._value;\n    }\n    set(value) {\n        const oldValue = this._value;\n        this._value = value;\n        this._callbacks.forEach((callback) => callback(value, oldValue));\n    }\n    update(updater) {\n        const value = updater(this._value);\n        this.set(value);\n        return value;\n    }\n    onChange(callback) {\n        const uuid = (0,_uuids__WEBPACK_IMPORTED_MODULE_1__.generateUuid)();\n        this._callbacks.set(uuid, callback);\n        return {\n            unsubscribe: () => {\n                this._callbacks.delete(uuid);\n            },\n        };\n    }\n    onceChange(callback) {\n        const { unsubscribe } = this.onChange((...args) => {\n            unsubscribe();\n            callback(...args);\n        });\n        return { unsubscribe };\n    }\n}\nclass AsyncStore {\n    constructor(...args) {\n        this._mostRecentOkValue = undefined;\n        this._isRejected = false;\n        this._waitingRejectFunctions = new Map();\n        this._callbacks = new Map();\n        this._updateCounter = 0;\n        this._lastSuccessfulUpdate = -1;\n        if (args.length === 0) {\n            this._isAvailable = false;\n        }\n        else {\n            this._isAvailable = true;\n            this._mostRecentOkValue = args[0];\n        }\n    }\n    isAvailable() {\n        return this._isAvailable;\n    }\n    isRejected() {\n        return this._isRejected;\n    }\n    get() {\n        if (this.isRejected()) {\n            return _results__WEBPACK_IMPORTED_MODULE_0__.AsyncResult.error(this._rejectionError);\n        }\n        else if (this.isAvailable()) {\n            return _results__WEBPACK_IMPORTED_MODULE_0__.AsyncResult.ok(this._mostRecentOkValue);\n        }\n        else {\n            return _results__WEBPACK_IMPORTED_MODULE_0__.AsyncResult.pending();\n        }\n    }\n    getOrWait() {\n        const uuid = (0,_uuids__WEBPACK_IMPORTED_MODULE_1__.generateUuid)();\n        if (this.isRejected()) {\n            return (0,_promises__WEBPACK_IMPORTED_MODULE_2__.rejected)(this._rejectionError);\n        }\n        else if (this.isAvailable()) {\n            return (0,_promises__WEBPACK_IMPORTED_MODULE_2__.resolved)(this._mostRecentOkValue);\n        }\n        const promise = new Promise((resolve, reject) => {\n            this.onceChange((value) => {\n                resolve(value);\n            });\n            this._waitingRejectFunctions.set(uuid, reject);\n        });\n        const withFinally = promise.finally(() => {\n            this._waitingRejectFunctions.delete(uuid);\n        });\n        return (0,_promises__WEBPACK_IMPORTED_MODULE_2__.pending)(withFinally);\n    }\n    _setIfLatest(result, curCounter) {\n        const oldState = this.get();\n        const oldValue = this._mostRecentOkValue;\n        if (curCounter > this._lastSuccessfulUpdate) {\n            switch (result.status) {\n                case \"ok\": {\n                    if (!this._isAvailable || this._isRejected || this._mostRecentOkValue !== result.data) {\n                        this._lastSuccessfulUpdate = curCounter;\n                        this._isAvailable = true;\n                        this._isRejected = false;\n                        this._mostRecentOkValue = result.data;\n                        this._rejectionError = undefined;\n                        this._callbacks.forEach((callback) => callback({\n                            state: this.get(),\n                            oldState,\n                            lastOkValue: oldValue,\n                        }));\n                        return true;\n                    }\n                    return false;\n                }\n                case \"error\": {\n                    this._lastSuccessfulUpdate = curCounter;\n                    this._isAvailable = false;\n                    this._isRejected = true;\n                    this._rejectionError = result.error;\n                    this._waitingRejectFunctions.forEach((reject) => reject(result.error));\n                    this._callbacks.forEach((callback) => callback({\n                        state: this.get(),\n                        oldState,\n                        lastOkValue: oldValue,\n                    }));\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    set(value) {\n        this._setIfLatest(_results__WEBPACK_IMPORTED_MODULE_0__.Result.ok(value), ++this._updateCounter);\n    }\n    update(updater) {\n        const value = updater(this._mostRecentOkValue);\n        this.set(value);\n        return value;\n    }\n    async setAsync(promise) {\n        const curCounter = ++this._updateCounter;\n        const result = await _results__WEBPACK_IMPORTED_MODULE_0__.Result.fromPromise(promise);\n        return this._setIfLatest(result, curCounter);\n    }\n    setUnavailable() {\n        this._lastSuccessfulUpdate = ++this._updateCounter;\n        this._isAvailable = false;\n        this._isRejected = false;\n        this._rejectionError = undefined;\n    }\n    setRejected(error) {\n        this._setIfLatest(_results__WEBPACK_IMPORTED_MODULE_0__.Result.error(error), ++this._updateCounter);\n    }\n    map(mapper) {\n        const store = new AsyncStore();\n        this.onChange((value) => {\n            store.set(mapper(value));\n        });\n        return store;\n    }\n    onChange(callback) {\n        return this.onStateChange(({ state, lastOkValue }) => {\n            if (state.status === \"ok\") {\n                callback(state.data, lastOkValue);\n            }\n        });\n    }\n    onStateChange(callback) {\n        const uuid = (0,_uuids__WEBPACK_IMPORTED_MODULE_1__.generateUuid)();\n        this._callbacks.set(uuid, callback);\n        return {\n            unsubscribe: () => {\n                this._callbacks.delete(uuid);\n            },\n        };\n    }\n    onceChange(callback) {\n        const { unsubscribe } = this.onChange((...args) => {\n            unsubscribe();\n            callback(...args);\n        });\n        return { unsubscribe };\n    }\n    onceStateChange(callback) {\n        const { unsubscribe } = this.onStateChange((...args) => {\n            unsubscribe();\n            callback(...args);\n        });\n        return { unsubscribe };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvc3RvcmVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQWdEO0FBQ1Q7QUFDa0I7QUFDbEQ7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsb0RBQVk7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGNBQWM7QUFDOUI7QUFDQTtBQUNBLFNBQVM7QUFDVCxpQkFBaUI7QUFDakI7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixpREFBVztBQUM5QjtBQUNBO0FBQ0EsbUJBQW1CLGlEQUFXO0FBQzlCO0FBQ0E7QUFDQSxtQkFBbUIsaURBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLG9EQUFZO0FBQ2pDO0FBQ0EsbUJBQW1CLG1EQUFRO0FBQzNCO0FBQ0E7QUFDQSxtQkFBbUIsbURBQVE7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVCxlQUFlLGtEQUFPO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiw0Q0FBTTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDRDQUFNO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiw0Q0FBTTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxvQkFBb0I7QUFDekQ7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxxQkFBcUIsb0RBQVk7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGNBQWM7QUFDOUI7QUFDQTtBQUNBLFNBQVM7QUFDVCxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGdCQUFnQixjQUFjO0FBQzlCO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsaUJBQWlCO0FBQ2pCO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tYXJrZXJwbEFJY2UvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvc3RvcmVzLmpzPzRjZmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXN5bmNSZXN1bHQsIFJlc3VsdCB9IGZyb20gXCIuL3Jlc3VsdHNcIjtcbmltcG9ydCB7IGdlbmVyYXRlVXVpZCB9IGZyb20gXCIuL3V1aWRzXCI7XG5pbXBvcnQgeyBwZW5kaW5nLCByZWplY3RlZCwgcmVzb2x2ZWQgfSBmcm9tIFwiLi9wcm9taXNlc1wiO1xuZXhwb3J0IGNsYXNzIFN0b3JlIHtcbiAgICBjb25zdHJ1Y3RvcihfdmFsdWUpIHtcbiAgICAgICAgdGhpcy5fdmFsdWUgPSBfdmFsdWU7XG4gICAgICAgIHRoaXMuX2NhbGxiYWNrcyA9IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgZ2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG4gICAgfVxuICAgIHNldCh2YWx1ZSkge1xuICAgICAgICBjb25zdCBvbGRWYWx1ZSA9IHRoaXMuX3ZhbHVlO1xuICAgICAgICB0aGlzLl92YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLl9jYWxsYmFja3MuZm9yRWFjaCgoY2FsbGJhY2spID0+IGNhbGxiYWNrKHZhbHVlLCBvbGRWYWx1ZSkpO1xuICAgIH1cbiAgICB1cGRhdGUodXBkYXRlcikge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHVwZGF0ZXIodGhpcy5fdmFsdWUpO1xuICAgICAgICB0aGlzLnNldCh2YWx1ZSk7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgb25DaGFuZ2UoY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgdXVpZCA9IGdlbmVyYXRlVXVpZCgpO1xuICAgICAgICB0aGlzLl9jYWxsYmFja3Muc2V0KHV1aWQsIGNhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2FsbGJhY2tzLmRlbGV0ZSh1dWlkKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIG9uY2VDaGFuZ2UoY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgeyB1bnN1YnNjcmliZSB9ID0gdGhpcy5vbkNoYW5nZSgoLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKC4uLmFyZ3MpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHsgdW5zdWJzY3JpYmUgfTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQXN5bmNTdG9yZSB7XG4gICAgY29uc3RydWN0b3IoLi4uYXJncykge1xuICAgICAgICB0aGlzLl9tb3N0UmVjZW50T2tWYWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5faXNSZWplY3RlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl93YWl0aW5nUmVqZWN0RnVuY3Rpb25zID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLl9jYWxsYmFja3MgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuX3VwZGF0ZUNvdW50ZXIgPSAwO1xuICAgICAgICB0aGlzLl9sYXN0U3VjY2Vzc2Z1bFVwZGF0ZSA9IC0xO1xuICAgICAgICBpZiAoYXJncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuX2lzQXZhaWxhYmxlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9pc0F2YWlsYWJsZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9tb3N0UmVjZW50T2tWYWx1ZSA9IGFyZ3NbMF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgaXNBdmFpbGFibGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc0F2YWlsYWJsZTtcbiAgICB9XG4gICAgaXNSZWplY3RlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzUmVqZWN0ZWQ7XG4gICAgfVxuICAgIGdldCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNSZWplY3RlZCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gQXN5bmNSZXN1bHQuZXJyb3IodGhpcy5fcmVqZWN0aW9uRXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuaXNBdmFpbGFibGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuIEFzeW5jUmVzdWx0Lm9rKHRoaXMuX21vc3RSZWNlbnRPa1ZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBBc3luY1Jlc3VsdC5wZW5kaW5nKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0T3JXYWl0KCkge1xuICAgICAgICBjb25zdCB1dWlkID0gZ2VuZXJhdGVVdWlkKCk7XG4gICAgICAgIGlmICh0aGlzLmlzUmVqZWN0ZWQoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlamVjdGVkKHRoaXMuX3JlamVjdGlvbkVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmlzQXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlZCh0aGlzLl9tb3N0UmVjZW50T2tWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMub25jZUNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHZhbHVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5fd2FpdGluZ1JlamVjdEZ1bmN0aW9ucy5zZXQodXVpZCwgcmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHdpdGhGaW5hbGx5ID0gcHJvbWlzZS5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3dhaXRpbmdSZWplY3RGdW5jdGlvbnMuZGVsZXRlKHV1aWQpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHBlbmRpbmcod2l0aEZpbmFsbHkpO1xuICAgIH1cbiAgICBfc2V0SWZMYXRlc3QocmVzdWx0LCBjdXJDb3VudGVyKSB7XG4gICAgICAgIGNvbnN0IG9sZFN0YXRlID0gdGhpcy5nZXQoKTtcbiAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSB0aGlzLl9tb3N0UmVjZW50T2tWYWx1ZTtcbiAgICAgICAgaWYgKGN1ckNvdW50ZXIgPiB0aGlzLl9sYXN0U3VjY2Vzc2Z1bFVwZGF0ZSkge1xuICAgICAgICAgICAgc3dpdGNoIChyZXN1bHQuc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcIm9rXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9pc0F2YWlsYWJsZSB8fCB0aGlzLl9pc1JlamVjdGVkIHx8IHRoaXMuX21vc3RSZWNlbnRPa1ZhbHVlICE9PSByZXN1bHQuZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbGFzdFN1Y2Nlc3NmdWxVcGRhdGUgPSBjdXJDb3VudGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNBdmFpbGFibGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNSZWplY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbW9zdFJlY2VudE9rVmFsdWUgPSByZXN1bHQuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlamVjdGlvbkVycm9yID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FsbGJhY2tzLmZvckVhY2goKGNhbGxiYWNrKSA9PiBjYWxsYmFjayh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6IHRoaXMuZ2V0KCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkU3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdE9rVmFsdWU6IG9sZFZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFwiZXJyb3JcIjoge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9sYXN0U3VjY2Vzc2Z1bFVwZGF0ZSA9IGN1ckNvdW50ZXI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2lzQXZhaWxhYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2lzUmVqZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZWplY3Rpb25FcnJvciA9IHJlc3VsdC5lcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fd2FpdGluZ1JlamVjdEZ1bmN0aW9ucy5mb3JFYWNoKChyZWplY3QpID0+IHJlamVjdChyZXN1bHQuZXJyb3IpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FsbGJhY2tzLmZvckVhY2goKGNhbGxiYWNrKSA9PiBjYWxsYmFjayh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTogdGhpcy5nZXQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9sZFN0YXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdE9rVmFsdWU6IG9sZFZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHNldCh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9zZXRJZkxhdGVzdChSZXN1bHQub2sodmFsdWUpLCArK3RoaXMuX3VwZGF0ZUNvdW50ZXIpO1xuICAgIH1cbiAgICB1cGRhdGUodXBkYXRlcikge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHVwZGF0ZXIodGhpcy5fbW9zdFJlY2VudE9rVmFsdWUpO1xuICAgICAgICB0aGlzLnNldCh2YWx1ZSk7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgYXN5bmMgc2V0QXN5bmMocHJvbWlzZSkge1xuICAgICAgICBjb25zdCBjdXJDb3VudGVyID0gKyt0aGlzLl91cGRhdGVDb3VudGVyO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBSZXN1bHQuZnJvbVByb21pc2UocHJvbWlzZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXRJZkxhdGVzdChyZXN1bHQsIGN1ckNvdW50ZXIpO1xuICAgIH1cbiAgICBzZXRVbmF2YWlsYWJsZSgpIHtcbiAgICAgICAgdGhpcy5fbGFzdFN1Y2Nlc3NmdWxVcGRhdGUgPSArK3RoaXMuX3VwZGF0ZUNvdW50ZXI7XG4gICAgICAgIHRoaXMuX2lzQXZhaWxhYmxlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2lzUmVqZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fcmVqZWN0aW9uRXJyb3IgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHNldFJlamVjdGVkKGVycm9yKSB7XG4gICAgICAgIHRoaXMuX3NldElmTGF0ZXN0KFJlc3VsdC5lcnJvcihlcnJvciksICsrdGhpcy5fdXBkYXRlQ291bnRlcik7XG4gICAgfVxuICAgIG1hcChtYXBwZXIpIHtcbiAgICAgICAgY29uc3Qgc3RvcmUgPSBuZXcgQXN5bmNTdG9yZSgpO1xuICAgICAgICB0aGlzLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgc3RvcmUuc2V0KG1hcHBlcih2YWx1ZSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHN0b3JlO1xuICAgIH1cbiAgICBvbkNoYW5nZShjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gdGhpcy5vblN0YXRlQ2hhbmdlKCh7IHN0YXRlLCBsYXN0T2tWYWx1ZSB9KSA9PiB7XG4gICAgICAgICAgICBpZiAoc3RhdGUuc3RhdHVzID09PSBcIm9rXCIpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhzdGF0ZS5kYXRhLCBsYXN0T2tWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBvblN0YXRlQ2hhbmdlKGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IHV1aWQgPSBnZW5lcmF0ZVV1aWQoKTtcbiAgICAgICAgdGhpcy5fY2FsbGJhY2tzLnNldCh1dWlkLCBjYWxsYmFjayk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB1bnN1YnNjcmliZTogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhbGxiYWNrcy5kZWxldGUodXVpZCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBvbmNlQ2hhbmdlKGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IHsgdW5zdWJzY3JpYmUgfSA9IHRoaXMub25DaGFuZ2UoKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICBjYWxsYmFjayguLi5hcmdzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7IHVuc3Vic2NyaWJlIH07XG4gICAgfVxuICAgIG9uY2VTdGF0ZUNoYW5nZShjYWxsYmFjaykge1xuICAgICAgICBjb25zdCB7IHVuc3Vic2NyaWJlIH0gPSB0aGlzLm9uU3RhdGVDaGFuZ2UoKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICBjYWxsYmFjayguLi5hcmdzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7IHVuc3Vic2NyaWJlIH07XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/stores.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/strings.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/strings.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   camelCaseToSnakeCase: () => (/* binding */ camelCaseToSnakeCase),\n/* harmony export */   deindent: () => (/* binding */ deindent),\n/* harmony export */   extractScopes: () => (/* binding */ extractScopes),\n/* harmony export */   getWhitespacePrefix: () => (/* binding */ getWhitespacePrefix),\n/* harmony export */   getWhitespaceSuffix: () => (/* binding */ getWhitespaceSuffix),\n/* harmony export */   mergeScopeStrings: () => (/* binding */ mergeScopeStrings),\n/* harmony export */   nicify: () => (/* binding */ nicify),\n/* harmony export */   replaceAll: () => (/* binding */ replaceAll),\n/* harmony export */   snakeCaseToCamelCase: () => (/* binding */ snakeCaseToCamelCase),\n/* harmony export */   templateIdentity: () => (/* binding */ templateIdentity),\n/* harmony export */   trimEmptyLinesEnd: () => (/* binding */ trimEmptyLinesEnd),\n/* harmony export */   trimEmptyLinesStart: () => (/* binding */ trimEmptyLinesStart),\n/* harmony export */   trimLines: () => (/* binding */ trimLines),\n/* harmony export */   typedCapitalize: () => (/* binding */ typedCapitalize),\n/* harmony export */   typedToLowercase: () => (/* binding */ typedToLowercase),\n/* harmony export */   typedToUppercase: () => (/* binding */ typedToUppercase)\n/* harmony export */ });\n/* harmony import */ var _arrays__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./arrays */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/arrays.js\");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errors */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js\");\n/* harmony import */ var _objects__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./objects */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/objects.js\");\n\n\n\nfunction typedToLowercase(s) {\n    return s.toLowerCase();\n}\nfunction typedToUppercase(s) {\n    return s.toUpperCase();\n}\nfunction typedCapitalize(s) {\n    return s.charAt(0).toUpperCase() + s.slice(1);\n}\n/**\n * Returns all whitespace character at the start of the string.\n *\n * Uses the same definition for whitespace as `String.prototype.trim()`.\n */\nfunction getWhitespacePrefix(s) {\n    return s.substring(0, s.length - s.trimStart().length);\n}\n/**\n * Returns all whitespace character at the end of the string.\n *\n * Uses the same definition for whitespace as `String.prototype.trim()`.\n */\nfunction getWhitespaceSuffix(s) {\n    return s.substring(s.trimEnd().length);\n}\n/**\n * Returns a string with all empty or whitespace-only lines at the start removed.\n *\n * Uses the same definition for whitespace as `String.prototype.trim()`.\n */\nfunction trimEmptyLinesStart(s) {\n    const lines = s.split(\"\\n\");\n    const firstNonEmptyLineIndex = lines.findIndex((line) => line.trim() !== \"\");\n    return lines.slice(firstNonEmptyLineIndex).join(\"\\n\");\n}\n/**\n * Returns a string with all empty or whitespace-only lines at the end removed.\n *\n * Uses the same definition for whitespace as `String.prototype.trim()`.\n */\nfunction trimEmptyLinesEnd(s) {\n    const lines = s.split(\"\\n\");\n    const lastNonEmptyLineIndex = (0,_arrays__WEBPACK_IMPORTED_MODULE_0__.findLastIndex)(lines, (line) => line.trim() !== \"\");\n    return lines.slice(0, lastNonEmptyLineIndex + 1).join(\"\\n\");\n}\n/**\n * Returns a string with all empty or whitespace-only lines trimmed at the start and end.\n *\n * Uses the same definition for whitespace as `String.prototype.trim()`.\n */\nfunction trimLines(s) {\n    return trimEmptyLinesEnd(trimEmptyLinesStart(s));\n}\n/**\n * A template literal tag that returns the same string as the template literal without a tag.\n *\n * Useful for implementing your own template literal tags.\n */\nfunction templateIdentity(strings, ...values) {\n    if (strings.length === 0)\n        return \"\";\n    if (values.length !== strings.length - 1)\n        throw new Error(\"Invalid number of values; must be one less than strings\");\n    return strings.slice(1).reduce((result, string, i) => `${result}${values[i] ?? \"n/a\"}${string}`, strings[0]);\n}\nfunction deindent(strings, ...values) {\n    if (typeof strings === \"string\")\n        return deindent([strings]);\n    if (strings.length === 0)\n        return \"\";\n    if (values.length !== strings.length - 1)\n        throw new Error(\"Invalid number of values; must be one less than strings\");\n    const trimmedStrings = [...strings];\n    trimmedStrings[0] = trimEmptyLinesStart(trimmedStrings[0]);\n    trimmedStrings[trimmedStrings.length - 1] = trimEmptyLinesEnd(trimmedStrings[trimmedStrings.length - 1]);\n    const indentation = trimmedStrings\n        .join(\"${SOME_VALUE}\")\n        .split(\"\\n\")\n        .filter((line) => line.trim() !== \"\")\n        .map((line) => getWhitespacePrefix(line).length)\n        .reduce((min, current) => Math.min(min, current), Infinity);\n    const deindentedStrings = trimmedStrings\n        .map((string, stringIndex) => {\n        return string\n            .split(\"\\n\")\n            .map((line, lineIndex) => stringIndex !== 0 && lineIndex === 0 ? line : line.substring(indentation))\n            .join(\"\\n\");\n    });\n    const indentedValues = values.map((value, i) => {\n        const firstLineIndentation = getWhitespacePrefix(deindentedStrings[i].split(\"\\n\").at(-1));\n        return `${value}`.replaceAll(\"\\n\", `\\n${firstLineIndentation}`);\n    });\n    return templateIdentity(deindentedStrings, ...indentedValues);\n}\nfunction extractScopes(scope, removeDuplicates = true) {\n    const trimmedString = scope.trim();\n    const scopesArray = trimmedString.split(/\\s+/);\n    const filtered = scopesArray.filter(scope => scope.length > 0);\n    return removeDuplicates ? [...new Set(filtered)] : filtered;\n}\nfunction mergeScopeStrings(...scopes) {\n    const allScope = scopes.map((s) => extractScopes(s)).flat().join(\" \");\n    return extractScopes(allScope).join(\" \");\n}\nfunction snakeCaseToCamelCase(snakeCase) {\n    if (snakeCase.match(/[A-Z]/))\n        return snakeCase; // TODO next-release: this is a hack for fixing the email templates, remove this after v2 migration\n    return snakeCase.replace(/_([a-z])/g, (_, letter) => letter.toUpperCase());\n}\nfunction camelCaseToSnakeCase(camelCase) {\n    if (camelCase.match(/_/))\n        return camelCase; // TODO next-release: this is a hack for fixing the email templates, remove this after v2 migration\n    return camelCase.replace(/[A-Z]/g, (letter) => `_${letter.toLowerCase()}`);\n}\n/**\n * Some classes have different constructor names in different environments (eg. `Headers` is sometimes called `_Headers`,\n * so we create an object of overrides to handle these cases.\n */\nconst nicifiableClassNameOverrides = new Map(Object.entries({\n    Headers,\n}).map(([k, v]) => [v, k]));\nfunction nicify(value, options = {}) {\n    const fullOptions = {\n        maxDepth: 5,\n        currentIndent: \"\",\n        lineIndent: \"  \",\n        multiline: true,\n        refs: new Map(),\n        path: \"value\",\n        parent: null,\n        overrides: () => null,\n        keyInParent: null,\n        hideFields: [],\n        ...(0,_objects__WEBPACK_IMPORTED_MODULE_2__.filterUndefined)(options),\n    };\n    const { maxDepth, currentIndent, lineIndent, multiline, refs, path, overrides, hideFields, } = fullOptions;\n    const nl = `\\n${currentIndent}`;\n    const overrideResult = overrides(value, options);\n    if (overrideResult !== null)\n        return overrideResult;\n    if ([\"function\", \"object\", \"symbol\"].includes(typeof value) && value !== null) {\n        if (refs.has(value)) {\n            return `Ref<${refs.get(value)}>`;\n        }\n        refs.set(value, path);\n    }\n    const newOptions = {\n        maxDepth: maxDepth - 1,\n        currentIndent,\n        lineIndent,\n        multiline,\n        refs,\n        path: path + \"->[unknown property]\",\n        overrides,\n        parent: { value, options: fullOptions },\n        keyInParent: null,\n        hideFields: [],\n    };\n    const nestedNicify = (newValue, newPath, keyInParent) => {\n        return nicify(newValue, {\n            ...newOptions,\n            path: newPath,\n            currentIndent: currentIndent + lineIndent,\n            keyInParent,\n        });\n    };\n    switch (typeof value) {\n        case \"string\":\n        case \"boolean\":\n        case \"number\": {\n            return JSON.stringify(value);\n        }\n        case \"undefined\": {\n            return \"undefined\";\n        }\n        case \"symbol\": {\n            return value.toString();\n        }\n        case \"bigint\": {\n            return `${value}n`;\n        }\n        case \"function\": {\n            if (value.name)\n                return `function ${value.name}(...) { ... }`;\n            return `(...) => { ... }`;\n        }\n        case \"object\": {\n            if (value === null)\n                return \"null\";\n            if (Array.isArray(value)) {\n                const extraLines = getNicifiedObjectExtraLines(value);\n                const resValueLength = value.length + extraLines.length;\n                if (maxDepth <= 0 && resValueLength === 0)\n                    return \"[...]\";\n                const resValues = value.map((v, i) => nestedNicify(v, `${path}[${i}]`, i));\n                resValues.push(...extraLines);\n                if (resValues.length !== resValueLength)\n                    throw new _errors__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"nicify of object: resValues.length !== resValueLength\", { value, resValues, resValueLength });\n                const shouldIndent = resValues.length > 1 || resValues.some(x => x.includes(\"\\n\"));\n                if (shouldIndent) {\n                    return `[${nl}${resValues.map(x => `${lineIndent}${x},${nl}`).join(\"\")}]`;\n                }\n                else {\n                    return `[${resValues.join(\", \")}]`;\n                }\n            }\n            if (value instanceof URL) {\n                return `URL(${JSON.stringify(value.toString())})`;\n            }\n            const constructorName = [null, Object.prototype].includes(Object.getPrototypeOf(value)) ? null : (nicifiableClassNameOverrides.get(value.constructor) ?? value.constructor.name);\n            const constructorString = constructorName ? `${nicifyPropertyString(constructorName)} ` : \"\";\n            const entries = getNicifiableEntries(value).filter(([k]) => !hideFields.includes(k));\n            const extraLines = [\n                ...getNicifiedObjectExtraLines(value),\n                ...hideFields.length > 0 ? [`<some fields may have been hidden>`] : [],\n            ];\n            const resValueLength = entries.length + extraLines.length;\n            if (resValueLength === 0)\n                return `${constructorString}{}`;\n            if (maxDepth <= 0)\n                return `${constructorString}{ ... }`;\n            const resValues = entries.map(([k, v], keyIndex) => {\n                const keyNicified = nestedNicify(k, `Object.keys(${path})[${keyIndex}]`, null);\n                const keyInObjectLiteral = typeof k === \"string\" ? JSON.stringify(k) : `[${keyNicified}]`;\n                if (typeof v === \"function\" && v.name === k) {\n                    return `${keyInObjectLiteral}(...): { ... }`;\n                }\n                else {\n                    return `${keyInObjectLiteral}: ${nestedNicify(v, `${path}[${keyNicified}]`, k)}`;\n                }\n            });\n            resValues.push(...extraLines);\n            if (resValues.length !== resValueLength)\n                throw new _errors__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"nicify of object: resValues.length !== resValueLength\", { value, resValues, resValueLength });\n            const shouldIndent = resValues.length > 1 || resValues.some(x => x.includes(\"\\n\"));\n            if (resValues.length === 0)\n                return `${constructorString}{}`;\n            if (shouldIndent) {\n                return `${constructorString}{${nl}${resValues.map(x => `${lineIndent}${x},${nl}`).join(\"\")}}`;\n            }\n            else {\n                return `${constructorString}{ ${resValues.join(\", \")} }`;\n            }\n        }\n        default: {\n            return `${typeof value}<${value}>`;\n        }\n    }\n}\nfunction replaceAll(input, searchValue, replaceValue) {\n    return input.split(searchValue).join(replaceValue);\n}\nfunction nicifyPropertyString(str) {\n    if (/^[_a-zA-Z][_a-zA-Z0-9]*$/.test(str))\n        return str;\n    return JSON.stringify(str);\n}\nfunction getNicifiableKeys(value) {\n    const overridden = (\"getNicifiableKeys\" in value ? value.getNicifiableKeys?.bind(value) : null)?.();\n    if (overridden != null)\n        return overridden;\n    const keys = Object.keys(value).sort();\n    if (value instanceof Error) {\n        if (value.cause)\n            keys.unshift(\"cause\");\n        keys.unshift(\"message\", \"stack\");\n    }\n    return (0,_arrays__WEBPACK_IMPORTED_MODULE_0__.unique)(keys);\n}\nfunction getNicifiableEntries(value) {\n    const recordLikes = [Headers];\n    function isRecordLike(value) {\n        return recordLikes.some(x => value instanceof x);\n    }\n    if (isRecordLike(value)) {\n        return [...value.entries()].sort(([a], [b]) => String(a).localeCompare(String(b)));\n    }\n    const keys = getNicifiableKeys(value);\n    return keys.map((k) => [k, value[k]]);\n}\nfunction getNicifiedObjectExtraLines(value) {\n    return (\"getNicifiedObjectExtraLines\" in value ? value.getNicifiedObjectExtraLines : null)?.() ?? [];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvc3RyaW5ncy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWlEO0FBQ0Y7QUFDSDtBQUNyQztBQUNQO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSxrQ0FBa0Msc0RBQWE7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxtREFBbUQ7QUFDbkQsNkRBQTZELE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxPQUFPO0FBQ2xHO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1EO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFdBQVc7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGtCQUFrQixNQUFNLHdCQUF3QixxQkFBcUI7QUFDckUsS0FBSztBQUNMO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNPO0FBQ1A7QUFDQSwwQkFBMEI7QUFDMUIsdURBQXVELHFCQUFxQjtBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDTSxtQ0FBbUM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcseURBQWU7QUFDMUI7QUFDQSxZQUFZLHFGQUFxRjtBQUNqRyxvQkFBb0IsY0FBYztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGdCQUFnQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDZCQUE2QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixNQUFNO0FBQzVCO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxXQUFXLFFBQVEsS0FBSztBQUMzRCwrQkFBK0IsS0FBSztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5RUFBeUUsS0FBSyxHQUFHLEVBQUU7QUFDbkY7QUFDQTtBQUNBLDhCQUE4Qix3REFBbUIsNERBQTRELGtDQUFrQztBQUMvSTtBQUNBO0FBQ0EsK0JBQStCLEdBQUcsRUFBRSxzQkFBc0IsV0FBVyxFQUFFLEVBQUUsR0FBRyxHQUFHLFlBQVk7QUFDM0Y7QUFDQTtBQUNBLCtCQUErQixxQkFBcUI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGlDQUFpQztBQUMvRDtBQUNBO0FBQ0EsMkRBQTJELHVDQUF1QztBQUNsRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixvQkFBb0I7QUFDOUM7QUFDQSwwQkFBMEIsb0JBQW9CLEtBQUs7QUFDbkQ7QUFDQSxtRUFBbUUsS0FBSyxJQUFJLFNBQVM7QUFDckYsMkZBQTJGLFlBQVk7QUFDdkc7QUFDQSw4QkFBOEIsbUJBQW1CLFNBQVMsS0FBSztBQUMvRDtBQUNBO0FBQ0EsOEJBQThCLG1CQUFtQixJQUFJLG1CQUFtQixLQUFLLEdBQUcsWUFBWSxPQUFPO0FBQ25HO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSwwQkFBMEIsd0RBQW1CLDREQUE0RCxrQ0FBa0M7QUFDM0k7QUFDQTtBQUNBLDBCQUEwQixvQkFBb0I7QUFDOUM7QUFDQSwwQkFBMEIsbUJBQW1CLEVBQUUsR0FBRyxFQUFFLHNCQUFzQixXQUFXLEVBQUUsRUFBRSxHQUFHLEdBQUcsYUFBYTtBQUM1RztBQUNBO0FBQ0EsMEJBQTBCLG9CQUFvQixFQUFFLHVCQUF1QjtBQUN2RTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsYUFBYSxHQUFHLE1BQU07QUFDNUM7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVywrQ0FBTTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tYXJrZXJwbEFJY2UvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvc3RyaW5ncy5qcz8zOTIyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGZpbmRMYXN0SW5kZXgsIHVuaXF1ZSB9IGZyb20gXCIuL2FycmF5c1wiO1xuaW1wb3J0IHsgU3RhY2tBc3NlcnRpb25FcnJvciB9IGZyb20gXCIuL2Vycm9yc1wiO1xuaW1wb3J0IHsgZmlsdGVyVW5kZWZpbmVkIH0gZnJvbSBcIi4vb2JqZWN0c1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHR5cGVkVG9Mb3dlcmNhc2Uocykge1xuICAgIHJldHVybiBzLnRvTG93ZXJDYXNlKCk7XG59XG5leHBvcnQgZnVuY3Rpb24gdHlwZWRUb1VwcGVyY2FzZShzKSB7XG4gICAgcmV0dXJuIHMudG9VcHBlckNhc2UoKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB0eXBlZENhcGl0YWxpemUocykge1xuICAgIHJldHVybiBzLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcy5zbGljZSgxKTtcbn1cbi8qKlxuICogUmV0dXJucyBhbGwgd2hpdGVzcGFjZSBjaGFyYWN0ZXIgYXQgdGhlIHN0YXJ0IG9mIHRoZSBzdHJpbmcuXG4gKlxuICogVXNlcyB0aGUgc2FtZSBkZWZpbml0aW9uIGZvciB3aGl0ZXNwYWNlIGFzIGBTdHJpbmcucHJvdG90eXBlLnRyaW0oKWAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRXaGl0ZXNwYWNlUHJlZml4KHMpIHtcbiAgICByZXR1cm4gcy5zdWJzdHJpbmcoMCwgcy5sZW5ndGggLSBzLnRyaW1TdGFydCgpLmxlbmd0aCk7XG59XG4vKipcbiAqIFJldHVybnMgYWxsIHdoaXRlc3BhY2UgY2hhcmFjdGVyIGF0IHRoZSBlbmQgb2YgdGhlIHN0cmluZy5cbiAqXG4gKiBVc2VzIHRoZSBzYW1lIGRlZmluaXRpb24gZm9yIHdoaXRlc3BhY2UgYXMgYFN0cmluZy5wcm90b3R5cGUudHJpbSgpYC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFdoaXRlc3BhY2VTdWZmaXgocykge1xuICAgIHJldHVybiBzLnN1YnN0cmluZyhzLnRyaW1FbmQoKS5sZW5ndGgpO1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgc3RyaW5nIHdpdGggYWxsIGVtcHR5IG9yIHdoaXRlc3BhY2Utb25seSBsaW5lcyBhdCB0aGUgc3RhcnQgcmVtb3ZlZC5cbiAqXG4gKiBVc2VzIHRoZSBzYW1lIGRlZmluaXRpb24gZm9yIHdoaXRlc3BhY2UgYXMgYFN0cmluZy5wcm90b3R5cGUudHJpbSgpYC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyaW1FbXB0eUxpbmVzU3RhcnQocykge1xuICAgIGNvbnN0IGxpbmVzID0gcy5zcGxpdChcIlxcblwiKTtcbiAgICBjb25zdCBmaXJzdE5vbkVtcHR5TGluZUluZGV4ID0gbGluZXMuZmluZEluZGV4KChsaW5lKSA9PiBsaW5lLnRyaW0oKSAhPT0gXCJcIik7XG4gICAgcmV0dXJuIGxpbmVzLnNsaWNlKGZpcnN0Tm9uRW1wdHlMaW5lSW5kZXgpLmpvaW4oXCJcXG5cIik7XG59XG4vKipcbiAqIFJldHVybnMgYSBzdHJpbmcgd2l0aCBhbGwgZW1wdHkgb3Igd2hpdGVzcGFjZS1vbmx5IGxpbmVzIGF0IHRoZSBlbmQgcmVtb3ZlZC5cbiAqXG4gKiBVc2VzIHRoZSBzYW1lIGRlZmluaXRpb24gZm9yIHdoaXRlc3BhY2UgYXMgYFN0cmluZy5wcm90b3R5cGUudHJpbSgpYC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyaW1FbXB0eUxpbmVzRW5kKHMpIHtcbiAgICBjb25zdCBsaW5lcyA9IHMuc3BsaXQoXCJcXG5cIik7XG4gICAgY29uc3QgbGFzdE5vbkVtcHR5TGluZUluZGV4ID0gZmluZExhc3RJbmRleChsaW5lcywgKGxpbmUpID0+IGxpbmUudHJpbSgpICE9PSBcIlwiKTtcbiAgICByZXR1cm4gbGluZXMuc2xpY2UoMCwgbGFzdE5vbkVtcHR5TGluZUluZGV4ICsgMSkuam9pbihcIlxcblwiKTtcbn1cbi8qKlxuICogUmV0dXJucyBhIHN0cmluZyB3aXRoIGFsbCBlbXB0eSBvciB3aGl0ZXNwYWNlLW9ubHkgbGluZXMgdHJpbW1lZCBhdCB0aGUgc3RhcnQgYW5kIGVuZC5cbiAqXG4gKiBVc2VzIHRoZSBzYW1lIGRlZmluaXRpb24gZm9yIHdoaXRlc3BhY2UgYXMgYFN0cmluZy5wcm90b3R5cGUudHJpbSgpYC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyaW1MaW5lcyhzKSB7XG4gICAgcmV0dXJuIHRyaW1FbXB0eUxpbmVzRW5kKHRyaW1FbXB0eUxpbmVzU3RhcnQocykpO1xufVxuLyoqXG4gKiBBIHRlbXBsYXRlIGxpdGVyYWwgdGFnIHRoYXQgcmV0dXJucyB0aGUgc2FtZSBzdHJpbmcgYXMgdGhlIHRlbXBsYXRlIGxpdGVyYWwgd2l0aG91dCBhIHRhZy5cbiAqXG4gKiBVc2VmdWwgZm9yIGltcGxlbWVudGluZyB5b3VyIG93biB0ZW1wbGF0ZSBsaXRlcmFsIHRhZ3MuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0ZW1wbGF0ZUlkZW50aXR5KHN0cmluZ3MsIC4uLnZhbHVlcykge1xuICAgIGlmIChzdHJpbmdzLmxlbmd0aCA9PT0gMClcbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgaWYgKHZhbHVlcy5sZW5ndGggIT09IHN0cmluZ3MubGVuZ3RoIC0gMSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBudW1iZXIgb2YgdmFsdWVzOyBtdXN0IGJlIG9uZSBsZXNzIHRoYW4gc3RyaW5nc1wiKTtcbiAgICByZXR1cm4gc3RyaW5ncy5zbGljZSgxKS5yZWR1Y2UoKHJlc3VsdCwgc3RyaW5nLCBpKSA9PiBgJHtyZXN1bHR9JHt2YWx1ZXNbaV0gPz8gXCJuL2FcIn0ke3N0cmluZ31gLCBzdHJpbmdzWzBdKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkZWluZGVudChzdHJpbmdzLCAuLi52YWx1ZXMpIHtcbiAgICBpZiAodHlwZW9mIHN0cmluZ3MgPT09IFwic3RyaW5nXCIpXG4gICAgICAgIHJldHVybiBkZWluZGVudChbc3RyaW5nc10pO1xuICAgIGlmIChzdHJpbmdzLmxlbmd0aCA9PT0gMClcbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgaWYgKHZhbHVlcy5sZW5ndGggIT09IHN0cmluZ3MubGVuZ3RoIC0gMSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBudW1iZXIgb2YgdmFsdWVzOyBtdXN0IGJlIG9uZSBsZXNzIHRoYW4gc3RyaW5nc1wiKTtcbiAgICBjb25zdCB0cmltbWVkU3RyaW5ncyA9IFsuLi5zdHJpbmdzXTtcbiAgICB0cmltbWVkU3RyaW5nc1swXSA9IHRyaW1FbXB0eUxpbmVzU3RhcnQodHJpbW1lZFN0cmluZ3NbMF0pO1xuICAgIHRyaW1tZWRTdHJpbmdzW3RyaW1tZWRTdHJpbmdzLmxlbmd0aCAtIDFdID0gdHJpbUVtcHR5TGluZXNFbmQodHJpbW1lZFN0cmluZ3NbdHJpbW1lZFN0cmluZ3MubGVuZ3RoIC0gMV0pO1xuICAgIGNvbnN0IGluZGVudGF0aW9uID0gdHJpbW1lZFN0cmluZ3NcbiAgICAgICAgLmpvaW4oXCIke1NPTUVfVkFMVUV9XCIpXG4gICAgICAgIC5zcGxpdChcIlxcblwiKVxuICAgICAgICAuZmlsdGVyKChsaW5lKSA9PiBsaW5lLnRyaW0oKSAhPT0gXCJcIilcbiAgICAgICAgLm1hcCgobGluZSkgPT4gZ2V0V2hpdGVzcGFjZVByZWZpeChsaW5lKS5sZW5ndGgpXG4gICAgICAgIC5yZWR1Y2UoKG1pbiwgY3VycmVudCkgPT4gTWF0aC5taW4obWluLCBjdXJyZW50KSwgSW5maW5pdHkpO1xuICAgIGNvbnN0IGRlaW5kZW50ZWRTdHJpbmdzID0gdHJpbW1lZFN0cmluZ3NcbiAgICAgICAgLm1hcCgoc3RyaW5nLCBzdHJpbmdJbmRleCkgPT4ge1xuICAgICAgICByZXR1cm4gc3RyaW5nXG4gICAgICAgICAgICAuc3BsaXQoXCJcXG5cIilcbiAgICAgICAgICAgIC5tYXAoKGxpbmUsIGxpbmVJbmRleCkgPT4gc3RyaW5nSW5kZXggIT09IDAgJiYgbGluZUluZGV4ID09PSAwID8gbGluZSA6IGxpbmUuc3Vic3RyaW5nKGluZGVudGF0aW9uKSlcbiAgICAgICAgICAgIC5qb2luKFwiXFxuXCIpO1xuICAgIH0pO1xuICAgIGNvbnN0IGluZGVudGVkVmFsdWVzID0gdmFsdWVzLm1hcCgodmFsdWUsIGkpID0+IHtcbiAgICAgICAgY29uc3QgZmlyc3RMaW5lSW5kZW50YXRpb24gPSBnZXRXaGl0ZXNwYWNlUHJlZml4KGRlaW5kZW50ZWRTdHJpbmdzW2ldLnNwbGl0KFwiXFxuXCIpLmF0KC0xKSk7XG4gICAgICAgIHJldHVybiBgJHt2YWx1ZX1gLnJlcGxhY2VBbGwoXCJcXG5cIiwgYFxcbiR7Zmlyc3RMaW5lSW5kZW50YXRpb259YCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRlbXBsYXRlSWRlbnRpdHkoZGVpbmRlbnRlZFN0cmluZ3MsIC4uLmluZGVudGVkVmFsdWVzKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0U2NvcGVzKHNjb3BlLCByZW1vdmVEdXBsaWNhdGVzID0gdHJ1ZSkge1xuICAgIGNvbnN0IHRyaW1tZWRTdHJpbmcgPSBzY29wZS50cmltKCk7XG4gICAgY29uc3Qgc2NvcGVzQXJyYXkgPSB0cmltbWVkU3RyaW5nLnNwbGl0KC9cXHMrLyk7XG4gICAgY29uc3QgZmlsdGVyZWQgPSBzY29wZXNBcnJheS5maWx0ZXIoc2NvcGUgPT4gc2NvcGUubGVuZ3RoID4gMCk7XG4gICAgcmV0dXJuIHJlbW92ZUR1cGxpY2F0ZXMgPyBbLi4ubmV3IFNldChmaWx0ZXJlZCldIDogZmlsdGVyZWQ7XG59XG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VTY29wZVN0cmluZ3MoLi4uc2NvcGVzKSB7XG4gICAgY29uc3QgYWxsU2NvcGUgPSBzY29wZXMubWFwKChzKSA9PiBleHRyYWN0U2NvcGVzKHMpKS5mbGF0KCkuam9pbihcIiBcIik7XG4gICAgcmV0dXJuIGV4dHJhY3RTY29wZXMoYWxsU2NvcGUpLmpvaW4oXCIgXCIpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNuYWtlQ2FzZVRvQ2FtZWxDYXNlKHNuYWtlQ2FzZSkge1xuICAgIGlmIChzbmFrZUNhc2UubWF0Y2goL1tBLVpdLykpXG4gICAgICAgIHJldHVybiBzbmFrZUNhc2U7IC8vIFRPRE8gbmV4dC1yZWxlYXNlOiB0aGlzIGlzIGEgaGFjayBmb3IgZml4aW5nIHRoZSBlbWFpbCB0ZW1wbGF0ZXMsIHJlbW92ZSB0aGlzIGFmdGVyIHYyIG1pZ3JhdGlvblxuICAgIHJldHVybiBzbmFrZUNhc2UucmVwbGFjZSgvXyhbYS16XSkvZywgKF8sIGxldHRlcikgPT4gbGV0dGVyLnRvVXBwZXJDYXNlKCkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNhbWVsQ2FzZVRvU25ha2VDYXNlKGNhbWVsQ2FzZSkge1xuICAgIGlmIChjYW1lbENhc2UubWF0Y2goL18vKSlcbiAgICAgICAgcmV0dXJuIGNhbWVsQ2FzZTsgLy8gVE9ETyBuZXh0LXJlbGVhc2U6IHRoaXMgaXMgYSBoYWNrIGZvciBmaXhpbmcgdGhlIGVtYWlsIHRlbXBsYXRlcywgcmVtb3ZlIHRoaXMgYWZ0ZXIgdjIgbWlncmF0aW9uXG4gICAgcmV0dXJuIGNhbWVsQ2FzZS5yZXBsYWNlKC9bQS1aXS9nLCAobGV0dGVyKSA9PiBgXyR7bGV0dGVyLnRvTG93ZXJDYXNlKCl9YCk7XG59XG4vKipcbiAqIFNvbWUgY2xhc3NlcyBoYXZlIGRpZmZlcmVudCBjb25zdHJ1Y3RvciBuYW1lcyBpbiBkaWZmZXJlbnQgZW52aXJvbm1lbnRzIChlZy4gYEhlYWRlcnNgIGlzIHNvbWV0aW1lcyBjYWxsZWQgYF9IZWFkZXJzYCxcbiAqIHNvIHdlIGNyZWF0ZSBhbiBvYmplY3Qgb2Ygb3ZlcnJpZGVzIHRvIGhhbmRsZSB0aGVzZSBjYXNlcy5cbiAqL1xuY29uc3QgbmljaWZpYWJsZUNsYXNzTmFtZU92ZXJyaWRlcyA9IG5ldyBNYXAoT2JqZWN0LmVudHJpZXMoe1xuICAgIEhlYWRlcnMsXG59KS5tYXAoKFtrLCB2XSkgPT4gW3YsIGtdKSk7XG5leHBvcnQgZnVuY3Rpb24gbmljaWZ5KHZhbHVlLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBmdWxsT3B0aW9ucyA9IHtcbiAgICAgICAgbWF4RGVwdGg6IDUsXG4gICAgICAgIGN1cnJlbnRJbmRlbnQ6IFwiXCIsXG4gICAgICAgIGxpbmVJbmRlbnQ6IFwiICBcIixcbiAgICAgICAgbXVsdGlsaW5lOiB0cnVlLFxuICAgICAgICByZWZzOiBuZXcgTWFwKCksXG4gICAgICAgIHBhdGg6IFwidmFsdWVcIixcbiAgICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgICBvdmVycmlkZXM6ICgpID0+IG51bGwsXG4gICAgICAgIGtleUluUGFyZW50OiBudWxsLFxuICAgICAgICBoaWRlRmllbGRzOiBbXSxcbiAgICAgICAgLi4uZmlsdGVyVW5kZWZpbmVkKG9wdGlvbnMpLFxuICAgIH07XG4gICAgY29uc3QgeyBtYXhEZXB0aCwgY3VycmVudEluZGVudCwgbGluZUluZGVudCwgbXVsdGlsaW5lLCByZWZzLCBwYXRoLCBvdmVycmlkZXMsIGhpZGVGaWVsZHMsIH0gPSBmdWxsT3B0aW9ucztcbiAgICBjb25zdCBubCA9IGBcXG4ke2N1cnJlbnRJbmRlbnR9YDtcbiAgICBjb25zdCBvdmVycmlkZVJlc3VsdCA9IG92ZXJyaWRlcyh2YWx1ZSwgb3B0aW9ucyk7XG4gICAgaWYgKG92ZXJyaWRlUmVzdWx0ICE9PSBudWxsKVxuICAgICAgICByZXR1cm4gb3ZlcnJpZGVSZXN1bHQ7XG4gICAgaWYgKFtcImZ1bmN0aW9uXCIsIFwib2JqZWN0XCIsIFwic3ltYm9sXCJdLmluY2x1ZGVzKHR5cGVvZiB2YWx1ZSkgJiYgdmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgaWYgKHJlZnMuaGFzKHZhbHVlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGBSZWY8JHtyZWZzLmdldCh2YWx1ZSl9PmA7XG4gICAgICAgIH1cbiAgICAgICAgcmVmcy5zZXQodmFsdWUsIHBhdGgpO1xuICAgIH1cbiAgICBjb25zdCBuZXdPcHRpb25zID0ge1xuICAgICAgICBtYXhEZXB0aDogbWF4RGVwdGggLSAxLFxuICAgICAgICBjdXJyZW50SW5kZW50LFxuICAgICAgICBsaW5lSW5kZW50LFxuICAgICAgICBtdWx0aWxpbmUsXG4gICAgICAgIHJlZnMsXG4gICAgICAgIHBhdGg6IHBhdGggKyBcIi0+W3Vua25vd24gcHJvcGVydHldXCIsXG4gICAgICAgIG92ZXJyaWRlcyxcbiAgICAgICAgcGFyZW50OiB7IHZhbHVlLCBvcHRpb25zOiBmdWxsT3B0aW9ucyB9LFxuICAgICAgICBrZXlJblBhcmVudDogbnVsbCxcbiAgICAgICAgaGlkZUZpZWxkczogW10sXG4gICAgfTtcbiAgICBjb25zdCBuZXN0ZWROaWNpZnkgPSAobmV3VmFsdWUsIG5ld1BhdGgsIGtleUluUGFyZW50KSA9PiB7XG4gICAgICAgIHJldHVybiBuaWNpZnkobmV3VmFsdWUsIHtcbiAgICAgICAgICAgIC4uLm5ld09wdGlvbnMsXG4gICAgICAgICAgICBwYXRoOiBuZXdQYXRoLFxuICAgICAgICAgICAgY3VycmVudEluZGVudDogY3VycmVudEluZGVudCArIGxpbmVJbmRlbnQsXG4gICAgICAgICAgICBrZXlJblBhcmVudCxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBzd2l0Y2ggKHR5cGVvZiB2YWx1ZSkge1xuICAgICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICAgIGNhc2UgXCJib29sZWFuXCI6XG4gICAgICAgIGNhc2UgXCJudW1iZXJcIjoge1xuICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwidW5kZWZpbmVkXCI6IHtcbiAgICAgICAgICAgIHJldHVybiBcInVuZGVmaW5lZFwiO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJzeW1ib2xcIjoge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImJpZ2ludFwiOiB7XG4gICAgICAgICAgICByZXR1cm4gYCR7dmFsdWV9bmA7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImZ1bmN0aW9uXCI6IHtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5uYW1lKVxuICAgICAgICAgICAgICAgIHJldHVybiBgZnVuY3Rpb24gJHt2YWx1ZS5uYW1lfSguLi4pIHsgLi4uIH1gO1xuICAgICAgICAgICAgcmV0dXJuIGAoLi4uKSA9PiB7IC4uLiB9YDtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwib2JqZWN0XCI6IHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJudWxsXCI7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBleHRyYUxpbmVzID0gZ2V0TmljaWZpZWRPYmplY3RFeHRyYUxpbmVzKHZhbHVlKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNWYWx1ZUxlbmd0aCA9IHZhbHVlLmxlbmd0aCArIGV4dHJhTGluZXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmIChtYXhEZXB0aCA8PSAwICYmIHJlc1ZhbHVlTGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJbLi4uXVwiO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc1ZhbHVlcyA9IHZhbHVlLm1hcCgodiwgaSkgPT4gbmVzdGVkTmljaWZ5KHYsIGAke3BhdGh9WyR7aX1dYCwgaSkpO1xuICAgICAgICAgICAgICAgIHJlc1ZhbHVlcy5wdXNoKC4uLmV4dHJhTGluZXMpO1xuICAgICAgICAgICAgICAgIGlmIChyZXNWYWx1ZXMubGVuZ3RoICE9PSByZXNWYWx1ZUxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJuaWNpZnkgb2Ygb2JqZWN0OiByZXNWYWx1ZXMubGVuZ3RoICE9PSByZXNWYWx1ZUxlbmd0aFwiLCB7IHZhbHVlLCByZXNWYWx1ZXMsIHJlc1ZhbHVlTGVuZ3RoIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNob3VsZEluZGVudCA9IHJlc1ZhbHVlcy5sZW5ndGggPiAxIHx8IHJlc1ZhbHVlcy5zb21lKHggPT4geC5pbmNsdWRlcyhcIlxcblwiKSk7XG4gICAgICAgICAgICAgICAgaWYgKHNob3VsZEluZGVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYFske25sfSR7cmVzVmFsdWVzLm1hcCh4ID0+IGAke2xpbmVJbmRlbnR9JHt4fSwke25sfWApLmpvaW4oXCJcIil9XWA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYFske3Jlc1ZhbHVlcy5qb2luKFwiLCBcIil9XWA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgVVJMKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGBVUkwoJHtKU09OLnN0cmluZ2lmeSh2YWx1ZS50b1N0cmluZygpKX0pYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNvbnN0cnVjdG9yTmFtZSA9IFtudWxsLCBPYmplY3QucHJvdG90eXBlXS5pbmNsdWRlcyhPYmplY3QuZ2V0UHJvdG90eXBlT2YodmFsdWUpKSA/IG51bGwgOiAobmljaWZpYWJsZUNsYXNzTmFtZU92ZXJyaWRlcy5nZXQodmFsdWUuY29uc3RydWN0b3IpID8/IHZhbHVlLmNvbnN0cnVjdG9yLm5hbWUpO1xuICAgICAgICAgICAgY29uc3QgY29uc3RydWN0b3JTdHJpbmcgPSBjb25zdHJ1Y3Rvck5hbWUgPyBgJHtuaWNpZnlQcm9wZXJ0eVN0cmluZyhjb25zdHJ1Y3Rvck5hbWUpfSBgIDogXCJcIjtcbiAgICAgICAgICAgIGNvbnN0IGVudHJpZXMgPSBnZXROaWNpZmlhYmxlRW50cmllcyh2YWx1ZSkuZmlsdGVyKChba10pID0+ICFoaWRlRmllbGRzLmluY2x1ZGVzKGspKTtcbiAgICAgICAgICAgIGNvbnN0IGV4dHJhTGluZXMgPSBbXG4gICAgICAgICAgICAgICAgLi4uZ2V0TmljaWZpZWRPYmplY3RFeHRyYUxpbmVzKHZhbHVlKSxcbiAgICAgICAgICAgICAgICAuLi5oaWRlRmllbGRzLmxlbmd0aCA+IDAgPyBbYDxzb21lIGZpZWxkcyBtYXkgaGF2ZSBiZWVuIGhpZGRlbj5gXSA6IFtdLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGNvbnN0IHJlc1ZhbHVlTGVuZ3RoID0gZW50cmllcy5sZW5ndGggKyBleHRyYUxpbmVzLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChyZXNWYWx1ZUxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7Y29uc3RydWN0b3JTdHJpbmd9e31gO1xuICAgICAgICAgICAgaWYgKG1heERlcHRoIDw9IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke2NvbnN0cnVjdG9yU3RyaW5nfXsgLi4uIH1gO1xuICAgICAgICAgICAgY29uc3QgcmVzVmFsdWVzID0gZW50cmllcy5tYXAoKFtrLCB2XSwga2V5SW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXlOaWNpZmllZCA9IG5lc3RlZE5pY2lmeShrLCBgT2JqZWN0LmtleXMoJHtwYXRofSlbJHtrZXlJbmRleH1dYCwgbnVsbCk7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5SW5PYmplY3RMaXRlcmFsID0gdHlwZW9mIGsgPT09IFwic3RyaW5nXCIgPyBKU09OLnN0cmluZ2lmeShrKSA6IGBbJHtrZXlOaWNpZmllZH1dYDtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHYgPT09IFwiZnVuY3Rpb25cIiAmJiB2Lm5hbWUgPT09IGspIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGAke2tleUluT2JqZWN0TGl0ZXJhbH0oLi4uKTogeyAuLi4gfWA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYCR7a2V5SW5PYmplY3RMaXRlcmFsfTogJHtuZXN0ZWROaWNpZnkodiwgYCR7cGF0aH1bJHtrZXlOaWNpZmllZH1dYCwgayl9YDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlc1ZhbHVlcy5wdXNoKC4uLmV4dHJhTGluZXMpO1xuICAgICAgICAgICAgaWYgKHJlc1ZhbHVlcy5sZW5ndGggIT09IHJlc1ZhbHVlTGVuZ3RoKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwibmljaWZ5IG9mIG9iamVjdDogcmVzVmFsdWVzLmxlbmd0aCAhPT0gcmVzVmFsdWVMZW5ndGhcIiwgeyB2YWx1ZSwgcmVzVmFsdWVzLCByZXNWYWx1ZUxlbmd0aCB9KTtcbiAgICAgICAgICAgIGNvbnN0IHNob3VsZEluZGVudCA9IHJlc1ZhbHVlcy5sZW5ndGggPiAxIHx8IHJlc1ZhbHVlcy5zb21lKHggPT4geC5pbmNsdWRlcyhcIlxcblwiKSk7XG4gICAgICAgICAgICBpZiAocmVzVmFsdWVzLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7Y29uc3RydWN0b3JTdHJpbmd9e31gO1xuICAgICAgICAgICAgaWYgKHNob3VsZEluZGVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBgJHtjb25zdHJ1Y3RvclN0cmluZ317JHtubH0ke3Jlc1ZhbHVlcy5tYXAoeCA9PiBgJHtsaW5lSW5kZW50fSR7eH0sJHtubH1gKS5qb2luKFwiXCIpfX1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke2NvbnN0cnVjdG9yU3RyaW5nfXsgJHtyZXNWYWx1ZXMuam9pbihcIiwgXCIpfSB9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICByZXR1cm4gYCR7dHlwZW9mIHZhbHVlfTwke3ZhbHVlfT5gO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2VBbGwoaW5wdXQsIHNlYXJjaFZhbHVlLCByZXBsYWNlVmFsdWUpIHtcbiAgICByZXR1cm4gaW5wdXQuc3BsaXQoc2VhcmNoVmFsdWUpLmpvaW4ocmVwbGFjZVZhbHVlKTtcbn1cbmZ1bmN0aW9uIG5pY2lmeVByb3BlcnR5U3RyaW5nKHN0cikge1xuICAgIGlmICgvXltfYS16QS1aXVtfYS16QS1aMC05XSokLy50ZXN0KHN0cikpXG4gICAgICAgIHJldHVybiBzdHI7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHN0cik7XG59XG5mdW5jdGlvbiBnZXROaWNpZmlhYmxlS2V5cyh2YWx1ZSkge1xuICAgIGNvbnN0IG92ZXJyaWRkZW4gPSAoXCJnZXROaWNpZmlhYmxlS2V5c1wiIGluIHZhbHVlID8gdmFsdWUuZ2V0TmljaWZpYWJsZUtleXM/LmJpbmQodmFsdWUpIDogbnVsbCk/LigpO1xuICAgIGlmIChvdmVycmlkZGVuICE9IG51bGwpXG4gICAgICAgIHJldHVybiBvdmVycmlkZGVuO1xuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyh2YWx1ZSkuc29ydCgpO1xuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIGlmICh2YWx1ZS5jYXVzZSlcbiAgICAgICAgICAgIGtleXMudW5zaGlmdChcImNhdXNlXCIpO1xuICAgICAgICBrZXlzLnVuc2hpZnQoXCJtZXNzYWdlXCIsIFwic3RhY2tcIik7XG4gICAgfVxuICAgIHJldHVybiB1bmlxdWUoa2V5cyk7XG59XG5mdW5jdGlvbiBnZXROaWNpZmlhYmxlRW50cmllcyh2YWx1ZSkge1xuICAgIGNvbnN0IHJlY29yZExpa2VzID0gW0hlYWRlcnNdO1xuICAgIGZ1bmN0aW9uIGlzUmVjb3JkTGlrZSh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gcmVjb3JkTGlrZXMuc29tZSh4ID0+IHZhbHVlIGluc3RhbmNlb2YgeCk7XG4gICAgfVxuICAgIGlmIChpc1JlY29yZExpa2UodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBbLi4udmFsdWUuZW50cmllcygpXS5zb3J0KChbYV0sIFtiXSkgPT4gU3RyaW5nKGEpLmxvY2FsZUNvbXBhcmUoU3RyaW5nKGIpKSk7XG4gICAgfVxuICAgIGNvbnN0IGtleXMgPSBnZXROaWNpZmlhYmxlS2V5cyh2YWx1ZSk7XG4gICAgcmV0dXJuIGtleXMubWFwKChrKSA9PiBbaywgdmFsdWVba11dKTtcbn1cbmZ1bmN0aW9uIGdldE5pY2lmaWVkT2JqZWN0RXh0cmFMaW5lcyh2YWx1ZSkge1xuICAgIHJldHVybiAoXCJnZXROaWNpZmllZE9iamVjdEV4dHJhTGluZXNcIiBpbiB2YWx1ZSA/IHZhbHVlLmdldE5pY2lmaWVkT2JqZWN0RXh0cmFMaW5lcyA6IG51bGwpPy4oKSA/PyBbXTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/strings.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/urls.js":
/*!******************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/urls.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getRelativePart: () => (/* binding */ getRelativePart),\n/* harmony export */   isLocalhost: () => (/* binding */ isLocalhost),\n/* harmony export */   isRelative: () => (/* binding */ isRelative)\n/* harmony export */ });\n/* harmony import */ var _crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./crypto */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/crypto.js\");\n\nfunction isLocalhost(urlOrString) {\n    const url = new URL(urlOrString);\n    if (url.hostname === \"localhost\" || url.hostname.endsWith(\".localhost\"))\n        return true;\n    if (url.hostname.match(/^127\\.\\d+\\.\\d+\\.\\d+$/))\n        return true;\n    return false;\n}\nfunction isRelative(url) {\n    const randomDomain = `${(0,_crypto__WEBPACK_IMPORTED_MODULE_0__.generateSecureRandomString)()}.stack-auth.example.com`;\n    const u = new URL(url, `https://${randomDomain}`);\n    if (u.host !== randomDomain)\n        return false;\n    if (u.protocol !== \"https:\")\n        return false;\n    return true;\n}\nfunction getRelativePart(url) {\n    return url.pathname + url.search + url.hash;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvdXJscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXNEO0FBQy9DO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLDRCQUE0QixtRUFBMEIsR0FBRztBQUN6RCxzQ0FBc0MsYUFBYTtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tYXJrZXJwbEFJY2UvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvdXJscy5qcz85MjhkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdlbmVyYXRlU2VjdXJlUmFuZG9tU3RyaW5nIH0gZnJvbSBcIi4vY3J5cHRvXCI7XG5leHBvcnQgZnVuY3Rpb24gaXNMb2NhbGhvc3QodXJsT3JTdHJpbmcpIHtcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHVybE9yU3RyaW5nKTtcbiAgICBpZiAodXJsLmhvc3RuYW1lID09PSBcImxvY2FsaG9zdFwiIHx8IHVybC5ob3N0bmFtZS5lbmRzV2l0aChcIi5sb2NhbGhvc3RcIikpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGlmICh1cmwuaG9zdG5hbWUubWF0Y2goL14xMjdcXC5cXGQrXFwuXFxkK1xcLlxcZCskLykpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1JlbGF0aXZlKHVybCkge1xuICAgIGNvbnN0IHJhbmRvbURvbWFpbiA9IGAke2dlbmVyYXRlU2VjdXJlUmFuZG9tU3RyaW5nKCl9LnN0YWNrLWF1dGguZXhhbXBsZS5jb21gO1xuICAgIGNvbnN0IHUgPSBuZXcgVVJMKHVybCwgYGh0dHBzOi8vJHtyYW5kb21Eb21haW59YCk7XG4gICAgaWYgKHUuaG9zdCAhPT0gcmFuZG9tRG9tYWluKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgaWYgKHUucHJvdG9jb2wgIT09IFwiaHR0cHM6XCIpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWxhdGl2ZVBhcnQodXJsKSB7XG4gICAgcmV0dXJuIHVybC5wYXRobmFtZSArIHVybC5zZWFyY2ggKyB1cmwuaGFzaDtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/urls.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/uuids.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@stackframe/stack-shared/dist/utils/uuids.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateUuid: () => (/* binding */ generateUuid),\n/* harmony export */   isUuid: () => (/* binding */ isUuid)\n/* harmony export */ });\n/* harmony import */ var _crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./crypto */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/crypto.js\");\n\nfunction generateUuid() {\n    // crypto.randomUuid is not supported in all browsers, so this is a polyfill\n    return \"10000000-1000-4000-8000-100000000000\".replace(/[018]/g, c => (+c ^ (0,_crypto__WEBPACK_IMPORTED_MODULE_0__.generateRandomValues)(new Uint8Array(1))[0] & 15 >> +c / 4).toString(16));\n}\nfunction isUuid(str) {\n    return /^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/.test(str);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvdXVpZHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWdEO0FBQ3pDO0FBQ1A7QUFDQSwrRUFBK0UsNkRBQW9CO0FBQ25HO0FBQ087QUFDUCxzQkFBc0IsRUFBRSxVQUFVLEVBQUUsV0FBVyxFQUFFLGdCQUFnQixFQUFFLFVBQVUsR0FBRztBQUNoRiIsInNvdXJjZXMiOlsid2VicGFjazovL21hcmtlcnBsQUljZS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy91dWlkcy5qcz9mMzYyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdlbmVyYXRlUmFuZG9tVmFsdWVzIH0gZnJvbSBcIi4vY3J5cHRvXCI7XG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVVdWlkKCkge1xuICAgIC8vIGNyeXB0by5yYW5kb21VdWlkIGlzIG5vdCBzdXBwb3J0ZWQgaW4gYWxsIGJyb3dzZXJzLCBzbyB0aGlzIGlzIGEgcG9seWZpbGxcbiAgICByZXR1cm4gXCIxMDAwMDAwMC0xMDAwLTQwMDAtODAwMC0xMDAwMDAwMDAwMDBcIi5yZXBsYWNlKC9bMDE4XS9nLCBjID0+ICgrYyBeIGdlbmVyYXRlUmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KDEpKVswXSAmIDE1ID4+ICtjIC8gNCkudG9TdHJpbmcoMTYpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1V1aWQoc3RyKSB7XG4gICAgcmV0dXJuIC9eWzAtOWEtZl17OH0tWzAtOWEtZl17NH0tNFswLTlhLWZdezN9LVs4OWFiXVswLTlhLWZdezN9LVswLTlhLWZdezEyfSQvLnRlc3Qoc3RyKTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/uuids.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stackframe/stack/dist/esm/lib/auth.js":
/*!*************************************************************!*\
  !*** ./node_modules/@stackframe/stack/dist/esm/lib/auth.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addNewOAuthProviderOrScope: () => (/* binding */ addNewOAuthProviderOrScope),\n/* harmony export */   callOAuthCallback: () => (/* binding */ callOAuthCallback),\n/* harmony export */   signInWithOAuth: () => (/* binding */ signInWithOAuth)\n/* harmony export */ });\n/* harmony import */ var _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @stackframe/stack-shared */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/index.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/errors */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_promises__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/promises */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/promises.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_strings__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/strings */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/strings.js\");\n/* harmony import */ var _utils_url__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/url */ \"(ssr)/./node_modules/@stackframe/stack/dist/esm/utils/url.js\");\n/* harmony import */ var _cookie__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./cookie */ \"(ssr)/./node_modules/@stackframe/stack/dist/esm/lib/cookie.js\");\n// src/lib/auth.ts\n\n\n\n\n\n\nasync function signInWithOAuth(iface, options) {\n  const { codeChallenge, state } = await (0,_cookie__WEBPACK_IMPORTED_MODULE_4__.saveVerifierAndState)();\n  const location = await iface.getOAuthUrl({\n    provider: options.provider,\n    redirectUrl: (0,_utils_url__WEBPACK_IMPORTED_MODULE_5__.constructRedirectUrl)(options.redirectUrl),\n    errorRedirectUrl: (0,_utils_url__WEBPACK_IMPORTED_MODULE_5__.constructRedirectUrl)(options.errorRedirectUrl),\n    codeChallenge,\n    state,\n    type: \"authenticate\",\n    providerScope: options.providerScope\n  });\n  window.location.assign(location);\n  await (0,_stackframe_stack_shared_dist_utils_promises__WEBPACK_IMPORTED_MODULE_2__.neverResolve)();\n}\nasync function addNewOAuthProviderOrScope(iface, options, session) {\n  const { codeChallenge, state } = await (0,_cookie__WEBPACK_IMPORTED_MODULE_4__.saveVerifierAndState)();\n  const location = await iface.getOAuthUrl({\n    provider: options.provider,\n    redirectUrl: (0,_utils_url__WEBPACK_IMPORTED_MODULE_5__.constructRedirectUrl)(options.redirectUrl),\n    errorRedirectUrl: (0,_utils_url__WEBPACK_IMPORTED_MODULE_5__.constructRedirectUrl)(options.errorRedirectUrl),\n    afterCallbackRedirectUrl: (0,_utils_url__WEBPACK_IMPORTED_MODULE_5__.constructRedirectUrl)(window.location.href),\n    codeChallenge,\n    state,\n    type: \"link\",\n    session,\n    providerScope: options.providerScope\n  });\n  window.location.assign(location);\n  await (0,_stackframe_stack_shared_dist_utils_promises__WEBPACK_IMPORTED_MODULE_2__.neverResolve)();\n}\nfunction consumeOAuthCallbackQueryParams() {\n  const requiredParams = [\"code\", \"state\"];\n  const originalUrl = new URL(window.location.href);\n  for (const param of requiredParams) {\n    if (!originalUrl.searchParams.has(param)) {\n      (0,_stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_1__.captureError)(\"consumeOAuthCallbackQueryParams\", new Error(`Missing required query parameter on OAuth callback: ${param}`));\n      return null;\n    }\n  }\n  const expectedState = originalUrl.searchParams.get(\"state\") ?? (0,_stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_1__.throwErr)(\"This should never happen; isn't state required above?\");\n  const cookieResult = (0,_cookie__WEBPACK_IMPORTED_MODULE_4__.consumeVerifierAndStateCookie)(expectedState);\n  if (!cookieResult) {\n    (0,_stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_1__.captureError)(\"consumeOAuthCallbackQueryParams\", new Error((0,_stackframe_stack_shared_dist_utils_strings__WEBPACK_IMPORTED_MODULE_3__.deindent)`\n      Stack found an outer OAuth callback state in the query parameters, but not in cookies.\n      \n      This could have multiple reasons:\n        - The cookie expired, because the OAuth flow took too long.\n        - The user's browser deleted the cookie, either manually or because of a very strict cookie policy.\n        - The cookie was already consumed by this page, and the user already logged in.\n        - You are using another OAuth client library with the same callback URL as Stack.\n    `));\n    return null;\n  }\n  const newUrl = new URL(originalUrl);\n  for (const param of requiredParams) {\n    newUrl.searchParams.delete(param);\n  }\n  window.history.replaceState({}, \"\", newUrl.toString());\n  return {\n    originalUrl,\n    codeVerifier: cookieResult.codeVerifier,\n    state: expectedState\n  };\n}\nasync function callOAuthCallback(iface, redirectUrl) {\n  const consumed = consumeOAuthCallbackQueryParams();\n  if (!consumed) return null;\n  try {\n    return await iface.callOAuthCallback({\n      oauthParams: consumed.originalUrl.searchParams,\n      redirectUri: (0,_utils_url__WEBPACK_IMPORTED_MODULE_5__.constructRedirectUrl)(redirectUrl),\n      codeVerifier: consumed.codeVerifier,\n      state: consumed.state\n    });\n  } catch (e) {\n    if (e instanceof _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_0__.KnownError) {\n      throw e;\n    }\n    throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"Error signing in during OAuth callback. Please try again.\", { cause: e });\n  }\n}\n\n//# sourceMappingURL=auth.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2svZGlzdC9lc20vbGliL2F1dGguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7QUFDc0Q7QUFDbUQ7QUFDN0I7QUFDTDtBQUNuQjtBQUMyQjtBQUMvRTtBQUNBLFVBQVUsdUJBQXVCLFFBQVEsNkRBQW9CO0FBQzdEO0FBQ0E7QUFDQSxpQkFBaUIsZ0VBQW9CO0FBQ3JDLHNCQUFzQixnRUFBb0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxRQUFRLDBGQUFZO0FBQ3BCO0FBQ0E7QUFDQSxVQUFVLHVCQUF1QixRQUFRLDZEQUFvQjtBQUM3RDtBQUNBO0FBQ0EsaUJBQWlCLGdFQUFvQjtBQUNyQyxzQkFBc0IsZ0VBQW9CO0FBQzFDLDhCQUE4QixnRUFBb0I7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLFFBQVEsMEZBQVk7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSx3RkFBWSxxR0FBcUcsTUFBTTtBQUM3SDtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsb0ZBQVEsNEJBQTRCO0FBQ3JHLHVCQUF1QixzRUFBNkI7QUFDcEQ7QUFDQSxJQUFJLHdGQUFZLDhDQUE4QyxxRkFBUTtBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixnRUFBb0I7QUFDdkM7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0oscUJBQXFCLGdFQUFVO0FBQy9CO0FBQ0E7QUFDQSxjQUFjLDJGQUFtQixnRUFBZ0UsVUFBVTtBQUMzRztBQUNBO0FBS0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL21hcmtlcnBsQUljZS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay9kaXN0L2VzbS9saWIvYXV0aC5qcz9mZDAzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9saWIvYXV0aC50c1xuaW1wb3J0IHsgS25vd25FcnJvciB9IGZyb20gXCJAc3RhY2tmcmFtZS9zdGFjay1zaGFyZWRcIjtcbmltcG9ydCB7IFN0YWNrQXNzZXJ0aW9uRXJyb3IsIGNhcHR1cmVFcnJvciwgdGhyb3dFcnIgfSBmcm9tIFwiQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvZXJyb3JzXCI7XG5pbXBvcnQgeyBuZXZlclJlc29sdmUgfSBmcm9tIFwiQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvcHJvbWlzZXNcIjtcbmltcG9ydCB7IGRlaW5kZW50IH0gZnJvbSBcIkBzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L3V0aWxzL3N0cmluZ3NcIjtcbmltcG9ydCB7IGNvbnN0cnVjdFJlZGlyZWN0VXJsIH0gZnJvbSBcIi4uL3V0aWxzL3VybFwiO1xuaW1wb3J0IHsgY29uc3VtZVZlcmlmaWVyQW5kU3RhdGVDb29raWUsIHNhdmVWZXJpZmllckFuZFN0YXRlIH0gZnJvbSBcIi4vY29va2llXCI7XG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoT0F1dGgoaWZhY2UsIG9wdGlvbnMpIHtcbiAgY29uc3QgeyBjb2RlQ2hhbGxlbmdlLCBzdGF0ZSB9ID0gYXdhaXQgc2F2ZVZlcmlmaWVyQW5kU3RhdGUoKTtcbiAgY29uc3QgbG9jYXRpb24gPSBhd2FpdCBpZmFjZS5nZXRPQXV0aFVybCh7XG4gICAgcHJvdmlkZXI6IG9wdGlvbnMucHJvdmlkZXIsXG4gICAgcmVkaXJlY3RVcmw6IGNvbnN0cnVjdFJlZGlyZWN0VXJsKG9wdGlvbnMucmVkaXJlY3RVcmwpLFxuICAgIGVycm9yUmVkaXJlY3RVcmw6IGNvbnN0cnVjdFJlZGlyZWN0VXJsKG9wdGlvbnMuZXJyb3JSZWRpcmVjdFVybCksXG4gICAgY29kZUNoYWxsZW5nZSxcbiAgICBzdGF0ZSxcbiAgICB0eXBlOiBcImF1dGhlbnRpY2F0ZVwiLFxuICAgIHByb3ZpZGVyU2NvcGU6IG9wdGlvbnMucHJvdmlkZXJTY29wZVxuICB9KTtcbiAgd2luZG93LmxvY2F0aW9uLmFzc2lnbihsb2NhdGlvbik7XG4gIGF3YWl0IG5ldmVyUmVzb2x2ZSgpO1xufVxuYXN5bmMgZnVuY3Rpb24gYWRkTmV3T0F1dGhQcm92aWRlck9yU2NvcGUoaWZhY2UsIG9wdGlvbnMsIHNlc3Npb24pIHtcbiAgY29uc3QgeyBjb2RlQ2hhbGxlbmdlLCBzdGF0ZSB9ID0gYXdhaXQgc2F2ZVZlcmlmaWVyQW5kU3RhdGUoKTtcbiAgY29uc3QgbG9jYXRpb24gPSBhd2FpdCBpZmFjZS5nZXRPQXV0aFVybCh7XG4gICAgcHJvdmlkZXI6IG9wdGlvbnMucHJvdmlkZXIsXG4gICAgcmVkaXJlY3RVcmw6IGNvbnN0cnVjdFJlZGlyZWN0VXJsKG9wdGlvbnMucmVkaXJlY3RVcmwpLFxuICAgIGVycm9yUmVkaXJlY3RVcmw6IGNvbnN0cnVjdFJlZGlyZWN0VXJsKG9wdGlvbnMuZXJyb3JSZWRpcmVjdFVybCksXG4gICAgYWZ0ZXJDYWxsYmFja1JlZGlyZWN0VXJsOiBjb25zdHJ1Y3RSZWRpcmVjdFVybCh3aW5kb3cubG9jYXRpb24uaHJlZiksXG4gICAgY29kZUNoYWxsZW5nZSxcbiAgICBzdGF0ZSxcbiAgICB0eXBlOiBcImxpbmtcIixcbiAgICBzZXNzaW9uLFxuICAgIHByb3ZpZGVyU2NvcGU6IG9wdGlvbnMucHJvdmlkZXJTY29wZVxuICB9KTtcbiAgd2luZG93LmxvY2F0aW9uLmFzc2lnbihsb2NhdGlvbik7XG4gIGF3YWl0IG5ldmVyUmVzb2x2ZSgpO1xufVxuZnVuY3Rpb24gY29uc3VtZU9BdXRoQ2FsbGJhY2tRdWVyeVBhcmFtcygpIHtcbiAgY29uc3QgcmVxdWlyZWRQYXJhbXMgPSBbXCJjb2RlXCIsIFwic3RhdGVcIl07XG4gIGNvbnN0IG9yaWdpbmFsVXJsID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZik7XG4gIGZvciAoY29uc3QgcGFyYW0gb2YgcmVxdWlyZWRQYXJhbXMpIHtcbiAgICBpZiAoIW9yaWdpbmFsVXJsLnNlYXJjaFBhcmFtcy5oYXMocGFyYW0pKSB7XG4gICAgICBjYXB0dXJlRXJyb3IoXCJjb25zdW1lT0F1dGhDYWxsYmFja1F1ZXJ5UGFyYW1zXCIsIG5ldyBFcnJvcihgTWlzc2luZyByZXF1aXJlZCBxdWVyeSBwYXJhbWV0ZXIgb24gT0F1dGggY2FsbGJhY2s6ICR7cGFyYW19YCkpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG4gIGNvbnN0IGV4cGVjdGVkU3RhdGUgPSBvcmlnaW5hbFVybC5zZWFyY2hQYXJhbXMuZ2V0KFwic3RhdGVcIikgPz8gdGhyb3dFcnIoXCJUaGlzIHNob3VsZCBuZXZlciBoYXBwZW47IGlzbid0IHN0YXRlIHJlcXVpcmVkIGFib3ZlP1wiKTtcbiAgY29uc3QgY29va2llUmVzdWx0ID0gY29uc3VtZVZlcmlmaWVyQW5kU3RhdGVDb29raWUoZXhwZWN0ZWRTdGF0ZSk7XG4gIGlmICghY29va2llUmVzdWx0KSB7XG4gICAgY2FwdHVyZUVycm9yKFwiY29uc3VtZU9BdXRoQ2FsbGJhY2tRdWVyeVBhcmFtc1wiLCBuZXcgRXJyb3IoZGVpbmRlbnRgXG4gICAgICBTdGFjayBmb3VuZCBhbiBvdXRlciBPQXV0aCBjYWxsYmFjayBzdGF0ZSBpbiB0aGUgcXVlcnkgcGFyYW1ldGVycywgYnV0IG5vdCBpbiBjb29raWVzLlxuICAgICAgXG4gICAgICBUaGlzIGNvdWxkIGhhdmUgbXVsdGlwbGUgcmVhc29uczpcbiAgICAgICAgLSBUaGUgY29va2llIGV4cGlyZWQsIGJlY2F1c2UgdGhlIE9BdXRoIGZsb3cgdG9vayB0b28gbG9uZy5cbiAgICAgICAgLSBUaGUgdXNlcidzIGJyb3dzZXIgZGVsZXRlZCB0aGUgY29va2llLCBlaXRoZXIgbWFudWFsbHkgb3IgYmVjYXVzZSBvZiBhIHZlcnkgc3RyaWN0IGNvb2tpZSBwb2xpY3kuXG4gICAgICAgIC0gVGhlIGNvb2tpZSB3YXMgYWxyZWFkeSBjb25zdW1lZCBieSB0aGlzIHBhZ2UsIGFuZCB0aGUgdXNlciBhbHJlYWR5IGxvZ2dlZCBpbi5cbiAgICAgICAgLSBZb3UgYXJlIHVzaW5nIGFub3RoZXIgT0F1dGggY2xpZW50IGxpYnJhcnkgd2l0aCB0aGUgc2FtZSBjYWxsYmFjayBVUkwgYXMgU3RhY2suXG4gICAgYCkpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IG5ld1VybCA9IG5ldyBVUkwob3JpZ2luYWxVcmwpO1xuICBmb3IgKGNvbnN0IHBhcmFtIG9mIHJlcXVpcmVkUGFyYW1zKSB7XG4gICAgbmV3VXJsLnNlYXJjaFBhcmFtcy5kZWxldGUocGFyYW0pO1xuICB9XG4gIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh7fSwgXCJcIiwgbmV3VXJsLnRvU3RyaW5nKCkpO1xuICByZXR1cm4ge1xuICAgIG9yaWdpbmFsVXJsLFxuICAgIGNvZGVWZXJpZmllcjogY29va2llUmVzdWx0LmNvZGVWZXJpZmllcixcbiAgICBzdGF0ZTogZXhwZWN0ZWRTdGF0ZVxuICB9O1xufVxuYXN5bmMgZnVuY3Rpb24gY2FsbE9BdXRoQ2FsbGJhY2soaWZhY2UsIHJlZGlyZWN0VXJsKSB7XG4gIGNvbnN0IGNvbnN1bWVkID0gY29uc3VtZU9BdXRoQ2FsbGJhY2tRdWVyeVBhcmFtcygpO1xuICBpZiAoIWNvbnN1bWVkKSByZXR1cm4gbnVsbDtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgaWZhY2UuY2FsbE9BdXRoQ2FsbGJhY2soe1xuICAgICAgb2F1dGhQYXJhbXM6IGNvbnN1bWVkLm9yaWdpbmFsVXJsLnNlYXJjaFBhcmFtcyxcbiAgICAgIHJlZGlyZWN0VXJpOiBjb25zdHJ1Y3RSZWRpcmVjdFVybChyZWRpcmVjdFVybCksXG4gICAgICBjb2RlVmVyaWZpZXI6IGNvbnN1bWVkLmNvZGVWZXJpZmllcixcbiAgICAgIHN0YXRlOiBjb25zdW1lZC5zdGF0ZVxuICAgIH0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKGUgaW5zdGFuY2VvZiBLbm93bkVycm9yKSB7XG4gICAgICB0aHJvdyBlO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIkVycm9yIHNpZ25pbmcgaW4gZHVyaW5nIE9BdXRoIGNhbGxiYWNrLiBQbGVhc2UgdHJ5IGFnYWluLlwiLCB7IGNhdXNlOiBlIH0pO1xuICB9XG59XG5leHBvcnQge1xuICBhZGROZXdPQXV0aFByb3ZpZGVyT3JTY29wZSxcbiAgY2FsbE9BdXRoQ2FsbGJhY2ssXG4gIHNpZ25JbldpdGhPQXV0aFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWF1dGguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackframe/stack/dist/esm/lib/auth.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stackframe/stack/dist/esm/lib/cookie.js":
/*!***************************************************************!*\
  !*** ./node_modules/@stackframe/stack/dist/esm/lib/cookie.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   consumeVerifierAndStateCookie: () => (/* binding */ consumeVerifierAndStateCookie),\n/* harmony export */   deleteCookie: () => (/* binding */ deleteCookie),\n/* harmony export */   getCookie: () => (/* binding */ getCookie),\n/* harmony export */   saveVerifierAndState: () => (/* binding */ saveVerifierAndState),\n/* harmony export */   setCookie: () => (/* binding */ setCookie),\n/* harmony export */   setOrDeleteCookie: () => (/* binding */ setOrDeleteCookie)\n/* harmony export */ });\n/* harmony import */ var _stackframe_stack_sc_force_react_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @stackframe/stack-sc/force-react-server */ \"(ssr)/./node_modules/@stackframe/stack-sc/dist/index.react-server.js\");\n/* harmony import */ var js_cookie__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js-cookie */ \"(ssr)/./node_modules/js-cookie/dist/js.cookie.mjs\");\n// src/lib/cookie.ts\n\n\n\n// ../../node_modules/.pnpm/oauth4webapi@2.10.4/node_modules/oauth4webapi/build/index.js\nvar USER_AGENT;\nif (typeof navigator === \"undefined\" || !navigator.userAgent?.startsWith?.(\"Mozilla/5.0 \")) {\n  const NAME = \"oauth4webapi\";\n  const VERSION = \"v2.10.4\";\n  USER_AGENT = `${NAME}/${VERSION}`;\n}\nvar clockSkew = Symbol();\nvar clockTolerance = Symbol();\nvar customFetch = Symbol();\nvar useMtlsAlias = Symbol();\nvar encoder = new TextEncoder();\nvar decoder = new TextDecoder();\nfunction buf(input) {\n  if (typeof input === \"string\") {\n    return encoder.encode(input);\n  }\n  return decoder.decode(input);\n}\nvar CHUNK_SIZE = 32768;\nfunction encodeBase64Url(input) {\n  if (input instanceof ArrayBuffer) {\n    input = new Uint8Array(input);\n  }\n  const arr = [];\n  for (let i = 0; i < input.byteLength; i += CHUNK_SIZE) {\n    arr.push(String.fromCharCode.apply(null, input.subarray(i, i + CHUNK_SIZE)));\n  }\n  return btoa(arr.join(\"\")).replace(/=/g, \"\").replace(/\\+/g, \"-\").replace(/\\//g, \"_\");\n}\nfunction decodeBase64Url(input) {\n  try {\n    const binary = atob(input.replace(/-/g, \"+\").replace(/_/g, \"/\").replace(/\\s/g, \"\"));\n    const bytes = new Uint8Array(binary.length);\n    for (let i = 0; i < binary.length; i++) {\n      bytes[i] = binary.charCodeAt(i);\n    }\n    return bytes;\n  } catch (cause) {\n    throw new OPE(\"The input to be decoded is not correctly encoded.\", { cause });\n  }\n}\nfunction b64u(input) {\n  if (typeof input === \"string\") {\n    return decodeBase64Url(input);\n  }\n  return encodeBase64Url(input);\n}\nvar LRU = class {\n  constructor(maxSize) {\n    this.cache = /* @__PURE__ */ new Map();\n    this._cache = /* @__PURE__ */ new Map();\n    this.maxSize = maxSize;\n  }\n  get(key) {\n    let v = this.cache.get(key);\n    if (v) {\n      return v;\n    }\n    if (v = this._cache.get(key)) {\n      this.update(key, v);\n      return v;\n    }\n    return void 0;\n  }\n  has(key) {\n    return this.cache.has(key) || this._cache.has(key);\n  }\n  set(key, value) {\n    if (this.cache.has(key)) {\n      this.cache.set(key, value);\n    } else {\n      this.update(key, value);\n    }\n    return this;\n  }\n  delete(key) {\n    if (this.cache.has(key)) {\n      return this.cache.delete(key);\n    }\n    if (this._cache.has(key)) {\n      return this._cache.delete(key);\n    }\n    return false;\n  }\n  update(key, value) {\n    this.cache.set(key, value);\n    if (this.cache.size >= this.maxSize) {\n      this._cache = this.cache;\n      this.cache = /* @__PURE__ */ new Map();\n    }\n  }\n};\nvar OperationProcessingError = class extends Error {\n  constructor(message, options) {\n    super(message, options);\n    this.name = this.constructor.name;\n    Error.captureStackTrace?.(this, this.constructor);\n  }\n};\nvar OPE = OperationProcessingError;\nvar dpopNonces = new LRU(100);\nfunction validateString(input) {\n  return typeof input === \"string\" && input.length !== 0;\n}\nfunction randomBytes() {\n  return b64u(crypto.getRandomValues(new Uint8Array(32)));\n}\nfunction generateRandomCodeVerifier() {\n  return randomBytes();\n}\nfunction generateRandomState() {\n  return randomBytes();\n}\nasync function calculatePKCECodeChallenge(codeVerifier) {\n  if (!validateString(codeVerifier)) {\n    throw new TypeError('\"codeVerifier\" must be a non-empty string');\n  }\n  return b64u(await crypto.subtle.digest(\"SHA-256\", buf(codeVerifier)));\n}\nvar skipSubjectCheck = Symbol();\nvar expectNoNonce = Symbol();\nvar skipAuthTimeCheck = Symbol();\nvar noSignatureCheck = Symbol();\nvar skipStateCheck = Symbol();\nvar expectNoState = Symbol();\n\n// src/lib/cookie.ts\nfunction isRscCookieUnavailableError(e) {\n  const allowedMessageSnippets = [\"was called outside a request scope\", \"cookies() expects to have requestAsyncStorage\"];\n  return typeof e?.message === \"string\" && allowedMessageSnippets.some((msg) => e.message.includes(msg));\n}\nfunction getCookie(name) {\n  try {\n    return (0,_stackframe_stack_sc_force_react_server__WEBPACK_IMPORTED_MODULE_0__.cookies)().get(name)?.value ?? null;\n  } catch (e) {\n    if (isRscCookieUnavailableError(e)) {\n      return js_cookie__WEBPACK_IMPORTED_MODULE_1__[\"default\"].get(name) ?? null;\n    } else {\n      throw e;\n    }\n  }\n}\nfunction setOrDeleteCookie(name, value, options = {}) {\n  if (value === null) {\n    deleteCookie(name);\n  } else {\n    setCookie(name, value, options);\n  }\n}\nfunction deleteCookie(name) {\n  try {\n    (0,_stackframe_stack_sc_force_react_server__WEBPACK_IMPORTED_MODULE_0__.cookies)().delete(name);\n  } catch (e) {\n    if (isRscCookieUnavailableError(e)) {\n      js_cookie__WEBPACK_IMPORTED_MODULE_1__[\"default\"].remove(name);\n    } else {\n      throw e;\n    }\n  }\n}\nfunction setCookie(name, value, options = {}) {\n  const isProd = \"development\" === \"production\";\n  try {\n    (0,_stackframe_stack_sc_force_react_server__WEBPACK_IMPORTED_MODULE_0__.cookies)().set(name, value, {\n      secure: isProd,\n      maxAge: options.maxAge\n    });\n  } catch (e) {\n    if (isRscCookieUnavailableError(e)) {\n      if (window.location.protocol !== \"https:\" && isProd) {\n        throw new Error(\"Attempted to set a secure cookie, but this build was compiled as a production build, but the current page is not served over HTTPS. This is a security risk and is not allowed in production.\");\n      }\n      js_cookie__WEBPACK_IMPORTED_MODULE_1__[\"default\"].set(name, value, {\n        secure: isProd,\n        expires: options.maxAge === void 0 ? void 0 : new Date(Date.now() + options.maxAge * 1e3)\n      });\n    } else {\n      throw e;\n    }\n  }\n}\nasync function saveVerifierAndState() {\n  const codeVerifier = generateRandomCodeVerifier();\n  const codeChallenge = await calculatePKCECodeChallenge(codeVerifier);\n  const state = generateRandomState();\n  setCookie(\"stack-oauth-outer-\" + state, codeVerifier, { maxAge: 60 * 60 });\n  return {\n    codeChallenge,\n    state\n  };\n}\nfunction consumeVerifierAndStateCookie(state) {\n  const cookieName = \"stack-oauth-outer-\" + state;\n  const codeVerifier = getCookie(cookieName);\n  if (!codeVerifier) {\n    return null;\n  }\n  deleteCookie(cookieName);\n  return {\n    codeVerifier\n  };\n}\n\n//# sourceMappingURL=cookie.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2svZGlzdC9lc20vbGliL2Nvb2tpZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBO0FBQ2dGO0FBQ2hEOztBQUVoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLEtBQUssR0FBRyxRQUFRO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHNCQUFzQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG1CQUFtQjtBQUN2QztBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0oseUVBQXlFLE9BQU87QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxnRkFBVTtBQUNyQixJQUFJO0FBQ0o7QUFDQSxhQUFhLGlEQUFPO0FBQ3BCLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRDtBQUNwRDtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLGdGQUFVO0FBQ2QsSUFBSTtBQUNKO0FBQ0EsTUFBTSxpREFBTztBQUNiLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QztBQUM1QyxpQkFBaUIsYUFBb0I7QUFDckM7QUFDQSxJQUFJLGdGQUFVO0FBQ2Q7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLGlEQUFPO0FBQ2I7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCxpQkFBaUI7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFRRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWFya2VycGxBSWNlLy4vbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrL2Rpc3QvZXNtL2xpYi9jb29raWUuanM/MjU0MyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvbGliL2Nvb2tpZS50c1xuaW1wb3J0IHsgY29va2llcyBhcyByc2NDb29raWVzIH0gZnJvbSBcIkBzdGFja2ZyYW1lL3N0YWNrLXNjL2ZvcmNlLXJlYWN0LXNlcnZlclwiO1xuaW1wb3J0IENvb2tpZXMgZnJvbSBcImpzLWNvb2tpZVwiO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vb2F1dGg0d2ViYXBpQDIuMTAuNC9ub2RlX21vZHVsZXMvb2F1dGg0d2ViYXBpL2J1aWxkL2luZGV4LmpzXG52YXIgVVNFUl9BR0VOVDtcbmlmICh0eXBlb2YgbmF2aWdhdG9yID09PSBcInVuZGVmaW5lZFwiIHx8ICFuYXZpZ2F0b3IudXNlckFnZW50Py5zdGFydHNXaXRoPy4oXCJNb3ppbGxhLzUuMCBcIikpIHtcbiAgY29uc3QgTkFNRSA9IFwib2F1dGg0d2ViYXBpXCI7XG4gIGNvbnN0IFZFUlNJT04gPSBcInYyLjEwLjRcIjtcbiAgVVNFUl9BR0VOVCA9IGAke05BTUV9LyR7VkVSU0lPTn1gO1xufVxudmFyIGNsb2NrU2tldyA9IFN5bWJvbCgpO1xudmFyIGNsb2NrVG9sZXJhbmNlID0gU3ltYm9sKCk7XG52YXIgY3VzdG9tRmV0Y2ggPSBTeW1ib2woKTtcbnZhciB1c2VNdGxzQWxpYXMgPSBTeW1ib2woKTtcbnZhciBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG52YXIgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpO1xuZnVuY3Rpb24gYnVmKGlucHV0KSB7XG4gIGlmICh0eXBlb2YgaW5wdXQgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gZW5jb2Rlci5lbmNvZGUoaW5wdXQpO1xuICB9XG4gIHJldHVybiBkZWNvZGVyLmRlY29kZShpbnB1dCk7XG59XG52YXIgQ0hVTktfU0laRSA9IDMyNzY4O1xuZnVuY3Rpb24gZW5jb2RlQmFzZTY0VXJsKGlucHV0KSB7XG4gIGlmIChpbnB1dCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgaW5wdXQgPSBuZXcgVWludDhBcnJheShpbnB1dCk7XG4gIH1cbiAgY29uc3QgYXJyID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQuYnl0ZUxlbmd0aDsgaSArPSBDSFVOS19TSVpFKSB7XG4gICAgYXJyLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBpbnB1dC5zdWJhcnJheShpLCBpICsgQ0hVTktfU0laRSkpKTtcbiAgfVxuICByZXR1cm4gYnRvYShhcnIuam9pbihcIlwiKSkucmVwbGFjZSgvPS9nLCBcIlwiKS5yZXBsYWNlKC9cXCsvZywgXCItXCIpLnJlcGxhY2UoL1xcLy9nLCBcIl9cIik7XG59XG5mdW5jdGlvbiBkZWNvZGVCYXNlNjRVcmwoaW5wdXQpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBiaW5hcnkgPSBhdG9iKGlucHV0LnJlcGxhY2UoLy0vZywgXCIrXCIpLnJlcGxhY2UoL18vZywgXCIvXCIpLnJlcGxhY2UoL1xccy9nLCBcIlwiKSk7XG4gICAgY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheShiaW5hcnkubGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJpbmFyeS5sZW5ndGg7IGkrKykge1xuICAgICAgYnl0ZXNbaV0gPSBiaW5hcnkuY2hhckNvZGVBdChpKTtcbiAgICB9XG4gICAgcmV0dXJuIGJ5dGVzO1xuICB9IGNhdGNoIChjYXVzZSkge1xuICAgIHRocm93IG5ldyBPUEUoXCJUaGUgaW5wdXQgdG8gYmUgZGVjb2RlZCBpcyBub3QgY29ycmVjdGx5IGVuY29kZWQuXCIsIHsgY2F1c2UgfSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGI2NHUoaW5wdXQpIHtcbiAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gXCJzdHJpbmdcIikge1xuICAgIHJldHVybiBkZWNvZGVCYXNlNjRVcmwoaW5wdXQpO1xuICB9XG4gIHJldHVybiBlbmNvZGVCYXNlNjRVcmwoaW5wdXQpO1xufVxudmFyIExSVSA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IobWF4U2l6ZSkge1xuICAgIHRoaXMuY2FjaGUgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgIHRoaXMuX2NhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICB0aGlzLm1heFNpemUgPSBtYXhTaXplO1xuICB9XG4gIGdldChrZXkpIHtcbiAgICBsZXQgdiA9IHRoaXMuY2FjaGUuZ2V0KGtleSk7XG4gICAgaWYgKHYpIHtcbiAgICAgIHJldHVybiB2O1xuICAgIH1cbiAgICBpZiAodiA9IHRoaXMuX2NhY2hlLmdldChrZXkpKSB7XG4gICAgICB0aGlzLnVwZGF0ZShrZXksIHYpO1xuICAgICAgcmV0dXJuIHY7XG4gICAgfVxuICAgIHJldHVybiB2b2lkIDA7XG4gIH1cbiAgaGFzKGtleSkge1xuICAgIHJldHVybiB0aGlzLmNhY2hlLmhhcyhrZXkpIHx8IHRoaXMuX2NhY2hlLmhhcyhrZXkpO1xuICB9XG4gIHNldChrZXksIHZhbHVlKSB7XG4gICAgaWYgKHRoaXMuY2FjaGUuaGFzKGtleSkpIHtcbiAgICAgIHRoaXMuY2FjaGUuc2V0KGtleSwgdmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnVwZGF0ZShrZXksIHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgZGVsZXRlKGtleSkge1xuICAgIGlmICh0aGlzLmNhY2hlLmhhcyhrZXkpKSB7XG4gICAgICByZXR1cm4gdGhpcy5jYWNoZS5kZWxldGUoa2V5KTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2NhY2hlLmhhcyhrZXkpKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY2FjaGUuZGVsZXRlKGtleSk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB1cGRhdGUoa2V5LCB2YWx1ZSkge1xuICAgIHRoaXMuY2FjaGUuc2V0KGtleSwgdmFsdWUpO1xuICAgIGlmICh0aGlzLmNhY2hlLnNpemUgPj0gdGhpcy5tYXhTaXplKSB7XG4gICAgICB0aGlzLl9jYWNoZSA9IHRoaXMuY2FjaGU7XG4gICAgICB0aGlzLmNhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICB9XG4gIH1cbn07XG52YXIgT3BlcmF0aW9uUHJvY2Vzc2luZ0Vycm9yID0gY2xhc3MgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICBzdXBlcihtZXNzYWdlLCBvcHRpb25zKTtcbiAgICB0aGlzLm5hbWUgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2U/Lih0aGlzLCB0aGlzLmNvbnN0cnVjdG9yKTtcbiAgfVxufTtcbnZhciBPUEUgPSBPcGVyYXRpb25Qcm9jZXNzaW5nRXJyb3I7XG52YXIgZHBvcE5vbmNlcyA9IG5ldyBMUlUoMTAwKTtcbmZ1bmN0aW9uIHZhbGlkYXRlU3RyaW5nKGlucHV0KSB7XG4gIHJldHVybiB0eXBlb2YgaW5wdXQgPT09IFwic3RyaW5nXCIgJiYgaW5wdXQubGVuZ3RoICE9PSAwO1xufVxuZnVuY3Rpb24gcmFuZG9tQnl0ZXMoKSB7XG4gIHJldHVybiBiNjR1KGNyeXB0by5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQ4QXJyYXkoMzIpKSk7XG59XG5mdW5jdGlvbiBnZW5lcmF0ZVJhbmRvbUNvZGVWZXJpZmllcigpIHtcbiAgcmV0dXJuIHJhbmRvbUJ5dGVzKCk7XG59XG5mdW5jdGlvbiBnZW5lcmF0ZVJhbmRvbVN0YXRlKCkge1xuICByZXR1cm4gcmFuZG9tQnl0ZXMoKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGNhbGN1bGF0ZVBLQ0VDb2RlQ2hhbGxlbmdlKGNvZGVWZXJpZmllcikge1xuICBpZiAoIXZhbGlkYXRlU3RyaW5nKGNvZGVWZXJpZmllcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImNvZGVWZXJpZmllclwiIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nJyk7XG4gIH1cbiAgcmV0dXJuIGI2NHUoYXdhaXQgY3J5cHRvLnN1YnRsZS5kaWdlc3QoXCJTSEEtMjU2XCIsIGJ1Zihjb2RlVmVyaWZpZXIpKSk7XG59XG52YXIgc2tpcFN1YmplY3RDaGVjayA9IFN5bWJvbCgpO1xudmFyIGV4cGVjdE5vTm9uY2UgPSBTeW1ib2woKTtcbnZhciBza2lwQXV0aFRpbWVDaGVjayA9IFN5bWJvbCgpO1xudmFyIG5vU2lnbmF0dXJlQ2hlY2sgPSBTeW1ib2woKTtcbnZhciBza2lwU3RhdGVDaGVjayA9IFN5bWJvbCgpO1xudmFyIGV4cGVjdE5vU3RhdGUgPSBTeW1ib2woKTtcblxuLy8gc3JjL2xpYi9jb29raWUudHNcbmZ1bmN0aW9uIGlzUnNjQ29va2llVW5hdmFpbGFibGVFcnJvcihlKSB7XG4gIGNvbnN0IGFsbG93ZWRNZXNzYWdlU25pcHBldHMgPSBbXCJ3YXMgY2FsbGVkIG91dHNpZGUgYSByZXF1ZXN0IHNjb3BlXCIsIFwiY29va2llcygpIGV4cGVjdHMgdG8gaGF2ZSByZXF1ZXN0QXN5bmNTdG9yYWdlXCJdO1xuICByZXR1cm4gdHlwZW9mIGU/Lm1lc3NhZ2UgPT09IFwic3RyaW5nXCIgJiYgYWxsb3dlZE1lc3NhZ2VTbmlwcGV0cy5zb21lKChtc2cpID0+IGUubWVzc2FnZS5pbmNsdWRlcyhtc2cpKTtcbn1cbmZ1bmN0aW9uIGdldENvb2tpZShuYW1lKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHJzY0Nvb2tpZXMoKS5nZXQobmFtZSk/LnZhbHVlID8/IG51bGw7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAoaXNSc2NDb29raWVVbmF2YWlsYWJsZUVycm9yKGUpKSB7XG4gICAgICByZXR1cm4gQ29va2llcy5nZXQobmFtZSkgPz8gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgZTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIHNldE9yRGVsZXRlQ29va2llKG5hbWUsIHZhbHVlLCBvcHRpb25zID0ge30pIHtcbiAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgZGVsZXRlQ29va2llKG5hbWUpO1xuICB9IGVsc2Uge1xuICAgIHNldENvb2tpZShuYW1lLCB2YWx1ZSwgb3B0aW9ucyk7XG4gIH1cbn1cbmZ1bmN0aW9uIGRlbGV0ZUNvb2tpZShuYW1lKSB7XG4gIHRyeSB7XG4gICAgcnNjQ29va2llcygpLmRlbGV0ZShuYW1lKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChpc1JzY0Nvb2tpZVVuYXZhaWxhYmxlRXJyb3IoZSkpIHtcbiAgICAgIENvb2tpZXMucmVtb3ZlKG5hbWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBlO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gc2V0Q29va2llKG5hbWUsIHZhbHVlLCBvcHRpb25zID0ge30pIHtcbiAgY29uc3QgaXNQcm9kID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiO1xuICB0cnkge1xuICAgIHJzY0Nvb2tpZXMoKS5zZXQobmFtZSwgdmFsdWUsIHtcbiAgICAgIHNlY3VyZTogaXNQcm9kLFxuICAgICAgbWF4QWdlOiBvcHRpb25zLm1heEFnZVxuICAgIH0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKGlzUnNjQ29va2llVW5hdmFpbGFibGVFcnJvcihlKSkge1xuICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCAhPT0gXCJodHRwczpcIiAmJiBpc1Byb2QpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXR0ZW1wdGVkIHRvIHNldCBhIHNlY3VyZSBjb29raWUsIGJ1dCB0aGlzIGJ1aWxkIHdhcyBjb21waWxlZCBhcyBhIHByb2R1Y3Rpb24gYnVpbGQsIGJ1dCB0aGUgY3VycmVudCBwYWdlIGlzIG5vdCBzZXJ2ZWQgb3ZlciBIVFRQUy4gVGhpcyBpcyBhIHNlY3VyaXR5IHJpc2sgYW5kIGlzIG5vdCBhbGxvd2VkIGluIHByb2R1Y3Rpb24uXCIpO1xuICAgICAgfVxuICAgICAgQ29va2llcy5zZXQobmFtZSwgdmFsdWUsIHtcbiAgICAgICAgc2VjdXJlOiBpc1Byb2QsXG4gICAgICAgIGV4cGlyZXM6IG9wdGlvbnMubWF4QWdlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBuZXcgRGF0ZShEYXRlLm5vdygpICsgb3B0aW9ucy5tYXhBZ2UgKiAxZTMpXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgZTtcbiAgICB9XG4gIH1cbn1cbmFzeW5jIGZ1bmN0aW9uIHNhdmVWZXJpZmllckFuZFN0YXRlKCkge1xuICBjb25zdCBjb2RlVmVyaWZpZXIgPSBnZW5lcmF0ZVJhbmRvbUNvZGVWZXJpZmllcigpO1xuICBjb25zdCBjb2RlQ2hhbGxlbmdlID0gYXdhaXQgY2FsY3VsYXRlUEtDRUNvZGVDaGFsbGVuZ2UoY29kZVZlcmlmaWVyKTtcbiAgY29uc3Qgc3RhdGUgPSBnZW5lcmF0ZVJhbmRvbVN0YXRlKCk7XG4gIHNldENvb2tpZShcInN0YWNrLW9hdXRoLW91dGVyLVwiICsgc3RhdGUsIGNvZGVWZXJpZmllciwgeyBtYXhBZ2U6IDYwICogNjAgfSk7XG4gIHJldHVybiB7XG4gICAgY29kZUNoYWxsZW5nZSxcbiAgICBzdGF0ZVxuICB9O1xufVxuZnVuY3Rpb24gY29uc3VtZVZlcmlmaWVyQW5kU3RhdGVDb29raWUoc3RhdGUpIHtcbiAgY29uc3QgY29va2llTmFtZSA9IFwic3RhY2stb2F1dGgtb3V0ZXItXCIgKyBzdGF0ZTtcbiAgY29uc3QgY29kZVZlcmlmaWVyID0gZ2V0Q29va2llKGNvb2tpZU5hbWUpO1xuICBpZiAoIWNvZGVWZXJpZmllcikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGRlbGV0ZUNvb2tpZShjb29raWVOYW1lKTtcbiAgcmV0dXJuIHtcbiAgICBjb2RlVmVyaWZpZXJcbiAgfTtcbn1cbmV4cG9ydCB7XG4gIGNvbnN1bWVWZXJpZmllckFuZFN0YXRlQ29va2llLFxuICBkZWxldGVDb29raWUsXG4gIGdldENvb2tpZSxcbiAgc2F2ZVZlcmlmaWVyQW5kU3RhdGUsXG4gIHNldENvb2tpZSxcbiAgc2V0T3JEZWxldGVDb29raWVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb29raWUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackframe/stack/dist/esm/lib/cookie.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stackframe/stack/dist/esm/lib/hooks.js":
/*!**************************************************************!*\
  !*** ./node_modules/@stackframe/stack/dist/esm/lib/hooks.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useStackApp: () => (/* binding */ useStackApp),\n/* harmony export */   useUser: () => (/* binding */ useUser)\n/* harmony export */ });\n/* harmony import */ var _providers_stack_provider_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../providers/stack-provider-client */ \"(ssr)/./node_modules/@stackframe/stack/dist/esm/providers/stack-provider-client.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n// src/lib/hooks.ts\n\n\nfunction useUser(options = {}) {\n  const stackApp = useStackApp(options);\n  if (options.projectIdMustMatch && stackApp.projectId !== options.projectIdMustMatch) {\n    throw new Error(\"Unexpected project ID in useStackApp: \" + stackApp.projectId);\n  }\n  if (options.projectIdMustMatch === \"internal\") {\n    return stackApp.useUser(options);\n  } else {\n    return stackApp.useUser(options);\n  }\n}\nfunction useStackApp(options = {}) {\n  const context = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_providers_stack_provider_client__WEBPACK_IMPORTED_MODULE_1__.StackContext);\n  if (context === null) {\n    throw new Error(\"useStackApp must be used within a StackProvider\");\n  }\n  const stackApp = context.app;\n  if (options.projectIdMustMatch && stackApp.projectId !== options.projectIdMustMatch) {\n    throw new Error(\"Unexpected project ID in useStackApp: \" + stackApp.projectId);\n  }\n  return stackApp;\n}\n\n//# sourceMappingURL=hooks.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2svZGlzdC9lc20vbGliL2hvb2tzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDa0U7QUFDL0I7QUFDbkMsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakMsa0JBQWtCLGlEQUFVLENBQUMsMEVBQVk7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL21hcmtlcnBsQUljZS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay9kaXN0L2VzbS9saWIvaG9va3MuanM/NWRjYSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvbGliL2hvb2tzLnRzXG5pbXBvcnQgeyBTdGFja0NvbnRleHQgfSBmcm9tIFwiLi4vcHJvdmlkZXJzL3N0YWNrLXByb3ZpZGVyLWNsaWVudFwiO1xuaW1wb3J0IHsgdXNlQ29udGV4dCB9IGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlVXNlcihvcHRpb25zID0ge30pIHtcbiAgY29uc3Qgc3RhY2tBcHAgPSB1c2VTdGFja0FwcChvcHRpb25zKTtcbiAgaWYgKG9wdGlvbnMucHJvamVjdElkTXVzdE1hdGNoICYmIHN0YWNrQXBwLnByb2plY3RJZCAhPT0gb3B0aW9ucy5wcm9qZWN0SWRNdXN0TWF0Y2gpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIHByb2plY3QgSUQgaW4gdXNlU3RhY2tBcHA6IFwiICsgc3RhY2tBcHAucHJvamVjdElkKTtcbiAgfVxuICBpZiAob3B0aW9ucy5wcm9qZWN0SWRNdXN0TWF0Y2ggPT09IFwiaW50ZXJuYWxcIikge1xuICAgIHJldHVybiBzdGFja0FwcC51c2VVc2VyKG9wdGlvbnMpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBzdGFja0FwcC51c2VVc2VyKG9wdGlvbnMpO1xuICB9XG59XG5mdW5jdGlvbiB1c2VTdGFja0FwcChvcHRpb25zID0ge30pIHtcbiAgY29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQoU3RhY2tDb250ZXh0KTtcbiAgaWYgKGNvbnRleHQgPT09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1c2VTdGFja0FwcCBtdXN0IGJlIHVzZWQgd2l0aGluIGEgU3RhY2tQcm92aWRlclwiKTtcbiAgfVxuICBjb25zdCBzdGFja0FwcCA9IGNvbnRleHQuYXBwO1xuICBpZiAob3B0aW9ucy5wcm9qZWN0SWRNdXN0TWF0Y2ggJiYgc3RhY2tBcHAucHJvamVjdElkICE9PSBvcHRpb25zLnByb2plY3RJZE11c3RNYXRjaCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgcHJvamVjdCBJRCBpbiB1c2VTdGFja0FwcDogXCIgKyBzdGFja0FwcC5wcm9qZWN0SWQpO1xuICB9XG4gIHJldHVybiBzdGFja0FwcDtcbn1cbmV4cG9ydCB7XG4gIHVzZVN0YWNrQXBwLFxuICB1c2VVc2VyXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aG9va3MuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackframe/stack/dist/esm/lib/hooks.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app.js":
/*!******************************************************************!*\
  !*** ./node_modules/@stackframe/stack/dist/esm/lib/stack-app.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StackAdminApp: () => (/* binding */ StackAdminApp),\n/* harmony export */   StackClientApp: () => (/* binding */ StackClientApp),\n/* harmony export */   StackServerApp: () => (/* binding */ StackServerApp),\n/* harmony export */   serverTeamPermissionDefinitionCreateOptionsToCrud: () => (/* binding */ serverTeamPermissionDefinitionCreateOptionsToCrud),\n/* harmony export */   serverTeamPermissionDefinitionUpdateOptionsToCrud: () => (/* binding */ serverTeamPermissionDefinitionUpdateOptionsToCrud),\n/* harmony export */   stackAppInternalsSymbol: () => (/* binding */ stackAppInternalsSymbol)\n/* harmony export */ });\n/* harmony import */ var _stackframe_stack_sc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @stackframe/stack-sc */ \"(ssr)/./node_modules/@stackframe/stack-sc/dist/index.default.js\");\n/* harmony import */ var _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @stackframe/stack-shared */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/index.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_helpers_production_mode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @stackframe/stack-shared/dist/helpers/production-mode */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/helpers/production-mode.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_sessions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @stackframe/stack-shared/dist/sessions */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/sessions.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_bytes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/bytes */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/bytes.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_caches__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/caches */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/caches.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_compile_time__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/compile-time */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/compile-time.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_env__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/env */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/env.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/errors */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/errors.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_maps__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/maps */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/maps.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_objects__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/objects */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/objects.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_promises__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/promises */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/promises.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_react__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/react */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/react.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/results */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/results.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_stores__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/stores */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/stores.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_strings__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/strings */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/strings.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_urls__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/urls */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/urls.js\");\n/* harmony import */ var _stackframe_stack_shared_dist_utils_uuids__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/uuids */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/uuids.js\");\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! cookie */ \"(ssr)/./node_modules/cookie/index.js\");\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! next/navigation */ \"(ssr)/./node_modules/next/dist/api/navigation.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_20__);\n/* harmony import */ var _utils_url__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../utils/url */ \"(ssr)/./node_modules/@stackframe/stack/dist/esm/utils/url.js\");\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./auth */ \"(ssr)/./node_modules/@stackframe/stack/dist/esm/lib/auth.js\");\n/* harmony import */ var _cookie__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./cookie */ \"(ssr)/./node_modules/@stackframe/stack/dist/esm/lib/cookie.js\");\n// src/lib/stack-app.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar NextNavigation = (0,_stackframe_stack_shared_dist_utils_compile_time__WEBPACK_IMPORTED_MODULE_6__.scrambleDuringCompileTime)(next_navigation__WEBPACK_IMPORTED_MODULE_19__);\nvar clientVersion = \"js @stackframe/stack@2.5.37\";\nfunction getUrls(partial) {\n  const handler = partial.handler ?? \"/handler\";\n  const home = partial.home ?? \"/\";\n  const afterSignIn = partial.afterSignIn ?? home;\n  return {\n    handler,\n    signIn: `${handler}/sign-in`,\n    afterSignIn: home,\n    signUp: `${handler}/sign-up`,\n    afterSignUp: afterSignIn,\n    signOut: `${handler}/sign-out`,\n    afterSignOut: home,\n    emailVerification: `${handler}/email-verification`,\n    passwordReset: `${handler}/password-reset`,\n    forgotPassword: `${handler}/forgot-password`,\n    oauthCallback: `${handler}/oauth-callback`,\n    magicLinkCallback: `${handler}/magic-link-callback`,\n    home,\n    accountSettings: `${handler}/account-settings`,\n    error: `${handler}/error`,\n    teamInvitation: `${handler}/team-invitation`,\n    ...(0,_stackframe_stack_shared_dist_utils_objects__WEBPACK_IMPORTED_MODULE_10__.filterUndefined)(partial)\n  };\n}\nasync function _redirectTo(url, options) {\n  if (_stackframe_stack_sc__WEBPACK_IMPORTED_MODULE_0__.isReactServer) {\n    NextNavigation.redirect(url.toString(), options?.replace ? NextNavigation.RedirectType.replace : NextNavigation.RedirectType.push);\n  } else {\n    if (options?.replace) {\n      window.location.replace(url);\n    } else {\n      window.location.assign(url);\n    }\n    await (0,_stackframe_stack_shared_dist_utils_promises__WEBPACK_IMPORTED_MODULE_11__.wait)(2e3);\n  }\n}\nfunction getDefaultProjectId() {\n  return \"b83d4657-e4d9-4227-ae0c-25c05eac4421\" || 0;\n}\nfunction getDefaultPublishableClientKey() {\n  return \"pck_6zpcqy8zxgakcn6zbt75bhfy9kte5kb7qpgnkby34msx8\" || 0;\n}\nfunction getDefaultSecretServerKey() {\n  return process.env.STACK_SECRET_SERVER_KEY || (0,_stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_8__.throwErr)(new Error(\"No secret server key provided. Please copy your key from the Stack dashboard and put your it in the STACK_SECRET_SERVER_KEY environment variable.\"));\n}\nfunction getDefaultSuperSecretAdminKey() {\n  return process.env.STACK_SUPER_SECRET_ADMIN_KEY || (0,_stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_8__.throwErr)(new Error(\"No super secret admin key provided. Please copy your key from the Stack dashboard and put it in the STACK_SUPER_SECRET_ADMIN_KEY environment variable.\"));\n}\nfunction getDefaultBaseUrl() {\n  return process.env.NEXT_PUBLIC_STACK_URL || defaultBaseUrl;\n}\nvar defaultBaseUrl = \"https://api.stack-auth.com\";\nfunction createEmptyTokenStore() {\n  return new _stackframe_stack_shared_dist_utils_stores__WEBPACK_IMPORTED_MODULE_14__.Store({\n    refreshToken: null,\n    accessToken: null\n  });\n}\nvar cachePromiseByComponentId = /* @__PURE__ */ new Map();\nfunction useAsyncCache(cache, dependencies, caller) {\n  (0,_stackframe_stack_shared_dist_utils_react__WEBPACK_IMPORTED_MODULE_12__.suspendIfSsr)(caller);\n  const id = react__WEBPACK_IMPORTED_MODULE_20___default().useId();\n  const subscribe = (0,react__WEBPACK_IMPORTED_MODULE_20__.useCallback)((cb) => {\n    const { unsubscribe } = cache.onStateChange(dependencies, () => {\n      cachePromiseByComponentId.delete(id);\n      cb();\n    });\n    return unsubscribe;\n  }, [cache, ...dependencies]);\n  const getSnapshot = (0,react__WEBPACK_IMPORTED_MODULE_20__.useCallback)(() => {\n    if (!cachePromiseByComponentId.has(id)) {\n      cachePromiseByComponentId.set(id, cache.getOrWait(dependencies, \"read-write\"));\n    }\n    return cachePromiseByComponentId.get(id);\n  }, [cache, ...dependencies]);\n  const promise = react__WEBPACK_IMPORTED_MODULE_20___default().useSyncExternalStore(\n    subscribe,\n    getSnapshot,\n    () => (0,_stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_8__.throwErr)(new Error(\"getServerSnapshot should never be called in useAsyncCache because we restrict to CSR earlier\"))\n  );\n  return react__WEBPACK_IMPORTED_MODULE_20___default().use(promise);\n}\nvar stackAppInternalsSymbol = Symbol.for(\"StackAppInternals\");\nvar allClientApps = /* @__PURE__ */ new Map();\nvar createCache = (fetcher) => {\n  return new _stackframe_stack_shared_dist_utils_caches__WEBPACK_IMPORTED_MODULE_5__.AsyncCache(\n    async (dependencies) => await fetcher(dependencies),\n    {}\n  );\n};\nvar createCacheBySession = (fetcher) => {\n  return new _stackframe_stack_shared_dist_utils_caches__WEBPACK_IMPORTED_MODULE_5__.AsyncCache(\n    async ([session, ...extraDependencies]) => await fetcher(session, extraDependencies),\n    {\n      onSubscribe: ([session], refresh) => {\n        const handler = session.onInvalidate(() => refresh());\n        return () => handler.unsubscribe();\n      }\n    }\n  );\n};\nvar numberOfAppsCreated = 0;\nvar _StackClientAppImpl = class __StackClientAppImpl {\n  constructor(_options) {\n    this._options = _options;\n    this._uniqueIdentifier = void 0;\n    this.__DEMO_ENABLE_SLIGHT_FETCH_DELAY = false;\n    this._ownedAdminApps = new _stackframe_stack_shared_dist_utils_maps__WEBPACK_IMPORTED_MODULE_9__.DependenciesMap();\n    this._currentUserCache = createCacheBySession(async (session) => {\n      if (this.__DEMO_ENABLE_SLIGHT_FETCH_DELAY) {\n        await (0,_stackframe_stack_shared_dist_utils_promises__WEBPACK_IMPORTED_MODULE_11__.wait)(2e3);\n      }\n      return await this._interface.getClientUserByToken(session);\n    });\n    this._currentProjectCache = createCache(async () => {\n      return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_13__.Result.orThrow(await this._interface.getClientProject());\n    });\n    this._ownedProjectsCache = createCacheBySession(async (session) => {\n      return await this._interface.listProjects(session);\n    });\n    this._currentUserPermissionsCache = createCacheBySession(async (session, [teamId, recursive]) => {\n      return await this._interface.listCurrentUserTeamPermissions({ teamId, recursive }, session);\n    });\n    this._currentUserTeamsCache = createCacheBySession(async (session) => {\n      return await this._interface.listCurrentUserTeams(session);\n    });\n    this._currentUserOAuthConnectionAccessTokensCache = createCacheBySession(\n      async (session, [providerId, scope]) => {\n        try {\n          const result = await this._interface.createProviderAccessToken(providerId, scope || \"\", session);\n          return { accessToken: result.access_token };\n        } catch (err) {\n          if (!(err instanceof _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.OAuthConnectionDoesNotHaveRequiredScope || err instanceof _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.OAuthConnectionNotConnectedToUser)) {\n            throw err;\n          }\n        }\n        return null;\n      }\n    );\n    this._currentUserOAuthConnectionCache = createCacheBySession(\n      async (session, [providerId, scope, redirect]) => {\n        return await this._getUserOAuthConnectionCacheFn({\n          getUser: async () => await this._currentUserCache.getOrWait([session], \"write-only\"),\n          getOrWaitOAuthToken: async () => await this._currentUserOAuthConnectionAccessTokensCache.getOrWait([session, providerId, scope || \"\"], \"write-only\"),\n          useOAuthToken: () => useAsyncCache(this._currentUserOAuthConnectionAccessTokensCache, [session, providerId, scope || \"\"], \"useOAuthToken\"),\n          providerId,\n          scope,\n          redirect,\n          session\n        });\n      }\n    );\n    this._teamMemberProfilesCache = createCacheBySession(\n      async (session, [teamId]) => {\n        return await this._interface.listTeamMemberProfiles({ teamId }, session);\n      }\n    );\n    this._currentUserTeamProfileCache = createCacheBySession(\n      async (session, [teamId]) => {\n        return await this._interface.getTeamMemberProfile({ teamId, userId: \"me\" }, session);\n      }\n    );\n    this._memoryTokenStore = createEmptyTokenStore();\n    this._requestTokenStores = /* @__PURE__ */ new WeakMap();\n    this._storedCookieTokenStore = null;\n    /**\n     * A map from token stores and session keys to sessions.\n     *\n     * This isn't just a map from session keys to sessions for two reasons:\n     *\n     * - So we can garbage-collect Session objects when the token store is garbage-collected\n     * - So different token stores are separated and don't leak information between each other, eg. if the same user sends two requests to the same server they should get a different session object\n     */\n    this._sessionsByTokenStoreAndSessionKey = /* @__PURE__ */ new WeakMap();\n    if (\"interface\" in _options) {\n      this._interface = _options.interface;\n    } else {\n      this._interface = new _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_1__.StackClientInterface({\n        baseUrl: _options.baseUrl ?? getDefaultBaseUrl(),\n        projectId: _options.projectId ?? getDefaultProjectId(),\n        clientVersion,\n        publishableClientKey: _options.publishableClientKey ?? getDefaultPublishableClientKey()\n      });\n    }\n    this._tokenStoreInit = _options.tokenStore;\n    this._urlOptions = _options.urls ?? {};\n    this._oauthScopesOnSignIn = _options.oauthScopesOnSignIn ?? {};\n    if (_options.uniqueIdentifier) {\n      this._uniqueIdentifier = _options.uniqueIdentifier;\n      this._initUniqueIdentifier();\n    }\n    if (!_options.noAutomaticPrefetch) {\n      numberOfAppsCreated++;\n      if (numberOfAppsCreated > 10) {\n        ( true ? console.log : 0)(`You have created more than 10 Stack apps with automatic pre-fetch enabled (${numberOfAppsCreated}). This is usually a sign of a memory leak, but can sometimes be caused by hot reload of your tech stack. If you are getting this error and it is not caused by hot reload, make sure to minimize the number of Stack apps per page (usually, one per project). (If it is caused by hot reload and does not occur in production, you can safely ignore it.)`);\n      }\n    }\n  }\n  async _getUserOAuthConnectionCacheFn(options) {\n    const user = await options.getUser();\n    let hasConnection = true;\n    if (!user || !user.oauth_providers.find((p) => p.id === options.providerId)) {\n      hasConnection = false;\n    }\n    const token = await options.getOrWaitOAuthToken();\n    if (!token) {\n      hasConnection = false;\n    }\n    if (!hasConnection && options.redirect) {\n      if (!options.session) {\n        throw new Error(\"No session found. You might be calling getConnectedAccount with redirect without having a user session.\");\n      }\n      await (0,_auth__WEBPACK_IMPORTED_MODULE_21__.addNewOAuthProviderOrScope)(\n        this._interface,\n        {\n          provider: options.providerId,\n          redirectUrl: this.urls.oauthCallback,\n          errorRedirectUrl: this.urls.error,\n          providerScope: (0,_stackframe_stack_shared_dist_utils_strings__WEBPACK_IMPORTED_MODULE_15__.mergeScopeStrings)(options.scope || \"\", (this._oauthScopesOnSignIn[options.providerId] ?? []).join(\" \"))\n        },\n        options.session\n      );\n      return await (0,_stackframe_stack_shared_dist_utils_promises__WEBPACK_IMPORTED_MODULE_11__.neverResolve)();\n    } else if (!hasConnection) {\n      return null;\n    }\n    const app = this;\n    return {\n      id: options.providerId,\n      async getAccessToken() {\n        const result = await options.getOrWaitOAuthToken();\n        if (!result) {\n          throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_8__.StackAssertionError(\"No access token available\");\n        }\n        return result;\n      },\n      useAccessToken() {\n        const result = options.useOAuthToken();\n        if (!result) {\n          throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_8__.StackAssertionError(\"No access token available\");\n        }\n        return result;\n      }\n    };\n  }\n  _initUniqueIdentifier() {\n    if (!this._uniqueIdentifier) {\n      throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_8__.StackAssertionError(\"Unique identifier not initialized\");\n    }\n    if (allClientApps.has(this._uniqueIdentifier)) {\n      throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_8__.StackAssertionError(\"A Stack client app with the same unique identifier already exists\");\n    }\n    allClientApps.set(this._uniqueIdentifier, [this._options.checkString ?? \"default check string\", this]);\n  }\n  /**\n   * Cloudflare workers does not allow use of randomness on the global scope (on which the Stack app is probably\n   * initialized). For that reason, we generate the unique identifier lazily when it is first needed instead of in the\n   * constructor.\n   */\n  _getUniqueIdentifier() {\n    if (!this._uniqueIdentifier) {\n      this._uniqueIdentifier = (0,_stackframe_stack_shared_dist_utils_uuids__WEBPACK_IMPORTED_MODULE_17__.generateUuid)();\n      this._initUniqueIdentifier();\n    }\n    return this._uniqueIdentifier;\n  }\n  async _checkFeatureSupport(name, options) {\n    return await this._interface.checkFeatureSupport({ ...options, name });\n  }\n  _useCheckFeatureSupport(name, options) {\n    (0,_stackframe_stack_shared_dist_utils_promises__WEBPACK_IMPORTED_MODULE_11__.runAsynchronously)(this._checkFeatureSupport(name, options));\n    throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_8__.StackAssertionError(`${name} is not currently supported. Please reach out to Stack support for more information.`);\n  }\n  get _refreshTokenCookieName() {\n    return `stack-refresh-${this.projectId}`;\n  }\n  _getTokensFromCookies(cookies) {\n    const refreshToken = cookies.refreshTokenCookie;\n    const accessTokenObject = cookies.accessTokenCookie?.startsWith('[\"') ? JSON.parse(cookies.accessTokenCookie) : null;\n    const accessToken = accessTokenObject && refreshToken === accessTokenObject[0] ? accessTokenObject[1] : null;\n    return {\n      refreshToken,\n      accessToken\n    };\n  }\n  get _accessTokenCookieName() {\n    return `stack-access`;\n  }\n  _getCookieTokenStore() {\n    if (!(0,_stackframe_stack_shared_dist_utils_env__WEBPACK_IMPORTED_MODULE_7__.isBrowserLike)()) {\n      throw new Error(\"Cannot use cookie token store on the server!\");\n    }\n    if (this._storedCookieTokenStore === null) {\n      const getCurrentValue = (old) => {\n        const tokens = this._getTokensFromCookies({\n          refreshTokenCookie: (0,_cookie__WEBPACK_IMPORTED_MODULE_22__.getCookie)(this._refreshTokenCookieName) ?? (0,_cookie__WEBPACK_IMPORTED_MODULE_22__.getCookie)(\"stack-refresh\"),\n          // keep old cookie name for backwards-compatibility\n          accessTokenCookie: (0,_cookie__WEBPACK_IMPORTED_MODULE_22__.getCookie)(this._accessTokenCookieName)\n        });\n        return {\n          refreshToken: tokens.refreshToken,\n          accessToken: tokens.accessToken ?? (old?.refreshToken === tokens.refreshToken ? old.accessToken : null)\n        };\n      };\n      this._storedCookieTokenStore = new _stackframe_stack_shared_dist_utils_stores__WEBPACK_IMPORTED_MODULE_14__.Store(getCurrentValue(null));\n      let hasSucceededInWriting = true;\n      setInterval(() => {\n        if (hasSucceededInWriting) {\n          const oldValue = this._storedCookieTokenStore.get();\n          const currentValue = getCurrentValue(oldValue);\n          if (!(0,_stackframe_stack_shared_dist_utils_objects__WEBPACK_IMPORTED_MODULE_10__.deepPlainEquals)(currentValue, oldValue)) {\n            this._storedCookieTokenStore.set(currentValue);\n          }\n        }\n      }, 100);\n      this._storedCookieTokenStore.onChange((value) => {\n        try {\n          (0,_cookie__WEBPACK_IMPORTED_MODULE_22__.setOrDeleteCookie)(this._refreshTokenCookieName, value.refreshToken, { maxAge: 60 * 60 * 24 * 365 });\n          (0,_cookie__WEBPACK_IMPORTED_MODULE_22__.setOrDeleteCookie)(this._accessTokenCookieName, value.accessToken ? JSON.stringify([value.refreshToken, value.accessToken]) : null, { maxAge: 60 * 60 * 24 });\n          (0,_cookie__WEBPACK_IMPORTED_MODULE_22__.deleteCookie)(\"stack-refresh\");\n          hasSucceededInWriting = true;\n        } catch (e) {\n          if (!(0,_stackframe_stack_shared_dist_utils_env__WEBPACK_IMPORTED_MODULE_7__.isBrowserLike)()) {\n            hasSucceededInWriting = false;\n          } else {\n            throw e;\n          }\n        }\n      });\n    }\n    return this._storedCookieTokenStore;\n  }\n  _getOrCreateTokenStore(overrideTokenStoreInit) {\n    const tokenStoreInit = overrideTokenStoreInit === void 0 ? this._tokenStoreInit : overrideTokenStoreInit;\n    switch (tokenStoreInit) {\n      case \"cookie\": {\n        return this._getCookieTokenStore();\n      }\n      case \"nextjs-cookie\": {\n        if ((0,_stackframe_stack_shared_dist_utils_env__WEBPACK_IMPORTED_MODULE_7__.isBrowserLike)()) {\n          return this._getCookieTokenStore();\n        } else {\n          const tokens = this._getTokensFromCookies({\n            refreshTokenCookie: (0,_cookie__WEBPACK_IMPORTED_MODULE_22__.getCookie)(this._refreshTokenCookieName) ?? (0,_cookie__WEBPACK_IMPORTED_MODULE_22__.getCookie)(\"stack-refresh\"),\n            // keep old cookie name for backwards-compatibility\n            accessTokenCookie: (0,_cookie__WEBPACK_IMPORTED_MODULE_22__.getCookie)(this._accessTokenCookieName)\n          });\n          const store = new _stackframe_stack_shared_dist_utils_stores__WEBPACK_IMPORTED_MODULE_14__.Store(tokens);\n          store.onChange((value) => {\n            try {\n              (0,_cookie__WEBPACK_IMPORTED_MODULE_22__.setOrDeleteCookie)(this._refreshTokenCookieName, value.refreshToken, { maxAge: 60 * 60 * 24 * 365 });\n              (0,_cookie__WEBPACK_IMPORTED_MODULE_22__.setOrDeleteCookie)(this._accessTokenCookieName, value.accessToken ? JSON.stringify([value.refreshToken, value.accessToken]) : null, { maxAge: 60 * 60 * 24 });\n            } catch (e) {\n            }\n          });\n          return store;\n        }\n      }\n      case \"memory\": {\n        return this._memoryTokenStore;\n      }\n      default: {\n        if (tokenStoreInit === null) {\n          return createEmptyTokenStore();\n        } else if (typeof tokenStoreInit === \"object\" && \"headers\" in tokenStoreInit) {\n          if (this._requestTokenStores.has(tokenStoreInit)) return this._requestTokenStores.get(tokenStoreInit);\n          const stackAuthHeader = tokenStoreInit.headers.get(\"x-stack-auth\");\n          if (stackAuthHeader) {\n            let parsed2;\n            try {\n              parsed2 = JSON.parse(stackAuthHeader);\n              if (typeof parsed2 !== \"object\") throw new Error(\"x-stack-auth header must be a JSON object\");\n              if (parsed2 === null) throw new Error(\"x-stack-auth header must not be null\");\n            } catch (e) {\n              throw new Error(`Invalid x-stack-auth header: ${stackAuthHeader}`, { cause: e });\n            }\n            return this._getOrCreateTokenStore({\n              accessToken: parsed2.accessToken ?? null,\n              refreshToken: parsed2.refreshToken ?? null\n            });\n          }\n          const cookieHeader = tokenStoreInit.headers.get(\"cookie\");\n          const parsed = cookie__WEBPACK_IMPORTED_MODULE_18__.parse(cookieHeader || \"\");\n          const res = new _stackframe_stack_shared_dist_utils_stores__WEBPACK_IMPORTED_MODULE_14__.Store({\n            refreshToken: parsed[this._refreshTokenCookieName] || parsed[\"stack-refresh\"] || null,\n            // keep old cookie name for backwards-compatibility\n            accessToken: parsed[this._accessTokenCookieName] || null\n          });\n          this._requestTokenStores.set(tokenStoreInit, res);\n          return res;\n        } else if (\"accessToken\" in tokenStoreInit || \"refreshToken\" in tokenStoreInit) {\n          return new _stackframe_stack_shared_dist_utils_stores__WEBPACK_IMPORTED_MODULE_14__.Store({\n            refreshToken: tokenStoreInit.refreshToken,\n            accessToken: tokenStoreInit.accessToken\n          });\n        }\n        throw new Error(`Invalid token store ${tokenStoreInit}`);\n      }\n    }\n  }\n  _getSessionFromTokenStore(tokenStore) {\n    const tokenObj = tokenStore.get();\n    const sessionKey = _stackframe_stack_shared_dist_sessions__WEBPACK_IMPORTED_MODULE_3__.InternalSession.calculateSessionKey(tokenObj);\n    const existing = sessionKey ? this._sessionsByTokenStoreAndSessionKey.get(tokenStore)?.get(sessionKey) : null;\n    if (existing) return existing;\n    const session = this._interface.createSession({\n      refreshToken: tokenObj.refreshToken,\n      accessToken: tokenObj.accessToken\n    });\n    session.onAccessTokenChange((newAccessToken) => {\n      tokenStore.update((old) => ({\n        ...old,\n        accessToken: newAccessToken?.token ?? null\n      }));\n    });\n    session.onInvalidate(() => {\n      tokenStore.update((old) => ({\n        ...old,\n        accessToken: null,\n        refreshToken: null\n      }));\n    });\n    let sessionsBySessionKey = this._sessionsByTokenStoreAndSessionKey.get(tokenStore) ?? /* @__PURE__ */ new Map();\n    this._sessionsByTokenStoreAndSessionKey.set(tokenStore, sessionsBySessionKey);\n    sessionsBySessionKey.set(sessionKey, session);\n    return session;\n  }\n  _getSession(overrideTokenStoreInit) {\n    const tokenStore = this._getOrCreateTokenStore(overrideTokenStoreInit);\n    return this._getSessionFromTokenStore(tokenStore);\n  }\n  _useSession(overrideTokenStoreInit) {\n    const tokenStore = this._getOrCreateTokenStore(overrideTokenStoreInit);\n    const subscribe = (0,react__WEBPACK_IMPORTED_MODULE_20__.useCallback)((cb) => {\n      const { unsubscribe } = tokenStore.onChange(() => {\n        cb();\n      });\n      return unsubscribe;\n    }, [tokenStore]);\n    const getSnapshot = (0,react__WEBPACK_IMPORTED_MODULE_20__.useCallback)(() => this._getSessionFromTokenStore(tokenStore), [tokenStore]);\n    return react__WEBPACK_IMPORTED_MODULE_20___default().useSyncExternalStore(subscribe, getSnapshot, getSnapshot);\n  }\n  async _signInToAccountWithTokens(tokens) {\n    if (!(\"accessToken\" in tokens) || !(\"refreshToken\" in tokens)) {\n      throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_8__.StackAssertionError(\"Invalid tokens object; can't sign in with this\", { tokens });\n    }\n    const tokenStore = this._getOrCreateTokenStore();\n    tokenStore.set(tokens);\n  }\n  _hasPersistentTokenStore(overrideTokenStoreInit) {\n    return (overrideTokenStoreInit !== void 0 ? overrideTokenStoreInit : this._tokenStoreInit) !== null;\n  }\n  _ensurePersistentTokenStore(overrideTokenStoreInit) {\n    if (!this._hasPersistentTokenStore(overrideTokenStoreInit)) {\n      throw new Error(\"Cannot call this function on a Stack app without a persistent token store. Make sure the tokenStore option on the constructor is set to a non-null value when initializing Stack.\\n\\nStack uses token stores to access access tokens of the current user. For example, on web frontends it is commonly the string value 'cookies' for cookie storage.\");\n    }\n  }\n  _isInternalProject() {\n    return this.projectId === \"internal\";\n  }\n  _ensureInternalProject() {\n    if (!this._isInternalProject()) {\n      throw new Error(\"Cannot call this function on a Stack app with a project ID other than 'internal'.\");\n    }\n  }\n  _clientProjectFromCrud(crud) {\n    return {\n      id: crud.id,\n      displayName: crud.display_name,\n      config: {\n        signUpEnabled: crud.config.sign_up_enabled,\n        credentialEnabled: crud.config.credential_enabled,\n        magicLinkEnabled: crud.config.magic_link_enabled,\n        clientTeamCreationEnabled: crud.config.client_team_creation_enabled,\n        clientUserDeletionEnabled: crud.config.client_user_deletion_enabled,\n        oauthProviders: crud.config.enabled_oauth_providers.map((p) => ({\n          id: p.id\n        }))\n      }\n    };\n  }\n  _clientTeamPermissionFromCrud(crud) {\n    return {\n      id: crud.id\n    };\n  }\n  _clientTeamUserFromCrud(crud) {\n    return {\n      id: crud.user_id,\n      teamProfile: {\n        displayName: crud.display_name,\n        profileImageUrl: crud.profile_image_url\n      }\n    };\n  }\n  _clientTeamFromCrud(crud) {\n    const app = this;\n    return {\n      id: crud.id,\n      displayName: crud.display_name,\n      profileImageUrl: crud.profile_image_url,\n      async inviteUser(options) {\n        return await app._interface.sendTeamInvitation({\n          teamId: crud.id,\n          email: options.email,\n          session: app._getSession(),\n          callbackUrl: (0,_utils_url__WEBPACK_IMPORTED_MODULE_23__.constructRedirectUrl)(app.urls.teamInvitation)\n        });\n      },\n      async listUsers() {\n        const result = await app._teamMemberProfilesCache.getOrWait([app._getSession(), crud.id], \"write-only\");\n        return result.map((crud2) => app._clientTeamUserFromCrud(crud2));\n      },\n      useUsers() {\n        const result = useAsyncCache(app._teamMemberProfilesCache, [app._getSession(), crud.id], \"team.useUsers()\");\n        return result.map((crud2) => app._clientTeamUserFromCrud(crud2));\n      },\n      async update(data) {\n        await app._interface.updateTeam({ data: teamUpdateOptionsToCrud(data), teamId: crud.id }, app._getSession());\n        await app._currentUserTeamsCache.refresh([app._getSession()]);\n      }\n    };\n  }\n  _createAuth(session) {\n    const app = this;\n    return {\n      _internalSession: session,\n      currentSession: {\n        async getTokens() {\n          const tokens = await session.getPotentiallyExpiredTokens();\n          return {\n            accessToken: tokens?.accessToken.token ?? null,\n            refreshToken: tokens?.refreshToken?.token ?? null\n          };\n        }\n      },\n      async getAuthHeaders() {\n        return {\n          \"x-stack-auth\": JSON.stringify(await this.getAuthJson())\n        };\n      },\n      async getAuthJson() {\n        const tokens = await this.currentSession.getTokens();\n        return tokens;\n      },\n      signOut() {\n        return app._signOut(session);\n      }\n    };\n  }\n  _createBaseUser(crud) {\n    if (!crud) {\n      throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_8__.StackAssertionError(\"User not found\");\n    }\n    return {\n      id: crud.id,\n      displayName: crud.display_name,\n      primaryEmail: crud.primary_email,\n      primaryEmailVerified: crud.primary_email_verified,\n      profileImageUrl: crud.profile_image_url,\n      signedUpAt: new Date(crud.signed_up_at_millis),\n      clientMetadata: crud.client_metadata,\n      clientReadOnlyMetadata: crud.client_read_only_metadata,\n      hasPassword: crud.has_password,\n      emailAuthEnabled: crud.auth_with_email,\n      oauthProviders: crud.oauth_providers,\n      selectedTeam: crud.selected_team && this._clientTeamFromCrud(crud.selected_team),\n      isMultiFactorRequired: crud.requires_totp_mfa,\n      toClientJson() {\n        return crud;\n      }\n    };\n  }\n  _editableTeamProfileFromCrud(crud) {\n    const app = this;\n    return {\n      displayName: crud.display_name,\n      profileImageUrl: crud.profile_image_url,\n      async update(update) {\n        await app._interface.updateTeamMemberProfile({\n          teamId: crud.team_id,\n          userId: crud.user_id,\n          profile: {\n            display_name: update.displayName,\n            profile_image_url: update.profileImageUrl\n          }\n        }, app._getSession());\n        await app._currentUserTeamProfileCache.refresh([app._getSession(), crud.team_id]);\n      }\n    };\n  }\n  _createUserExtra(crud, session) {\n    const app = this;\n    async function getConnectedAccount(id, options) {\n      const scopeString = options?.scopes?.join(\" \");\n      return await app._currentUserOAuthConnectionCache.getOrWait([session, id, scopeString || \"\", options?.or === \"redirect\"], \"write-only\");\n    }\n    function useConnectedAccount(id, options) {\n      const scopeString = options?.scopes?.join(\" \");\n      return useAsyncCache(app._currentUserOAuthConnectionCache, [session, id, scopeString || \"\", options?.or === \"redirect\"], \"user.useConnectedAccount()\");\n    }\n    return {\n      setDisplayName(displayName) {\n        return this.update({ displayName });\n      },\n      setClientMetadata(metadata) {\n        return this.update({ clientMetadata: metadata });\n      },\n      async setSelectedTeam(team) {\n        await this.update({ selectedTeamId: team?.id ?? null });\n      },\n      getConnectedAccount,\n      useConnectedAccount,\n      async getTeam(teamId) {\n        const teams = await this.listTeams();\n        return teams.find((t) => t.id === teamId) ?? null;\n      },\n      useTeam(teamId) {\n        const teams = this.useTeams();\n        return (0,react__WEBPACK_IMPORTED_MODULE_20__.useMemo)(() => {\n          return teams.find((t) => t.id === teamId) ?? null;\n        }, [teams, teamId]);\n      },\n      async listTeams() {\n        const teams = await app._currentUserTeamsCache.getOrWait([session], \"write-only\");\n        return teams.map((crud2) => app._clientTeamFromCrud(crud2));\n      },\n      useTeams() {\n        const teams = useAsyncCache(app._currentUserTeamsCache, [session], \"user.useTeams()\");\n        return (0,react__WEBPACK_IMPORTED_MODULE_20__.useMemo)(() => teams.map((crud2) => app._clientTeamFromCrud(crud2)), [teams]);\n      },\n      async createTeam(data) {\n        const crud2 = await app._interface.createTeamForCurrentUser(teamCreateOptionsToCrud(data), session);\n        await app._currentUserTeamsCache.refresh([session]);\n        return app._clientTeamFromCrud(crud2);\n      },\n      async leaveTeam(team) {\n        await app._interface.leaveTeam(team.id, session);\n      },\n      async listPermissions(scope, options) {\n        const recursive = options?.recursive ?? true;\n        const permissions = await app._currentUserPermissionsCache.getOrWait([session, scope.id, recursive], \"write-only\");\n        return permissions.map((crud2) => app._clientTeamPermissionFromCrud(crud2));\n      },\n      usePermissions(scope, options) {\n        const recursive = options?.recursive ?? true;\n        const permissions = useAsyncCache(app._currentUserPermissionsCache, [session, scope.id, recursive], \"user.usePermissions()\");\n        return (0,react__WEBPACK_IMPORTED_MODULE_20__.useMemo)(() => permissions.map((crud2) => app._clientTeamPermissionFromCrud(crud2)), [permissions]);\n      },\n      usePermission(scope, permissionId) {\n        const permissions = this.usePermissions(scope);\n        return (0,react__WEBPACK_IMPORTED_MODULE_20__.useMemo)(() => permissions.find((p) => p.id === permissionId) ?? null, [permissions, permissionId]);\n      },\n      async getPermission(scope, permissionId) {\n        const permissions = await this.listPermissions(scope);\n        return permissions.find((p) => p.id === permissionId) ?? null;\n      },\n      async hasPermission(scope, permissionId) {\n        return await this.getPermission(scope, permissionId) !== null;\n      },\n      async update(update) {\n        return await app._updateClientUser(update, session);\n      },\n      async sendVerificationEmail() {\n        if (!crud?.primary_email) {\n          throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_8__.StackAssertionError(\"User does not have a primary email\");\n        }\n        return await app._sendVerificationEmail(crud.primary_email, session);\n      },\n      async updatePassword(options) {\n        return await app._updatePassword(options, session);\n      },\n      async getTeamProfile(team) {\n        const result = await app._currentUserTeamProfileCache.getOrWait([session, team.id], \"write-only\");\n        return app._editableTeamProfileFromCrud(result);\n      },\n      useTeamProfile(team) {\n        const result = useAsyncCache(app._currentUserTeamProfileCache, [session, team.id], \"user.useTeamProfile()\");\n        return app._editableTeamProfileFromCrud(result);\n      },\n      async delete() {\n        await app._interface.deleteCurrentUser(session);\n        session.markInvalid();\n      }\n    };\n  }\n  _createInternalUserExtra(session) {\n    const app = this;\n    this._ensureInternalProject();\n    return {\n      createProject(newProject) {\n        return app._createProject(session, newProject);\n      },\n      listOwnedProjects() {\n        return app._listOwnedProjects(session);\n      },\n      useOwnedProjects() {\n        return app._useOwnedProjects(session);\n      }\n    };\n  }\n  _currentUserFromCrud(crud, session) {\n    const currentUser = {\n      ...this._createBaseUser(crud),\n      ...this._createAuth(session),\n      ...this._createUserExtra(crud, session),\n      ...this._isInternalProject() ? this._createInternalUserExtra(session) : {}\n    };\n    Object.freeze(currentUser);\n    return currentUser;\n  }\n  _getOwnedAdminApp(forProjectId, session) {\n    if (!this._ownedAdminApps.has([session, forProjectId])) {\n      this._ownedAdminApps.set([session, forProjectId], new _StackAdminAppImpl({\n        baseUrl: this._interface.options.baseUrl,\n        projectId: forProjectId,\n        tokenStore: null,\n        projectOwnerSession: session,\n        noAutomaticPrefetch: true\n      }));\n    }\n    return this._ownedAdminApps.get([session, forProjectId]);\n  }\n  get projectId() {\n    return this._interface.projectId;\n  }\n  async _isTrusted(url) {\n    return (0,_stackframe_stack_shared_dist_utils_urls__WEBPACK_IMPORTED_MODULE_16__.isRelative)(url);\n  }\n  get urls() {\n    return getUrls(this._urlOptions);\n  }\n  async _redirectIfTrusted(url, options) {\n    if (!await this._isTrusted(url)) {\n      throw new Error(`Redirect URL ${url} is not trusted; should be relative.`);\n    }\n    return await _redirectTo(url, options);\n  }\n  async _redirectToHandler(handlerName, options) {\n    let url = this.urls[handlerName];\n    if (!url) {\n      throw new Error(`No URL for handler name ${handlerName}`);\n    }\n    if (!options?.noRedirectBack) {\n      if (handlerName === \"afterSignIn\" || handlerName === \"afterSignUp\") {\n        if (_stackframe_stack_sc__WEBPACK_IMPORTED_MODULE_0__.isReactServer || typeof window === \"undefined\") {\n          try {\n            await this._checkFeatureSupport(\"rsc-handler-\" + handlerName, {});\n          } catch (e) {\n          }\n        } else {\n          const queryParams = new URLSearchParams(window.location.search);\n          url = queryParams.get(\"after_auth_return_to\") || url;\n        }\n      } else if (handlerName === \"signIn\" || handlerName === \"signUp\") {\n        if (_stackframe_stack_sc__WEBPACK_IMPORTED_MODULE_0__.isReactServer || typeof window === \"undefined\") {\n          try {\n            await this._checkFeatureSupport(\"rsc-handler-\" + handlerName, {});\n          } catch (e) {\n          }\n        } else {\n          const currentUrl = new URL(window.location.href);\n          const nextUrl = new URL(url, currentUrl);\n          if (currentUrl.searchParams.has(\"after_auth_return_to\")) {\n            nextUrl.searchParams.set(\"after_auth_return_to\", currentUrl.searchParams.get(\"after_auth_return_to\"));\n          } else if (currentUrl.protocol === nextUrl.protocol && currentUrl.host === nextUrl.host) {\n            nextUrl.searchParams.set(\"after_auth_return_to\", (0,_stackframe_stack_shared_dist_utils_urls__WEBPACK_IMPORTED_MODULE_16__.getRelativePart)(currentUrl));\n          }\n          url = (0,_stackframe_stack_shared_dist_utils_urls__WEBPACK_IMPORTED_MODULE_16__.getRelativePart)(nextUrl);\n        }\n      }\n    }\n    await this._redirectIfTrusted(url, options);\n  }\n  async redirectToSignIn(options) {\n    return await this._redirectToHandler(\"signIn\", options);\n  }\n  async redirectToSignUp(options) {\n    return await this._redirectToHandler(\"signUp\", options);\n  }\n  async redirectToSignOut(options) {\n    return await this._redirectToHandler(\"signOut\", options);\n  }\n  async redirectToEmailVerification(options) {\n    return await this._redirectToHandler(\"emailVerification\", options);\n  }\n  async redirectToPasswordReset(options) {\n    return await this._redirectToHandler(\"passwordReset\", options);\n  }\n  async redirectToForgotPassword(options) {\n    return await this._redirectToHandler(\"forgotPassword\", options);\n  }\n  async redirectToHome(options) {\n    return await this._redirectToHandler(\"home\", options);\n  }\n  async redirectToOAuthCallback(options) {\n    return await this._redirectToHandler(\"oauthCallback\", options);\n  }\n  async redirectToMagicLinkCallback(options) {\n    return await this._redirectToHandler(\"magicLinkCallback\", options);\n  }\n  async redirectToAfterSignIn(options) {\n    return await this._redirectToHandler(\"afterSignIn\", options);\n  }\n  async redirectToAfterSignUp(options) {\n    return await this._redirectToHandler(\"afterSignUp\", options);\n  }\n  async redirectToAfterSignOut(options) {\n    return await this._redirectToHandler(\"afterSignOut\", options);\n  }\n  async redirectToAccountSettings(options) {\n    return await this._redirectToHandler(\"accountSettings\", options);\n  }\n  async redirectToError(options) {\n    return await this._redirectToHandler(\"error\", options);\n  }\n  async redirectToTeamInvitation(options) {\n    return await this._redirectToHandler(\"teamInvitation\", options);\n  }\n  async sendForgotPasswordEmail(email) {\n    const redirectUrl = (0,_utils_url__WEBPACK_IMPORTED_MODULE_23__.constructRedirectUrl)(this.urls.passwordReset);\n    const error = await this._interface.sendForgotPasswordEmail(email, redirectUrl);\n    return error;\n  }\n  async sendMagicLinkEmail(email) {\n    const magicLinkRedirectUrl = (0,_utils_url__WEBPACK_IMPORTED_MODULE_23__.constructRedirectUrl)(this.urls.magicLinkCallback);\n    const error = await this._interface.sendMagicLinkEmail(email, magicLinkRedirectUrl);\n    return error;\n  }\n  async resetPassword(options) {\n    const error = await this._interface.resetPassword(options);\n    return error;\n  }\n  async verifyPasswordResetCode(code) {\n    return await this._interface.verifyPasswordResetCode(code);\n  }\n  async verifyTeamInvitationCode(code) {\n    const result = await this._interface.acceptTeamInvitation({\n      type: \"check\",\n      code,\n      session: this._getSession()\n    });\n    if (result.status === \"ok\") {\n      return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_13__.Result.ok(void 0);\n    } else {\n      return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_13__.Result.error(result.error);\n    }\n  }\n  async acceptTeamInvitation(code) {\n    const result = await this._interface.acceptTeamInvitation({\n      type: \"use\",\n      code,\n      session: this._getSession()\n    });\n    if (result.status === \"ok\") {\n      return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_13__.Result.ok(void 0);\n    } else {\n      return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_13__.Result.error(result.error);\n    }\n  }\n  async getTeamInvitationDetails(code) {\n    const result = await this._interface.acceptTeamInvitation({\n      type: \"details\",\n      code,\n      session: this._getSession()\n    });\n    if (result.status === \"ok\") {\n      return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_13__.Result.ok({ teamDisplayName: result.data.team_display_name });\n    } else {\n      return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_13__.Result.error(result.error);\n    }\n  }\n  async verifyEmail(code) {\n    return await this._interface.verifyEmail(code);\n  }\n  async getUser(options) {\n    this._ensurePersistentTokenStore(options?.tokenStore);\n    const session = this._getSession(options?.tokenStore);\n    const crud = await this._currentUserCache.getOrWait([session], \"write-only\");\n    if (crud === null) {\n      switch (options?.or) {\n        case \"redirect\": {\n          await this.redirectToSignIn({ replace: true });\n          break;\n        }\n        case \"throw\": {\n          throw new Error(\"User is not signed in but getUser was called with { or: 'throw' }\");\n        }\n        default: {\n          return null;\n        }\n      }\n    }\n    return crud && this._currentUserFromCrud(crud, session);\n  }\n  useUser(options) {\n    this._ensurePersistentTokenStore(options?.tokenStore);\n    const router = NextNavigation.useRouter();\n    const session = this._useSession(options?.tokenStore);\n    const crud = useAsyncCache(this._currentUserCache, [session], \"useUser()\");\n    if (crud === null) {\n      switch (options?.or) {\n        case \"redirect\": {\n          (0,_stackframe_stack_shared_dist_utils_promises__WEBPACK_IMPORTED_MODULE_11__.runAsynchronously)(this.redirectToSignIn({ replace: true }));\n          (0,_stackframe_stack_shared_dist_utils_react__WEBPACK_IMPORTED_MODULE_12__.suspend)();\n          throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_8__.StackAssertionError(\"suspend should never return\");\n        }\n        case \"throw\": {\n          throw new Error(\"User is not signed in but useUser was called with { or: 'throw' }\");\n        }\n        case void 0:\n        case \"return-null\": {\n        }\n      }\n    }\n    return (0,react__WEBPACK_IMPORTED_MODULE_20__.useMemo)(() => {\n      return crud && this._currentUserFromCrud(crud, session);\n    }, [crud, session, options?.or]);\n  }\n  async _updateClientUser(update, session) {\n    const res = await this._interface.updateClientUser(userUpdateOptionsToCrud(update), session);\n    await this._refreshUser(session);\n    return res;\n  }\n  async signInWithOAuth(provider) {\n    this._ensurePersistentTokenStore();\n    await (0,_auth__WEBPACK_IMPORTED_MODULE_21__.signInWithOAuth)(\n      this._interface,\n      {\n        provider,\n        redirectUrl: this.urls.oauthCallback,\n        errorRedirectUrl: this.urls.error,\n        providerScope: this._oauthScopesOnSignIn[provider]?.join(\" \")\n      }\n    );\n  }\n  /**\n   * @deprecated\n   * TODO remove\n   */\n  async _experimentalMfa(error, session) {\n    const otp = prompt(\"Please enter the six-digit TOTP code from your authenticator app.\");\n    if (!otp) {\n      throw new _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.InvalidTotpCode();\n    }\n    return await this._interface.totpMfa(\n      error.details?.attempt_code ?? (0,_stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_8__.throwErr)(\"attempt code missing\"),\n      otp,\n      session\n    );\n  }\n  /**\n   * @deprecated\n   * TODO remove\n   */\n  async _catchMfaRequiredError(callback) {\n    try {\n      return await callback();\n    } catch (e) {\n      if (e instanceof _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.MultiFactorAuthenticationRequired) {\n        return await this._experimentalMfa(e, this._getSession());\n      }\n      throw e;\n    }\n  }\n  async signInWithCredential(options) {\n    this._ensurePersistentTokenStore();\n    const session = this._getSession();\n    let result;\n    try {\n      result = await this._catchMfaRequiredError(async () => {\n        return await this._interface.signInWithCredential(options.email, options.password, session);\n      });\n    } catch (e) {\n      if (e instanceof _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.InvalidTotpCode) {\n        return e;\n      }\n      throw e;\n    }\n    if (!(result instanceof _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_1__.KnownError)) {\n      await this._signInToAccountWithTokens(result);\n      if (!options.noRedirect) {\n        return await this.redirectToAfterSignIn({ replace: true });\n      } else {\n        return;\n      }\n    }\n    return result;\n  }\n  async signUpWithCredential(options) {\n    this._ensurePersistentTokenStore();\n    const session = this._getSession();\n    const emailVerificationRedirectUrl = (0,_utils_url__WEBPACK_IMPORTED_MODULE_23__.constructRedirectUrl)(this.urls.emailVerification);\n    const result = await this._interface.signUpWithCredential(\n      options.email,\n      options.password,\n      emailVerificationRedirectUrl,\n      session\n    );\n    if (!(result instanceof _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_1__.KnownError)) {\n      await this._signInToAccountWithTokens(result);\n      if (!options.noRedirect) {\n        return await this.redirectToAfterSignUp({ replace: true });\n      } else {\n        return;\n      }\n    }\n    return result;\n  }\n  async signInWithMagicLink(code) {\n    this._ensurePersistentTokenStore();\n    let result;\n    try {\n      result = await this._catchMfaRequiredError(async () => {\n        return await this._interface.signInWithMagicLink(code);\n      });\n    } catch (e) {\n      if (e instanceof _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.InvalidTotpCode) {\n        return e;\n      }\n      throw e;\n    }\n    if (result instanceof _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_1__.KnownError) {\n      return result;\n    }\n    await this._signInToAccountWithTokens(result);\n    if (result.newUser) {\n      await this.redirectToAfterSignUp({ replace: true });\n    } else {\n      await this.redirectToAfterSignIn({ replace: true });\n    }\n  }\n  async callOAuthCallback() {\n    this._ensurePersistentTokenStore();\n    let result;\n    try {\n      result = await this._catchMfaRequiredError(async () => {\n        return await (0,_auth__WEBPACK_IMPORTED_MODULE_21__.callOAuthCallback)(this._interface, this.urls.oauthCallback);\n      });\n    } catch (e) {\n      if (e instanceof _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.InvalidTotpCode) {\n        alert(\"Invalid TOTP code. Please try signing in again.\");\n      }\n      throw e;\n    }\n    if (result) {\n      console.log(\"OAuth callback result\", result);\n      await this._signInToAccountWithTokens(result);\n      if (\"afterCallbackRedirectUrl\" in result && result.afterCallbackRedirectUrl) {\n        await _redirectTo(result.afterCallbackRedirectUrl, { replace: true });\n        return true;\n      } else if (result.newUser) {\n        await this.redirectToAfterSignUp({ replace: true });\n        return true;\n      } else {\n        await this.redirectToAfterSignIn({ replace: true });\n        return true;\n      }\n    }\n    return false;\n  }\n  async _signOut(session) {\n    await this._interface.signOut(session);\n    await this.redirectToAfterSignOut();\n  }\n  async _sendVerificationEmail(email, session) {\n    const emailVerificationRedirectUrl = (0,_utils_url__WEBPACK_IMPORTED_MODULE_23__.constructRedirectUrl)(this.urls.emailVerification);\n    return await this._interface.sendVerificationEmail(email, emailVerificationRedirectUrl, session);\n  }\n  async _updatePassword(options, session) {\n    return await this._interface.updatePassword(options, session);\n  }\n  async signOut() {\n    const user = await this.getUser();\n    if (user) {\n      await user.signOut();\n    }\n  }\n  async getProject() {\n    const crud = await this._currentProjectCache.getOrWait([], \"write-only\");\n    return this._clientProjectFromCrud(crud);\n  }\n  useProject() {\n    const crud = useAsyncCache(this._currentProjectCache, [], \"useProject()\");\n    return (0,react__WEBPACK_IMPORTED_MODULE_20__.useMemo)(() => this._clientProjectFromCrud(crud), [crud]);\n  }\n  async _listOwnedProjects(session) {\n    this._ensureInternalProject();\n    const crud = await this._ownedProjectsCache.getOrWait([session], \"write-only\");\n    return crud.map((j) => this._getOwnedAdminApp(j.id, session)._adminOwnedProjectFromCrud(\n      j,\n      () => this._refreshOwnedProjects(session)\n    ));\n  }\n  _useOwnedProjects(session) {\n    this._ensureInternalProject();\n    const projects = useAsyncCache(this._ownedProjectsCache, [session], \"useOwnedProjects()\");\n    return (0,react__WEBPACK_IMPORTED_MODULE_20__.useMemo)(() => projects.map((j) => this._getOwnedAdminApp(j.id, session)._adminOwnedProjectFromCrud(\n      j,\n      () => this._refreshOwnedProjects(session)\n    )), [projects]);\n  }\n  async _createProject(session, newProject) {\n    this._ensureInternalProject();\n    const crud = await this._interface.createProject(adminProjectCreateOptionsToCrud(newProject), session);\n    const res = this._getOwnedAdminApp(crud.id, session)._adminOwnedProjectFromCrud(\n      crud,\n      () => this._refreshOwnedProjects(session)\n    );\n    await this._refreshOwnedProjects(session);\n    return res;\n  }\n  async _refreshUser(session) {\n    await this._refreshSession(session);\n  }\n  async _refreshSession(session) {\n    await this._currentUserCache.refresh([session]);\n  }\n  async _refreshUsers() {\n  }\n  async _refreshProject() {\n    await this._currentProjectCache.refresh([]);\n  }\n  async _refreshOwnedProjects(session) {\n    await this._ownedProjectsCache.refresh([session]);\n  }\n  static get [stackAppInternalsSymbol]() {\n    return {\n      fromClientJson: (json) => {\n        const providedCheckString = JSON.stringify((0,_stackframe_stack_shared_dist_utils_objects__WEBPACK_IMPORTED_MODULE_10__.omit)(json, [\n          /* none currently */\n        ]));\n        const existing = allClientApps.get(json.uniqueIdentifier);\n        if (existing) {\n          const [existingCheckString, clientApp] = existing;\n          if (existingCheckString !== providedCheckString) {\n            throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_8__.StackAssertionError(\"The provided app JSON does not match the configuration of the existing client app with the same unique identifier\", { providedObj: json, existingString: existingCheckString });\n          }\n          return clientApp;\n        }\n        return new __StackClientAppImpl({\n          ...json,\n          checkString: providedCheckString\n        });\n      }\n    };\n  }\n  get [stackAppInternalsSymbol]() {\n    return {\n      toClientJson: () => {\n        if (!(\"publishableClientKey\" in this._interface.options)) {\n          throw Error(\"Cannot serialize to JSON from an application without a publishable client key\");\n        }\n        return {\n          baseUrl: this._interface.options.baseUrl,\n          projectId: this.projectId,\n          publishableClientKey: this._interface.options.publishableClientKey,\n          tokenStore: this._tokenStoreInit,\n          urls: this._urlOptions,\n          oauthScopesOnSignIn: this._oauthScopesOnSignIn,\n          uniqueIdentifier: this._getUniqueIdentifier()\n        };\n      },\n      setCurrentUser: (userJsonPromise) => {\n        (0,_stackframe_stack_shared_dist_utils_promises__WEBPACK_IMPORTED_MODULE_11__.runAsynchronously)(this._currentUserCache.forceSetCachedValueAsync([this._getSession()], userJsonPromise));\n      }\n    };\n  }\n};\nvar _StackServerAppImpl = class extends _StackClientAppImpl {\n  constructor(options) {\n    super(\"interface\" in options ? {\n      interface: options.interface,\n      tokenStore: options.tokenStore,\n      urls: options.urls,\n      oauthScopesOnSignIn: options.oauthScopesOnSignIn\n    } : {\n      interface: new _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_1__.StackServerInterface({\n        baseUrl: options.baseUrl ?? getDefaultBaseUrl(),\n        projectId: options.projectId ?? getDefaultProjectId(),\n        clientVersion,\n        publishableClientKey: options.publishableClientKey ?? getDefaultPublishableClientKey(),\n        secretServerKey: options.secretServerKey ?? getDefaultSecretServerKey()\n      }),\n      tokenStore: options.tokenStore,\n      urls: options.urls ?? {},\n      oauthScopesOnSignIn: options.oauthScopesOnSignIn ?? {}\n    });\n    // TODO override the client user cache to use the server user cache, so we save some requests\n    this._currentServerUserCache = createCacheBySession(async (session) => {\n      return await this._interface.getServerUserByToken(session);\n    });\n    this._serverUsersCache = createCache(async () => {\n      return await this._interface.listServerUsers();\n    });\n    this._serverUserCache = createCache(async ([userId]) => {\n      const user = await this._interface.getServerUserById(userId);\n      return _stackframe_stack_shared_dist_utils_results__WEBPACK_IMPORTED_MODULE_13__.Result.or(user, null);\n    });\n    this._serverTeamsCache = createCache(async ([userId]) => {\n      return await this._interface.listServerTeams({ userId });\n    });\n    this._serverTeamUserPermissionsCache = createCache(async ([teamId, userId, recursive]) => {\n      return await this._interface.listServerTeamPermissions({ teamId, userId, recursive }, null);\n    });\n    this._serverUserOAuthConnectionAccessTokensCache = createCache(\n      async ([userId, providerId, scope]) => {\n        try {\n          const result = await this._interface.createServerProviderAccessToken(userId, providerId, scope || \"\");\n          return { accessToken: result.access_token };\n        } catch (err) {\n          if (!(err instanceof _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.OAuthConnectionDoesNotHaveRequiredScope || err instanceof _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.OAuthConnectionNotConnectedToUser)) {\n            throw err;\n          }\n        }\n        return null;\n      }\n    );\n    this._serverUserOAuthConnectionCache = createCache(\n      async ([userId, providerId, scope, redirect]) => {\n        return await this._getUserOAuthConnectionCacheFn({\n          getUser: async () => await this._serverUserCache.getOrWait([userId], \"write-only\"),\n          getOrWaitOAuthToken: async () => await this._serverUserOAuthConnectionAccessTokensCache.getOrWait([userId, providerId, scope || \"\"], \"write-only\"),\n          useOAuthToken: () => useAsyncCache(this._serverUserOAuthConnectionAccessTokensCache, [userId, providerId, scope || \"\"], \"user.useConnectedAccount()\"),\n          providerId,\n          scope,\n          redirect,\n          session: null\n        });\n      }\n    );\n    this._serverTeamMemberProfilesCache = createCache(\n      async ([teamId]) => {\n        return await this._interface.listServerTeamMemberProfiles({ teamId });\n      }\n    );\n    this._serverUserTeamProfileCache = createCache(\n      async ([teamId, userId]) => {\n        return await this._interface.getServerTeamMemberProfile({ teamId, userId });\n      }\n    );\n  }\n  async _updateServerUser(userId, update) {\n    const result = await this._interface.updateServerUser(userId, serverUserUpdateOptionsToCrud(update));\n    await this._refreshUsers();\n    return result;\n  }\n  _serverEditableTeamProfileFromCrud(crud) {\n    const app = this;\n    const clientProfile = this._editableTeamProfileFromCrud(crud);\n    return {\n      ...clientProfile,\n      async update(update) {\n        await clientProfile.update(update);\n        await app._serverUserTeamProfileCache.refresh([crud.team_id, crud.user_id]);\n      }\n    };\n  }\n  _serverUserFromCrud(crud) {\n    const app = this;\n    async function getConnectedAccount(id, options) {\n      const scopeString = options?.scopes?.join(\" \");\n      return await app._serverUserOAuthConnectionCache.getOrWait([crud.id, id, scopeString || \"\", options?.or === \"redirect\"], \"write-only\");\n    }\n    function useConnectedAccount(id, options) {\n      const scopeString = options?.scopes?.join(\" \");\n      return useAsyncCache(app._serverUserOAuthConnectionCache, [crud.id, id, scopeString || \"\", options?.or === \"redirect\"], \"user.useConnectedAccount()\");\n    }\n    return {\n      ...super._createBaseUser(crud),\n      lastActiveAt: new Date(crud.last_active_at_millis),\n      serverMetadata: crud.server_metadata,\n      async setPrimaryEmail(email, options) {\n        await app._updateServerUser(crud.id, { primaryEmail: email, primaryEmailVerified: options?.verified });\n      },\n      async grantPermission(scope, permissionId) {\n        await app._interface.grantServerTeamUserPermission(scope.id, crud.id, permissionId);\n        for (const recursive of [true, false]) {\n          await app._serverTeamUserPermissionsCache.refresh([scope.id, crud.id, recursive]);\n        }\n      },\n      async revokePermission(scope, permissionId) {\n        await app._interface.revokeServerTeamUserPermission(scope.id, crud.id, permissionId);\n        for (const recursive of [true, false]) {\n          await app._serverTeamUserPermissionsCache.refresh([scope.id, crud.id, recursive]);\n        }\n      },\n      async delete() {\n        const res = await app._interface.deleteServerServerUser(crud.id);\n        await app._refreshUsers();\n        return res;\n      },\n      async createSession(options) {\n        const tokens = await app._interface.createServerUserSession(crud.id, options.expiresInMillis ?? 1e3 * 60 * 60 * 24 * 365);\n        return {\n          async getTokens() {\n            return tokens;\n          }\n        };\n      },\n      async setDisplayName(displayName) {\n        return await this.update({ displayName });\n      },\n      async setClientMetadata(metadata) {\n        return await this.update({ clientMetadata: metadata });\n      },\n      async setClientReadOnlyMetadata(metadata) {\n        return await this.update({ clientReadOnlyMetadata: metadata });\n      },\n      async setServerMetadata(metadata) {\n        return await this.update({ serverMetadata: metadata });\n      },\n      async setSelectedTeam(team) {\n        return await this.update({ selectedTeamId: team?.id ?? null });\n      },\n      getConnectedAccount,\n      useConnectedAccount,\n      async getTeam(teamId) {\n        const teams = await this.listTeams();\n        return teams.find((t) => t.id === teamId) ?? null;\n      },\n      useTeam(teamId) {\n        const teams = this.useTeams();\n        return (0,react__WEBPACK_IMPORTED_MODULE_20__.useMemo)(() => {\n          return teams.find((t) => t.id === teamId) ?? null;\n        }, [teams, teamId]);\n      },\n      async listTeams() {\n        const teams = await app._serverTeamsCache.getOrWait([crud.id], \"write-only\");\n        return teams.map((t) => app._serverTeamFromCrud(t));\n      },\n      useTeams() {\n        const teams = useAsyncCache(app._serverTeamsCache, [crud.id], \"user.useTeams()\");\n        return (0,react__WEBPACK_IMPORTED_MODULE_20__.useMemo)(() => teams.map((t) => app._serverTeamFromCrud(t)), [teams]);\n      },\n      createTeam: async (data) => {\n        const team = await app._interface.createServerTeam(serverTeamCreateOptionsToCrud(data), app._getSession());\n        await app._serverTeamsCache.refresh([void 0]);\n        return app._serverTeamFromCrud(team);\n      },\n      leaveTeam: async (team) => {\n        await app._interface.leaveServerTeam({ teamId: team.id, userId: crud.id });\n      },\n      async listPermissions(scope, options) {\n        const recursive = options?.recursive ?? true;\n        const permissions = await app._serverTeamUserPermissionsCache.getOrWait([scope.id, crud.id, recursive], \"write-only\");\n        return permissions.map((crud2) => app._serverPermissionFromCrud(crud2));\n      },\n      usePermissions(scope, options) {\n        const recursive = options?.recursive ?? true;\n        const permissions = useAsyncCache(app._serverTeamUserPermissionsCache, [scope.id, crud.id, recursive], \"user.usePermissions()\");\n        return (0,react__WEBPACK_IMPORTED_MODULE_20__.useMemo)(() => permissions.map((crud2) => app._serverPermissionFromCrud(crud2)), [permissions]);\n      },\n      async getPermission(scope, permissionId) {\n        const permissions = await this.listPermissions(scope);\n        return permissions.find((p) => p.id === permissionId) ?? null;\n      },\n      usePermission(scope, permissionId) {\n        const permissions = this.usePermissions(scope);\n        return (0,react__WEBPACK_IMPORTED_MODULE_20__.useMemo)(() => permissions.find((p) => p.id === permissionId) ?? null, [permissions, permissionId]);\n      },\n      async hasPermission(scope, permissionId) {\n        return await this.getPermission(scope, permissionId) !== null;\n      },\n      async update(update) {\n        await app._updateServerUser(crud.id, update);\n      },\n      async sendVerificationEmail() {\n        return await app._checkFeatureSupport(\"sendVerificationEmail() on ServerUser\", {});\n      },\n      async updatePassword(options) {\n        return await app._checkFeatureSupport(\"updatePassword() on ServerUser\", {});\n      },\n      async getTeamProfile(team) {\n        const result = await app._serverUserTeamProfileCache.getOrWait([team.id, crud.id], \"write-only\");\n        return app._serverEditableTeamProfileFromCrud(result);\n      },\n      useTeamProfile(team) {\n        const result = useAsyncCache(app._serverUserTeamProfileCache, [team.id, crud.id], \"user.useTeamProfile()\");\n        return (0,react__WEBPACK_IMPORTED_MODULE_20__.useMemo)(() => app._serverEditableTeamProfileFromCrud(result), [result]);\n      }\n    };\n  }\n  _serverTeamUserFromCrud(crud) {\n    return {\n      ...this._serverUserFromCrud(crud.user),\n      teamProfile: {\n        displayName: crud.display_name,\n        profileImageUrl: crud.profile_image_url\n      }\n    };\n  }\n  _currentUserFromCrud(crud, session) {\n    const app = this;\n    const currentUser = {\n      ...this._serverUserFromCrud(crud),\n      ...this._createAuth(session),\n      ...this._isInternalProject() ? this._createInternalUserExtra(session) : {}\n    };\n    Object.freeze(currentUser);\n    return currentUser;\n  }\n  _serverTeamFromCrud(crud) {\n    const app = this;\n    return {\n      id: crud.id,\n      displayName: crud.display_name,\n      profileImageUrl: crud.profile_image_url,\n      createdAt: new Date(crud.created_at_millis),\n      async update(update) {\n        await app._interface.updateServerTeam(crud.id, serverTeamUpdateOptionsToCrud(update));\n        await app._serverTeamsCache.refresh([void 0]);\n      },\n      async delete() {\n        await app._interface.deleteServerTeam(crud.id);\n        await app._serverTeamsCache.refresh([void 0]);\n      },\n      async listUsers() {\n        const result = await app._serverTeamMemberProfilesCache.getOrWait([crud.id], \"write-only\");\n        return result.map((u) => app._serverTeamUserFromCrud(u));\n      },\n      useUsers() {\n        const result = useAsyncCache(app._serverTeamMemberProfilesCache, [crud.id], \"team.useUsers()\");\n        return (0,react__WEBPACK_IMPORTED_MODULE_20__.useMemo)(() => result.map((u) => app._serverTeamUserFromCrud(u)), [result]);\n      },\n      async addUser(userId) {\n        await app._interface.addServerUserToTeam({\n          teamId: crud.id,\n          userId\n        });\n        await app._serverTeamMemberProfilesCache.refresh([crud.id]);\n      },\n      async removeUser(userId) {\n        await app._interface.removeServerUserFromTeam({\n          teamId: crud.id,\n          userId\n        });\n        await app._serverTeamMemberProfilesCache.refresh([crud.id]);\n      },\n      async inviteUser(options) {\n        return await app._interface.sendTeamInvitation({\n          teamId: crud.id,\n          email: options.email,\n          session: null,\n          callbackUrl: (0,_utils_url__WEBPACK_IMPORTED_MODULE_23__.constructRedirectUrl)(app.urls.teamInvitation)\n        });\n      }\n    };\n  }\n  async createUser(options) {\n    const crud = await this._interface.createServerUser(serverUserCreateOptionsToCrud(options));\n    await this._refreshUsers();\n    return this._serverUserFromCrud(crud);\n  }\n  async getUser(options) {\n    if (typeof options === \"string\") {\n      const allUsers = await this.listUsers();\n      return allUsers.find((u) => u.id === options) ?? null;\n    } else {\n      this._ensurePersistentTokenStore(options?.tokenStore);\n      const session = this._getSession(options?.tokenStore);\n      const crud = await this._currentServerUserCache.getOrWait([session], \"write-only\");\n      if (crud === null) {\n        switch (options?.or) {\n          case \"redirect\": {\n            await this.redirectToSignIn({ replace: true });\n            break;\n          }\n          case \"throw\": {\n            throw new Error(\"User is not signed in but getUser was called with { or: 'throw' }\");\n          }\n          default: {\n            return null;\n          }\n        }\n      }\n      return crud && this._currentUserFromCrud(crud, session);\n    }\n  }\n  async getServerUser() {\n    console.warn(\"stackServerApp.getServerUser is deprecated; use stackServerApp.getUser instead\");\n    return await this.getUser();\n  }\n  async getServerUserById(userId) {\n    const crud = await this._serverUserCache.getOrWait([userId], \"write-only\");\n    return crud && this._serverUserFromCrud(crud);\n  }\n  useUser(options) {\n    if (typeof options === \"string\") {\n      const users = this.useUsers();\n      return users.find((u) => u.id === options) ?? null;\n    } else {\n      this._ensurePersistentTokenStore(options?.tokenStore);\n      const router = NextNavigation.useRouter();\n      const session = this._getSession(options?.tokenStore);\n      const crud = useAsyncCache(this._currentServerUserCache, [session], \"useUser()\");\n      if (crud === null) {\n        switch (options?.or) {\n          case \"redirect\": {\n            (0,_stackframe_stack_shared_dist_utils_promises__WEBPACK_IMPORTED_MODULE_11__.runAsynchronously)(this.redirectToSignIn({ replace: true }));\n            (0,_stackframe_stack_shared_dist_utils_react__WEBPACK_IMPORTED_MODULE_12__.suspend)();\n            throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_8__.StackAssertionError(\"suspend should never return\");\n          }\n          case \"throw\": {\n            throw new Error(\"User is not signed in but useUser was called with { or: 'throw' }\");\n          }\n          case void 0:\n          case \"return-null\": {\n          }\n        }\n      }\n      return (0,react__WEBPACK_IMPORTED_MODULE_20__.useMemo)(() => {\n        return crud && this._currentUserFromCrud(crud, session);\n      }, [crud, session, options?.or]);\n    }\n  }\n  useUserById(userId) {\n    const crud = useAsyncCache(this._serverUserCache, [userId], \"useUserById()\");\n    return (0,react__WEBPACK_IMPORTED_MODULE_20__.useMemo)(() => {\n      return crud && this._serverUserFromCrud(crud);\n    }, [crud]);\n  }\n  async listUsers() {\n    const crud = await this._serverUsersCache.getOrWait([], \"write-only\");\n    return crud.map((j) => this._serverUserFromCrud(j));\n  }\n  useUsers() {\n    const crud = useAsyncCache(this._serverUsersCache, [], \"useServerUsers()\");\n    return (0,react__WEBPACK_IMPORTED_MODULE_20__.useMemo)(() => {\n      return crud.map((j) => this._serverUserFromCrud(j));\n    }, [crud]);\n  }\n  _serverPermissionFromCrud(crud) {\n    return {\n      id: crud.id\n    };\n  }\n  _serverTeamPermissionDefinitionFromCrud(crud) {\n    return {\n      id: crud.id,\n      description: crud.description,\n      containedPermissionIds: crud.contained_permission_ids\n    };\n  }\n  async listTeams() {\n    const teams = await this._serverTeamsCache.getOrWait([void 0], \"write-only\");\n    return teams.map((t) => this._serverTeamFromCrud(t));\n  }\n  async createTeam(data) {\n    const team = await this._interface.createServerTeam(serverTeamCreateOptionsToCrud(data));\n    await this._serverTeamsCache.refresh([void 0]);\n    return this._serverTeamFromCrud(team);\n  }\n  useTeams() {\n    const teams = useAsyncCache(this._serverTeamsCache, [void 0], \"useServerTeams()\");\n    return (0,react__WEBPACK_IMPORTED_MODULE_20__.useMemo)(() => {\n      return teams.map((t) => this._serverTeamFromCrud(t));\n    }, [teams]);\n  }\n  async getTeam(teamId) {\n    const teams = await this.listTeams();\n    return teams.find((t) => t.id === teamId) ?? null;\n  }\n  useTeam(teamId) {\n    const teams = this.useTeams();\n    return (0,react__WEBPACK_IMPORTED_MODULE_20__.useMemo)(() => {\n      return teams.find((t) => t.id === teamId) ?? null;\n    }, [teams, teamId]);\n  }\n  async _refreshSession(session) {\n    await Promise.all([\n      super._refreshUser(session),\n      this._currentServerUserCache.refresh([session])\n    ]);\n  }\n  async _refreshUsers() {\n    await Promise.all([\n      super._refreshUsers(),\n      this._serverUsersCache.refresh([])\n    ]);\n  }\n};\nvar _StackAdminAppImpl = class extends _StackServerAppImpl {\n  constructor(options) {\n    super({\n      interface: new _stackframe_stack_shared__WEBPACK_IMPORTED_MODULE_1__.StackAdminInterface({\n        baseUrl: options.baseUrl ?? getDefaultBaseUrl(),\n        projectId: options.projectId ?? getDefaultProjectId(),\n        clientVersion,\n        ...\"projectOwnerSession\" in options ? {\n          projectOwnerSession: options.projectOwnerSession\n        } : {\n          publishableClientKey: options.publishableClientKey ?? getDefaultPublishableClientKey(),\n          secretServerKey: options.secretServerKey ?? getDefaultSecretServerKey(),\n          superSecretAdminKey: options.superSecretAdminKey ?? getDefaultSuperSecretAdminKey()\n        }\n      }),\n      tokenStore: options.tokenStore,\n      urls: options.urls,\n      oauthScopesOnSignIn: options.oauthScopesOnSignIn\n    });\n    this._adminProjectCache = createCache(async () => {\n      return await this._interface.getProject();\n    });\n    this._apiKeysCache = createCache(async () => {\n      return await this._interface.listApiKeys();\n    });\n    this._adminEmailTemplatesCache = createCache(async () => {\n      return await this._interface.listEmailTemplates();\n    });\n    this._adminTeamPermissionDefinitionsCache = createCache(async () => {\n      return await this._interface.listPermissionDefinitions();\n    });\n    this._svixTokenCache = createCache(async () => {\n      return await this._interface.getSvixToken();\n    });\n  }\n  _adminOwnedProjectFromCrud(data, onRefresh) {\n    if (this._tokenStoreInit !== null) {\n      throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_8__.StackAssertionError(\"Owned apps must always have tokenStore === null \\u2014 did you not create this project with app._createOwnedApp()?\");\n      ;\n    }\n    return {\n      ...this._adminProjectFromCrud(data, onRefresh),\n      app: this\n    };\n  }\n  _adminProjectFromCrud(data, onRefresh) {\n    if (data.id !== this.projectId) {\n      throw new _stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_8__.StackAssertionError(`The project ID of the provided project JSON (${data.id}) does not match the project ID of the app (${this.projectId})!`);\n    }\n    const app = this;\n    return {\n      id: data.id,\n      displayName: data.display_name,\n      description: data.description,\n      createdAt: new Date(data.created_at_millis),\n      userCount: data.user_count,\n      isProductionMode: data.is_production_mode,\n      config: {\n        id: data.config.id,\n        signUpEnabled: data.config.sign_up_enabled,\n        credentialEnabled: data.config.credential_enabled,\n        magicLinkEnabled: data.config.magic_link_enabled,\n        clientTeamCreationEnabled: data.config.client_team_creation_enabled,\n        clientUserDeletionEnabled: data.config.client_user_deletion_enabled,\n        allowLocalhost: data.config.allow_localhost,\n        oauthProviders: data.config.oauth_providers.map((p) => p.type === \"shared\" ? {\n          id: p.id,\n          enabled: p.enabled,\n          type: \"shared\"\n        } : {\n          id: p.id,\n          enabled: p.enabled,\n          type: \"standard\",\n          clientId: p.client_id ?? (0,_stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_8__.throwErr)(\"Client ID is missing\"),\n          clientSecret: p.client_secret ?? (0,_stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_8__.throwErr)(\"Client secret is missing\"),\n          facebookConfigId: p.facebook_config_id,\n          microsoftTenantId: p.microsoft_tenant_id\n        }),\n        emailConfig: data.config.email_config.type === \"shared\" ? {\n          type: \"shared\"\n        } : {\n          type: \"standard\",\n          host: data.config.email_config.host ?? (0,_stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_8__.throwErr)(\"Email host is missing\"),\n          port: data.config.email_config.port ?? (0,_stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_8__.throwErr)(\"Email port is missing\"),\n          username: data.config.email_config.username ?? (0,_stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_8__.throwErr)(\"Email username is missing\"),\n          password: data.config.email_config.password ?? (0,_stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_8__.throwErr)(\"Email password is missing\"),\n          senderName: data.config.email_config.sender_name ?? (0,_stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_8__.throwErr)(\"Email sender name is missing\"),\n          senderEmail: data.config.email_config.sender_email ?? (0,_stackframe_stack_shared_dist_utils_errors__WEBPACK_IMPORTED_MODULE_8__.throwErr)(\"Email sender email is missing\")\n        },\n        domains: data.config.domains.map((d) => ({\n          domain: d.domain,\n          handlerPath: d.handler_path\n        })),\n        createTeamOnSignUp: data.config.create_team_on_sign_up,\n        teamCreatorDefaultPermissions: data.config.team_creator_default_permissions,\n        teamMemberDefaultPermissions: data.config.team_member_default_permissions\n      },\n      async update(update) {\n        await app._interface.updateProject(adminProjectUpdateOptionsToCrud(update));\n        await onRefresh();\n      },\n      async delete() {\n        await app._interface.deleteProject();\n      },\n      async getProductionModeErrors() {\n        return (0,_stackframe_stack_shared_dist_helpers_production_mode__WEBPACK_IMPORTED_MODULE_2__.getProductionModeErrors)(data);\n      },\n      useProductionModeErrors() {\n        return (0,_stackframe_stack_shared_dist_helpers_production_mode__WEBPACK_IMPORTED_MODULE_2__.getProductionModeErrors)(data);\n      }\n    };\n  }\n  _adminEmailTemplateFromCrud(data) {\n    return {\n      type: data.type,\n      subject: data.subject,\n      content: data.content,\n      isDefault: data.is_default\n    };\n  }\n  async getProject() {\n    return this._adminProjectFromCrud(\n      await this._adminProjectCache.getOrWait([], \"write-only\"),\n      () => this._refreshProject()\n    );\n  }\n  useProject() {\n    const crud = useAsyncCache(this._adminProjectCache, [], \"useProjectAdmin()\");\n    return (0,react__WEBPACK_IMPORTED_MODULE_20__.useMemo)(() => this._adminProjectFromCrud(\n      crud,\n      () => this._refreshProject()\n    ), [crud]);\n  }\n  _createApiKeyBaseFromCrud(data) {\n    const app = this;\n    return {\n      id: data.id,\n      description: data.description,\n      expiresAt: new Date(data.expires_at_millis),\n      manuallyRevokedAt: data.manually_revoked_at_millis ? new Date(data.manually_revoked_at_millis) : null,\n      createdAt: new Date(data.created_at_millis),\n      isValid() {\n        return this.whyInvalid() === null;\n      },\n      whyInvalid() {\n        if (this.expiresAt.getTime() < Date.now()) return \"expired\";\n        if (this.manuallyRevokedAt) return \"manually-revoked\";\n        return null;\n      },\n      async revoke() {\n        const res = await app._interface.revokeApiKeyById(data.id);\n        await app._refreshApiKeys();\n        return res;\n      }\n    };\n  }\n  _createApiKeyFromCrud(data) {\n    return {\n      ...this._createApiKeyBaseFromCrud(data),\n      publishableClientKey: data.publishable_client_key ? { lastFour: data.publishable_client_key.last_four } : null,\n      secretServerKey: data.secret_server_key ? { lastFour: data.secret_server_key.last_four } : null,\n      superSecretAdminKey: data.super_secret_admin_key ? { lastFour: data.super_secret_admin_key.last_four } : null\n    };\n  }\n  _createApiKeyFirstViewFromCrud(data) {\n    return {\n      ...this._createApiKeyBaseFromCrud(data),\n      publishableClientKey: data.publishable_client_key,\n      secretServerKey: data.secret_server_key,\n      superSecretAdminKey: data.super_secret_admin_key\n    };\n  }\n  async listApiKeys() {\n    const crud = await this._apiKeysCache.getOrWait([], \"write-only\");\n    return crud.map((j) => this._createApiKeyFromCrud(j));\n  }\n  useApiKeys() {\n    const crud = useAsyncCache(this._apiKeysCache, [], \"useApiKeys()\");\n    return (0,react__WEBPACK_IMPORTED_MODULE_20__.useMemo)(() => {\n      return crud.map((j) => this._createApiKeyFromCrud(j));\n    }, [crud]);\n  }\n  async createApiKey(options) {\n    const crud = await this._interface.createApiKey(apiKeyCreateOptionsToCrud(options));\n    await this._refreshApiKeys();\n    return this._createApiKeyFirstViewFromCrud(crud);\n  }\n  useEmailTemplates() {\n    const crud = useAsyncCache(this._adminEmailTemplatesCache, [], \"useEmailTemplates()\");\n    return (0,react__WEBPACK_IMPORTED_MODULE_20__.useMemo)(() => {\n      return crud.map((j) => this._adminEmailTemplateFromCrud(j));\n    }, [crud]);\n  }\n  async listEmailTemplates() {\n    const crud = await this._adminEmailTemplatesCache.getOrWait([], \"write-only\");\n    return crud.map((j) => this._adminEmailTemplateFromCrud(j));\n  }\n  async updateEmailTemplate(type, data) {\n    await this._interface.updateEmailTemplate(type, adminEmailTemplateUpdateOptionsToCrud(data));\n    await this._adminEmailTemplatesCache.refresh([]);\n  }\n  async resetEmailTemplate(type) {\n    await this._interface.resetEmailTemplate(type);\n    await this._adminEmailTemplatesCache.refresh([]);\n  }\n  async createTeamPermissionDefinition(data) {\n    const crud = await this._interface.createPermissionDefinition(serverTeamPermissionDefinitionCreateOptionsToCrud(data));\n    await this._adminTeamPermissionDefinitionsCache.refresh([]);\n    return this._serverTeamPermissionDefinitionFromCrud(crud);\n  }\n  async updateTeamPermissionDefinition(permissionId, data) {\n    await this._interface.updatePermissionDefinition(permissionId, serverTeamPermissionDefinitionUpdateOptionsToCrud(data));\n    await this._adminTeamPermissionDefinitionsCache.refresh([]);\n  }\n  async deleteTeamPermissionDefinition(permissionId) {\n    await this._interface.deletePermissionDefinition(permissionId);\n    await this._adminTeamPermissionDefinitionsCache.refresh([]);\n  }\n  async listTeamPermissionDefinitions() {\n    const crud = await this._adminTeamPermissionDefinitionsCache.getOrWait([], \"write-only\");\n    return crud.map((p) => this._serverTeamPermissionDefinitionFromCrud(p));\n  }\n  useTeamPermissionDefinitions() {\n    const crud = useAsyncCache(this._adminTeamPermissionDefinitionsCache, [], \"usePermissions()\");\n    return (0,react__WEBPACK_IMPORTED_MODULE_20__.useMemo)(() => {\n      return crud.map((p) => this._serverTeamPermissionDefinitionFromCrud(p));\n    }, [crud]);\n  }\n  useSvixToken() {\n    const crud = useAsyncCache(this._svixTokenCache, [], \"useSvixToken()\");\n    return crud.token;\n  }\n  async _refreshProject() {\n    await Promise.all([\n      super._refreshProject(),\n      this._adminProjectCache.refresh([])\n    ]);\n  }\n  async _refreshApiKeys() {\n    await this._apiKeysCache.refresh([]);\n  }\n};\nfunction userUpdateOptionsToCrud(options) {\n  return {\n    display_name: options.displayName,\n    client_metadata: options.clientMetadata,\n    selected_team_id: options.selectedTeamId,\n    totp_secret_base64: options.totpMultiFactorSecret != null ? (0,_stackframe_stack_shared_dist_utils_bytes__WEBPACK_IMPORTED_MODULE_4__.encodeBase64)(options.totpMultiFactorSecret) : options.totpMultiFactorSecret,\n    profile_image_url: options.profileImageUrl\n  };\n}\nfunction serverUserUpdateOptionsToCrud(options) {\n  return {\n    display_name: options.displayName,\n    primary_email: options.primaryEmail,\n    client_metadata: options.clientMetadata,\n    client_read_only_metadata: options.clientReadOnlyMetadata,\n    server_metadata: options.serverMetadata,\n    selected_team_id: options.selectedTeamId,\n    primary_email_auth_enabled: options.primaryEmailAuthEnabled,\n    primary_email_verified: options.primaryEmailVerified,\n    password: options.password,\n    profile_image_url: options.profileImageUrl,\n    totp_secret_base64: options.totpMultiFactorSecret != null ? (0,_stackframe_stack_shared_dist_utils_bytes__WEBPACK_IMPORTED_MODULE_4__.encodeBase64)(options.totpMultiFactorSecret) : options.totpMultiFactorSecret\n  };\n}\nfunction serverUserCreateOptionsToCrud(options) {\n  return {\n    primary_email: options.primaryEmail,\n    password: options.password,\n    primary_email_auth_enabled: true,\n    display_name: options.displayName,\n    primary_email_verified: options.primaryEmailVerified\n  };\n}\nfunction adminProjectUpdateOptionsToCrud(options) {\n  return {\n    display_name: options.displayName,\n    description: options.description,\n    is_production_mode: options.isProductionMode,\n    config: {\n      domains: options.config?.domains?.map((d) => ({\n        domain: d.domain,\n        handler_path: d.handlerPath\n      })),\n      oauth_providers: options.config?.oauthProviders?.map((p) => ({\n        id: p.id,\n        enabled: p.enabled,\n        type: p.type,\n        ...p.type === \"standard\" && {\n          client_id: p.clientId,\n          client_secret: p.clientSecret,\n          facebook_config_id: p.facebookConfigId,\n          microsoft_tenant_id: p.microsoftTenantId\n        }\n      })),\n      email_config: options.config?.emailConfig && (options.config.emailConfig.type === \"shared\" ? {\n        type: \"shared\"\n      } : {\n        type: \"standard\",\n        host: options.config.emailConfig.host,\n        port: options.config.emailConfig.port,\n        username: options.config.emailConfig.username,\n        password: options.config.emailConfig.password,\n        sender_name: options.config.emailConfig.senderName,\n        sender_email: options.config.emailConfig.senderEmail\n      }),\n      sign_up_enabled: options.config?.signUpEnabled,\n      credential_enabled: options.config?.credentialEnabled,\n      magic_link_enabled: options.config?.magicLinkEnabled,\n      allow_localhost: options.config?.allowLocalhost,\n      create_team_on_sign_up: options.config?.createTeamOnSignUp,\n      client_team_creation_enabled: options.config?.clientTeamCreationEnabled,\n      client_user_deletion_enabled: options.config?.clientUserDeletionEnabled,\n      team_creator_default_permissions: options.config?.teamCreatorDefaultPermissions,\n      team_member_default_permissions: options.config?.teamMemberDefaultPermissions\n    }\n  };\n}\nfunction adminProjectCreateOptionsToCrud(options) {\n  return {\n    ...adminProjectUpdateOptionsToCrud(options),\n    display_name: options.displayName\n  };\n}\nfunction apiKeyCreateOptionsToCrud(options) {\n  return {\n    description: options.description,\n    expires_at_millis: options.expiresAt.getTime(),\n    has_publishable_client_key: options.hasPublishableClientKey,\n    has_secret_server_key: options.hasSecretServerKey,\n    has_super_secret_admin_key: options.hasSuperSecretAdminKey\n  };\n}\nfunction teamUpdateOptionsToCrud(options) {\n  return {\n    display_name: options.displayName,\n    profile_image_url: options.profileImageUrl\n  };\n}\nfunction teamCreateOptionsToCrud(options) {\n  return {\n    display_name: options.displayName,\n    profile_image_url: options.profileImageUrl\n  };\n}\nfunction serverTeamCreateOptionsToCrud(options) {\n  return teamCreateOptionsToCrud(options);\n}\nfunction serverTeamUpdateOptionsToCrud(options) {\n  return {\n    display_name: options.displayName,\n    profile_image_url: options.profileImageUrl\n  };\n}\nfunction serverTeamPermissionDefinitionCreateOptionsToCrud(options) {\n  return {\n    id: options.id,\n    description: options.description,\n    contained_permission_ids: options.containedPermissionIds\n  };\n}\nfunction serverTeamPermissionDefinitionUpdateOptionsToCrud(options) {\n  return {\n    id: options.id,\n    description: options.description,\n    contained_permission_ids: options.containedPermissionIds\n  };\n}\nvar StackClientApp = _StackClientAppImpl;\nvar StackServerApp = _StackServerAppImpl;\nvar StackAdminApp = _StackAdminAppImpl;\nfunction adminEmailTemplateUpdateOptionsToCrud(options) {\n  return {\n    subject: options.subject,\n    content: options.content\n  };\n}\n\n//# sourceMappingURL=stack-app.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2svZGlzdC9lc20vbGliL3N0YWNrLWFwcC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDcUQ7QUFDK0U7QUFDcEM7QUFDdkI7QUFDQTtBQUNEO0FBQ3FCO0FBQ3JCO0FBQ21CO0FBQ2hCO0FBQzBCO0FBQ0E7QUFDbkI7QUFDYjtBQUNGO0FBQ2E7QUFDTztBQUNkO0FBQ3hDO0FBQzRCO0FBQ1Q7QUFDQTtBQUNvQztBQUNsQjtBQUN0RSxxQkFBcUIsMkdBQXlCLENBQUMsNkNBQXlCO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQSwwQkFBMEIsUUFBUTtBQUNsQyxzQkFBc0IsUUFBUTtBQUM5Qix1QkFBdUIsUUFBUTtBQUMvQixzQkFBc0IsUUFBUTtBQUM5QiwwQkFBMEIsUUFBUTtBQUNsQztBQUNBLHdCQUF3QixRQUFRO0FBQ2hDLGNBQWMsUUFBUTtBQUN0Qix1QkFBdUIsUUFBUTtBQUMvQixPQUFPLDZGQUFlO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLE1BQU0sK0RBQWE7QUFDbkI7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsVUFBVSxtRkFBSTtBQUNkO0FBQ0E7QUFDQTtBQUNBLFNBQVMsc0NBQXdDLElBQUksQ0FBMk87QUFDaFM7QUFDQTtBQUNBLFNBQVMsbURBQW9ELElBQUksQ0FBaVQ7QUFDbFg7QUFDQTtBQUNBLGdEQUFnRCxvRkFBUTtBQUN4RDtBQUNBO0FBQ0EscURBQXFELG9GQUFRO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsOEVBQUs7QUFDbEI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxFQUFFLHdGQUFZO0FBQ2QsYUFBYSxtREFBVztBQUN4QixvQkFBb0IsbURBQVc7QUFDL0IsWUFBWSxjQUFjO0FBQzFCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0gsc0JBQXNCLG1EQUFXO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILGtCQUFrQixrRUFBMEI7QUFDNUM7QUFDQTtBQUNBLFVBQVUsb0ZBQVE7QUFDbEI7QUFDQSxTQUFTLGlEQUFTO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxrRkFBVTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxrRkFBVTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IscUZBQWU7QUFDOUM7QUFDQTtBQUNBLGNBQWMsbUZBQUk7QUFDbEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGFBQWEsZ0ZBQU07QUFDbkIsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxvRUFBb0UsbUJBQW1CO0FBQ3ZGLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CLFVBQVU7QUFDViwrQkFBK0IsaUVBQVcsMkRBQTJELGlFQUFXO0FBQ2hIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOERBQThELFFBQVE7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsc0JBQXNCO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLDRCQUE0QiwwRUFBb0I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsS0FBc0MsaUJBQWlCLENBQVksZ0ZBQWdGLG9CQUFvQjtBQUNoTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxrRUFBMEI7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QiwrRkFBaUI7QUFDMUMsU0FBUztBQUNUO0FBQ0E7QUFDQSxtQkFBbUIsMkZBQVk7QUFDL0IsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMkZBQW1CO0FBQ3ZDO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDJGQUFtQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiwyRkFBbUI7QUFDbkM7QUFDQTtBQUNBLGdCQUFnQiwyRkFBbUI7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0Isd0ZBQVk7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUF1RCxrQkFBa0I7QUFDekU7QUFDQTtBQUNBLElBQUksZ0dBQWlCO0FBQ3JCLGNBQWMsMkZBQW1CLElBQUksTUFBTTtBQUMzQztBQUNBO0FBQ0EsNEJBQTRCLGVBQWU7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsc0ZBQWE7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixtREFBUyxrQ0FBa0MsbURBQVM7QUFDbEY7QUFDQSw2QkFBNkIsbURBQVM7QUFDdEMsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsOEVBQUs7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsNkZBQWU7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxVQUFVLDJEQUFpQixxREFBcUQsNEJBQTRCO0FBQzVHLFVBQVUsMkRBQWlCLG9IQUFvSCxzQkFBc0I7QUFDckssVUFBVSxzREFBWTtBQUN0QjtBQUNBLFVBQVU7QUFDVixlQUFlLHNGQUFhO0FBQzVCO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksc0ZBQWE7QUFDekI7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxnQ0FBZ0MsbURBQVMsa0NBQWtDLG1EQUFTO0FBQ3BGO0FBQ0EsK0JBQStCLG1EQUFTO0FBQ3hDLFdBQVc7QUFDWCw0QkFBNEIsOEVBQUs7QUFDakM7QUFDQTtBQUNBLGNBQWMsMkRBQWlCLHFEQUFxRCw0QkFBNEI7QUFDaEgsY0FBYywyREFBaUIsb0hBQW9ILHNCQUFzQjtBQUN6SyxjQUFjO0FBQ2Q7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2QsOERBQThELGdCQUFnQixLQUFLLFVBQVU7QUFDN0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLHlCQUF5QiwwQ0FBWTtBQUNyQywwQkFBMEIsOEVBQUs7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxVQUFVO0FBQ1YscUJBQXFCLDhFQUFLO0FBQzFCO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSwrQ0FBK0MsZUFBZTtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG1GQUFlO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsbURBQVc7QUFDakMsY0FBYyxjQUFjO0FBQzVCO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMLHdCQUF3QixtREFBVztBQUNuQyxXQUFXLGtFQUEwQjtBQUNyQztBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsMkZBQW1CLHlCQUF5Qiw0QkFBNEIsUUFBUTtBQUNoRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGlFQUFvQjtBQUMzQyxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSwwQ0FBMEMsc0RBQXNEO0FBQ2hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiwyRkFBbUI7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGFBQWE7QUFDMUMsT0FBTztBQUNQO0FBQ0EsNkJBQTZCLDBCQUEwQjtBQUN2RCxPQUFPO0FBQ1A7QUFDQSw0QkFBNEIsa0NBQWtDO0FBQzlELE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxlQUFlLCtDQUFPO0FBQ3RCO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLGVBQWUsK0NBQU87QUFDdEIsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsZUFBZSwrQ0FBTztBQUN0QixPQUFPO0FBQ1A7QUFDQTtBQUNBLGVBQWUsK0NBQU87QUFDdEIsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLG9CQUFvQiwyRkFBbUI7QUFDdkM7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscUZBQVU7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLEtBQUssZ0JBQWdCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxZQUFZO0FBQzdEO0FBQ0E7QUFDQTtBQUNBLFlBQVksK0RBQWE7QUFDekI7QUFDQSw0RUFBNEU7QUFDNUUsWUFBWTtBQUNaO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUixZQUFZLCtEQUFhO0FBQ3pCO0FBQ0EsNEVBQTRFO0FBQzVFLFlBQVk7QUFDWjtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWiw2REFBNkQsMEZBQWU7QUFDNUU7QUFDQSxnQkFBZ0IsMEZBQWU7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGlFQUFvQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxpRUFBb0I7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsYUFBYSxnRkFBTTtBQUNuQixNQUFNO0FBQ04sYUFBYSxnRkFBTTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGFBQWEsZ0ZBQU07QUFDbkIsTUFBTTtBQUNOLGFBQWEsZ0ZBQU07QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxhQUFhLGdGQUFNLE1BQU0sZ0RBQWdEO0FBQ3pFLE1BQU07QUFDTixhQUFhLGdGQUFNO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxlQUFlO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBLCtFQUErRSxhQUFhO0FBQzVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxnR0FBaUIseUJBQXlCLGVBQWU7QUFDbkUsVUFBVSxtRkFBTztBQUNqQixvQkFBb0IsMkZBQW1CO0FBQ3ZDO0FBQ0E7QUFDQSwrRUFBK0UsYUFBYTtBQUM1RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLCtDQUFPO0FBQ2xCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHVEQUFlO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGlFQUFXO0FBQzNCO0FBQ0E7QUFDQSxxQ0FBcUMsb0ZBQVE7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTix1QkFBdUIsaUVBQVc7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLE1BQU07QUFDTix1QkFBdUIsaUVBQVc7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsZ0VBQVU7QUFDdEM7QUFDQTtBQUNBLGtEQUFrRCxlQUFlO0FBQ2pFLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLGlFQUFvQjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsZ0VBQVU7QUFDdEM7QUFDQTtBQUNBLGtEQUFrRCxlQUFlO0FBQ2pFLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLE1BQU07QUFDTix1QkFBdUIsaUVBQVc7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsZ0VBQVU7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsZUFBZTtBQUN4RCxNQUFNO0FBQ04seUNBQXlDLGVBQWU7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIseURBQWlCO0FBQ3RDLE9BQU87QUFDUCxNQUFNO0FBQ04sdUJBQXVCLGlFQUFXO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsZUFBZTtBQUM1RTtBQUNBLFFBQVE7QUFDUiwyQ0FBMkMsZUFBZTtBQUMxRDtBQUNBLFFBQVE7QUFDUiwyQ0FBMkMsZUFBZTtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxpRUFBb0I7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsK0NBQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVywrQ0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxrRkFBSTtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsMkZBQW1CLHdIQUF3SCx3REFBd0Q7QUFDek47QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLFFBQVEsZ0dBQWlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04scUJBQXFCLDBFQUFvQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsOEJBQThCO0FBQzlCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhLGdGQUFNO0FBQ25CLEtBQUs7QUFDTDtBQUNBLHFEQUFxRCxRQUFRO0FBQzdELEtBQUs7QUFDTDtBQUNBLCtEQUErRCwyQkFBMkI7QUFDMUYsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CLFVBQVU7QUFDViwrQkFBK0IsaUVBQVcsMkRBQTJELGlFQUFXO0FBQ2hIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0VBQW9FLFFBQVE7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrRUFBa0UsZ0JBQWdCO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLDhEQUE4RDtBQUM3RyxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsbUNBQW1DLGFBQWE7QUFDaEQsT0FBTztBQUNQO0FBQ0EsbUNBQW1DLDBCQUEwQjtBQUM3RCxPQUFPO0FBQ1A7QUFDQSxtQ0FBbUMsa0NBQWtDO0FBQ3JFLE9BQU87QUFDUDtBQUNBLG1DQUFtQywwQkFBMEI7QUFDN0QsT0FBTztBQUNQO0FBQ0EsbUNBQW1DLGtDQUFrQztBQUNyRSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsZUFBZSwrQ0FBTztBQUN0QjtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxlQUFlLCtDQUFPO0FBQ3RCLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLCtDQUErQyxrQ0FBa0M7QUFDakYsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLGVBQWUsK0NBQU87QUFDdEIsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsZUFBZSwrQ0FBTztBQUN0QixPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EseUZBQXlGO0FBQ3pGLE9BQU87QUFDUDtBQUNBLGtGQUFrRjtBQUNsRixPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxlQUFlLCtDQUFPO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsZUFBZSwrQ0FBTztBQUN0QixPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixpRUFBb0I7QUFDM0MsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsZUFBZTtBQUN6RDtBQUNBO0FBQ0E7QUFDQSxpRkFBaUYsYUFBYTtBQUM5RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhEQUE4RDtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksZ0dBQWlCLHlCQUF5QixlQUFlO0FBQ3JFLFlBQVksbUZBQU87QUFDbkIsc0JBQXNCLDJGQUFtQjtBQUN6QztBQUNBO0FBQ0EsaUZBQWlGLGFBQWE7QUFDOUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSwrQ0FBTztBQUNwQjtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsK0NBQU87QUFDbEI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLCtDQUFPO0FBQ2xCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsK0NBQU87QUFDbEI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLCtDQUFPO0FBQ2xCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIseUVBQW1CO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsMkZBQW1CO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiwyRkFBbUIsaURBQWlELFFBQVEsOENBQThDLGVBQWU7QUFDeko7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxvRkFBUTtBQUMzQywyQ0FBMkMsb0ZBQVE7QUFDbkQ7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsaURBQWlELG9GQUFRO0FBQ3pELGlEQUFpRCxvRkFBUTtBQUN6RCx5REFBeUQsb0ZBQVE7QUFDakUseURBQXlELG9GQUFRO0FBQ2pFLDhEQUE4RCxvRkFBUTtBQUN0RSxnRUFBZ0Usb0ZBQVE7QUFDeEUsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxlQUFlLDhHQUF1QjtBQUN0QyxPQUFPO0FBQ1A7QUFDQSxlQUFlLDhHQUF1QjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsK0NBQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCxrREFBa0Q7QUFDOUcsa0RBQWtELDZDQUE2QztBQUMvRiwyREFBMkQsa0RBQWtEO0FBQzdHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVywrQ0FBTztBQUNsQjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVywrQ0FBTztBQUNsQjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVywrQ0FBTztBQUNsQjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0VBQWdFLHVGQUFZO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdFQUFnRSx1RkFBWTtBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tYXJrZXJwbEFJY2UvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2svZGlzdC9lc20vbGliL3N0YWNrLWFwcC5qcz82NTY3Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9saWIvc3RhY2stYXBwLnRzXG5pbXBvcnQgeyBpc1JlYWN0U2VydmVyIH0gZnJvbSBcIkBzdGFja2ZyYW1lL3N0YWNrLXNjXCI7XG5pbXBvcnQgeyBLbm93bkVycm9yLCBLbm93bkVycm9ycywgU3RhY2tBZG1pbkludGVyZmFjZSwgU3RhY2tDbGllbnRJbnRlcmZhY2UsIFN0YWNrU2VydmVySW50ZXJmYWNlIH0gZnJvbSBcIkBzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZFwiO1xuaW1wb3J0IHsgZ2V0UHJvZHVjdGlvbk1vZGVFcnJvcnMgfSBmcm9tIFwiQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvaGVscGVycy9wcm9kdWN0aW9uLW1vZGVcIjtcbmltcG9ydCB7IEludGVybmFsU2Vzc2lvbiB9IGZyb20gXCJAc3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9zZXNzaW9uc1wiO1xuaW1wb3J0IHsgZW5jb2RlQmFzZTY0IH0gZnJvbSBcIkBzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L3V0aWxzL2J5dGVzXCI7XG5pbXBvcnQgeyBBc3luY0NhY2hlIH0gZnJvbSBcIkBzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L3V0aWxzL2NhY2hlc1wiO1xuaW1wb3J0IHsgc2NyYW1ibGVEdXJpbmdDb21waWxlVGltZSB9IGZyb20gXCJAc3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9jb21waWxlLXRpbWVcIjtcbmltcG9ydCB7IGlzQnJvd3Nlckxpa2UgfSBmcm9tIFwiQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvZW52XCI7XG5pbXBvcnQgeyBTdGFja0Fzc2VydGlvbkVycm9yLCB0aHJvd0VyciB9IGZyb20gXCJAc3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9lcnJvcnNcIjtcbmltcG9ydCB7IERlcGVuZGVuY2llc01hcCB9IGZyb20gXCJAc3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9tYXBzXCI7XG5pbXBvcnQgeyBkZWVwUGxhaW5FcXVhbHMsIGZpbHRlclVuZGVmaW5lZCwgb21pdCB9IGZyb20gXCJAc3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9vYmplY3RzXCI7XG5pbXBvcnQgeyBuZXZlclJlc29sdmUsIHJ1bkFzeW5jaHJvbm91c2x5LCB3YWl0IH0gZnJvbSBcIkBzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L3V0aWxzL3Byb21pc2VzXCI7XG5pbXBvcnQgeyBzdXNwZW5kLCBzdXNwZW5kSWZTc3IgfSBmcm9tIFwiQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvcmVhY3RcIjtcbmltcG9ydCB7IFJlc3VsdCB9IGZyb20gXCJAc3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9yZXN1bHRzXCI7XG5pbXBvcnQgeyBTdG9yZSB9IGZyb20gXCJAc3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9zdG9yZXNcIjtcbmltcG9ydCB7IG1lcmdlU2NvcGVTdHJpbmdzIH0gZnJvbSBcIkBzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L3V0aWxzL3N0cmluZ3NcIjtcbmltcG9ydCB7IGdldFJlbGF0aXZlUGFydCwgaXNSZWxhdGl2ZSB9IGZyb20gXCJAc3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy91cmxzXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZVV1aWQgfSBmcm9tIFwiQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvdXRpbHMvdXVpZHNcIjtcbmltcG9ydCAqIGFzIGNvb2tpZSBmcm9tIFwiY29va2llXCI7XG5pbXBvcnQgKiBhcyBOZXh0TmF2aWdhdGlvblVuc2NyYW1ibGVkIGZyb20gXCJuZXh0L25hdmlnYXRpb25cIjtcbmltcG9ydCBSZWFjdCwgeyB1c2VDYWxsYmFjaywgdXNlTWVtbyB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgY29uc3RydWN0UmVkaXJlY3RVcmwgfSBmcm9tIFwiLi4vdXRpbHMvdXJsXCI7XG5pbXBvcnQgeyBhZGROZXdPQXV0aFByb3ZpZGVyT3JTY29wZSwgY2FsbE9BdXRoQ2FsbGJhY2ssIHNpZ25JbldpdGhPQXV0aCB9IGZyb20gXCIuL2F1dGhcIjtcbmltcG9ydCB7IGRlbGV0ZUNvb2tpZSwgZ2V0Q29va2llLCBzZXRPckRlbGV0ZUNvb2tpZSB9IGZyb20gXCIuL2Nvb2tpZVwiO1xudmFyIE5leHROYXZpZ2F0aW9uID0gc2NyYW1ibGVEdXJpbmdDb21waWxlVGltZShOZXh0TmF2aWdhdGlvblVuc2NyYW1ibGVkKTtcbnZhciBjbGllbnRWZXJzaW9uID0gXCJqcyBAc3RhY2tmcmFtZS9zdGFja0AyLjUuMzdcIjtcbmZ1bmN0aW9uIGdldFVybHMocGFydGlhbCkge1xuICBjb25zdCBoYW5kbGVyID0gcGFydGlhbC5oYW5kbGVyID8/IFwiL2hhbmRsZXJcIjtcbiAgY29uc3QgaG9tZSA9IHBhcnRpYWwuaG9tZSA/PyBcIi9cIjtcbiAgY29uc3QgYWZ0ZXJTaWduSW4gPSBwYXJ0aWFsLmFmdGVyU2lnbkluID8/IGhvbWU7XG4gIHJldHVybiB7XG4gICAgaGFuZGxlcixcbiAgICBzaWduSW46IGAke2hhbmRsZXJ9L3NpZ24taW5gLFxuICAgIGFmdGVyU2lnbkluOiBob21lLFxuICAgIHNpZ25VcDogYCR7aGFuZGxlcn0vc2lnbi11cGAsXG4gICAgYWZ0ZXJTaWduVXA6IGFmdGVyU2lnbkluLFxuICAgIHNpZ25PdXQ6IGAke2hhbmRsZXJ9L3NpZ24tb3V0YCxcbiAgICBhZnRlclNpZ25PdXQ6IGhvbWUsXG4gICAgZW1haWxWZXJpZmljYXRpb246IGAke2hhbmRsZXJ9L2VtYWlsLXZlcmlmaWNhdGlvbmAsXG4gICAgcGFzc3dvcmRSZXNldDogYCR7aGFuZGxlcn0vcGFzc3dvcmQtcmVzZXRgLFxuICAgIGZvcmdvdFBhc3N3b3JkOiBgJHtoYW5kbGVyfS9mb3Jnb3QtcGFzc3dvcmRgLFxuICAgIG9hdXRoQ2FsbGJhY2s6IGAke2hhbmRsZXJ9L29hdXRoLWNhbGxiYWNrYCxcbiAgICBtYWdpY0xpbmtDYWxsYmFjazogYCR7aGFuZGxlcn0vbWFnaWMtbGluay1jYWxsYmFja2AsXG4gICAgaG9tZSxcbiAgICBhY2NvdW50U2V0dGluZ3M6IGAke2hhbmRsZXJ9L2FjY291bnQtc2V0dGluZ3NgLFxuICAgIGVycm9yOiBgJHtoYW5kbGVyfS9lcnJvcmAsXG4gICAgdGVhbUludml0YXRpb246IGAke2hhbmRsZXJ9L3RlYW0taW52aXRhdGlvbmAsXG4gICAgLi4uZmlsdGVyVW5kZWZpbmVkKHBhcnRpYWwpXG4gIH07XG59XG5hc3luYyBmdW5jdGlvbiBfcmVkaXJlY3RUbyh1cmwsIG9wdGlvbnMpIHtcbiAgaWYgKGlzUmVhY3RTZXJ2ZXIpIHtcbiAgICBOZXh0TmF2aWdhdGlvbi5yZWRpcmVjdCh1cmwudG9TdHJpbmcoKSwgb3B0aW9ucz8ucmVwbGFjZSA/IE5leHROYXZpZ2F0aW9uLlJlZGlyZWN0VHlwZS5yZXBsYWNlIDogTmV4dE5hdmlnYXRpb24uUmVkaXJlY3RUeXBlLnB1c2gpO1xuICB9IGVsc2Uge1xuICAgIGlmIChvcHRpb25zPy5yZXBsYWNlKSB7XG4gICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSh1cmwpO1xuICAgIH0gZWxzZSB7XG4gICAgICB3aW5kb3cubG9jYXRpb24uYXNzaWduKHVybCk7XG4gICAgfVxuICAgIGF3YWl0IHdhaXQoMmUzKTtcbiAgfVxufVxuZnVuY3Rpb24gZ2V0RGVmYXVsdFByb2plY3RJZCgpIHtcbiAgcmV0dXJuIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NUQUNLX1BST0pFQ1RfSUQgfHwgdGhyb3dFcnIobmV3IEVycm9yKFwiV2VsY29tZSB0byBTdGFjayEgSXQgc2VlbXMgdGhhdCB5b3UgaGF2ZW4ndCBwcm92aWRlZCBhIHByb2plY3QgSUQuIFBsZWFzZSBjcmVhdGUgYSBwcm9qZWN0IG9uIHRoZSBTdGFjayBkYXNoYm9hcmQgYXQgaHR0cHM6Ly9hcHAuc3RhY2stYXV0aC5jb20gYW5kIHB1dCBpdCBpbiB0aGUgTkVYVF9QVUJMSUNfU1RBQ0tfUFJPSkVDVF9JRCBlbnZpcm9ubWVudCB2YXJpYWJsZS5cIikpO1xufVxuZnVuY3Rpb24gZ2V0RGVmYXVsdFB1Ymxpc2hhYmxlQ2xpZW50S2V5KCkge1xuICByZXR1cm4gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1RBQ0tfUFVCTElTSEFCTEVfQ0xJRU5UX0tFWSB8fCB0aHJvd0VycihuZXcgRXJyb3IoXCJXZWxjb21lIHRvIFN0YWNrISBJdCBzZWVtcyB0aGF0IHlvdSBoYXZlbid0IHByb3ZpZGVkIGEgcHVibGlzaGFibGUgY2xpZW50IGtleS4gUGxlYXNlIGNyZWF0ZSBhbiBBUEkga2V5IGZvciB5b3VyIHByb2plY3Qgb24gdGhlIFN0YWNrIGRhc2hib2FyZCBhdCBodHRwczovL2FwcC5zdGFjay1hdXRoLmNvbSBhbmQgY29weSB5b3VyIHB1Ymxpc2hhYmxlIGNsaWVudCBrZXkgaW50byB0aGUgTkVYVF9QVUJMSUNfU1RBQ0tfUFVCTElTSEFCTEVfQ0xJRU5UX0tFWSBlbnZpcm9ubWVudCB2YXJpYWJsZS5cIikpO1xufVxuZnVuY3Rpb24gZ2V0RGVmYXVsdFNlY3JldFNlcnZlcktleSgpIHtcbiAgcmV0dXJuIHByb2Nlc3MuZW52LlNUQUNLX1NFQ1JFVF9TRVJWRVJfS0VZIHx8IHRocm93RXJyKG5ldyBFcnJvcihcIk5vIHNlY3JldCBzZXJ2ZXIga2V5IHByb3ZpZGVkLiBQbGVhc2UgY29weSB5b3VyIGtleSBmcm9tIHRoZSBTdGFjayBkYXNoYm9hcmQgYW5kIHB1dCB5b3VyIGl0IGluIHRoZSBTVEFDS19TRUNSRVRfU0VSVkVSX0tFWSBlbnZpcm9ubWVudCB2YXJpYWJsZS5cIikpO1xufVxuZnVuY3Rpb24gZ2V0RGVmYXVsdFN1cGVyU2VjcmV0QWRtaW5LZXkoKSB7XG4gIHJldHVybiBwcm9jZXNzLmVudi5TVEFDS19TVVBFUl9TRUNSRVRfQURNSU5fS0VZIHx8IHRocm93RXJyKG5ldyBFcnJvcihcIk5vIHN1cGVyIHNlY3JldCBhZG1pbiBrZXkgcHJvdmlkZWQuIFBsZWFzZSBjb3B5IHlvdXIga2V5IGZyb20gdGhlIFN0YWNrIGRhc2hib2FyZCBhbmQgcHV0IGl0IGluIHRoZSBTVEFDS19TVVBFUl9TRUNSRVRfQURNSU5fS0VZIGVudmlyb25tZW50IHZhcmlhYmxlLlwiKSk7XG59XG5mdW5jdGlvbiBnZXREZWZhdWx0QmFzZVVybCgpIHtcbiAgcmV0dXJuIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NUQUNLX1VSTCB8fCBkZWZhdWx0QmFzZVVybDtcbn1cbnZhciBkZWZhdWx0QmFzZVVybCA9IFwiaHR0cHM6Ly9hcGkuc3RhY2stYXV0aC5jb21cIjtcbmZ1bmN0aW9uIGNyZWF0ZUVtcHR5VG9rZW5TdG9yZSgpIHtcbiAgcmV0dXJuIG5ldyBTdG9yZSh7XG4gICAgcmVmcmVzaFRva2VuOiBudWxsLFxuICAgIGFjY2Vzc1Rva2VuOiBudWxsXG4gIH0pO1xufVxudmFyIGNhY2hlUHJvbWlzZUJ5Q29tcG9uZW50SWQgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuZnVuY3Rpb24gdXNlQXN5bmNDYWNoZShjYWNoZSwgZGVwZW5kZW5jaWVzLCBjYWxsZXIpIHtcbiAgc3VzcGVuZElmU3NyKGNhbGxlcik7XG4gIGNvbnN0IGlkID0gUmVhY3QudXNlSWQoKTtcbiAgY29uc3Qgc3Vic2NyaWJlID0gdXNlQ2FsbGJhY2soKGNiKSA9PiB7XG4gICAgY29uc3QgeyB1bnN1YnNjcmliZSB9ID0gY2FjaGUub25TdGF0ZUNoYW5nZShkZXBlbmRlbmNpZXMsICgpID0+IHtcbiAgICAgIGNhY2hlUHJvbWlzZUJ5Q29tcG9uZW50SWQuZGVsZXRlKGlkKTtcbiAgICAgIGNiKCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHVuc3Vic2NyaWJlO1xuICB9LCBbY2FjaGUsIC4uLmRlcGVuZGVuY2llc10pO1xuICBjb25zdCBnZXRTbmFwc2hvdCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoIWNhY2hlUHJvbWlzZUJ5Q29tcG9uZW50SWQuaGFzKGlkKSkge1xuICAgICAgY2FjaGVQcm9taXNlQnlDb21wb25lbnRJZC5zZXQoaWQsIGNhY2hlLmdldE9yV2FpdChkZXBlbmRlbmNpZXMsIFwicmVhZC13cml0ZVwiKSk7XG4gICAgfVxuICAgIHJldHVybiBjYWNoZVByb21pc2VCeUNvbXBvbmVudElkLmdldChpZCk7XG4gIH0sIFtjYWNoZSwgLi4uZGVwZW5kZW5jaWVzXSk7XG4gIGNvbnN0IHByb21pc2UgPSBSZWFjdC51c2VTeW5jRXh0ZXJuYWxTdG9yZShcbiAgICBzdWJzY3JpYmUsXG4gICAgZ2V0U25hcHNob3QsXG4gICAgKCkgPT4gdGhyb3dFcnIobmV3IEVycm9yKFwiZ2V0U2VydmVyU25hcHNob3Qgc2hvdWxkIG5ldmVyIGJlIGNhbGxlZCBpbiB1c2VBc3luY0NhY2hlIGJlY2F1c2Ugd2UgcmVzdHJpY3QgdG8gQ1NSIGVhcmxpZXJcIikpXG4gICk7XG4gIHJldHVybiBSZWFjdC51c2UocHJvbWlzZSk7XG59XG52YXIgc3RhY2tBcHBJbnRlcm5hbHNTeW1ib2wgPSBTeW1ib2wuZm9yKFwiU3RhY2tBcHBJbnRlcm5hbHNcIik7XG52YXIgYWxsQ2xpZW50QXBwcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG52YXIgY3JlYXRlQ2FjaGUgPSAoZmV0Y2hlcikgPT4ge1xuICByZXR1cm4gbmV3IEFzeW5jQ2FjaGUoXG4gICAgYXN5bmMgKGRlcGVuZGVuY2llcykgPT4gYXdhaXQgZmV0Y2hlcihkZXBlbmRlbmNpZXMpLFxuICAgIHt9XG4gICk7XG59O1xudmFyIGNyZWF0ZUNhY2hlQnlTZXNzaW9uID0gKGZldGNoZXIpID0+IHtcbiAgcmV0dXJuIG5ldyBBc3luY0NhY2hlKFxuICAgIGFzeW5jIChbc2Vzc2lvbiwgLi4uZXh0cmFEZXBlbmRlbmNpZXNdKSA9PiBhd2FpdCBmZXRjaGVyKHNlc3Npb24sIGV4dHJhRGVwZW5kZW5jaWVzKSxcbiAgICB7XG4gICAgICBvblN1YnNjcmliZTogKFtzZXNzaW9uXSwgcmVmcmVzaCkgPT4ge1xuICAgICAgICBjb25zdCBoYW5kbGVyID0gc2Vzc2lvbi5vbkludmFsaWRhdGUoKCkgPT4gcmVmcmVzaCgpKTtcbiAgICAgICAgcmV0dXJuICgpID0+IGhhbmRsZXIudW5zdWJzY3JpYmUoKTtcbiAgICAgIH1cbiAgICB9XG4gICk7XG59O1xudmFyIG51bWJlck9mQXBwc0NyZWF0ZWQgPSAwO1xudmFyIF9TdGFja0NsaWVudEFwcEltcGwgPSBjbGFzcyBfX1N0YWNrQ2xpZW50QXBwSW1wbCB7XG4gIGNvbnN0cnVjdG9yKF9vcHRpb25zKSB7XG4gICAgdGhpcy5fb3B0aW9ucyA9IF9vcHRpb25zO1xuICAgIHRoaXMuX3VuaXF1ZUlkZW50aWZpZXIgPSB2b2lkIDA7XG4gICAgdGhpcy5fX0RFTU9fRU5BQkxFX1NMSUdIVF9GRVRDSF9ERUxBWSA9IGZhbHNlO1xuICAgIHRoaXMuX293bmVkQWRtaW5BcHBzID0gbmV3IERlcGVuZGVuY2llc01hcCgpO1xuICAgIHRoaXMuX2N1cnJlbnRVc2VyQ2FjaGUgPSBjcmVhdGVDYWNoZUJ5U2Vzc2lvbihhc3luYyAoc2Vzc2lvbikgPT4ge1xuICAgICAgaWYgKHRoaXMuX19ERU1PX0VOQUJMRV9TTElHSFRfRkVUQ0hfREVMQVkpIHtcbiAgICAgICAgYXdhaXQgd2FpdCgyZTMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2ludGVyZmFjZS5nZXRDbGllbnRVc2VyQnlUb2tlbihzZXNzaW9uKTtcbiAgICB9KTtcbiAgICB0aGlzLl9jdXJyZW50UHJvamVjdENhY2hlID0gY3JlYXRlQ2FjaGUoYXN5bmMgKCkgPT4ge1xuICAgICAgcmV0dXJuIFJlc3VsdC5vclRocm93KGF3YWl0IHRoaXMuX2ludGVyZmFjZS5nZXRDbGllbnRQcm9qZWN0KCkpO1xuICAgIH0pO1xuICAgIHRoaXMuX293bmVkUHJvamVjdHNDYWNoZSA9IGNyZWF0ZUNhY2hlQnlTZXNzaW9uKGFzeW5jIChzZXNzaW9uKSA9PiB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5faW50ZXJmYWNlLmxpc3RQcm9qZWN0cyhzZXNzaW9uKTtcbiAgICB9KTtcbiAgICB0aGlzLl9jdXJyZW50VXNlclBlcm1pc3Npb25zQ2FjaGUgPSBjcmVhdGVDYWNoZUJ5U2Vzc2lvbihhc3luYyAoc2Vzc2lvbiwgW3RlYW1JZCwgcmVjdXJzaXZlXSkgPT4ge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2ludGVyZmFjZS5saXN0Q3VycmVudFVzZXJUZWFtUGVybWlzc2lvbnMoeyB0ZWFtSWQsIHJlY3Vyc2l2ZSB9LCBzZXNzaW9uKTtcbiAgICB9KTtcbiAgICB0aGlzLl9jdXJyZW50VXNlclRlYW1zQ2FjaGUgPSBjcmVhdGVDYWNoZUJ5U2Vzc2lvbihhc3luYyAoc2Vzc2lvbikgPT4ge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2ludGVyZmFjZS5saXN0Q3VycmVudFVzZXJUZWFtcyhzZXNzaW9uKTtcbiAgICB9KTtcbiAgICB0aGlzLl9jdXJyZW50VXNlck9BdXRoQ29ubmVjdGlvbkFjY2Vzc1Rva2Vuc0NhY2hlID0gY3JlYXRlQ2FjaGVCeVNlc3Npb24oXG4gICAgICBhc3luYyAoc2Vzc2lvbiwgW3Byb3ZpZGVySWQsIHNjb3BlXSkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuX2ludGVyZmFjZS5jcmVhdGVQcm92aWRlckFjY2Vzc1Rva2VuKHByb3ZpZGVySWQsIHNjb3BlIHx8IFwiXCIsIHNlc3Npb24pO1xuICAgICAgICAgIHJldHVybiB7IGFjY2Vzc1Rva2VuOiByZXN1bHQuYWNjZXNzX3Rva2VuIH07XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGlmICghKGVyciBpbnN0YW5jZW9mIEtub3duRXJyb3JzLk9BdXRoQ29ubmVjdGlvbkRvZXNOb3RIYXZlUmVxdWlyZWRTY29wZSB8fCBlcnIgaW5zdGFuY2VvZiBLbm93bkVycm9ycy5PQXV0aENvbm5lY3Rpb25Ob3RDb25uZWN0ZWRUb1VzZXIpKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICk7XG4gICAgdGhpcy5fY3VycmVudFVzZXJPQXV0aENvbm5lY3Rpb25DYWNoZSA9IGNyZWF0ZUNhY2hlQnlTZXNzaW9uKFxuICAgICAgYXN5bmMgKHNlc3Npb24sIFtwcm92aWRlcklkLCBzY29wZSwgcmVkaXJlY3RdKSA9PiB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9nZXRVc2VyT0F1dGhDb25uZWN0aW9uQ2FjaGVGbih7XG4gICAgICAgICAgZ2V0VXNlcjogYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5fY3VycmVudFVzZXJDYWNoZS5nZXRPcldhaXQoW3Nlc3Npb25dLCBcIndyaXRlLW9ubHlcIiksXG4gICAgICAgICAgZ2V0T3JXYWl0T0F1dGhUb2tlbjogYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5fY3VycmVudFVzZXJPQXV0aENvbm5lY3Rpb25BY2Nlc3NUb2tlbnNDYWNoZS5nZXRPcldhaXQoW3Nlc3Npb24sIHByb3ZpZGVySWQsIHNjb3BlIHx8IFwiXCJdLCBcIndyaXRlLW9ubHlcIiksXG4gICAgICAgICAgdXNlT0F1dGhUb2tlbjogKCkgPT4gdXNlQXN5bmNDYWNoZSh0aGlzLl9jdXJyZW50VXNlck9BdXRoQ29ubmVjdGlvbkFjY2Vzc1Rva2Vuc0NhY2hlLCBbc2Vzc2lvbiwgcHJvdmlkZXJJZCwgc2NvcGUgfHwgXCJcIl0sIFwidXNlT0F1dGhUb2tlblwiKSxcbiAgICAgICAgICBwcm92aWRlcklkLFxuICAgICAgICAgIHNjb3BlLFxuICAgICAgICAgIHJlZGlyZWN0LFxuICAgICAgICAgIHNlc3Npb25cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgKTtcbiAgICB0aGlzLl90ZWFtTWVtYmVyUHJvZmlsZXNDYWNoZSA9IGNyZWF0ZUNhY2hlQnlTZXNzaW9uKFxuICAgICAgYXN5bmMgKHNlc3Npb24sIFt0ZWFtSWRdKSA9PiB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9pbnRlcmZhY2UubGlzdFRlYW1NZW1iZXJQcm9maWxlcyh7IHRlYW1JZCB9LCBzZXNzaW9uKTtcbiAgICAgIH1cbiAgICApO1xuICAgIHRoaXMuX2N1cnJlbnRVc2VyVGVhbVByb2ZpbGVDYWNoZSA9IGNyZWF0ZUNhY2hlQnlTZXNzaW9uKFxuICAgICAgYXN5bmMgKHNlc3Npb24sIFt0ZWFtSWRdKSA9PiB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9pbnRlcmZhY2UuZ2V0VGVhbU1lbWJlclByb2ZpbGUoeyB0ZWFtSWQsIHVzZXJJZDogXCJtZVwiIH0sIHNlc3Npb24pO1xuICAgICAgfVxuICAgICk7XG4gICAgdGhpcy5fbWVtb3J5VG9rZW5TdG9yZSA9IGNyZWF0ZUVtcHR5VG9rZW5TdG9yZSgpO1xuICAgIHRoaXMuX3JlcXVlc3RUb2tlblN0b3JlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xuICAgIHRoaXMuX3N0b3JlZENvb2tpZVRva2VuU3RvcmUgPSBudWxsO1xuICAgIC8qKlxuICAgICAqIEEgbWFwIGZyb20gdG9rZW4gc3RvcmVzIGFuZCBzZXNzaW9uIGtleXMgdG8gc2Vzc2lvbnMuXG4gICAgICpcbiAgICAgKiBUaGlzIGlzbid0IGp1c3QgYSBtYXAgZnJvbSBzZXNzaW9uIGtleXMgdG8gc2Vzc2lvbnMgZm9yIHR3byByZWFzb25zOlxuICAgICAqXG4gICAgICogLSBTbyB3ZSBjYW4gZ2FyYmFnZS1jb2xsZWN0IFNlc3Npb24gb2JqZWN0cyB3aGVuIHRoZSB0b2tlbiBzdG9yZSBpcyBnYXJiYWdlLWNvbGxlY3RlZFxuICAgICAqIC0gU28gZGlmZmVyZW50IHRva2VuIHN0b3JlcyBhcmUgc2VwYXJhdGVkIGFuZCBkb24ndCBsZWFrIGluZm9ybWF0aW9uIGJldHdlZW4gZWFjaCBvdGhlciwgZWcuIGlmIHRoZSBzYW1lIHVzZXIgc2VuZHMgdHdvIHJlcXVlc3RzIHRvIHRoZSBzYW1lIHNlcnZlciB0aGV5IHNob3VsZCBnZXQgYSBkaWZmZXJlbnQgc2Vzc2lvbiBvYmplY3RcbiAgICAgKi9cbiAgICB0aGlzLl9zZXNzaW9uc0J5VG9rZW5TdG9yZUFuZFNlc3Npb25LZXkgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbiAgICBpZiAoXCJpbnRlcmZhY2VcIiBpbiBfb3B0aW9ucykge1xuICAgICAgdGhpcy5faW50ZXJmYWNlID0gX29wdGlvbnMuaW50ZXJmYWNlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9pbnRlcmZhY2UgPSBuZXcgU3RhY2tDbGllbnRJbnRlcmZhY2Uoe1xuICAgICAgICBiYXNlVXJsOiBfb3B0aW9ucy5iYXNlVXJsID8/IGdldERlZmF1bHRCYXNlVXJsKCksXG4gICAgICAgIHByb2plY3RJZDogX29wdGlvbnMucHJvamVjdElkID8/IGdldERlZmF1bHRQcm9qZWN0SWQoKSxcbiAgICAgICAgY2xpZW50VmVyc2lvbixcbiAgICAgICAgcHVibGlzaGFibGVDbGllbnRLZXk6IF9vcHRpb25zLnB1Ymxpc2hhYmxlQ2xpZW50S2V5ID8/IGdldERlZmF1bHRQdWJsaXNoYWJsZUNsaWVudEtleSgpXG4gICAgICB9KTtcbiAgICB9XG4gICAgdGhpcy5fdG9rZW5TdG9yZUluaXQgPSBfb3B0aW9ucy50b2tlblN0b3JlO1xuICAgIHRoaXMuX3VybE9wdGlvbnMgPSBfb3B0aW9ucy51cmxzID8/IHt9O1xuICAgIHRoaXMuX29hdXRoU2NvcGVzT25TaWduSW4gPSBfb3B0aW9ucy5vYXV0aFNjb3Blc09uU2lnbkluID8/IHt9O1xuICAgIGlmIChfb3B0aW9ucy51bmlxdWVJZGVudGlmaWVyKSB7XG4gICAgICB0aGlzLl91bmlxdWVJZGVudGlmaWVyID0gX29wdGlvbnMudW5pcXVlSWRlbnRpZmllcjtcbiAgICAgIHRoaXMuX2luaXRVbmlxdWVJZGVudGlmaWVyKCk7XG4gICAgfVxuICAgIGlmICghX29wdGlvbnMubm9BdXRvbWF0aWNQcmVmZXRjaCkge1xuICAgICAgbnVtYmVyT2ZBcHBzQ3JlYXRlZCsrO1xuICAgICAgaWYgKG51bWJlck9mQXBwc0NyZWF0ZWQgPiAxMCkge1xuICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwiZGV2ZWxvcG1lbnRcIiA/IGNvbnNvbGUubG9nIDogY29uc29sZS53YXJuKShgWW91IGhhdmUgY3JlYXRlZCBtb3JlIHRoYW4gMTAgU3RhY2sgYXBwcyB3aXRoIGF1dG9tYXRpYyBwcmUtZmV0Y2ggZW5hYmxlZCAoJHtudW1iZXJPZkFwcHNDcmVhdGVkfSkuIFRoaXMgaXMgdXN1YWxseSBhIHNpZ24gb2YgYSBtZW1vcnkgbGVhaywgYnV0IGNhbiBzb21ldGltZXMgYmUgY2F1c2VkIGJ5IGhvdCByZWxvYWQgb2YgeW91ciB0ZWNoIHN0YWNrLiBJZiB5b3UgYXJlIGdldHRpbmcgdGhpcyBlcnJvciBhbmQgaXQgaXMgbm90IGNhdXNlZCBieSBob3QgcmVsb2FkLCBtYWtlIHN1cmUgdG8gbWluaW1pemUgdGhlIG51bWJlciBvZiBTdGFjayBhcHBzIHBlciBwYWdlICh1c3VhbGx5LCBvbmUgcGVyIHByb2plY3QpLiAoSWYgaXQgaXMgY2F1c2VkIGJ5IGhvdCByZWxvYWQgYW5kIGRvZXMgbm90IG9jY3VyIGluIHByb2R1Y3Rpb24sIHlvdSBjYW4gc2FmZWx5IGlnbm9yZSBpdC4pYCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGFzeW5jIF9nZXRVc2VyT0F1dGhDb25uZWN0aW9uQ2FjaGVGbihvcHRpb25zKSB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IG9wdGlvbnMuZ2V0VXNlcigpO1xuICAgIGxldCBoYXNDb25uZWN0aW9uID0gdHJ1ZTtcbiAgICBpZiAoIXVzZXIgfHwgIXVzZXIub2F1dGhfcHJvdmlkZXJzLmZpbmQoKHApID0+IHAuaWQgPT09IG9wdGlvbnMucHJvdmlkZXJJZCkpIHtcbiAgICAgIGhhc0Nvbm5lY3Rpb24gPSBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgdG9rZW4gPSBhd2FpdCBvcHRpb25zLmdldE9yV2FpdE9BdXRoVG9rZW4oKTtcbiAgICBpZiAoIXRva2VuKSB7XG4gICAgICBoYXNDb25uZWN0aW9uID0gZmFsc2U7XG4gICAgfVxuICAgIGlmICghaGFzQ29ubmVjdGlvbiAmJiBvcHRpb25zLnJlZGlyZWN0KSB7XG4gICAgICBpZiAoIW9wdGlvbnMuc2Vzc2lvbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBzZXNzaW9uIGZvdW5kLiBZb3UgbWlnaHQgYmUgY2FsbGluZyBnZXRDb25uZWN0ZWRBY2NvdW50IHdpdGggcmVkaXJlY3Qgd2l0aG91dCBoYXZpbmcgYSB1c2VyIHNlc3Npb24uXCIpO1xuICAgICAgfVxuICAgICAgYXdhaXQgYWRkTmV3T0F1dGhQcm92aWRlck9yU2NvcGUoXG4gICAgICAgIHRoaXMuX2ludGVyZmFjZSxcbiAgICAgICAge1xuICAgICAgICAgIHByb3ZpZGVyOiBvcHRpb25zLnByb3ZpZGVySWQsXG4gICAgICAgICAgcmVkaXJlY3RVcmw6IHRoaXMudXJscy5vYXV0aENhbGxiYWNrLFxuICAgICAgICAgIGVycm9yUmVkaXJlY3RVcmw6IHRoaXMudXJscy5lcnJvcixcbiAgICAgICAgICBwcm92aWRlclNjb3BlOiBtZXJnZVNjb3BlU3RyaW5ncyhvcHRpb25zLnNjb3BlIHx8IFwiXCIsICh0aGlzLl9vYXV0aFNjb3Blc09uU2lnbkluW29wdGlvbnMucHJvdmlkZXJJZF0gPz8gW10pLmpvaW4oXCIgXCIpKVxuICAgICAgICB9LFxuICAgICAgICBvcHRpb25zLnNlc3Npb25cbiAgICAgICk7XG4gICAgICByZXR1cm4gYXdhaXQgbmV2ZXJSZXNvbHZlKCk7XG4gICAgfSBlbHNlIGlmICghaGFzQ29ubmVjdGlvbikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IGFwcCA9IHRoaXM7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBvcHRpb25zLnByb3ZpZGVySWQsXG4gICAgICBhc3luYyBnZXRBY2Nlc3NUb2tlbigpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb3B0aW9ucy5nZXRPcldhaXRPQXV0aFRva2VuKCk7XG4gICAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJObyBhY2Nlc3MgdG9rZW4gYXZhaWxhYmxlXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9LFxuICAgICAgdXNlQWNjZXNzVG9rZW4oKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG9wdGlvbnMudXNlT0F1dGhUb2tlbigpO1xuICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiTm8gYWNjZXNzIHRva2VuIGF2YWlsYWJsZVwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgX2luaXRVbmlxdWVJZGVudGlmaWVyKCkge1xuICAgIGlmICghdGhpcy5fdW5pcXVlSWRlbnRpZmllcikge1xuICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJVbmlxdWUgaWRlbnRpZmllciBub3QgaW5pdGlhbGl6ZWRcIik7XG4gICAgfVxuICAgIGlmIChhbGxDbGllbnRBcHBzLmhhcyh0aGlzLl91bmlxdWVJZGVudGlmaWVyKSkge1xuICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJBIFN0YWNrIGNsaWVudCBhcHAgd2l0aCB0aGUgc2FtZSB1bmlxdWUgaWRlbnRpZmllciBhbHJlYWR5IGV4aXN0c1wiKTtcbiAgICB9XG4gICAgYWxsQ2xpZW50QXBwcy5zZXQodGhpcy5fdW5pcXVlSWRlbnRpZmllciwgW3RoaXMuX29wdGlvbnMuY2hlY2tTdHJpbmcgPz8gXCJkZWZhdWx0IGNoZWNrIHN0cmluZ1wiLCB0aGlzXSk7XG4gIH1cbiAgLyoqXG4gICAqIENsb3VkZmxhcmUgd29ya2VycyBkb2VzIG5vdCBhbGxvdyB1c2Ugb2YgcmFuZG9tbmVzcyBvbiB0aGUgZ2xvYmFsIHNjb3BlIChvbiB3aGljaCB0aGUgU3RhY2sgYXBwIGlzIHByb2JhYmx5XG4gICAqIGluaXRpYWxpemVkKS4gRm9yIHRoYXQgcmVhc29uLCB3ZSBnZW5lcmF0ZSB0aGUgdW5pcXVlIGlkZW50aWZpZXIgbGF6aWx5IHdoZW4gaXQgaXMgZmlyc3QgbmVlZGVkIGluc3RlYWQgb2YgaW4gdGhlXG4gICAqIGNvbnN0cnVjdG9yLlxuICAgKi9cbiAgX2dldFVuaXF1ZUlkZW50aWZpZXIoKSB7XG4gICAgaWYgKCF0aGlzLl91bmlxdWVJZGVudGlmaWVyKSB7XG4gICAgICB0aGlzLl91bmlxdWVJZGVudGlmaWVyID0gZ2VuZXJhdGVVdWlkKCk7XG4gICAgICB0aGlzLl9pbml0VW5pcXVlSWRlbnRpZmllcigpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fdW5pcXVlSWRlbnRpZmllcjtcbiAgfVxuICBhc3luYyBfY2hlY2tGZWF0dXJlU3VwcG9ydChuYW1lLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuX2ludGVyZmFjZS5jaGVja0ZlYXR1cmVTdXBwb3J0KHsgLi4ub3B0aW9ucywgbmFtZSB9KTtcbiAgfVxuICBfdXNlQ2hlY2tGZWF0dXJlU3VwcG9ydChuYW1lLCBvcHRpb25zKSB7XG4gICAgcnVuQXN5bmNocm9ub3VzbHkodGhpcy5fY2hlY2tGZWF0dXJlU3VwcG9ydChuYW1lLCBvcHRpb25zKSk7XG4gICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoYCR7bmFtZX0gaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQuIFBsZWFzZSByZWFjaCBvdXQgdG8gU3RhY2sgc3VwcG9ydCBmb3IgbW9yZSBpbmZvcm1hdGlvbi5gKTtcbiAgfVxuICBnZXQgX3JlZnJlc2hUb2tlbkNvb2tpZU5hbWUoKSB7XG4gICAgcmV0dXJuIGBzdGFjay1yZWZyZXNoLSR7dGhpcy5wcm9qZWN0SWR9YDtcbiAgfVxuICBfZ2V0VG9rZW5zRnJvbUNvb2tpZXMoY29va2llcykge1xuICAgIGNvbnN0IHJlZnJlc2hUb2tlbiA9IGNvb2tpZXMucmVmcmVzaFRva2VuQ29va2llO1xuICAgIGNvbnN0IGFjY2Vzc1Rva2VuT2JqZWN0ID0gY29va2llcy5hY2Nlc3NUb2tlbkNvb2tpZT8uc3RhcnRzV2l0aCgnW1wiJykgPyBKU09OLnBhcnNlKGNvb2tpZXMuYWNjZXNzVG9rZW5Db29raWUpIDogbnVsbDtcbiAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IGFjY2Vzc1Rva2VuT2JqZWN0ICYmIHJlZnJlc2hUb2tlbiA9PT0gYWNjZXNzVG9rZW5PYmplY3RbMF0gPyBhY2Nlc3NUb2tlbk9iamVjdFsxXSA6IG51bGw7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlZnJlc2hUb2tlbixcbiAgICAgIGFjY2Vzc1Rva2VuXG4gICAgfTtcbiAgfVxuICBnZXQgX2FjY2Vzc1Rva2VuQ29va2llTmFtZSgpIHtcbiAgICByZXR1cm4gYHN0YWNrLWFjY2Vzc2A7XG4gIH1cbiAgX2dldENvb2tpZVRva2VuU3RvcmUoKSB7XG4gICAgaWYgKCFpc0Jyb3dzZXJMaWtlKCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCB1c2UgY29va2llIHRva2VuIHN0b3JlIG9uIHRoZSBzZXJ2ZXIhXCIpO1xuICAgIH1cbiAgICBpZiAodGhpcy5fc3RvcmVkQ29va2llVG9rZW5TdG9yZSA9PT0gbnVsbCkge1xuICAgICAgY29uc3QgZ2V0Q3VycmVudFZhbHVlID0gKG9sZCkgPT4ge1xuICAgICAgICBjb25zdCB0b2tlbnMgPSB0aGlzLl9nZXRUb2tlbnNGcm9tQ29va2llcyh7XG4gICAgICAgICAgcmVmcmVzaFRva2VuQ29va2llOiBnZXRDb29raWUodGhpcy5fcmVmcmVzaFRva2VuQ29va2llTmFtZSkgPz8gZ2V0Q29va2llKFwic3RhY2stcmVmcmVzaFwiKSxcbiAgICAgICAgICAvLyBrZWVwIG9sZCBjb29raWUgbmFtZSBmb3IgYmFja3dhcmRzLWNvbXBhdGliaWxpdHlcbiAgICAgICAgICBhY2Nlc3NUb2tlbkNvb2tpZTogZ2V0Q29va2llKHRoaXMuX2FjY2Vzc1Rva2VuQ29va2llTmFtZSlcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcmVmcmVzaFRva2VuOiB0b2tlbnMucmVmcmVzaFRva2VuLFxuICAgICAgICAgIGFjY2Vzc1Rva2VuOiB0b2tlbnMuYWNjZXNzVG9rZW4gPz8gKG9sZD8ucmVmcmVzaFRva2VuID09PSB0b2tlbnMucmVmcmVzaFRva2VuID8gb2xkLmFjY2Vzc1Rva2VuIDogbnVsbClcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgICB0aGlzLl9zdG9yZWRDb29raWVUb2tlblN0b3JlID0gbmV3IFN0b3JlKGdldEN1cnJlbnRWYWx1ZShudWxsKSk7XG4gICAgICBsZXQgaGFzU3VjY2VlZGVkSW5Xcml0aW5nID0gdHJ1ZTtcbiAgICAgIHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgaWYgKGhhc1N1Y2NlZWRlZEluV3JpdGluZykge1xuICAgICAgICAgIGNvbnN0IG9sZFZhbHVlID0gdGhpcy5fc3RvcmVkQ29va2llVG9rZW5TdG9yZS5nZXQoKTtcbiAgICAgICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBnZXRDdXJyZW50VmFsdWUob2xkVmFsdWUpO1xuICAgICAgICAgIGlmICghZGVlcFBsYWluRXF1YWxzKGN1cnJlbnRWYWx1ZSwgb2xkVmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLl9zdG9yZWRDb29raWVUb2tlblN0b3JlLnNldChjdXJyZW50VmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgMTAwKTtcbiAgICAgIHRoaXMuX3N0b3JlZENvb2tpZVRva2VuU3RvcmUub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgc2V0T3JEZWxldGVDb29raWUodGhpcy5fcmVmcmVzaFRva2VuQ29va2llTmFtZSwgdmFsdWUucmVmcmVzaFRva2VuLCB7IG1heEFnZTogNjAgKiA2MCAqIDI0ICogMzY1IH0pO1xuICAgICAgICAgIHNldE9yRGVsZXRlQ29va2llKHRoaXMuX2FjY2Vzc1Rva2VuQ29va2llTmFtZSwgdmFsdWUuYWNjZXNzVG9rZW4gPyBKU09OLnN0cmluZ2lmeShbdmFsdWUucmVmcmVzaFRva2VuLCB2YWx1ZS5hY2Nlc3NUb2tlbl0pIDogbnVsbCwgeyBtYXhBZ2U6IDYwICogNjAgKiAyNCB9KTtcbiAgICAgICAgICBkZWxldGVDb29raWUoXCJzdGFjay1yZWZyZXNoXCIpO1xuICAgICAgICAgIGhhc1N1Y2NlZWRlZEluV3JpdGluZyA9IHRydWU7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBpZiAoIWlzQnJvd3Nlckxpa2UoKSkge1xuICAgICAgICAgICAgaGFzU3VjY2VlZGVkSW5Xcml0aW5nID0gZmFsc2U7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3N0b3JlZENvb2tpZVRva2VuU3RvcmU7XG4gIH1cbiAgX2dldE9yQ3JlYXRlVG9rZW5TdG9yZShvdmVycmlkZVRva2VuU3RvcmVJbml0KSB7XG4gICAgY29uc3QgdG9rZW5TdG9yZUluaXQgPSBvdmVycmlkZVRva2VuU3RvcmVJbml0ID09PSB2b2lkIDAgPyB0aGlzLl90b2tlblN0b3JlSW5pdCA6IG92ZXJyaWRlVG9rZW5TdG9yZUluaXQ7XG4gICAgc3dpdGNoICh0b2tlblN0b3JlSW5pdCkge1xuICAgICAgY2FzZSBcImNvb2tpZVwiOiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRDb29raWVUb2tlblN0b3JlKCk7XG4gICAgICB9XG4gICAgICBjYXNlIFwibmV4dGpzLWNvb2tpZVwiOiB7XG4gICAgICAgIGlmIChpc0Jyb3dzZXJMaWtlKCkpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0Q29va2llVG9rZW5TdG9yZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHRva2VucyA9IHRoaXMuX2dldFRva2Vuc0Zyb21Db29raWVzKHtcbiAgICAgICAgICAgIHJlZnJlc2hUb2tlbkNvb2tpZTogZ2V0Q29va2llKHRoaXMuX3JlZnJlc2hUb2tlbkNvb2tpZU5hbWUpID8/IGdldENvb2tpZShcInN0YWNrLXJlZnJlc2hcIiksXG4gICAgICAgICAgICAvLyBrZWVwIG9sZCBjb29raWUgbmFtZSBmb3IgYmFja3dhcmRzLWNvbXBhdGliaWxpdHlcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuQ29va2llOiBnZXRDb29raWUodGhpcy5fYWNjZXNzVG9rZW5Db29raWVOYW1lKVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbnN0IHN0b3JlID0gbmV3IFN0b3JlKHRva2Vucyk7XG4gICAgICAgICAgc3RvcmUub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBzZXRPckRlbGV0ZUNvb2tpZSh0aGlzLl9yZWZyZXNoVG9rZW5Db29raWVOYW1lLCB2YWx1ZS5yZWZyZXNoVG9rZW4sIHsgbWF4QWdlOiA2MCAqIDYwICogMjQgKiAzNjUgfSk7XG4gICAgICAgICAgICAgIHNldE9yRGVsZXRlQ29va2llKHRoaXMuX2FjY2Vzc1Rva2VuQ29va2llTmFtZSwgdmFsdWUuYWNjZXNzVG9rZW4gPyBKU09OLnN0cmluZ2lmeShbdmFsdWUucmVmcmVzaFRva2VuLCB2YWx1ZS5hY2Nlc3NUb2tlbl0pIDogbnVsbCwgeyBtYXhBZ2U6IDYwICogNjAgKiAyNCB9KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gc3RvcmU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNhc2UgXCJtZW1vcnlcIjoge1xuICAgICAgICByZXR1cm4gdGhpcy5fbWVtb3J5VG9rZW5TdG9yZTtcbiAgICAgIH1cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgaWYgKHRva2VuU3RvcmVJbml0ID09PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIGNyZWF0ZUVtcHR5VG9rZW5TdG9yZSgpO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB0b2tlblN0b3JlSW5pdCA9PT0gXCJvYmplY3RcIiAmJiBcImhlYWRlcnNcIiBpbiB0b2tlblN0b3JlSW5pdCkge1xuICAgICAgICAgIGlmICh0aGlzLl9yZXF1ZXN0VG9rZW5TdG9yZXMuaGFzKHRva2VuU3RvcmVJbml0KSkgcmV0dXJuIHRoaXMuX3JlcXVlc3RUb2tlblN0b3Jlcy5nZXQodG9rZW5TdG9yZUluaXQpO1xuICAgICAgICAgIGNvbnN0IHN0YWNrQXV0aEhlYWRlciA9IHRva2VuU3RvcmVJbml0LmhlYWRlcnMuZ2V0KFwieC1zdGFjay1hdXRoXCIpO1xuICAgICAgICAgIGlmIChzdGFja0F1dGhIZWFkZXIpIHtcbiAgICAgICAgICAgIGxldCBwYXJzZWQyO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgcGFyc2VkMiA9IEpTT04ucGFyc2Uoc3RhY2tBdXRoSGVhZGVyKTtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBwYXJzZWQyICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgRXJyb3IoXCJ4LXN0YWNrLWF1dGggaGVhZGVyIG11c3QgYmUgYSBKU09OIG9iamVjdFwiKTtcbiAgICAgICAgICAgICAgaWYgKHBhcnNlZDIgPT09IG51bGwpIHRocm93IG5ldyBFcnJvcihcIngtc3RhY2stYXV0aCBoZWFkZXIgbXVzdCBub3QgYmUgbnVsbFwiKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHgtc3RhY2stYXV0aCBoZWFkZXI6ICR7c3RhY2tBdXRoSGVhZGVyfWAsIHsgY2F1c2U6IGUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0T3JDcmVhdGVUb2tlblN0b3JlKHtcbiAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IHBhcnNlZDIuYWNjZXNzVG9rZW4gPz8gbnVsbCxcbiAgICAgICAgICAgICAgcmVmcmVzaFRva2VuOiBwYXJzZWQyLnJlZnJlc2hUb2tlbiA/PyBudWxsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgY29va2llSGVhZGVyID0gdG9rZW5TdG9yZUluaXQuaGVhZGVycy5nZXQoXCJjb29raWVcIik7XG4gICAgICAgICAgY29uc3QgcGFyc2VkID0gY29va2llLnBhcnNlKGNvb2tpZUhlYWRlciB8fCBcIlwiKTtcbiAgICAgICAgICBjb25zdCByZXMgPSBuZXcgU3RvcmUoe1xuICAgICAgICAgICAgcmVmcmVzaFRva2VuOiBwYXJzZWRbdGhpcy5fcmVmcmVzaFRva2VuQ29va2llTmFtZV0gfHwgcGFyc2VkW1wic3RhY2stcmVmcmVzaFwiXSB8fCBudWxsLFxuICAgICAgICAgICAgLy8ga2VlcCBvbGQgY29va2llIG5hbWUgZm9yIGJhY2t3YXJkcy1jb21wYXRpYmlsaXR5XG4gICAgICAgICAgICBhY2Nlc3NUb2tlbjogcGFyc2VkW3RoaXMuX2FjY2Vzc1Rva2VuQ29va2llTmFtZV0gfHwgbnVsbFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRoaXMuX3JlcXVlc3RUb2tlblN0b3Jlcy5zZXQodG9rZW5TdG9yZUluaXQsIHJlcyk7XG4gICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfSBlbHNlIGlmIChcImFjY2Vzc1Rva2VuXCIgaW4gdG9rZW5TdG9yZUluaXQgfHwgXCJyZWZyZXNoVG9rZW5cIiBpbiB0b2tlblN0b3JlSW5pdCkge1xuICAgICAgICAgIHJldHVybiBuZXcgU3RvcmUoe1xuICAgICAgICAgICAgcmVmcmVzaFRva2VuOiB0b2tlblN0b3JlSW5pdC5yZWZyZXNoVG9rZW4sXG4gICAgICAgICAgICBhY2Nlc3NUb2tlbjogdG9rZW5TdG9yZUluaXQuYWNjZXNzVG9rZW5cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgdG9rZW4gc3RvcmUgJHt0b2tlblN0b3JlSW5pdH1gKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgX2dldFNlc3Npb25Gcm9tVG9rZW5TdG9yZSh0b2tlblN0b3JlKSB7XG4gICAgY29uc3QgdG9rZW5PYmogPSB0b2tlblN0b3JlLmdldCgpO1xuICAgIGNvbnN0IHNlc3Npb25LZXkgPSBJbnRlcm5hbFNlc3Npb24uY2FsY3VsYXRlU2Vzc2lvbktleSh0b2tlbk9iaik7XG4gICAgY29uc3QgZXhpc3RpbmcgPSBzZXNzaW9uS2V5ID8gdGhpcy5fc2Vzc2lvbnNCeVRva2VuU3RvcmVBbmRTZXNzaW9uS2V5LmdldCh0b2tlblN0b3JlKT8uZ2V0KHNlc3Npb25LZXkpIDogbnVsbDtcbiAgICBpZiAoZXhpc3RpbmcpIHJldHVybiBleGlzdGluZztcbiAgICBjb25zdCBzZXNzaW9uID0gdGhpcy5faW50ZXJmYWNlLmNyZWF0ZVNlc3Npb24oe1xuICAgICAgcmVmcmVzaFRva2VuOiB0b2tlbk9iai5yZWZyZXNoVG9rZW4sXG4gICAgICBhY2Nlc3NUb2tlbjogdG9rZW5PYmouYWNjZXNzVG9rZW5cbiAgICB9KTtcbiAgICBzZXNzaW9uLm9uQWNjZXNzVG9rZW5DaGFuZ2UoKG5ld0FjY2Vzc1Rva2VuKSA9PiB7XG4gICAgICB0b2tlblN0b3JlLnVwZGF0ZSgob2xkKSA9PiAoe1xuICAgICAgICAuLi5vbGQsXG4gICAgICAgIGFjY2Vzc1Rva2VuOiBuZXdBY2Nlc3NUb2tlbj8udG9rZW4gPz8gbnVsbFxuICAgICAgfSkpO1xuICAgIH0pO1xuICAgIHNlc3Npb24ub25JbnZhbGlkYXRlKCgpID0+IHtcbiAgICAgIHRva2VuU3RvcmUudXBkYXRlKChvbGQpID0+ICh7XG4gICAgICAgIC4uLm9sZCxcbiAgICAgICAgYWNjZXNzVG9rZW46IG51bGwsXG4gICAgICAgIHJlZnJlc2hUb2tlbjogbnVsbFxuICAgICAgfSkpO1xuICAgIH0pO1xuICAgIGxldCBzZXNzaW9uc0J5U2Vzc2lvbktleSA9IHRoaXMuX3Nlc3Npb25zQnlUb2tlblN0b3JlQW5kU2Vzc2lvbktleS5nZXQodG9rZW5TdG9yZSkgPz8gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICB0aGlzLl9zZXNzaW9uc0J5VG9rZW5TdG9yZUFuZFNlc3Npb25LZXkuc2V0KHRva2VuU3RvcmUsIHNlc3Npb25zQnlTZXNzaW9uS2V5KTtcbiAgICBzZXNzaW9uc0J5U2Vzc2lvbktleS5zZXQoc2Vzc2lvbktleSwgc2Vzc2lvbik7XG4gICAgcmV0dXJuIHNlc3Npb247XG4gIH1cbiAgX2dldFNlc3Npb24ob3ZlcnJpZGVUb2tlblN0b3JlSW5pdCkge1xuICAgIGNvbnN0IHRva2VuU3RvcmUgPSB0aGlzLl9nZXRPckNyZWF0ZVRva2VuU3RvcmUob3ZlcnJpZGVUb2tlblN0b3JlSW5pdCk7XG4gICAgcmV0dXJuIHRoaXMuX2dldFNlc3Npb25Gcm9tVG9rZW5TdG9yZSh0b2tlblN0b3JlKTtcbiAgfVxuICBfdXNlU2Vzc2lvbihvdmVycmlkZVRva2VuU3RvcmVJbml0KSB7XG4gICAgY29uc3QgdG9rZW5TdG9yZSA9IHRoaXMuX2dldE9yQ3JlYXRlVG9rZW5TdG9yZShvdmVycmlkZVRva2VuU3RvcmVJbml0KTtcbiAgICBjb25zdCBzdWJzY3JpYmUgPSB1c2VDYWxsYmFjaygoY2IpID0+IHtcbiAgICAgIGNvbnN0IHsgdW5zdWJzY3JpYmUgfSA9IHRva2VuU3RvcmUub25DaGFuZ2UoKCkgPT4ge1xuICAgICAgICBjYigpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gdW5zdWJzY3JpYmU7XG4gICAgfSwgW3Rva2VuU3RvcmVdKTtcbiAgICBjb25zdCBnZXRTbmFwc2hvdCA9IHVzZUNhbGxiYWNrKCgpID0+IHRoaXMuX2dldFNlc3Npb25Gcm9tVG9rZW5TdG9yZSh0b2tlblN0b3JlKSwgW3Rva2VuU3RvcmVdKTtcbiAgICByZXR1cm4gUmVhY3QudXNlU3luY0V4dGVybmFsU3RvcmUoc3Vic2NyaWJlLCBnZXRTbmFwc2hvdCwgZ2V0U25hcHNob3QpO1xuICB9XG4gIGFzeW5jIF9zaWduSW5Ub0FjY291bnRXaXRoVG9rZW5zKHRva2Vucykge1xuICAgIGlmICghKFwiYWNjZXNzVG9rZW5cIiBpbiB0b2tlbnMpIHx8ICEoXCJyZWZyZXNoVG9rZW5cIiBpbiB0b2tlbnMpKSB7XG4gICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIkludmFsaWQgdG9rZW5zIG9iamVjdDsgY2FuJ3Qgc2lnbiBpbiB3aXRoIHRoaXNcIiwgeyB0b2tlbnMgfSk7XG4gICAgfVxuICAgIGNvbnN0IHRva2VuU3RvcmUgPSB0aGlzLl9nZXRPckNyZWF0ZVRva2VuU3RvcmUoKTtcbiAgICB0b2tlblN0b3JlLnNldCh0b2tlbnMpO1xuICB9XG4gIF9oYXNQZXJzaXN0ZW50VG9rZW5TdG9yZShvdmVycmlkZVRva2VuU3RvcmVJbml0KSB7XG4gICAgcmV0dXJuIChvdmVycmlkZVRva2VuU3RvcmVJbml0ICE9PSB2b2lkIDAgPyBvdmVycmlkZVRva2VuU3RvcmVJbml0IDogdGhpcy5fdG9rZW5TdG9yZUluaXQpICE9PSBudWxsO1xuICB9XG4gIF9lbnN1cmVQZXJzaXN0ZW50VG9rZW5TdG9yZShvdmVycmlkZVRva2VuU3RvcmVJbml0KSB7XG4gICAgaWYgKCF0aGlzLl9oYXNQZXJzaXN0ZW50VG9rZW5TdG9yZShvdmVycmlkZVRva2VuU3RvcmVJbml0KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGNhbGwgdGhpcyBmdW5jdGlvbiBvbiBhIFN0YWNrIGFwcCB3aXRob3V0IGEgcGVyc2lzdGVudCB0b2tlbiBzdG9yZS4gTWFrZSBzdXJlIHRoZSB0b2tlblN0b3JlIG9wdGlvbiBvbiB0aGUgY29uc3RydWN0b3IgaXMgc2V0IHRvIGEgbm9uLW51bGwgdmFsdWUgd2hlbiBpbml0aWFsaXppbmcgU3RhY2suXFxuXFxuU3RhY2sgdXNlcyB0b2tlbiBzdG9yZXMgdG8gYWNjZXNzIGFjY2VzcyB0b2tlbnMgb2YgdGhlIGN1cnJlbnQgdXNlci4gRm9yIGV4YW1wbGUsIG9uIHdlYiBmcm9udGVuZHMgaXQgaXMgY29tbW9ubHkgdGhlIHN0cmluZyB2YWx1ZSAnY29va2llcycgZm9yIGNvb2tpZSBzdG9yYWdlLlwiKTtcbiAgICB9XG4gIH1cbiAgX2lzSW50ZXJuYWxQcm9qZWN0KCkge1xuICAgIHJldHVybiB0aGlzLnByb2plY3RJZCA9PT0gXCJpbnRlcm5hbFwiO1xuICB9XG4gIF9lbnN1cmVJbnRlcm5hbFByb2plY3QoKSB7XG4gICAgaWYgKCF0aGlzLl9pc0ludGVybmFsUHJvamVjdCgpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgY2FsbCB0aGlzIGZ1bmN0aW9uIG9uIGEgU3RhY2sgYXBwIHdpdGggYSBwcm9qZWN0IElEIG90aGVyIHRoYW4gJ2ludGVybmFsJy5cIik7XG4gICAgfVxuICB9XG4gIF9jbGllbnRQcm9qZWN0RnJvbUNydWQoY3J1ZCkge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogY3J1ZC5pZCxcbiAgICAgIGRpc3BsYXlOYW1lOiBjcnVkLmRpc3BsYXlfbmFtZSxcbiAgICAgIGNvbmZpZzoge1xuICAgICAgICBzaWduVXBFbmFibGVkOiBjcnVkLmNvbmZpZy5zaWduX3VwX2VuYWJsZWQsXG4gICAgICAgIGNyZWRlbnRpYWxFbmFibGVkOiBjcnVkLmNvbmZpZy5jcmVkZW50aWFsX2VuYWJsZWQsXG4gICAgICAgIG1hZ2ljTGlua0VuYWJsZWQ6IGNydWQuY29uZmlnLm1hZ2ljX2xpbmtfZW5hYmxlZCxcbiAgICAgICAgY2xpZW50VGVhbUNyZWF0aW9uRW5hYmxlZDogY3J1ZC5jb25maWcuY2xpZW50X3RlYW1fY3JlYXRpb25fZW5hYmxlZCxcbiAgICAgICAgY2xpZW50VXNlckRlbGV0aW9uRW5hYmxlZDogY3J1ZC5jb25maWcuY2xpZW50X3VzZXJfZGVsZXRpb25fZW5hYmxlZCxcbiAgICAgICAgb2F1dGhQcm92aWRlcnM6IGNydWQuY29uZmlnLmVuYWJsZWRfb2F1dGhfcHJvdmlkZXJzLm1hcCgocCkgPT4gKHtcbiAgICAgICAgICBpZDogcC5pZFxuICAgICAgICB9KSlcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIF9jbGllbnRUZWFtUGVybWlzc2lvbkZyb21DcnVkKGNydWQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IGNydWQuaWRcbiAgICB9O1xuICB9XG4gIF9jbGllbnRUZWFtVXNlckZyb21DcnVkKGNydWQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IGNydWQudXNlcl9pZCxcbiAgICAgIHRlYW1Qcm9maWxlOiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiBjcnVkLmRpc3BsYXlfbmFtZSxcbiAgICAgICAgcHJvZmlsZUltYWdlVXJsOiBjcnVkLnByb2ZpbGVfaW1hZ2VfdXJsXG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBfY2xpZW50VGVhbUZyb21DcnVkKGNydWQpIHtcbiAgICBjb25zdCBhcHAgPSB0aGlzO1xuICAgIHJldHVybiB7XG4gICAgICBpZDogY3J1ZC5pZCxcbiAgICAgIGRpc3BsYXlOYW1lOiBjcnVkLmRpc3BsYXlfbmFtZSxcbiAgICAgIHByb2ZpbGVJbWFnZVVybDogY3J1ZC5wcm9maWxlX2ltYWdlX3VybCxcbiAgICAgIGFzeW5jIGludml0ZVVzZXIob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gYXdhaXQgYXBwLl9pbnRlcmZhY2Uuc2VuZFRlYW1JbnZpdGF0aW9uKHtcbiAgICAgICAgICB0ZWFtSWQ6IGNydWQuaWQsXG4gICAgICAgICAgZW1haWw6IG9wdGlvbnMuZW1haWwsXG4gICAgICAgICAgc2Vzc2lvbjogYXBwLl9nZXRTZXNzaW9uKCksXG4gICAgICAgICAgY2FsbGJhY2tVcmw6IGNvbnN0cnVjdFJlZGlyZWN0VXJsKGFwcC51cmxzLnRlYW1JbnZpdGF0aW9uKVxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBsaXN0VXNlcnMoKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFwcC5fdGVhbU1lbWJlclByb2ZpbGVzQ2FjaGUuZ2V0T3JXYWl0KFthcHAuX2dldFNlc3Npb24oKSwgY3J1ZC5pZF0sIFwid3JpdGUtb25seVwiKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5tYXAoKGNydWQyKSA9PiBhcHAuX2NsaWVudFRlYW1Vc2VyRnJvbUNydWQoY3J1ZDIpKTtcbiAgICAgIH0sXG4gICAgICB1c2VVc2VycygpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdXNlQXN5bmNDYWNoZShhcHAuX3RlYW1NZW1iZXJQcm9maWxlc0NhY2hlLCBbYXBwLl9nZXRTZXNzaW9uKCksIGNydWQuaWRdLCBcInRlYW0udXNlVXNlcnMoKVwiKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5tYXAoKGNydWQyKSA9PiBhcHAuX2NsaWVudFRlYW1Vc2VyRnJvbUNydWQoY3J1ZDIpKTtcbiAgICAgIH0sXG4gICAgICBhc3luYyB1cGRhdGUoZGF0YSkge1xuICAgICAgICBhd2FpdCBhcHAuX2ludGVyZmFjZS51cGRhdGVUZWFtKHsgZGF0YTogdGVhbVVwZGF0ZU9wdGlvbnNUb0NydWQoZGF0YSksIHRlYW1JZDogY3J1ZC5pZCB9LCBhcHAuX2dldFNlc3Npb24oKSk7XG4gICAgICAgIGF3YWl0IGFwcC5fY3VycmVudFVzZXJUZWFtc0NhY2hlLnJlZnJlc2goW2FwcC5fZ2V0U2Vzc2lvbigpXSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBfY3JlYXRlQXV0aChzZXNzaW9uKSB7XG4gICAgY29uc3QgYXBwID0gdGhpcztcbiAgICByZXR1cm4ge1xuICAgICAgX2ludGVybmFsU2Vzc2lvbjogc2Vzc2lvbixcbiAgICAgIGN1cnJlbnRTZXNzaW9uOiB7XG4gICAgICAgIGFzeW5jIGdldFRva2VucygpIHtcbiAgICAgICAgICBjb25zdCB0b2tlbnMgPSBhd2FpdCBzZXNzaW9uLmdldFBvdGVudGlhbGx5RXhwaXJlZFRva2VucygpO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhY2Nlc3NUb2tlbjogdG9rZW5zPy5hY2Nlc3NUb2tlbi50b2tlbiA/PyBudWxsLFxuICAgICAgICAgICAgcmVmcmVzaFRva2VuOiB0b2tlbnM/LnJlZnJlc2hUb2tlbj8udG9rZW4gPz8gbnVsbFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBhc3luYyBnZXRBdXRoSGVhZGVycygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBcIngtc3RhY2stYXV0aFwiOiBKU09OLnN0cmluZ2lmeShhd2FpdCB0aGlzLmdldEF1dGhKc29uKCkpXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgICAgYXN5bmMgZ2V0QXV0aEpzb24oKSB7XG4gICAgICAgIGNvbnN0IHRva2VucyA9IGF3YWl0IHRoaXMuY3VycmVudFNlc3Npb24uZ2V0VG9rZW5zKCk7XG4gICAgICAgIHJldHVybiB0b2tlbnM7XG4gICAgICB9LFxuICAgICAgc2lnbk91dCgpIHtcbiAgICAgICAgcmV0dXJuIGFwcC5fc2lnbk91dChzZXNzaW9uKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIF9jcmVhdGVCYXNlVXNlcihjcnVkKSB7XG4gICAgaWYgKCFjcnVkKSB7XG4gICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIlVzZXIgbm90IGZvdW5kXCIpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IGNydWQuaWQsXG4gICAgICBkaXNwbGF5TmFtZTogY3J1ZC5kaXNwbGF5X25hbWUsXG4gICAgICBwcmltYXJ5RW1haWw6IGNydWQucHJpbWFyeV9lbWFpbCxcbiAgICAgIHByaW1hcnlFbWFpbFZlcmlmaWVkOiBjcnVkLnByaW1hcnlfZW1haWxfdmVyaWZpZWQsXG4gICAgICBwcm9maWxlSW1hZ2VVcmw6IGNydWQucHJvZmlsZV9pbWFnZV91cmwsXG4gICAgICBzaWduZWRVcEF0OiBuZXcgRGF0ZShjcnVkLnNpZ25lZF91cF9hdF9taWxsaXMpLFxuICAgICAgY2xpZW50TWV0YWRhdGE6IGNydWQuY2xpZW50X21ldGFkYXRhLFxuICAgICAgY2xpZW50UmVhZE9ubHlNZXRhZGF0YTogY3J1ZC5jbGllbnRfcmVhZF9vbmx5X21ldGFkYXRhLFxuICAgICAgaGFzUGFzc3dvcmQ6IGNydWQuaGFzX3Bhc3N3b3JkLFxuICAgICAgZW1haWxBdXRoRW5hYmxlZDogY3J1ZC5hdXRoX3dpdGhfZW1haWwsXG4gICAgICBvYXV0aFByb3ZpZGVyczogY3J1ZC5vYXV0aF9wcm92aWRlcnMsXG4gICAgICBzZWxlY3RlZFRlYW06IGNydWQuc2VsZWN0ZWRfdGVhbSAmJiB0aGlzLl9jbGllbnRUZWFtRnJvbUNydWQoY3J1ZC5zZWxlY3RlZF90ZWFtKSxcbiAgICAgIGlzTXVsdGlGYWN0b3JSZXF1aXJlZDogY3J1ZC5yZXF1aXJlc190b3RwX21mYSxcbiAgICAgIHRvQ2xpZW50SnNvbigpIHtcbiAgICAgICAgcmV0dXJuIGNydWQ7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBfZWRpdGFibGVUZWFtUHJvZmlsZUZyb21DcnVkKGNydWQpIHtcbiAgICBjb25zdCBhcHAgPSB0aGlzO1xuICAgIHJldHVybiB7XG4gICAgICBkaXNwbGF5TmFtZTogY3J1ZC5kaXNwbGF5X25hbWUsXG4gICAgICBwcm9maWxlSW1hZ2VVcmw6IGNydWQucHJvZmlsZV9pbWFnZV91cmwsXG4gICAgICBhc3luYyB1cGRhdGUodXBkYXRlKSB7XG4gICAgICAgIGF3YWl0IGFwcC5faW50ZXJmYWNlLnVwZGF0ZVRlYW1NZW1iZXJQcm9maWxlKHtcbiAgICAgICAgICB0ZWFtSWQ6IGNydWQudGVhbV9pZCxcbiAgICAgICAgICB1c2VySWQ6IGNydWQudXNlcl9pZCxcbiAgICAgICAgICBwcm9maWxlOiB7XG4gICAgICAgICAgICBkaXNwbGF5X25hbWU6IHVwZGF0ZS5kaXNwbGF5TmFtZSxcbiAgICAgICAgICAgIHByb2ZpbGVfaW1hZ2VfdXJsOiB1cGRhdGUucHJvZmlsZUltYWdlVXJsXG4gICAgICAgICAgfVxuICAgICAgICB9LCBhcHAuX2dldFNlc3Npb24oKSk7XG4gICAgICAgIGF3YWl0IGFwcC5fY3VycmVudFVzZXJUZWFtUHJvZmlsZUNhY2hlLnJlZnJlc2goW2FwcC5fZ2V0U2Vzc2lvbigpLCBjcnVkLnRlYW1faWRdKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIF9jcmVhdGVVc2VyRXh0cmEoY3J1ZCwgc2Vzc2lvbikge1xuICAgIGNvbnN0IGFwcCA9IHRoaXM7XG4gICAgYXN5bmMgZnVuY3Rpb24gZ2V0Q29ubmVjdGVkQWNjb3VudChpZCwgb3B0aW9ucykge1xuICAgICAgY29uc3Qgc2NvcGVTdHJpbmcgPSBvcHRpb25zPy5zY29wZXM/LmpvaW4oXCIgXCIpO1xuICAgICAgcmV0dXJuIGF3YWl0IGFwcC5fY3VycmVudFVzZXJPQXV0aENvbm5lY3Rpb25DYWNoZS5nZXRPcldhaXQoW3Nlc3Npb24sIGlkLCBzY29wZVN0cmluZyB8fCBcIlwiLCBvcHRpb25zPy5vciA9PT0gXCJyZWRpcmVjdFwiXSwgXCJ3cml0ZS1vbmx5XCIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB1c2VDb25uZWN0ZWRBY2NvdW50KGlkLCBvcHRpb25zKSB7XG4gICAgICBjb25zdCBzY29wZVN0cmluZyA9IG9wdGlvbnM/LnNjb3Blcz8uam9pbihcIiBcIik7XG4gICAgICByZXR1cm4gdXNlQXN5bmNDYWNoZShhcHAuX2N1cnJlbnRVc2VyT0F1dGhDb25uZWN0aW9uQ2FjaGUsIFtzZXNzaW9uLCBpZCwgc2NvcGVTdHJpbmcgfHwgXCJcIiwgb3B0aW9ucz8ub3IgPT09IFwicmVkaXJlY3RcIl0sIFwidXNlci51c2VDb25uZWN0ZWRBY2NvdW50KClcIik7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBzZXREaXNwbGF5TmFtZShkaXNwbGF5TmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy51cGRhdGUoeyBkaXNwbGF5TmFtZSB9KTtcbiAgICAgIH0sXG4gICAgICBzZXRDbGllbnRNZXRhZGF0YShtZXRhZGF0YSkge1xuICAgICAgICByZXR1cm4gdGhpcy51cGRhdGUoeyBjbGllbnRNZXRhZGF0YTogbWV0YWRhdGEgfSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgc2V0U2VsZWN0ZWRUZWFtKHRlYW0pIHtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyBzZWxlY3RlZFRlYW1JZDogdGVhbT8uaWQgPz8gbnVsbCB9KTtcbiAgICAgIH0sXG4gICAgICBnZXRDb25uZWN0ZWRBY2NvdW50LFxuICAgICAgdXNlQ29ubmVjdGVkQWNjb3VudCxcbiAgICAgIGFzeW5jIGdldFRlYW0odGVhbUlkKSB7XG4gICAgICAgIGNvbnN0IHRlYW1zID0gYXdhaXQgdGhpcy5saXN0VGVhbXMoKTtcbiAgICAgICAgcmV0dXJuIHRlYW1zLmZpbmQoKHQpID0+IHQuaWQgPT09IHRlYW1JZCkgPz8gbnVsbDtcbiAgICAgIH0sXG4gICAgICB1c2VUZWFtKHRlYW1JZCkge1xuICAgICAgICBjb25zdCB0ZWFtcyA9IHRoaXMudXNlVGVhbXMoKTtcbiAgICAgICAgcmV0dXJuIHVzZU1lbW8oKCkgPT4ge1xuICAgICAgICAgIHJldHVybiB0ZWFtcy5maW5kKCh0KSA9PiB0LmlkID09PSB0ZWFtSWQpID8/IG51bGw7XG4gICAgICAgIH0sIFt0ZWFtcywgdGVhbUlkXSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgbGlzdFRlYW1zKCkge1xuICAgICAgICBjb25zdCB0ZWFtcyA9IGF3YWl0IGFwcC5fY3VycmVudFVzZXJUZWFtc0NhY2hlLmdldE9yV2FpdChbc2Vzc2lvbl0sIFwid3JpdGUtb25seVwiKTtcbiAgICAgICAgcmV0dXJuIHRlYW1zLm1hcCgoY3J1ZDIpID0+IGFwcC5fY2xpZW50VGVhbUZyb21DcnVkKGNydWQyKSk7XG4gICAgICB9LFxuICAgICAgdXNlVGVhbXMoKSB7XG4gICAgICAgIGNvbnN0IHRlYW1zID0gdXNlQXN5bmNDYWNoZShhcHAuX2N1cnJlbnRVc2VyVGVhbXNDYWNoZSwgW3Nlc3Npb25dLCBcInVzZXIudXNlVGVhbXMoKVwiKTtcbiAgICAgICAgcmV0dXJuIHVzZU1lbW8oKCkgPT4gdGVhbXMubWFwKChjcnVkMikgPT4gYXBwLl9jbGllbnRUZWFtRnJvbUNydWQoY3J1ZDIpKSwgW3RlYW1zXSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgY3JlYXRlVGVhbShkYXRhKSB7XG4gICAgICAgIGNvbnN0IGNydWQyID0gYXdhaXQgYXBwLl9pbnRlcmZhY2UuY3JlYXRlVGVhbUZvckN1cnJlbnRVc2VyKHRlYW1DcmVhdGVPcHRpb25zVG9DcnVkKGRhdGEpLCBzZXNzaW9uKTtcbiAgICAgICAgYXdhaXQgYXBwLl9jdXJyZW50VXNlclRlYW1zQ2FjaGUucmVmcmVzaChbc2Vzc2lvbl0pO1xuICAgICAgICByZXR1cm4gYXBwLl9jbGllbnRUZWFtRnJvbUNydWQoY3J1ZDIpO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIGxlYXZlVGVhbSh0ZWFtKSB7XG4gICAgICAgIGF3YWl0IGFwcC5faW50ZXJmYWNlLmxlYXZlVGVhbSh0ZWFtLmlkLCBzZXNzaW9uKTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBsaXN0UGVybWlzc2lvbnMoc2NvcGUsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcmVjdXJzaXZlID0gb3B0aW9ucz8ucmVjdXJzaXZlID8/IHRydWU7XG4gICAgICAgIGNvbnN0IHBlcm1pc3Npb25zID0gYXdhaXQgYXBwLl9jdXJyZW50VXNlclBlcm1pc3Npb25zQ2FjaGUuZ2V0T3JXYWl0KFtzZXNzaW9uLCBzY29wZS5pZCwgcmVjdXJzaXZlXSwgXCJ3cml0ZS1vbmx5XCIpO1xuICAgICAgICByZXR1cm4gcGVybWlzc2lvbnMubWFwKChjcnVkMikgPT4gYXBwLl9jbGllbnRUZWFtUGVybWlzc2lvbkZyb21DcnVkKGNydWQyKSk7XG4gICAgICB9LFxuICAgICAgdXNlUGVybWlzc2lvbnMoc2NvcGUsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcmVjdXJzaXZlID0gb3B0aW9ucz8ucmVjdXJzaXZlID8/IHRydWU7XG4gICAgICAgIGNvbnN0IHBlcm1pc3Npb25zID0gdXNlQXN5bmNDYWNoZShhcHAuX2N1cnJlbnRVc2VyUGVybWlzc2lvbnNDYWNoZSwgW3Nlc3Npb24sIHNjb3BlLmlkLCByZWN1cnNpdmVdLCBcInVzZXIudXNlUGVybWlzc2lvbnMoKVwiKTtcbiAgICAgICAgcmV0dXJuIHVzZU1lbW8oKCkgPT4gcGVybWlzc2lvbnMubWFwKChjcnVkMikgPT4gYXBwLl9jbGllbnRUZWFtUGVybWlzc2lvbkZyb21DcnVkKGNydWQyKSksIFtwZXJtaXNzaW9uc10pO1xuICAgICAgfSxcbiAgICAgIHVzZVBlcm1pc3Npb24oc2NvcGUsIHBlcm1pc3Npb25JZCkge1xuICAgICAgICBjb25zdCBwZXJtaXNzaW9ucyA9IHRoaXMudXNlUGVybWlzc2lvbnMoc2NvcGUpO1xuICAgICAgICByZXR1cm4gdXNlTWVtbygoKSA9PiBwZXJtaXNzaW9ucy5maW5kKChwKSA9PiBwLmlkID09PSBwZXJtaXNzaW9uSWQpID8/IG51bGwsIFtwZXJtaXNzaW9ucywgcGVybWlzc2lvbklkXSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgZ2V0UGVybWlzc2lvbihzY29wZSwgcGVybWlzc2lvbklkKSB7XG4gICAgICAgIGNvbnN0IHBlcm1pc3Npb25zID0gYXdhaXQgdGhpcy5saXN0UGVybWlzc2lvbnMoc2NvcGUpO1xuICAgICAgICByZXR1cm4gcGVybWlzc2lvbnMuZmluZCgocCkgPT4gcC5pZCA9PT0gcGVybWlzc2lvbklkKSA/PyBudWxsO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIGhhc1Blcm1pc3Npb24oc2NvcGUsIHBlcm1pc3Npb25JZCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRQZXJtaXNzaW9uKHNjb3BlLCBwZXJtaXNzaW9uSWQpICE9PSBudWxsO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGFwcC5fdXBkYXRlQ2xpZW50VXNlcih1cGRhdGUsIHNlc3Npb24pO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIHNlbmRWZXJpZmljYXRpb25FbWFpbCgpIHtcbiAgICAgICAgaWYgKCFjcnVkPy5wcmltYXJ5X2VtYWlsKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJVc2VyIGRvZXMgbm90IGhhdmUgYSBwcmltYXJ5IGVtYWlsXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhd2FpdCBhcHAuX3NlbmRWZXJpZmljYXRpb25FbWFpbChjcnVkLnByaW1hcnlfZW1haWwsIHNlc3Npb24pO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIHVwZGF0ZVBhc3N3b3JkKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGFwcC5fdXBkYXRlUGFzc3dvcmQob3B0aW9ucywgc2Vzc2lvbik7XG4gICAgICB9LFxuICAgICAgYXN5bmMgZ2V0VGVhbVByb2ZpbGUodGVhbSkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhcHAuX2N1cnJlbnRVc2VyVGVhbVByb2ZpbGVDYWNoZS5nZXRPcldhaXQoW3Nlc3Npb24sIHRlYW0uaWRdLCBcIndyaXRlLW9ubHlcIik7XG4gICAgICAgIHJldHVybiBhcHAuX2VkaXRhYmxlVGVhbVByb2ZpbGVGcm9tQ3J1ZChyZXN1bHQpO1xuICAgICAgfSxcbiAgICAgIHVzZVRlYW1Qcm9maWxlKHRlYW0pIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdXNlQXN5bmNDYWNoZShhcHAuX2N1cnJlbnRVc2VyVGVhbVByb2ZpbGVDYWNoZSwgW3Nlc3Npb24sIHRlYW0uaWRdLCBcInVzZXIudXNlVGVhbVByb2ZpbGUoKVwiKTtcbiAgICAgICAgcmV0dXJuIGFwcC5fZWRpdGFibGVUZWFtUHJvZmlsZUZyb21DcnVkKHJlc3VsdCk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgZGVsZXRlKCkge1xuICAgICAgICBhd2FpdCBhcHAuX2ludGVyZmFjZS5kZWxldGVDdXJyZW50VXNlcihzZXNzaW9uKTtcbiAgICAgICAgc2Vzc2lvbi5tYXJrSW52YWxpZCgpO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgX2NyZWF0ZUludGVybmFsVXNlckV4dHJhKHNlc3Npb24pIHtcbiAgICBjb25zdCBhcHAgPSB0aGlzO1xuICAgIHRoaXMuX2Vuc3VyZUludGVybmFsUHJvamVjdCgpO1xuICAgIHJldHVybiB7XG4gICAgICBjcmVhdGVQcm9qZWN0KG5ld1Byb2plY3QpIHtcbiAgICAgICAgcmV0dXJuIGFwcC5fY3JlYXRlUHJvamVjdChzZXNzaW9uLCBuZXdQcm9qZWN0KTtcbiAgICAgIH0sXG4gICAgICBsaXN0T3duZWRQcm9qZWN0cygpIHtcbiAgICAgICAgcmV0dXJuIGFwcC5fbGlzdE93bmVkUHJvamVjdHMoc2Vzc2lvbik7XG4gICAgICB9LFxuICAgICAgdXNlT3duZWRQcm9qZWN0cygpIHtcbiAgICAgICAgcmV0dXJuIGFwcC5fdXNlT3duZWRQcm9qZWN0cyhzZXNzaW9uKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIF9jdXJyZW50VXNlckZyb21DcnVkKGNydWQsIHNlc3Npb24pIHtcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IHtcbiAgICAgIC4uLnRoaXMuX2NyZWF0ZUJhc2VVc2VyKGNydWQpLFxuICAgICAgLi4udGhpcy5fY3JlYXRlQXV0aChzZXNzaW9uKSxcbiAgICAgIC4uLnRoaXMuX2NyZWF0ZVVzZXJFeHRyYShjcnVkLCBzZXNzaW9uKSxcbiAgICAgIC4uLnRoaXMuX2lzSW50ZXJuYWxQcm9qZWN0KCkgPyB0aGlzLl9jcmVhdGVJbnRlcm5hbFVzZXJFeHRyYShzZXNzaW9uKSA6IHt9XG4gICAgfTtcbiAgICBPYmplY3QuZnJlZXplKGN1cnJlbnRVc2VyKTtcbiAgICByZXR1cm4gY3VycmVudFVzZXI7XG4gIH1cbiAgX2dldE93bmVkQWRtaW5BcHAoZm9yUHJvamVjdElkLCBzZXNzaW9uKSB7XG4gICAgaWYgKCF0aGlzLl9vd25lZEFkbWluQXBwcy5oYXMoW3Nlc3Npb24sIGZvclByb2plY3RJZF0pKSB7XG4gICAgICB0aGlzLl9vd25lZEFkbWluQXBwcy5zZXQoW3Nlc3Npb24sIGZvclByb2plY3RJZF0sIG5ldyBfU3RhY2tBZG1pbkFwcEltcGwoe1xuICAgICAgICBiYXNlVXJsOiB0aGlzLl9pbnRlcmZhY2Uub3B0aW9ucy5iYXNlVXJsLFxuICAgICAgICBwcm9qZWN0SWQ6IGZvclByb2plY3RJZCxcbiAgICAgICAgdG9rZW5TdG9yZTogbnVsbCxcbiAgICAgICAgcHJvamVjdE93bmVyU2Vzc2lvbjogc2Vzc2lvbixcbiAgICAgICAgbm9BdXRvbWF0aWNQcmVmZXRjaDogdHJ1ZVxuICAgICAgfSkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fb3duZWRBZG1pbkFwcHMuZ2V0KFtzZXNzaW9uLCBmb3JQcm9qZWN0SWRdKTtcbiAgfVxuICBnZXQgcHJvamVjdElkKCkge1xuICAgIHJldHVybiB0aGlzLl9pbnRlcmZhY2UucHJvamVjdElkO1xuICB9XG4gIGFzeW5jIF9pc1RydXN0ZWQodXJsKSB7XG4gICAgcmV0dXJuIGlzUmVsYXRpdmUodXJsKTtcbiAgfVxuICBnZXQgdXJscygpIHtcbiAgICByZXR1cm4gZ2V0VXJscyh0aGlzLl91cmxPcHRpb25zKTtcbiAgfVxuICBhc3luYyBfcmVkaXJlY3RJZlRydXN0ZWQodXJsLCBvcHRpb25zKSB7XG4gICAgaWYgKCFhd2FpdCB0aGlzLl9pc1RydXN0ZWQodXJsKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBSZWRpcmVjdCBVUkwgJHt1cmx9IGlzIG5vdCB0cnVzdGVkOyBzaG91bGQgYmUgcmVsYXRpdmUuYCk7XG4gICAgfVxuICAgIHJldHVybiBhd2FpdCBfcmVkaXJlY3RUbyh1cmwsIG9wdGlvbnMpO1xuICB9XG4gIGFzeW5jIF9yZWRpcmVjdFRvSGFuZGxlcihoYW5kbGVyTmFtZSwgb3B0aW9ucykge1xuICAgIGxldCB1cmwgPSB0aGlzLnVybHNbaGFuZGxlck5hbWVdO1xuICAgIGlmICghdXJsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIFVSTCBmb3IgaGFuZGxlciBuYW1lICR7aGFuZGxlck5hbWV9YCk7XG4gICAgfVxuICAgIGlmICghb3B0aW9ucz8ubm9SZWRpcmVjdEJhY2spIHtcbiAgICAgIGlmIChoYW5kbGVyTmFtZSA9PT0gXCJhZnRlclNpZ25JblwiIHx8IGhhbmRsZXJOYW1lID09PSBcImFmdGVyU2lnblVwXCIpIHtcbiAgICAgICAgaWYgKGlzUmVhY3RTZXJ2ZXIgfHwgdHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9jaGVja0ZlYXR1cmVTdXBwb3J0KFwicnNjLWhhbmRsZXItXCIgKyBoYW5kbGVyTmFtZSwge30pO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgcXVlcnlQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xuICAgICAgICAgIHVybCA9IHF1ZXJ5UGFyYW1zLmdldChcImFmdGVyX2F1dGhfcmV0dXJuX3RvXCIpIHx8IHVybDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChoYW5kbGVyTmFtZSA9PT0gXCJzaWduSW5cIiB8fCBoYW5kbGVyTmFtZSA9PT0gXCJzaWduVXBcIikge1xuICAgICAgICBpZiAoaXNSZWFjdFNlcnZlciB8fCB0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX2NoZWNrRmVhdHVyZVN1cHBvcnQoXCJyc2MtaGFuZGxlci1cIiArIGhhbmRsZXJOYW1lLCB7fSk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBjdXJyZW50VXJsID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZik7XG4gICAgICAgICAgY29uc3QgbmV4dFVybCA9IG5ldyBVUkwodXJsLCBjdXJyZW50VXJsKTtcbiAgICAgICAgICBpZiAoY3VycmVudFVybC5zZWFyY2hQYXJhbXMuaGFzKFwiYWZ0ZXJfYXV0aF9yZXR1cm5fdG9cIikpIHtcbiAgICAgICAgICAgIG5leHRVcmwuc2VhcmNoUGFyYW1zLnNldChcImFmdGVyX2F1dGhfcmV0dXJuX3RvXCIsIGN1cnJlbnRVcmwuc2VhcmNoUGFyYW1zLmdldChcImFmdGVyX2F1dGhfcmV0dXJuX3RvXCIpKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRVcmwucHJvdG9jb2wgPT09IG5leHRVcmwucHJvdG9jb2wgJiYgY3VycmVudFVybC5ob3N0ID09PSBuZXh0VXJsLmhvc3QpIHtcbiAgICAgICAgICAgIG5leHRVcmwuc2VhcmNoUGFyYW1zLnNldChcImFmdGVyX2F1dGhfcmV0dXJuX3RvXCIsIGdldFJlbGF0aXZlUGFydChjdXJyZW50VXJsKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHVybCA9IGdldFJlbGF0aXZlUGFydChuZXh0VXJsKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBhd2FpdCB0aGlzLl9yZWRpcmVjdElmVHJ1c3RlZCh1cmwsIG9wdGlvbnMpO1xuICB9XG4gIGFzeW5jIHJlZGlyZWN0VG9TaWduSW4ob3B0aW9ucykge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLl9yZWRpcmVjdFRvSGFuZGxlcihcInNpZ25JblwiLCBvcHRpb25zKTtcbiAgfVxuICBhc3luYyByZWRpcmVjdFRvU2lnblVwKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5fcmVkaXJlY3RUb0hhbmRsZXIoXCJzaWduVXBcIiwgb3B0aW9ucyk7XG4gIH1cbiAgYXN5bmMgcmVkaXJlY3RUb1NpZ25PdXQob3B0aW9ucykge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLl9yZWRpcmVjdFRvSGFuZGxlcihcInNpZ25PdXRcIiwgb3B0aW9ucyk7XG4gIH1cbiAgYXN5bmMgcmVkaXJlY3RUb0VtYWlsVmVyaWZpY2F0aW9uKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5fcmVkaXJlY3RUb0hhbmRsZXIoXCJlbWFpbFZlcmlmaWNhdGlvblwiLCBvcHRpb25zKTtcbiAgfVxuICBhc3luYyByZWRpcmVjdFRvUGFzc3dvcmRSZXNldChvcHRpb25zKSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuX3JlZGlyZWN0VG9IYW5kbGVyKFwicGFzc3dvcmRSZXNldFwiLCBvcHRpb25zKTtcbiAgfVxuICBhc3luYyByZWRpcmVjdFRvRm9yZ290UGFzc3dvcmQob3B0aW9ucykge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLl9yZWRpcmVjdFRvSGFuZGxlcihcImZvcmdvdFBhc3N3b3JkXCIsIG9wdGlvbnMpO1xuICB9XG4gIGFzeW5jIHJlZGlyZWN0VG9Ib21lKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5fcmVkaXJlY3RUb0hhbmRsZXIoXCJob21lXCIsIG9wdGlvbnMpO1xuICB9XG4gIGFzeW5jIHJlZGlyZWN0VG9PQXV0aENhbGxiYWNrKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5fcmVkaXJlY3RUb0hhbmRsZXIoXCJvYXV0aENhbGxiYWNrXCIsIG9wdGlvbnMpO1xuICB9XG4gIGFzeW5jIHJlZGlyZWN0VG9NYWdpY0xpbmtDYWxsYmFjayhvcHRpb25zKSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuX3JlZGlyZWN0VG9IYW5kbGVyKFwibWFnaWNMaW5rQ2FsbGJhY2tcIiwgb3B0aW9ucyk7XG4gIH1cbiAgYXN5bmMgcmVkaXJlY3RUb0FmdGVyU2lnbkluKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5fcmVkaXJlY3RUb0hhbmRsZXIoXCJhZnRlclNpZ25JblwiLCBvcHRpb25zKTtcbiAgfVxuICBhc3luYyByZWRpcmVjdFRvQWZ0ZXJTaWduVXAob3B0aW9ucykge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLl9yZWRpcmVjdFRvSGFuZGxlcihcImFmdGVyU2lnblVwXCIsIG9wdGlvbnMpO1xuICB9XG4gIGFzeW5jIHJlZGlyZWN0VG9BZnRlclNpZ25PdXQob3B0aW9ucykge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLl9yZWRpcmVjdFRvSGFuZGxlcihcImFmdGVyU2lnbk91dFwiLCBvcHRpb25zKTtcbiAgfVxuICBhc3luYyByZWRpcmVjdFRvQWNjb3VudFNldHRpbmdzKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5fcmVkaXJlY3RUb0hhbmRsZXIoXCJhY2NvdW50U2V0dGluZ3NcIiwgb3B0aW9ucyk7XG4gIH1cbiAgYXN5bmMgcmVkaXJlY3RUb0Vycm9yKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5fcmVkaXJlY3RUb0hhbmRsZXIoXCJlcnJvclwiLCBvcHRpb25zKTtcbiAgfVxuICBhc3luYyByZWRpcmVjdFRvVGVhbUludml0YXRpb24ob3B0aW9ucykge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLl9yZWRpcmVjdFRvSGFuZGxlcihcInRlYW1JbnZpdGF0aW9uXCIsIG9wdGlvbnMpO1xuICB9XG4gIGFzeW5jIHNlbmRGb3Jnb3RQYXNzd29yZEVtYWlsKGVtYWlsKSB7XG4gICAgY29uc3QgcmVkaXJlY3RVcmwgPSBjb25zdHJ1Y3RSZWRpcmVjdFVybCh0aGlzLnVybHMucGFzc3dvcmRSZXNldCk7XG4gICAgY29uc3QgZXJyb3IgPSBhd2FpdCB0aGlzLl9pbnRlcmZhY2Uuc2VuZEZvcmdvdFBhc3N3b3JkRW1haWwoZW1haWwsIHJlZGlyZWN0VXJsKTtcbiAgICByZXR1cm4gZXJyb3I7XG4gIH1cbiAgYXN5bmMgc2VuZE1hZ2ljTGlua0VtYWlsKGVtYWlsKSB7XG4gICAgY29uc3QgbWFnaWNMaW5rUmVkaXJlY3RVcmwgPSBjb25zdHJ1Y3RSZWRpcmVjdFVybCh0aGlzLnVybHMubWFnaWNMaW5rQ2FsbGJhY2spO1xuICAgIGNvbnN0IGVycm9yID0gYXdhaXQgdGhpcy5faW50ZXJmYWNlLnNlbmRNYWdpY0xpbmtFbWFpbChlbWFpbCwgbWFnaWNMaW5rUmVkaXJlY3RVcmwpO1xuICAgIHJldHVybiBlcnJvcjtcbiAgfVxuICBhc3luYyByZXNldFBhc3N3b3JkKG9wdGlvbnMpIHtcbiAgICBjb25zdCBlcnJvciA9IGF3YWl0IHRoaXMuX2ludGVyZmFjZS5yZXNldFBhc3N3b3JkKG9wdGlvbnMpO1xuICAgIHJldHVybiBlcnJvcjtcbiAgfVxuICBhc3luYyB2ZXJpZnlQYXNzd29yZFJlc2V0Q29kZShjb2RlKSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuX2ludGVyZmFjZS52ZXJpZnlQYXNzd29yZFJlc2V0Q29kZShjb2RlKTtcbiAgfVxuICBhc3luYyB2ZXJpZnlUZWFtSW52aXRhdGlvbkNvZGUoY29kZSkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuX2ludGVyZmFjZS5hY2NlcHRUZWFtSW52aXRhdGlvbih7XG4gICAgICB0eXBlOiBcImNoZWNrXCIsXG4gICAgICBjb2RlLFxuICAgICAgc2Vzc2lvbjogdGhpcy5fZ2V0U2Vzc2lvbigpXG4gICAgfSk7XG4gICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwib2tcIikge1xuICAgICAgcmV0dXJuIFJlc3VsdC5vayh2b2lkIDApO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHJlc3VsdC5lcnJvcik7XG4gICAgfVxuICB9XG4gIGFzeW5jIGFjY2VwdFRlYW1JbnZpdGF0aW9uKGNvZGUpIHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLl9pbnRlcmZhY2UuYWNjZXB0VGVhbUludml0YXRpb24oe1xuICAgICAgdHlwZTogXCJ1c2VcIixcbiAgICAgIGNvZGUsXG4gICAgICBzZXNzaW9uOiB0aGlzLl9nZXRTZXNzaW9uKClcbiAgICB9KTtcbiAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJva1wiKSB7XG4gICAgICByZXR1cm4gUmVzdWx0Lm9rKHZvaWQgMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IocmVzdWx0LmVycm9yKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgZ2V0VGVhbUludml0YXRpb25EZXRhaWxzKGNvZGUpIHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLl9pbnRlcmZhY2UuYWNjZXB0VGVhbUludml0YXRpb24oe1xuICAgICAgdHlwZTogXCJkZXRhaWxzXCIsXG4gICAgICBjb2RlLFxuICAgICAgc2Vzc2lvbjogdGhpcy5fZ2V0U2Vzc2lvbigpXG4gICAgfSk7XG4gICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwib2tcIikge1xuICAgICAgcmV0dXJuIFJlc3VsdC5vayh7IHRlYW1EaXNwbGF5TmFtZTogcmVzdWx0LmRhdGEudGVhbV9kaXNwbGF5X25hbWUgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IocmVzdWx0LmVycm9yKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgdmVyaWZ5RW1haWwoY29kZSkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLl9pbnRlcmZhY2UudmVyaWZ5RW1haWwoY29kZSk7XG4gIH1cbiAgYXN5bmMgZ2V0VXNlcihvcHRpb25zKSB7XG4gICAgdGhpcy5fZW5zdXJlUGVyc2lzdGVudFRva2VuU3RvcmUob3B0aW9ucz8udG9rZW5TdG9yZSk7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IHRoaXMuX2dldFNlc3Npb24ob3B0aW9ucz8udG9rZW5TdG9yZSk7XG4gICAgY29uc3QgY3J1ZCA9IGF3YWl0IHRoaXMuX2N1cnJlbnRVc2VyQ2FjaGUuZ2V0T3JXYWl0KFtzZXNzaW9uXSwgXCJ3cml0ZS1vbmx5XCIpO1xuICAgIGlmIChjcnVkID09PSBudWxsKSB7XG4gICAgICBzd2l0Y2ggKG9wdGlvbnM/Lm9yKSB7XG4gICAgICAgIGNhc2UgXCJyZWRpcmVjdFwiOiB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5yZWRpcmVjdFRvU2lnbkluKHsgcmVwbGFjZTogdHJ1ZSB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwidGhyb3dcIjoge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVzZXIgaXMgbm90IHNpZ25lZCBpbiBidXQgZ2V0VXNlciB3YXMgY2FsbGVkIHdpdGggeyBvcjogJ3Rocm93JyB9XCIpO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY3J1ZCAmJiB0aGlzLl9jdXJyZW50VXNlckZyb21DcnVkKGNydWQsIHNlc3Npb24pO1xuICB9XG4gIHVzZVVzZXIob3B0aW9ucykge1xuICAgIHRoaXMuX2Vuc3VyZVBlcnNpc3RlbnRUb2tlblN0b3JlKG9wdGlvbnM/LnRva2VuU3RvcmUpO1xuICAgIGNvbnN0IHJvdXRlciA9IE5leHROYXZpZ2F0aW9uLnVzZVJvdXRlcigpO1xuICAgIGNvbnN0IHNlc3Npb24gPSB0aGlzLl91c2VTZXNzaW9uKG9wdGlvbnM/LnRva2VuU3RvcmUpO1xuICAgIGNvbnN0IGNydWQgPSB1c2VBc3luY0NhY2hlKHRoaXMuX2N1cnJlbnRVc2VyQ2FjaGUsIFtzZXNzaW9uXSwgXCJ1c2VVc2VyKClcIik7XG4gICAgaWYgKGNydWQgPT09IG51bGwpIHtcbiAgICAgIHN3aXRjaCAob3B0aW9ucz8ub3IpIHtcbiAgICAgICAgY2FzZSBcInJlZGlyZWN0XCI6IHtcbiAgICAgICAgICBydW5Bc3luY2hyb25vdXNseSh0aGlzLnJlZGlyZWN0VG9TaWduSW4oeyByZXBsYWNlOiB0cnVlIH0pKTtcbiAgICAgICAgICBzdXNwZW5kKCk7XG4gICAgICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJzdXNwZW5kIHNob3VsZCBuZXZlciByZXR1cm5cIik7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInRocm93XCI6IHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVc2VyIGlzIG5vdCBzaWduZWQgaW4gYnV0IHVzZVVzZXIgd2FzIGNhbGxlZCB3aXRoIHsgb3I6ICd0aHJvdycgfVwiKTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIHZvaWQgMDpcbiAgICAgICAgY2FzZSBcInJldHVybi1udWxsXCI6IHtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXNlTWVtbygoKSA9PiB7XG4gICAgICByZXR1cm4gY3J1ZCAmJiB0aGlzLl9jdXJyZW50VXNlckZyb21DcnVkKGNydWQsIHNlc3Npb24pO1xuICAgIH0sIFtjcnVkLCBzZXNzaW9uLCBvcHRpb25zPy5vcl0pO1xuICB9XG4gIGFzeW5jIF91cGRhdGVDbGllbnRVc2VyKHVwZGF0ZSwgc2Vzc2lvbikge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuX2ludGVyZmFjZS51cGRhdGVDbGllbnRVc2VyKHVzZXJVcGRhdGVPcHRpb25zVG9DcnVkKHVwZGF0ZSksIHNlc3Npb24pO1xuICAgIGF3YWl0IHRoaXMuX3JlZnJlc2hVc2VyKHNlc3Npb24pO1xuICAgIHJldHVybiByZXM7XG4gIH1cbiAgYXN5bmMgc2lnbkluV2l0aE9BdXRoKHByb3ZpZGVyKSB7XG4gICAgdGhpcy5fZW5zdXJlUGVyc2lzdGVudFRva2VuU3RvcmUoKTtcbiAgICBhd2FpdCBzaWduSW5XaXRoT0F1dGgoXG4gICAgICB0aGlzLl9pbnRlcmZhY2UsXG4gICAgICB7XG4gICAgICAgIHByb3ZpZGVyLFxuICAgICAgICByZWRpcmVjdFVybDogdGhpcy51cmxzLm9hdXRoQ2FsbGJhY2ssXG4gICAgICAgIGVycm9yUmVkaXJlY3RVcmw6IHRoaXMudXJscy5lcnJvcixcbiAgICAgICAgcHJvdmlkZXJTY29wZTogdGhpcy5fb2F1dGhTY29wZXNPblNpZ25Jbltwcm92aWRlcl0/LmpvaW4oXCIgXCIpXG4gICAgICB9XG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogQGRlcHJlY2F0ZWRcbiAgICogVE9ETyByZW1vdmVcbiAgICovXG4gIGFzeW5jIF9leHBlcmltZW50YWxNZmEoZXJyb3IsIHNlc3Npb24pIHtcbiAgICBjb25zdCBvdHAgPSBwcm9tcHQoXCJQbGVhc2UgZW50ZXIgdGhlIHNpeC1kaWdpdCBUT1RQIGNvZGUgZnJvbSB5b3VyIGF1dGhlbnRpY2F0b3IgYXBwLlwiKTtcbiAgICBpZiAoIW90cCkge1xuICAgICAgdGhyb3cgbmV3IEtub3duRXJyb3JzLkludmFsaWRUb3RwQ29kZSgpO1xuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgdGhpcy5faW50ZXJmYWNlLnRvdHBNZmEoXG4gICAgICBlcnJvci5kZXRhaWxzPy5hdHRlbXB0X2NvZGUgPz8gdGhyb3dFcnIoXCJhdHRlbXB0IGNvZGUgbWlzc2luZ1wiKSxcbiAgICAgIG90cCxcbiAgICAgIHNlc3Npb25cbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZFxuICAgKiBUT0RPIHJlbW92ZVxuICAgKi9cbiAgYXN5bmMgX2NhdGNoTWZhUmVxdWlyZWRFcnJvcihjYWxsYmFjaykge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgY2FsbGJhY2soKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAoZSBpbnN0YW5jZW9mIEtub3duRXJyb3JzLk11bHRpRmFjdG9yQXV0aGVudGljYXRpb25SZXF1aXJlZCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fZXhwZXJpbWVudGFsTWZhKGUsIHRoaXMuX2dldFNlc3Npb24oKSk7XG4gICAgICB9XG4gICAgICB0aHJvdyBlO1xuICAgIH1cbiAgfVxuICBhc3luYyBzaWduSW5XaXRoQ3JlZGVudGlhbChvcHRpb25zKSB7XG4gICAgdGhpcy5fZW5zdXJlUGVyc2lzdGVudFRva2VuU3RvcmUoKTtcbiAgICBjb25zdCBzZXNzaW9uID0gdGhpcy5fZ2V0U2Vzc2lvbigpO1xuICAgIGxldCByZXN1bHQ7XG4gICAgdHJ5IHtcbiAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMuX2NhdGNoTWZhUmVxdWlyZWRFcnJvcihhc3luYyAoKSA9PiB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9pbnRlcmZhY2Uuc2lnbkluV2l0aENyZWRlbnRpYWwob3B0aW9ucy5lbWFpbCwgb3B0aW9ucy5wYXNzd29yZCwgc2Vzc2lvbik7XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAoZSBpbnN0YW5jZW9mIEtub3duRXJyb3JzLkludmFsaWRUb3RwQ29kZSkge1xuICAgICAgICByZXR1cm4gZTtcbiAgICAgIH1cbiAgICAgIHRocm93IGU7XG4gICAgfVxuICAgIGlmICghKHJlc3VsdCBpbnN0YW5jZW9mIEtub3duRXJyb3IpKSB7XG4gICAgICBhd2FpdCB0aGlzLl9zaWduSW5Ub0FjY291bnRXaXRoVG9rZW5zKHJlc3VsdCk7XG4gICAgICBpZiAoIW9wdGlvbnMubm9SZWRpcmVjdCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5yZWRpcmVjdFRvQWZ0ZXJTaWduSW4oeyByZXBsYWNlOiB0cnVlIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIGFzeW5jIHNpZ25VcFdpdGhDcmVkZW50aWFsKG9wdGlvbnMpIHtcbiAgICB0aGlzLl9lbnN1cmVQZXJzaXN0ZW50VG9rZW5TdG9yZSgpO1xuICAgIGNvbnN0IHNlc3Npb24gPSB0aGlzLl9nZXRTZXNzaW9uKCk7XG4gICAgY29uc3QgZW1haWxWZXJpZmljYXRpb25SZWRpcmVjdFVybCA9IGNvbnN0cnVjdFJlZGlyZWN0VXJsKHRoaXMudXJscy5lbWFpbFZlcmlmaWNhdGlvbik7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5faW50ZXJmYWNlLnNpZ25VcFdpdGhDcmVkZW50aWFsKFxuICAgICAgb3B0aW9ucy5lbWFpbCxcbiAgICAgIG9wdGlvbnMucGFzc3dvcmQsXG4gICAgICBlbWFpbFZlcmlmaWNhdGlvblJlZGlyZWN0VXJsLFxuICAgICAgc2Vzc2lvblxuICAgICk7XG4gICAgaWYgKCEocmVzdWx0IGluc3RhbmNlb2YgS25vd25FcnJvcikpIHtcbiAgICAgIGF3YWl0IHRoaXMuX3NpZ25JblRvQWNjb3VudFdpdGhUb2tlbnMocmVzdWx0KTtcbiAgICAgIGlmICghb3B0aW9ucy5ub1JlZGlyZWN0KSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnJlZGlyZWN0VG9BZnRlclNpZ25VcCh7IHJlcGxhY2U6IHRydWUgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgYXN5bmMgc2lnbkluV2l0aE1hZ2ljTGluayhjb2RlKSB7XG4gICAgdGhpcy5fZW5zdXJlUGVyc2lzdGVudFRva2VuU3RvcmUoKTtcbiAgICBsZXQgcmVzdWx0O1xuICAgIHRyeSB7XG4gICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLl9jYXRjaE1mYVJlcXVpcmVkRXJyb3IoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5faW50ZXJmYWNlLnNpZ25JbldpdGhNYWdpY0xpbmsoY29kZSk7XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAoZSBpbnN0YW5jZW9mIEtub3duRXJyb3JzLkludmFsaWRUb3RwQ29kZSkge1xuICAgICAgICByZXR1cm4gZTtcbiAgICAgIH1cbiAgICAgIHRocm93IGU7XG4gICAgfVxuICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBLbm93bkVycm9yKSB7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBhd2FpdCB0aGlzLl9zaWduSW5Ub0FjY291bnRXaXRoVG9rZW5zKHJlc3VsdCk7XG4gICAgaWYgKHJlc3VsdC5uZXdVc2VyKSB7XG4gICAgICBhd2FpdCB0aGlzLnJlZGlyZWN0VG9BZnRlclNpZ25VcCh7IHJlcGxhY2U6IHRydWUgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGF3YWl0IHRoaXMucmVkaXJlY3RUb0FmdGVyU2lnbkluKHsgcmVwbGFjZTogdHJ1ZSB9KTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgY2FsbE9BdXRoQ2FsbGJhY2soKSB7XG4gICAgdGhpcy5fZW5zdXJlUGVyc2lzdGVudFRva2VuU3RvcmUoKTtcbiAgICBsZXQgcmVzdWx0O1xuICAgIHRyeSB7XG4gICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLl9jYXRjaE1mYVJlcXVpcmVkRXJyb3IoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZXR1cm4gYXdhaXQgY2FsbE9BdXRoQ2FsbGJhY2sodGhpcy5faW50ZXJmYWNlLCB0aGlzLnVybHMub2F1dGhDYWxsYmFjayk7XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAoZSBpbnN0YW5jZW9mIEtub3duRXJyb3JzLkludmFsaWRUb3RwQ29kZSkge1xuICAgICAgICBhbGVydChcIkludmFsaWQgVE9UUCBjb2RlLiBQbGVhc2UgdHJ5IHNpZ25pbmcgaW4gYWdhaW4uXCIpO1xuICAgICAgfVxuICAgICAgdGhyb3cgZTtcbiAgICB9XG4gICAgaWYgKHJlc3VsdCkge1xuICAgICAgY29uc29sZS5sb2coXCJPQXV0aCBjYWxsYmFjayByZXN1bHRcIiwgcmVzdWx0KTtcbiAgICAgIGF3YWl0IHRoaXMuX3NpZ25JblRvQWNjb3VudFdpdGhUb2tlbnMocmVzdWx0KTtcbiAgICAgIGlmIChcImFmdGVyQ2FsbGJhY2tSZWRpcmVjdFVybFwiIGluIHJlc3VsdCAmJiByZXN1bHQuYWZ0ZXJDYWxsYmFja1JlZGlyZWN0VXJsKSB7XG4gICAgICAgIGF3YWl0IF9yZWRpcmVjdFRvKHJlc3VsdC5hZnRlckNhbGxiYWNrUmVkaXJlY3RVcmwsIHsgcmVwbGFjZTogdHJ1ZSB9KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGVsc2UgaWYgKHJlc3VsdC5uZXdVc2VyKSB7XG4gICAgICAgIGF3YWl0IHRoaXMucmVkaXJlY3RUb0FmdGVyU2lnblVwKHsgcmVwbGFjZTogdHJ1ZSB9KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCB0aGlzLnJlZGlyZWN0VG9BZnRlclNpZ25Jbih7IHJlcGxhY2U6IHRydWUgfSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgYXN5bmMgX3NpZ25PdXQoc2Vzc2lvbikge1xuICAgIGF3YWl0IHRoaXMuX2ludGVyZmFjZS5zaWduT3V0KHNlc3Npb24pO1xuICAgIGF3YWl0IHRoaXMucmVkaXJlY3RUb0FmdGVyU2lnbk91dCgpO1xuICB9XG4gIGFzeW5jIF9zZW5kVmVyaWZpY2F0aW9uRW1haWwoZW1haWwsIHNlc3Npb24pIHtcbiAgICBjb25zdCBlbWFpbFZlcmlmaWNhdGlvblJlZGlyZWN0VXJsID0gY29uc3RydWN0UmVkaXJlY3RVcmwodGhpcy51cmxzLmVtYWlsVmVyaWZpY2F0aW9uKTtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5faW50ZXJmYWNlLnNlbmRWZXJpZmljYXRpb25FbWFpbChlbWFpbCwgZW1haWxWZXJpZmljYXRpb25SZWRpcmVjdFVybCwgc2Vzc2lvbik7XG4gIH1cbiAgYXN5bmMgX3VwZGF0ZVBhc3N3b3JkKG9wdGlvbnMsIHNlc3Npb24pIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5faW50ZXJmYWNlLnVwZGF0ZVBhc3N3b3JkKG9wdGlvbnMsIHNlc3Npb24pO1xuICB9XG4gIGFzeW5jIHNpZ25PdXQoKSB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHRoaXMuZ2V0VXNlcigpO1xuICAgIGlmICh1c2VyKSB7XG4gICAgICBhd2FpdCB1c2VyLnNpZ25PdXQoKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgZ2V0UHJvamVjdCgpIHtcbiAgICBjb25zdCBjcnVkID0gYXdhaXQgdGhpcy5fY3VycmVudFByb2plY3RDYWNoZS5nZXRPcldhaXQoW10sIFwid3JpdGUtb25seVwiKTtcbiAgICByZXR1cm4gdGhpcy5fY2xpZW50UHJvamVjdEZyb21DcnVkKGNydWQpO1xuICB9XG4gIHVzZVByb2plY3QoKSB7XG4gICAgY29uc3QgY3J1ZCA9IHVzZUFzeW5jQ2FjaGUodGhpcy5fY3VycmVudFByb2plY3RDYWNoZSwgW10sIFwidXNlUHJvamVjdCgpXCIpO1xuICAgIHJldHVybiB1c2VNZW1vKCgpID0+IHRoaXMuX2NsaWVudFByb2plY3RGcm9tQ3J1ZChjcnVkKSwgW2NydWRdKTtcbiAgfVxuICBhc3luYyBfbGlzdE93bmVkUHJvamVjdHMoc2Vzc2lvbikge1xuICAgIHRoaXMuX2Vuc3VyZUludGVybmFsUHJvamVjdCgpO1xuICAgIGNvbnN0IGNydWQgPSBhd2FpdCB0aGlzLl9vd25lZFByb2plY3RzQ2FjaGUuZ2V0T3JXYWl0KFtzZXNzaW9uXSwgXCJ3cml0ZS1vbmx5XCIpO1xuICAgIHJldHVybiBjcnVkLm1hcCgoaikgPT4gdGhpcy5fZ2V0T3duZWRBZG1pbkFwcChqLmlkLCBzZXNzaW9uKS5fYWRtaW5Pd25lZFByb2plY3RGcm9tQ3J1ZChcbiAgICAgIGosXG4gICAgICAoKSA9PiB0aGlzLl9yZWZyZXNoT3duZWRQcm9qZWN0cyhzZXNzaW9uKVxuICAgICkpO1xuICB9XG4gIF91c2VPd25lZFByb2plY3RzKHNlc3Npb24pIHtcbiAgICB0aGlzLl9lbnN1cmVJbnRlcm5hbFByb2plY3QoKTtcbiAgICBjb25zdCBwcm9qZWN0cyA9IHVzZUFzeW5jQ2FjaGUodGhpcy5fb3duZWRQcm9qZWN0c0NhY2hlLCBbc2Vzc2lvbl0sIFwidXNlT3duZWRQcm9qZWN0cygpXCIpO1xuICAgIHJldHVybiB1c2VNZW1vKCgpID0+IHByb2plY3RzLm1hcCgoaikgPT4gdGhpcy5fZ2V0T3duZWRBZG1pbkFwcChqLmlkLCBzZXNzaW9uKS5fYWRtaW5Pd25lZFByb2plY3RGcm9tQ3J1ZChcbiAgICAgIGosXG4gICAgICAoKSA9PiB0aGlzLl9yZWZyZXNoT3duZWRQcm9qZWN0cyhzZXNzaW9uKVxuICAgICkpLCBbcHJvamVjdHNdKTtcbiAgfVxuICBhc3luYyBfY3JlYXRlUHJvamVjdChzZXNzaW9uLCBuZXdQcm9qZWN0KSB7XG4gICAgdGhpcy5fZW5zdXJlSW50ZXJuYWxQcm9qZWN0KCk7XG4gICAgY29uc3QgY3J1ZCA9IGF3YWl0IHRoaXMuX2ludGVyZmFjZS5jcmVhdGVQcm9qZWN0KGFkbWluUHJvamVjdENyZWF0ZU9wdGlvbnNUb0NydWQobmV3UHJvamVjdCksIHNlc3Npb24pO1xuICAgIGNvbnN0IHJlcyA9IHRoaXMuX2dldE93bmVkQWRtaW5BcHAoY3J1ZC5pZCwgc2Vzc2lvbikuX2FkbWluT3duZWRQcm9qZWN0RnJvbUNydWQoXG4gICAgICBjcnVkLFxuICAgICAgKCkgPT4gdGhpcy5fcmVmcmVzaE93bmVkUHJvamVjdHMoc2Vzc2lvbilcbiAgICApO1xuICAgIGF3YWl0IHRoaXMuX3JlZnJlc2hPd25lZFByb2plY3RzKHNlc3Npb24pO1xuICAgIHJldHVybiByZXM7XG4gIH1cbiAgYXN5bmMgX3JlZnJlc2hVc2VyKHNlc3Npb24pIHtcbiAgICBhd2FpdCB0aGlzLl9yZWZyZXNoU2Vzc2lvbihzZXNzaW9uKTtcbiAgfVxuICBhc3luYyBfcmVmcmVzaFNlc3Npb24oc2Vzc2lvbikge1xuICAgIGF3YWl0IHRoaXMuX2N1cnJlbnRVc2VyQ2FjaGUucmVmcmVzaChbc2Vzc2lvbl0pO1xuICB9XG4gIGFzeW5jIF9yZWZyZXNoVXNlcnMoKSB7XG4gIH1cbiAgYXN5bmMgX3JlZnJlc2hQcm9qZWN0KCkge1xuICAgIGF3YWl0IHRoaXMuX2N1cnJlbnRQcm9qZWN0Q2FjaGUucmVmcmVzaChbXSk7XG4gIH1cbiAgYXN5bmMgX3JlZnJlc2hPd25lZFByb2plY3RzKHNlc3Npb24pIHtcbiAgICBhd2FpdCB0aGlzLl9vd25lZFByb2plY3RzQ2FjaGUucmVmcmVzaChbc2Vzc2lvbl0pO1xuICB9XG4gIHN0YXRpYyBnZXQgW3N0YWNrQXBwSW50ZXJuYWxzU3ltYm9sXSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZnJvbUNsaWVudEpzb246IChqc29uKSA9PiB7XG4gICAgICAgIGNvbnN0IHByb3ZpZGVkQ2hlY2tTdHJpbmcgPSBKU09OLnN0cmluZ2lmeShvbWl0KGpzb24sIFtcbiAgICAgICAgICAvKiBub25lIGN1cnJlbnRseSAqL1xuICAgICAgICBdKSk7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gYWxsQ2xpZW50QXBwcy5nZXQoanNvbi51bmlxdWVJZGVudGlmaWVyKTtcbiAgICAgICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgICAgY29uc3QgW2V4aXN0aW5nQ2hlY2tTdHJpbmcsIGNsaWVudEFwcF0gPSBleGlzdGluZztcbiAgICAgICAgICBpZiAoZXhpc3RpbmdDaGVja1N0cmluZyAhPT0gcHJvdmlkZWRDaGVja1N0cmluZykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJUaGUgcHJvdmlkZWQgYXBwIEpTT04gZG9lcyBub3QgbWF0Y2ggdGhlIGNvbmZpZ3VyYXRpb24gb2YgdGhlIGV4aXN0aW5nIGNsaWVudCBhcHAgd2l0aCB0aGUgc2FtZSB1bmlxdWUgaWRlbnRpZmllclwiLCB7IHByb3ZpZGVkT2JqOiBqc29uLCBleGlzdGluZ1N0cmluZzogZXhpc3RpbmdDaGVja1N0cmluZyB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGNsaWVudEFwcDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IF9fU3RhY2tDbGllbnRBcHBJbXBsKHtcbiAgICAgICAgICAuLi5qc29uLFxuICAgICAgICAgIGNoZWNrU3RyaW5nOiBwcm92aWRlZENoZWNrU3RyaW5nXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgZ2V0IFtzdGFja0FwcEludGVybmFsc1N5bWJvbF0oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRvQ2xpZW50SnNvbjogKCkgPT4ge1xuICAgICAgICBpZiAoIShcInB1Ymxpc2hhYmxlQ2xpZW50S2V5XCIgaW4gdGhpcy5faW50ZXJmYWNlLm9wdGlvbnMpKSB7XG4gICAgICAgICAgdGhyb3cgRXJyb3IoXCJDYW5ub3Qgc2VyaWFsaXplIHRvIEpTT04gZnJvbSBhbiBhcHBsaWNhdGlvbiB3aXRob3V0IGEgcHVibGlzaGFibGUgY2xpZW50IGtleVwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGJhc2VVcmw6IHRoaXMuX2ludGVyZmFjZS5vcHRpb25zLmJhc2VVcmwsXG4gICAgICAgICAgcHJvamVjdElkOiB0aGlzLnByb2plY3RJZCxcbiAgICAgICAgICBwdWJsaXNoYWJsZUNsaWVudEtleTogdGhpcy5faW50ZXJmYWNlLm9wdGlvbnMucHVibGlzaGFibGVDbGllbnRLZXksXG4gICAgICAgICAgdG9rZW5TdG9yZTogdGhpcy5fdG9rZW5TdG9yZUluaXQsXG4gICAgICAgICAgdXJsczogdGhpcy5fdXJsT3B0aW9ucyxcbiAgICAgICAgICBvYXV0aFNjb3Blc09uU2lnbkluOiB0aGlzLl9vYXV0aFNjb3Blc09uU2lnbkluLFxuICAgICAgICAgIHVuaXF1ZUlkZW50aWZpZXI6IHRoaXMuX2dldFVuaXF1ZUlkZW50aWZpZXIoKVxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIHNldEN1cnJlbnRVc2VyOiAodXNlckpzb25Qcm9taXNlKSA9PiB7XG4gICAgICAgIHJ1bkFzeW5jaHJvbm91c2x5KHRoaXMuX2N1cnJlbnRVc2VyQ2FjaGUuZm9yY2VTZXRDYWNoZWRWYWx1ZUFzeW5jKFt0aGlzLl9nZXRTZXNzaW9uKCldLCB1c2VySnNvblByb21pc2UpKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG59O1xudmFyIF9TdGFja1NlcnZlckFwcEltcGwgPSBjbGFzcyBleHRlbmRzIF9TdGFja0NsaWVudEFwcEltcGwge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgc3VwZXIoXCJpbnRlcmZhY2VcIiBpbiBvcHRpb25zID8ge1xuICAgICAgaW50ZXJmYWNlOiBvcHRpb25zLmludGVyZmFjZSxcbiAgICAgIHRva2VuU3RvcmU6IG9wdGlvbnMudG9rZW5TdG9yZSxcbiAgICAgIHVybHM6IG9wdGlvbnMudXJscyxcbiAgICAgIG9hdXRoU2NvcGVzT25TaWduSW46IG9wdGlvbnMub2F1dGhTY29wZXNPblNpZ25JblxuICAgIH0gOiB7XG4gICAgICBpbnRlcmZhY2U6IG5ldyBTdGFja1NlcnZlckludGVyZmFjZSh7XG4gICAgICAgIGJhc2VVcmw6IG9wdGlvbnMuYmFzZVVybCA/PyBnZXREZWZhdWx0QmFzZVVybCgpLFxuICAgICAgICBwcm9qZWN0SWQ6IG9wdGlvbnMucHJvamVjdElkID8/IGdldERlZmF1bHRQcm9qZWN0SWQoKSxcbiAgICAgICAgY2xpZW50VmVyc2lvbixcbiAgICAgICAgcHVibGlzaGFibGVDbGllbnRLZXk6IG9wdGlvbnMucHVibGlzaGFibGVDbGllbnRLZXkgPz8gZ2V0RGVmYXVsdFB1Ymxpc2hhYmxlQ2xpZW50S2V5KCksXG4gICAgICAgIHNlY3JldFNlcnZlcktleTogb3B0aW9ucy5zZWNyZXRTZXJ2ZXJLZXkgPz8gZ2V0RGVmYXVsdFNlY3JldFNlcnZlcktleSgpXG4gICAgICB9KSxcbiAgICAgIHRva2VuU3RvcmU6IG9wdGlvbnMudG9rZW5TdG9yZSxcbiAgICAgIHVybHM6IG9wdGlvbnMudXJscyA/PyB7fSxcbiAgICAgIG9hdXRoU2NvcGVzT25TaWduSW46IG9wdGlvbnMub2F1dGhTY29wZXNPblNpZ25JbiA/PyB7fVxuICAgIH0pO1xuICAgIC8vIFRPRE8gb3ZlcnJpZGUgdGhlIGNsaWVudCB1c2VyIGNhY2hlIHRvIHVzZSB0aGUgc2VydmVyIHVzZXIgY2FjaGUsIHNvIHdlIHNhdmUgc29tZSByZXF1ZXN0c1xuICAgIHRoaXMuX2N1cnJlbnRTZXJ2ZXJVc2VyQ2FjaGUgPSBjcmVhdGVDYWNoZUJ5U2Vzc2lvbihhc3luYyAoc2Vzc2lvbikgPT4ge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2ludGVyZmFjZS5nZXRTZXJ2ZXJVc2VyQnlUb2tlbihzZXNzaW9uKTtcbiAgICB9KTtcbiAgICB0aGlzLl9zZXJ2ZXJVc2Vyc0NhY2hlID0gY3JlYXRlQ2FjaGUoYXN5bmMgKCkgPT4ge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2ludGVyZmFjZS5saXN0U2VydmVyVXNlcnMoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9zZXJ2ZXJVc2VyQ2FjaGUgPSBjcmVhdGVDYWNoZShhc3luYyAoW3VzZXJJZF0pID0+IHtcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB0aGlzLl9pbnRlcmZhY2UuZ2V0U2VydmVyVXNlckJ5SWQodXNlcklkKTtcbiAgICAgIHJldHVybiBSZXN1bHQub3IodXNlciwgbnVsbCk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2VydmVyVGVhbXNDYWNoZSA9IGNyZWF0ZUNhY2hlKGFzeW5jIChbdXNlcklkXSkgPT4ge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2ludGVyZmFjZS5saXN0U2VydmVyVGVhbXMoeyB1c2VySWQgfSk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2VydmVyVGVhbVVzZXJQZXJtaXNzaW9uc0NhY2hlID0gY3JlYXRlQ2FjaGUoYXN5bmMgKFt0ZWFtSWQsIHVzZXJJZCwgcmVjdXJzaXZlXSkgPT4ge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2ludGVyZmFjZS5saXN0U2VydmVyVGVhbVBlcm1pc3Npb25zKHsgdGVhbUlkLCB1c2VySWQsIHJlY3Vyc2l2ZSB9LCBudWxsKTtcbiAgICB9KTtcbiAgICB0aGlzLl9zZXJ2ZXJVc2VyT0F1dGhDb25uZWN0aW9uQWNjZXNzVG9rZW5zQ2FjaGUgPSBjcmVhdGVDYWNoZShcbiAgICAgIGFzeW5jIChbdXNlcklkLCBwcm92aWRlcklkLCBzY29wZV0pID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLl9pbnRlcmZhY2UuY3JlYXRlU2VydmVyUHJvdmlkZXJBY2Nlc3NUb2tlbih1c2VySWQsIHByb3ZpZGVySWQsIHNjb3BlIHx8IFwiXCIpO1xuICAgICAgICAgIHJldHVybiB7IGFjY2Vzc1Rva2VuOiByZXN1bHQuYWNjZXNzX3Rva2VuIH07XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGlmICghKGVyciBpbnN0YW5jZW9mIEtub3duRXJyb3JzLk9BdXRoQ29ubmVjdGlvbkRvZXNOb3RIYXZlUmVxdWlyZWRTY29wZSB8fCBlcnIgaW5zdGFuY2VvZiBLbm93bkVycm9ycy5PQXV0aENvbm5lY3Rpb25Ob3RDb25uZWN0ZWRUb1VzZXIpKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICk7XG4gICAgdGhpcy5fc2VydmVyVXNlck9BdXRoQ29ubmVjdGlvbkNhY2hlID0gY3JlYXRlQ2FjaGUoXG4gICAgICBhc3luYyAoW3VzZXJJZCwgcHJvdmlkZXJJZCwgc2NvcGUsIHJlZGlyZWN0XSkgPT4ge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fZ2V0VXNlck9BdXRoQ29ubmVjdGlvbkNhY2hlRm4oe1xuICAgICAgICAgIGdldFVzZXI6IGFzeW5jICgpID0+IGF3YWl0IHRoaXMuX3NlcnZlclVzZXJDYWNoZS5nZXRPcldhaXQoW3VzZXJJZF0sIFwid3JpdGUtb25seVwiKSxcbiAgICAgICAgICBnZXRPcldhaXRPQXV0aFRva2VuOiBhc3luYyAoKSA9PiBhd2FpdCB0aGlzLl9zZXJ2ZXJVc2VyT0F1dGhDb25uZWN0aW9uQWNjZXNzVG9rZW5zQ2FjaGUuZ2V0T3JXYWl0KFt1c2VySWQsIHByb3ZpZGVySWQsIHNjb3BlIHx8IFwiXCJdLCBcIndyaXRlLW9ubHlcIiksXG4gICAgICAgICAgdXNlT0F1dGhUb2tlbjogKCkgPT4gdXNlQXN5bmNDYWNoZSh0aGlzLl9zZXJ2ZXJVc2VyT0F1dGhDb25uZWN0aW9uQWNjZXNzVG9rZW5zQ2FjaGUsIFt1c2VySWQsIHByb3ZpZGVySWQsIHNjb3BlIHx8IFwiXCJdLCBcInVzZXIudXNlQ29ubmVjdGVkQWNjb3VudCgpXCIpLFxuICAgICAgICAgIHByb3ZpZGVySWQsXG4gICAgICAgICAgc2NvcGUsXG4gICAgICAgICAgcmVkaXJlY3QsXG4gICAgICAgICAgc2Vzc2lvbjogbnVsbFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICApO1xuICAgIHRoaXMuX3NlcnZlclRlYW1NZW1iZXJQcm9maWxlc0NhY2hlID0gY3JlYXRlQ2FjaGUoXG4gICAgICBhc3luYyAoW3RlYW1JZF0pID0+IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2ludGVyZmFjZS5saXN0U2VydmVyVGVhbU1lbWJlclByb2ZpbGVzKHsgdGVhbUlkIH0pO1xuICAgICAgfVxuICAgICk7XG4gICAgdGhpcy5fc2VydmVyVXNlclRlYW1Qcm9maWxlQ2FjaGUgPSBjcmVhdGVDYWNoZShcbiAgICAgIGFzeW5jIChbdGVhbUlkLCB1c2VySWRdKSA9PiB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9pbnRlcmZhY2UuZ2V0U2VydmVyVGVhbU1lbWJlclByb2ZpbGUoeyB0ZWFtSWQsIHVzZXJJZCB9KTtcbiAgICAgIH1cbiAgICApO1xuICB9XG4gIGFzeW5jIF91cGRhdGVTZXJ2ZXJVc2VyKHVzZXJJZCwgdXBkYXRlKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5faW50ZXJmYWNlLnVwZGF0ZVNlcnZlclVzZXIodXNlcklkLCBzZXJ2ZXJVc2VyVXBkYXRlT3B0aW9uc1RvQ3J1ZCh1cGRhdGUpKTtcbiAgICBhd2FpdCB0aGlzLl9yZWZyZXNoVXNlcnMoKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIF9zZXJ2ZXJFZGl0YWJsZVRlYW1Qcm9maWxlRnJvbUNydWQoY3J1ZCkge1xuICAgIGNvbnN0IGFwcCA9IHRoaXM7XG4gICAgY29uc3QgY2xpZW50UHJvZmlsZSA9IHRoaXMuX2VkaXRhYmxlVGVhbVByb2ZpbGVGcm9tQ3J1ZChjcnVkKTtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uY2xpZW50UHJvZmlsZSxcbiAgICAgIGFzeW5jIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgYXdhaXQgY2xpZW50UHJvZmlsZS51cGRhdGUodXBkYXRlKTtcbiAgICAgICAgYXdhaXQgYXBwLl9zZXJ2ZXJVc2VyVGVhbVByb2ZpbGVDYWNoZS5yZWZyZXNoKFtjcnVkLnRlYW1faWQsIGNydWQudXNlcl9pZF0pO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgX3NlcnZlclVzZXJGcm9tQ3J1ZChjcnVkKSB7XG4gICAgY29uc3QgYXBwID0gdGhpcztcbiAgICBhc3luYyBmdW5jdGlvbiBnZXRDb25uZWN0ZWRBY2NvdW50KGlkLCBvcHRpb25zKSB7XG4gICAgICBjb25zdCBzY29wZVN0cmluZyA9IG9wdGlvbnM/LnNjb3Blcz8uam9pbihcIiBcIik7XG4gICAgICByZXR1cm4gYXdhaXQgYXBwLl9zZXJ2ZXJVc2VyT0F1dGhDb25uZWN0aW9uQ2FjaGUuZ2V0T3JXYWl0KFtjcnVkLmlkLCBpZCwgc2NvcGVTdHJpbmcgfHwgXCJcIiwgb3B0aW9ucz8ub3IgPT09IFwicmVkaXJlY3RcIl0sIFwid3JpdGUtb25seVwiKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdXNlQ29ubmVjdGVkQWNjb3VudChpZCwgb3B0aW9ucykge1xuICAgICAgY29uc3Qgc2NvcGVTdHJpbmcgPSBvcHRpb25zPy5zY29wZXM/LmpvaW4oXCIgXCIpO1xuICAgICAgcmV0dXJuIHVzZUFzeW5jQ2FjaGUoYXBwLl9zZXJ2ZXJVc2VyT0F1dGhDb25uZWN0aW9uQ2FjaGUsIFtjcnVkLmlkLCBpZCwgc2NvcGVTdHJpbmcgfHwgXCJcIiwgb3B0aW9ucz8ub3IgPT09IFwicmVkaXJlY3RcIl0sIFwidXNlci51c2VDb25uZWN0ZWRBY2NvdW50KClcIik7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAuLi5zdXBlci5fY3JlYXRlQmFzZVVzZXIoY3J1ZCksXG4gICAgICBsYXN0QWN0aXZlQXQ6IG5ldyBEYXRlKGNydWQubGFzdF9hY3RpdmVfYXRfbWlsbGlzKSxcbiAgICAgIHNlcnZlck1ldGFkYXRhOiBjcnVkLnNlcnZlcl9tZXRhZGF0YSxcbiAgICAgIGFzeW5jIHNldFByaW1hcnlFbWFpbChlbWFpbCwgb3B0aW9ucykge1xuICAgICAgICBhd2FpdCBhcHAuX3VwZGF0ZVNlcnZlclVzZXIoY3J1ZC5pZCwgeyBwcmltYXJ5RW1haWw6IGVtYWlsLCBwcmltYXJ5RW1haWxWZXJpZmllZDogb3B0aW9ucz8udmVyaWZpZWQgfSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgZ3JhbnRQZXJtaXNzaW9uKHNjb3BlLCBwZXJtaXNzaW9uSWQpIHtcbiAgICAgICAgYXdhaXQgYXBwLl9pbnRlcmZhY2UuZ3JhbnRTZXJ2ZXJUZWFtVXNlclBlcm1pc3Npb24oc2NvcGUuaWQsIGNydWQuaWQsIHBlcm1pc3Npb25JZCk7XG4gICAgICAgIGZvciAoY29uc3QgcmVjdXJzaXZlIG9mIFt0cnVlLCBmYWxzZV0pIHtcbiAgICAgICAgICBhd2FpdCBhcHAuX3NlcnZlclRlYW1Vc2VyUGVybWlzc2lvbnNDYWNoZS5yZWZyZXNoKFtzY29wZS5pZCwgY3J1ZC5pZCwgcmVjdXJzaXZlXSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBhc3luYyByZXZva2VQZXJtaXNzaW9uKHNjb3BlLCBwZXJtaXNzaW9uSWQpIHtcbiAgICAgICAgYXdhaXQgYXBwLl9pbnRlcmZhY2UucmV2b2tlU2VydmVyVGVhbVVzZXJQZXJtaXNzaW9uKHNjb3BlLmlkLCBjcnVkLmlkLCBwZXJtaXNzaW9uSWQpO1xuICAgICAgICBmb3IgKGNvbnN0IHJlY3Vyc2l2ZSBvZiBbdHJ1ZSwgZmFsc2VdKSB7XG4gICAgICAgICAgYXdhaXQgYXBwLl9zZXJ2ZXJUZWFtVXNlclBlcm1pc3Npb25zQ2FjaGUucmVmcmVzaChbc2NvcGUuaWQsIGNydWQuaWQsIHJlY3Vyc2l2ZV0pO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgYXN5bmMgZGVsZXRlKCkge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBhcHAuX2ludGVyZmFjZS5kZWxldGVTZXJ2ZXJTZXJ2ZXJVc2VyKGNydWQuaWQpO1xuICAgICAgICBhd2FpdCBhcHAuX3JlZnJlc2hVc2VycygpO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIGNyZWF0ZVNlc3Npb24ob3B0aW9ucykge1xuICAgICAgICBjb25zdCB0b2tlbnMgPSBhd2FpdCBhcHAuX2ludGVyZmFjZS5jcmVhdGVTZXJ2ZXJVc2VyU2Vzc2lvbihjcnVkLmlkLCBvcHRpb25zLmV4cGlyZXNJbk1pbGxpcyA/PyAxZTMgKiA2MCAqIDYwICogMjQgKiAzNjUpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGFzeW5jIGdldFRva2VucygpIHtcbiAgICAgICAgICAgIHJldHVybiB0b2tlbnM7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIGFzeW5jIHNldERpc3BsYXlOYW1lKGRpc3BsYXlOYW1lKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7IGRpc3BsYXlOYW1lIH0pO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIHNldENsaWVudE1ldGFkYXRhKG1ldGFkYXRhKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7IGNsaWVudE1ldGFkYXRhOiBtZXRhZGF0YSB9KTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBzZXRDbGllbnRSZWFkT25seU1ldGFkYXRhKG1ldGFkYXRhKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7IGNsaWVudFJlYWRPbmx5TWV0YWRhdGE6IG1ldGFkYXRhIH0pO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIHNldFNlcnZlck1ldGFkYXRhKG1ldGFkYXRhKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7IHNlcnZlck1ldGFkYXRhOiBtZXRhZGF0YSB9KTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBzZXRTZWxlY3RlZFRlYW0odGVhbSkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoeyBzZWxlY3RlZFRlYW1JZDogdGVhbT8uaWQgPz8gbnVsbCB9KTtcbiAgICAgIH0sXG4gICAgICBnZXRDb25uZWN0ZWRBY2NvdW50LFxuICAgICAgdXNlQ29ubmVjdGVkQWNjb3VudCxcbiAgICAgIGFzeW5jIGdldFRlYW0odGVhbUlkKSB7XG4gICAgICAgIGNvbnN0IHRlYW1zID0gYXdhaXQgdGhpcy5saXN0VGVhbXMoKTtcbiAgICAgICAgcmV0dXJuIHRlYW1zLmZpbmQoKHQpID0+IHQuaWQgPT09IHRlYW1JZCkgPz8gbnVsbDtcbiAgICAgIH0sXG4gICAgICB1c2VUZWFtKHRlYW1JZCkge1xuICAgICAgICBjb25zdCB0ZWFtcyA9IHRoaXMudXNlVGVhbXMoKTtcbiAgICAgICAgcmV0dXJuIHVzZU1lbW8oKCkgPT4ge1xuICAgICAgICAgIHJldHVybiB0ZWFtcy5maW5kKCh0KSA9PiB0LmlkID09PSB0ZWFtSWQpID8/IG51bGw7XG4gICAgICAgIH0sIFt0ZWFtcywgdGVhbUlkXSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgbGlzdFRlYW1zKCkge1xuICAgICAgICBjb25zdCB0ZWFtcyA9IGF3YWl0IGFwcC5fc2VydmVyVGVhbXNDYWNoZS5nZXRPcldhaXQoW2NydWQuaWRdLCBcIndyaXRlLW9ubHlcIik7XG4gICAgICAgIHJldHVybiB0ZWFtcy5tYXAoKHQpID0+IGFwcC5fc2VydmVyVGVhbUZyb21DcnVkKHQpKTtcbiAgICAgIH0sXG4gICAgICB1c2VUZWFtcygpIHtcbiAgICAgICAgY29uc3QgdGVhbXMgPSB1c2VBc3luY0NhY2hlKGFwcC5fc2VydmVyVGVhbXNDYWNoZSwgW2NydWQuaWRdLCBcInVzZXIudXNlVGVhbXMoKVwiKTtcbiAgICAgICAgcmV0dXJuIHVzZU1lbW8oKCkgPT4gdGVhbXMubWFwKCh0KSA9PiBhcHAuX3NlcnZlclRlYW1Gcm9tQ3J1ZCh0KSksIFt0ZWFtc10pO1xuICAgICAgfSxcbiAgICAgIGNyZWF0ZVRlYW06IGFzeW5jIChkYXRhKSA9PiB7XG4gICAgICAgIGNvbnN0IHRlYW0gPSBhd2FpdCBhcHAuX2ludGVyZmFjZS5jcmVhdGVTZXJ2ZXJUZWFtKHNlcnZlclRlYW1DcmVhdGVPcHRpb25zVG9DcnVkKGRhdGEpLCBhcHAuX2dldFNlc3Npb24oKSk7XG4gICAgICAgIGF3YWl0IGFwcC5fc2VydmVyVGVhbXNDYWNoZS5yZWZyZXNoKFt2b2lkIDBdKTtcbiAgICAgICAgcmV0dXJuIGFwcC5fc2VydmVyVGVhbUZyb21DcnVkKHRlYW0pO1xuICAgICAgfSxcbiAgICAgIGxlYXZlVGVhbTogYXN5bmMgKHRlYW0pID0+IHtcbiAgICAgICAgYXdhaXQgYXBwLl9pbnRlcmZhY2UubGVhdmVTZXJ2ZXJUZWFtKHsgdGVhbUlkOiB0ZWFtLmlkLCB1c2VySWQ6IGNydWQuaWQgfSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgbGlzdFBlcm1pc3Npb25zKHNjb3BlLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHJlY3Vyc2l2ZSA9IG9wdGlvbnM/LnJlY3Vyc2l2ZSA/PyB0cnVlO1xuICAgICAgICBjb25zdCBwZXJtaXNzaW9ucyA9IGF3YWl0IGFwcC5fc2VydmVyVGVhbVVzZXJQZXJtaXNzaW9uc0NhY2hlLmdldE9yV2FpdChbc2NvcGUuaWQsIGNydWQuaWQsIHJlY3Vyc2l2ZV0sIFwid3JpdGUtb25seVwiKTtcbiAgICAgICAgcmV0dXJuIHBlcm1pc3Npb25zLm1hcCgoY3J1ZDIpID0+IGFwcC5fc2VydmVyUGVybWlzc2lvbkZyb21DcnVkKGNydWQyKSk7XG4gICAgICB9LFxuICAgICAgdXNlUGVybWlzc2lvbnMoc2NvcGUsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcmVjdXJzaXZlID0gb3B0aW9ucz8ucmVjdXJzaXZlID8/IHRydWU7XG4gICAgICAgIGNvbnN0IHBlcm1pc3Npb25zID0gdXNlQXN5bmNDYWNoZShhcHAuX3NlcnZlclRlYW1Vc2VyUGVybWlzc2lvbnNDYWNoZSwgW3Njb3BlLmlkLCBjcnVkLmlkLCByZWN1cnNpdmVdLCBcInVzZXIudXNlUGVybWlzc2lvbnMoKVwiKTtcbiAgICAgICAgcmV0dXJuIHVzZU1lbW8oKCkgPT4gcGVybWlzc2lvbnMubWFwKChjcnVkMikgPT4gYXBwLl9zZXJ2ZXJQZXJtaXNzaW9uRnJvbUNydWQoY3J1ZDIpKSwgW3Blcm1pc3Npb25zXSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgZ2V0UGVybWlzc2lvbihzY29wZSwgcGVybWlzc2lvbklkKSB7XG4gICAgICAgIGNvbnN0IHBlcm1pc3Npb25zID0gYXdhaXQgdGhpcy5saXN0UGVybWlzc2lvbnMoc2NvcGUpO1xuICAgICAgICByZXR1cm4gcGVybWlzc2lvbnMuZmluZCgocCkgPT4gcC5pZCA9PT0gcGVybWlzc2lvbklkKSA/PyBudWxsO1xuICAgICAgfSxcbiAgICAgIHVzZVBlcm1pc3Npb24oc2NvcGUsIHBlcm1pc3Npb25JZCkge1xuICAgICAgICBjb25zdCBwZXJtaXNzaW9ucyA9IHRoaXMudXNlUGVybWlzc2lvbnMoc2NvcGUpO1xuICAgICAgICByZXR1cm4gdXNlTWVtbygoKSA9PiBwZXJtaXNzaW9ucy5maW5kKChwKSA9PiBwLmlkID09PSBwZXJtaXNzaW9uSWQpID8/IG51bGwsIFtwZXJtaXNzaW9ucywgcGVybWlzc2lvbklkXSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgaGFzUGVybWlzc2lvbihzY29wZSwgcGVybWlzc2lvbklkKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdldFBlcm1pc3Npb24oc2NvcGUsIHBlcm1pc3Npb25JZCkgIT09IG51bGw7XG4gICAgICB9LFxuICAgICAgYXN5bmMgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICBhd2FpdCBhcHAuX3VwZGF0ZVNlcnZlclVzZXIoY3J1ZC5pZCwgdXBkYXRlKTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBzZW5kVmVyaWZpY2F0aW9uRW1haWwoKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBhcHAuX2NoZWNrRmVhdHVyZVN1cHBvcnQoXCJzZW5kVmVyaWZpY2F0aW9uRW1haWwoKSBvbiBTZXJ2ZXJVc2VyXCIsIHt9KTtcbiAgICAgIH0sXG4gICAgICBhc3luYyB1cGRhdGVQYXNzd29yZChvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBhcHAuX2NoZWNrRmVhdHVyZVN1cHBvcnQoXCJ1cGRhdGVQYXNzd29yZCgpIG9uIFNlcnZlclVzZXJcIiwge30pO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIGdldFRlYW1Qcm9maWxlKHRlYW0pIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYXBwLl9zZXJ2ZXJVc2VyVGVhbVByb2ZpbGVDYWNoZS5nZXRPcldhaXQoW3RlYW0uaWQsIGNydWQuaWRdLCBcIndyaXRlLW9ubHlcIik7XG4gICAgICAgIHJldHVybiBhcHAuX3NlcnZlckVkaXRhYmxlVGVhbVByb2ZpbGVGcm9tQ3J1ZChyZXN1bHQpO1xuICAgICAgfSxcbiAgICAgIHVzZVRlYW1Qcm9maWxlKHRlYW0pIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdXNlQXN5bmNDYWNoZShhcHAuX3NlcnZlclVzZXJUZWFtUHJvZmlsZUNhY2hlLCBbdGVhbS5pZCwgY3J1ZC5pZF0sIFwidXNlci51c2VUZWFtUHJvZmlsZSgpXCIpO1xuICAgICAgICByZXR1cm4gdXNlTWVtbygoKSA9PiBhcHAuX3NlcnZlckVkaXRhYmxlVGVhbVByb2ZpbGVGcm9tQ3J1ZChyZXN1bHQpLCBbcmVzdWx0XSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBfc2VydmVyVGVhbVVzZXJGcm9tQ3J1ZChjcnVkKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnRoaXMuX3NlcnZlclVzZXJGcm9tQ3J1ZChjcnVkLnVzZXIpLFxuICAgICAgdGVhbVByb2ZpbGU6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6IGNydWQuZGlzcGxheV9uYW1lLFxuICAgICAgICBwcm9maWxlSW1hZ2VVcmw6IGNydWQucHJvZmlsZV9pbWFnZV91cmxcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIF9jdXJyZW50VXNlckZyb21DcnVkKGNydWQsIHNlc3Npb24pIHtcbiAgICBjb25zdCBhcHAgPSB0aGlzO1xuICAgIGNvbnN0IGN1cnJlbnRVc2VyID0ge1xuICAgICAgLi4udGhpcy5fc2VydmVyVXNlckZyb21DcnVkKGNydWQpLFxuICAgICAgLi4udGhpcy5fY3JlYXRlQXV0aChzZXNzaW9uKSxcbiAgICAgIC4uLnRoaXMuX2lzSW50ZXJuYWxQcm9qZWN0KCkgPyB0aGlzLl9jcmVhdGVJbnRlcm5hbFVzZXJFeHRyYShzZXNzaW9uKSA6IHt9XG4gICAgfTtcbiAgICBPYmplY3QuZnJlZXplKGN1cnJlbnRVc2VyKTtcbiAgICByZXR1cm4gY3VycmVudFVzZXI7XG4gIH1cbiAgX3NlcnZlclRlYW1Gcm9tQ3J1ZChjcnVkKSB7XG4gICAgY29uc3QgYXBwID0gdGhpcztcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IGNydWQuaWQsXG4gICAgICBkaXNwbGF5TmFtZTogY3J1ZC5kaXNwbGF5X25hbWUsXG4gICAgICBwcm9maWxlSW1hZ2VVcmw6IGNydWQucHJvZmlsZV9pbWFnZV91cmwsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKGNydWQuY3JlYXRlZF9hdF9taWxsaXMpLFxuICAgICAgYXN5bmMgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICBhd2FpdCBhcHAuX2ludGVyZmFjZS51cGRhdGVTZXJ2ZXJUZWFtKGNydWQuaWQsIHNlcnZlclRlYW1VcGRhdGVPcHRpb25zVG9DcnVkKHVwZGF0ZSkpO1xuICAgICAgICBhd2FpdCBhcHAuX3NlcnZlclRlYW1zQ2FjaGUucmVmcmVzaChbdm9pZCAwXSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgZGVsZXRlKCkge1xuICAgICAgICBhd2FpdCBhcHAuX2ludGVyZmFjZS5kZWxldGVTZXJ2ZXJUZWFtKGNydWQuaWQpO1xuICAgICAgICBhd2FpdCBhcHAuX3NlcnZlclRlYW1zQ2FjaGUucmVmcmVzaChbdm9pZCAwXSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgbGlzdFVzZXJzKCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhcHAuX3NlcnZlclRlYW1NZW1iZXJQcm9maWxlc0NhY2hlLmdldE9yV2FpdChbY3J1ZC5pZF0sIFwid3JpdGUtb25seVwiKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5tYXAoKHUpID0+IGFwcC5fc2VydmVyVGVhbVVzZXJGcm9tQ3J1ZCh1KSk7XG4gICAgICB9LFxuICAgICAgdXNlVXNlcnMoKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHVzZUFzeW5jQ2FjaGUoYXBwLl9zZXJ2ZXJUZWFtTWVtYmVyUHJvZmlsZXNDYWNoZSwgW2NydWQuaWRdLCBcInRlYW0udXNlVXNlcnMoKVwiKTtcbiAgICAgICAgcmV0dXJuIHVzZU1lbW8oKCkgPT4gcmVzdWx0Lm1hcCgodSkgPT4gYXBwLl9zZXJ2ZXJUZWFtVXNlckZyb21DcnVkKHUpKSwgW3Jlc3VsdF0pO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIGFkZFVzZXIodXNlcklkKSB7XG4gICAgICAgIGF3YWl0IGFwcC5faW50ZXJmYWNlLmFkZFNlcnZlclVzZXJUb1RlYW0oe1xuICAgICAgICAgIHRlYW1JZDogY3J1ZC5pZCxcbiAgICAgICAgICB1c2VySWRcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IGFwcC5fc2VydmVyVGVhbU1lbWJlclByb2ZpbGVzQ2FjaGUucmVmcmVzaChbY3J1ZC5pZF0pO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIHJlbW92ZVVzZXIodXNlcklkKSB7XG4gICAgICAgIGF3YWl0IGFwcC5faW50ZXJmYWNlLnJlbW92ZVNlcnZlclVzZXJGcm9tVGVhbSh7XG4gICAgICAgICAgdGVhbUlkOiBjcnVkLmlkLFxuICAgICAgICAgIHVzZXJJZFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgYXBwLl9zZXJ2ZXJUZWFtTWVtYmVyUHJvZmlsZXNDYWNoZS5yZWZyZXNoKFtjcnVkLmlkXSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgaW52aXRlVXNlcihvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBhcHAuX2ludGVyZmFjZS5zZW5kVGVhbUludml0YXRpb24oe1xuICAgICAgICAgIHRlYW1JZDogY3J1ZC5pZCxcbiAgICAgICAgICBlbWFpbDogb3B0aW9ucy5lbWFpbCxcbiAgICAgICAgICBzZXNzaW9uOiBudWxsLFxuICAgICAgICAgIGNhbGxiYWNrVXJsOiBjb25zdHJ1Y3RSZWRpcmVjdFVybChhcHAudXJscy50ZWFtSW52aXRhdGlvbilcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBhc3luYyBjcmVhdGVVc2VyKG9wdGlvbnMpIHtcbiAgICBjb25zdCBjcnVkID0gYXdhaXQgdGhpcy5faW50ZXJmYWNlLmNyZWF0ZVNlcnZlclVzZXIoc2VydmVyVXNlckNyZWF0ZU9wdGlvbnNUb0NydWQob3B0aW9ucykpO1xuICAgIGF3YWl0IHRoaXMuX3JlZnJlc2hVc2VycygpO1xuICAgIHJldHVybiB0aGlzLl9zZXJ2ZXJVc2VyRnJvbUNydWQoY3J1ZCk7XG4gIH1cbiAgYXN5bmMgZ2V0VXNlcihvcHRpb25zKSB7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBjb25zdCBhbGxVc2VycyA9IGF3YWl0IHRoaXMubGlzdFVzZXJzKCk7XG4gICAgICByZXR1cm4gYWxsVXNlcnMuZmluZCgodSkgPT4gdS5pZCA9PT0gb3B0aW9ucykgPz8gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZW5zdXJlUGVyc2lzdGVudFRva2VuU3RvcmUob3B0aW9ucz8udG9rZW5TdG9yZSk7XG4gICAgICBjb25zdCBzZXNzaW9uID0gdGhpcy5fZ2V0U2Vzc2lvbihvcHRpb25zPy50b2tlblN0b3JlKTtcbiAgICAgIGNvbnN0IGNydWQgPSBhd2FpdCB0aGlzLl9jdXJyZW50U2VydmVyVXNlckNhY2hlLmdldE9yV2FpdChbc2Vzc2lvbl0sIFwid3JpdGUtb25seVwiKTtcbiAgICAgIGlmIChjcnVkID09PSBudWxsKSB7XG4gICAgICAgIHN3aXRjaCAob3B0aW9ucz8ub3IpIHtcbiAgICAgICAgICBjYXNlIFwicmVkaXJlY3RcIjoge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWRpcmVjdFRvU2lnbkluKHsgcmVwbGFjZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwidGhyb3dcIjoge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVXNlciBpcyBub3Qgc2lnbmVkIGluIGJ1dCBnZXRVc2VyIHdhcyBjYWxsZWQgd2l0aCB7IG9yOiAndGhyb3cnIH1cIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGNydWQgJiYgdGhpcy5fY3VycmVudFVzZXJGcm9tQ3J1ZChjcnVkLCBzZXNzaW9uKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgZ2V0U2VydmVyVXNlcigpIHtcbiAgICBjb25zb2xlLndhcm4oXCJzdGFja1NlcnZlckFwcC5nZXRTZXJ2ZXJVc2VyIGlzIGRlcHJlY2F0ZWQ7IHVzZSBzdGFja1NlcnZlckFwcC5nZXRVc2VyIGluc3RlYWRcIik7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0VXNlcigpO1xuICB9XG4gIGFzeW5jIGdldFNlcnZlclVzZXJCeUlkKHVzZXJJZCkge1xuICAgIGNvbnN0IGNydWQgPSBhd2FpdCB0aGlzLl9zZXJ2ZXJVc2VyQ2FjaGUuZ2V0T3JXYWl0KFt1c2VySWRdLCBcIndyaXRlLW9ubHlcIik7XG4gICAgcmV0dXJuIGNydWQgJiYgdGhpcy5fc2VydmVyVXNlckZyb21DcnVkKGNydWQpO1xuICB9XG4gIHVzZVVzZXIob3B0aW9ucykge1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgY29uc3QgdXNlcnMgPSB0aGlzLnVzZVVzZXJzKCk7XG4gICAgICByZXR1cm4gdXNlcnMuZmluZCgodSkgPT4gdS5pZCA9PT0gb3B0aW9ucykgPz8gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZW5zdXJlUGVyc2lzdGVudFRva2VuU3RvcmUob3B0aW9ucz8udG9rZW5TdG9yZSk7XG4gICAgICBjb25zdCByb3V0ZXIgPSBOZXh0TmF2aWdhdGlvbi51c2VSb3V0ZXIoKTtcbiAgICAgIGNvbnN0IHNlc3Npb24gPSB0aGlzLl9nZXRTZXNzaW9uKG9wdGlvbnM/LnRva2VuU3RvcmUpO1xuICAgICAgY29uc3QgY3J1ZCA9IHVzZUFzeW5jQ2FjaGUodGhpcy5fY3VycmVudFNlcnZlclVzZXJDYWNoZSwgW3Nlc3Npb25dLCBcInVzZVVzZXIoKVwiKTtcbiAgICAgIGlmIChjcnVkID09PSBudWxsKSB7XG4gICAgICAgIHN3aXRjaCAob3B0aW9ucz8ub3IpIHtcbiAgICAgICAgICBjYXNlIFwicmVkaXJlY3RcIjoge1xuICAgICAgICAgICAgcnVuQXN5bmNocm9ub3VzbHkodGhpcy5yZWRpcmVjdFRvU2lnbkluKHsgcmVwbGFjZTogdHJ1ZSB9KSk7XG4gICAgICAgICAgICBzdXNwZW5kKCk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcInN1c3BlbmQgc2hvdWxkIG5ldmVyIHJldHVyblwiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcInRocm93XCI6IHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVzZXIgaXMgbm90IHNpZ25lZCBpbiBidXQgdXNlVXNlciB3YXMgY2FsbGVkIHdpdGggeyBvcjogJ3Rocm93JyB9XCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIHZvaWQgMDpcbiAgICAgICAgICBjYXNlIFwicmV0dXJuLW51bGxcIjoge1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHVzZU1lbW8oKCkgPT4ge1xuICAgICAgICByZXR1cm4gY3J1ZCAmJiB0aGlzLl9jdXJyZW50VXNlckZyb21DcnVkKGNydWQsIHNlc3Npb24pO1xuICAgICAgfSwgW2NydWQsIHNlc3Npb24sIG9wdGlvbnM/Lm9yXSk7XG4gICAgfVxuICB9XG4gIHVzZVVzZXJCeUlkKHVzZXJJZCkge1xuICAgIGNvbnN0IGNydWQgPSB1c2VBc3luY0NhY2hlKHRoaXMuX3NlcnZlclVzZXJDYWNoZSwgW3VzZXJJZF0sIFwidXNlVXNlckJ5SWQoKVwiKTtcbiAgICByZXR1cm4gdXNlTWVtbygoKSA9PiB7XG4gICAgICByZXR1cm4gY3J1ZCAmJiB0aGlzLl9zZXJ2ZXJVc2VyRnJvbUNydWQoY3J1ZCk7XG4gICAgfSwgW2NydWRdKTtcbiAgfVxuICBhc3luYyBsaXN0VXNlcnMoKSB7XG4gICAgY29uc3QgY3J1ZCA9IGF3YWl0IHRoaXMuX3NlcnZlclVzZXJzQ2FjaGUuZ2V0T3JXYWl0KFtdLCBcIndyaXRlLW9ubHlcIik7XG4gICAgcmV0dXJuIGNydWQubWFwKChqKSA9PiB0aGlzLl9zZXJ2ZXJVc2VyRnJvbUNydWQoaikpO1xuICB9XG4gIHVzZVVzZXJzKCkge1xuICAgIGNvbnN0IGNydWQgPSB1c2VBc3luY0NhY2hlKHRoaXMuX3NlcnZlclVzZXJzQ2FjaGUsIFtdLCBcInVzZVNlcnZlclVzZXJzKClcIik7XG4gICAgcmV0dXJuIHVzZU1lbW8oKCkgPT4ge1xuICAgICAgcmV0dXJuIGNydWQubWFwKChqKSA9PiB0aGlzLl9zZXJ2ZXJVc2VyRnJvbUNydWQoaikpO1xuICAgIH0sIFtjcnVkXSk7XG4gIH1cbiAgX3NlcnZlclBlcm1pc3Npb25Gcm9tQ3J1ZChjcnVkKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBjcnVkLmlkXG4gICAgfTtcbiAgfVxuICBfc2VydmVyVGVhbVBlcm1pc3Npb25EZWZpbml0aW9uRnJvbUNydWQoY3J1ZCkge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogY3J1ZC5pZCxcbiAgICAgIGRlc2NyaXB0aW9uOiBjcnVkLmRlc2NyaXB0aW9uLFxuICAgICAgY29udGFpbmVkUGVybWlzc2lvbklkczogY3J1ZC5jb250YWluZWRfcGVybWlzc2lvbl9pZHNcbiAgICB9O1xuICB9XG4gIGFzeW5jIGxpc3RUZWFtcygpIHtcbiAgICBjb25zdCB0ZWFtcyA9IGF3YWl0IHRoaXMuX3NlcnZlclRlYW1zQ2FjaGUuZ2V0T3JXYWl0KFt2b2lkIDBdLCBcIndyaXRlLW9ubHlcIik7XG4gICAgcmV0dXJuIHRlYW1zLm1hcCgodCkgPT4gdGhpcy5fc2VydmVyVGVhbUZyb21DcnVkKHQpKTtcbiAgfVxuICBhc3luYyBjcmVhdGVUZWFtKGRhdGEpIHtcbiAgICBjb25zdCB0ZWFtID0gYXdhaXQgdGhpcy5faW50ZXJmYWNlLmNyZWF0ZVNlcnZlclRlYW0oc2VydmVyVGVhbUNyZWF0ZU9wdGlvbnNUb0NydWQoZGF0YSkpO1xuICAgIGF3YWl0IHRoaXMuX3NlcnZlclRlYW1zQ2FjaGUucmVmcmVzaChbdm9pZCAwXSk7XG4gICAgcmV0dXJuIHRoaXMuX3NlcnZlclRlYW1Gcm9tQ3J1ZCh0ZWFtKTtcbiAgfVxuICB1c2VUZWFtcygpIHtcbiAgICBjb25zdCB0ZWFtcyA9IHVzZUFzeW5jQ2FjaGUodGhpcy5fc2VydmVyVGVhbXNDYWNoZSwgW3ZvaWQgMF0sIFwidXNlU2VydmVyVGVhbXMoKVwiKTtcbiAgICByZXR1cm4gdXNlTWVtbygoKSA9PiB7XG4gICAgICByZXR1cm4gdGVhbXMubWFwKCh0KSA9PiB0aGlzLl9zZXJ2ZXJUZWFtRnJvbUNydWQodCkpO1xuICAgIH0sIFt0ZWFtc10pO1xuICB9XG4gIGFzeW5jIGdldFRlYW0odGVhbUlkKSB7XG4gICAgY29uc3QgdGVhbXMgPSBhd2FpdCB0aGlzLmxpc3RUZWFtcygpO1xuICAgIHJldHVybiB0ZWFtcy5maW5kKCh0KSA9PiB0LmlkID09PSB0ZWFtSWQpID8/IG51bGw7XG4gIH1cbiAgdXNlVGVhbSh0ZWFtSWQpIHtcbiAgICBjb25zdCB0ZWFtcyA9IHRoaXMudXNlVGVhbXMoKTtcbiAgICByZXR1cm4gdXNlTWVtbygoKSA9PiB7XG4gICAgICByZXR1cm4gdGVhbXMuZmluZCgodCkgPT4gdC5pZCA9PT0gdGVhbUlkKSA/PyBudWxsO1xuICAgIH0sIFt0ZWFtcywgdGVhbUlkXSk7XG4gIH1cbiAgYXN5bmMgX3JlZnJlc2hTZXNzaW9uKHNlc3Npb24pIHtcbiAgICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICBzdXBlci5fcmVmcmVzaFVzZXIoc2Vzc2lvbiksXG4gICAgICB0aGlzLl9jdXJyZW50U2VydmVyVXNlckNhY2hlLnJlZnJlc2goW3Nlc3Npb25dKVxuICAgIF0pO1xuICB9XG4gIGFzeW5jIF9yZWZyZXNoVXNlcnMoKSB7XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgc3VwZXIuX3JlZnJlc2hVc2VycygpLFxuICAgICAgdGhpcy5fc2VydmVyVXNlcnNDYWNoZS5yZWZyZXNoKFtdKVxuICAgIF0pO1xuICB9XG59O1xudmFyIF9TdGFja0FkbWluQXBwSW1wbCA9IGNsYXNzIGV4dGVuZHMgX1N0YWNrU2VydmVyQXBwSW1wbCB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBzdXBlcih7XG4gICAgICBpbnRlcmZhY2U6IG5ldyBTdGFja0FkbWluSW50ZXJmYWNlKHtcbiAgICAgICAgYmFzZVVybDogb3B0aW9ucy5iYXNlVXJsID8/IGdldERlZmF1bHRCYXNlVXJsKCksXG4gICAgICAgIHByb2plY3RJZDogb3B0aW9ucy5wcm9qZWN0SWQgPz8gZ2V0RGVmYXVsdFByb2plY3RJZCgpLFxuICAgICAgICBjbGllbnRWZXJzaW9uLFxuICAgICAgICAuLi5cInByb2plY3RPd25lclNlc3Npb25cIiBpbiBvcHRpb25zID8ge1xuICAgICAgICAgIHByb2plY3RPd25lclNlc3Npb246IG9wdGlvbnMucHJvamVjdE93bmVyU2Vzc2lvblxuICAgICAgICB9IDoge1xuICAgICAgICAgIHB1Ymxpc2hhYmxlQ2xpZW50S2V5OiBvcHRpb25zLnB1Ymxpc2hhYmxlQ2xpZW50S2V5ID8/IGdldERlZmF1bHRQdWJsaXNoYWJsZUNsaWVudEtleSgpLFxuICAgICAgICAgIHNlY3JldFNlcnZlcktleTogb3B0aW9ucy5zZWNyZXRTZXJ2ZXJLZXkgPz8gZ2V0RGVmYXVsdFNlY3JldFNlcnZlcktleSgpLFxuICAgICAgICAgIHN1cGVyU2VjcmV0QWRtaW5LZXk6IG9wdGlvbnMuc3VwZXJTZWNyZXRBZG1pbktleSA/PyBnZXREZWZhdWx0U3VwZXJTZWNyZXRBZG1pbktleSgpXG4gICAgICAgIH1cbiAgICAgIH0pLFxuICAgICAgdG9rZW5TdG9yZTogb3B0aW9ucy50b2tlblN0b3JlLFxuICAgICAgdXJsczogb3B0aW9ucy51cmxzLFxuICAgICAgb2F1dGhTY29wZXNPblNpZ25Jbjogb3B0aW9ucy5vYXV0aFNjb3Blc09uU2lnbkluXG4gICAgfSk7XG4gICAgdGhpcy5fYWRtaW5Qcm9qZWN0Q2FjaGUgPSBjcmVhdGVDYWNoZShhc3luYyAoKSA9PiB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5faW50ZXJmYWNlLmdldFByb2plY3QoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9hcGlLZXlzQ2FjaGUgPSBjcmVhdGVDYWNoZShhc3luYyAoKSA9PiB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5faW50ZXJmYWNlLmxpc3RBcGlLZXlzKCk7XG4gICAgfSk7XG4gICAgdGhpcy5fYWRtaW5FbWFpbFRlbXBsYXRlc0NhY2hlID0gY3JlYXRlQ2FjaGUoYXN5bmMgKCkgPT4ge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2ludGVyZmFjZS5saXN0RW1haWxUZW1wbGF0ZXMoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9hZG1pblRlYW1QZXJtaXNzaW9uRGVmaW5pdGlvbnNDYWNoZSA9IGNyZWF0ZUNhY2hlKGFzeW5jICgpID0+IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9pbnRlcmZhY2UubGlzdFBlcm1pc3Npb25EZWZpbml0aW9ucygpO1xuICAgIH0pO1xuICAgIHRoaXMuX3N2aXhUb2tlbkNhY2hlID0gY3JlYXRlQ2FjaGUoYXN5bmMgKCkgPT4ge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2ludGVyZmFjZS5nZXRTdml4VG9rZW4oKTtcbiAgICB9KTtcbiAgfVxuICBfYWRtaW5Pd25lZFByb2plY3RGcm9tQ3J1ZChkYXRhLCBvblJlZnJlc2gpIHtcbiAgICBpZiAodGhpcy5fdG9rZW5TdG9yZUluaXQgIT09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiT3duZWQgYXBwcyBtdXN0IGFsd2F5cyBoYXZlIHRva2VuU3RvcmUgPT09IG51bGwgXFx1MjAxNCBkaWQgeW91IG5vdCBjcmVhdGUgdGhpcyBwcm9qZWN0IHdpdGggYXBwLl9jcmVhdGVPd25lZEFwcCgpP1wiKTtcbiAgICAgIDtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnRoaXMuX2FkbWluUHJvamVjdEZyb21DcnVkKGRhdGEsIG9uUmVmcmVzaCksXG4gICAgICBhcHA6IHRoaXNcbiAgICB9O1xuICB9XG4gIF9hZG1pblByb2plY3RGcm9tQ3J1ZChkYXRhLCBvblJlZnJlc2gpIHtcbiAgICBpZiAoZGF0YS5pZCAhPT0gdGhpcy5wcm9qZWN0SWQpIHtcbiAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKGBUaGUgcHJvamVjdCBJRCBvZiB0aGUgcHJvdmlkZWQgcHJvamVjdCBKU09OICgke2RhdGEuaWR9KSBkb2VzIG5vdCBtYXRjaCB0aGUgcHJvamVjdCBJRCBvZiB0aGUgYXBwICgke3RoaXMucHJvamVjdElkfSkhYCk7XG4gICAgfVxuICAgIGNvbnN0IGFwcCA9IHRoaXM7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBkYXRhLmlkLFxuICAgICAgZGlzcGxheU5hbWU6IGRhdGEuZGlzcGxheV9uYW1lLFxuICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKGRhdGEuY3JlYXRlZF9hdF9taWxsaXMpLFxuICAgICAgdXNlckNvdW50OiBkYXRhLnVzZXJfY291bnQsXG4gICAgICBpc1Byb2R1Y3Rpb25Nb2RlOiBkYXRhLmlzX3Byb2R1Y3Rpb25fbW9kZSxcbiAgICAgIGNvbmZpZzoge1xuICAgICAgICBpZDogZGF0YS5jb25maWcuaWQsXG4gICAgICAgIHNpZ25VcEVuYWJsZWQ6IGRhdGEuY29uZmlnLnNpZ25fdXBfZW5hYmxlZCxcbiAgICAgICAgY3JlZGVudGlhbEVuYWJsZWQ6IGRhdGEuY29uZmlnLmNyZWRlbnRpYWxfZW5hYmxlZCxcbiAgICAgICAgbWFnaWNMaW5rRW5hYmxlZDogZGF0YS5jb25maWcubWFnaWNfbGlua19lbmFibGVkLFxuICAgICAgICBjbGllbnRUZWFtQ3JlYXRpb25FbmFibGVkOiBkYXRhLmNvbmZpZy5jbGllbnRfdGVhbV9jcmVhdGlvbl9lbmFibGVkLFxuICAgICAgICBjbGllbnRVc2VyRGVsZXRpb25FbmFibGVkOiBkYXRhLmNvbmZpZy5jbGllbnRfdXNlcl9kZWxldGlvbl9lbmFibGVkLFxuICAgICAgICBhbGxvd0xvY2FsaG9zdDogZGF0YS5jb25maWcuYWxsb3dfbG9jYWxob3N0LFxuICAgICAgICBvYXV0aFByb3ZpZGVyczogZGF0YS5jb25maWcub2F1dGhfcHJvdmlkZXJzLm1hcCgocCkgPT4gcC50eXBlID09PSBcInNoYXJlZFwiID8ge1xuICAgICAgICAgIGlkOiBwLmlkLFxuICAgICAgICAgIGVuYWJsZWQ6IHAuZW5hYmxlZCxcbiAgICAgICAgICB0eXBlOiBcInNoYXJlZFwiXG4gICAgICAgIH0gOiB7XG4gICAgICAgICAgaWQ6IHAuaWQsXG4gICAgICAgICAgZW5hYmxlZDogcC5lbmFibGVkLFxuICAgICAgICAgIHR5cGU6IFwic3RhbmRhcmRcIixcbiAgICAgICAgICBjbGllbnRJZDogcC5jbGllbnRfaWQgPz8gdGhyb3dFcnIoXCJDbGllbnQgSUQgaXMgbWlzc2luZ1wiKSxcbiAgICAgICAgICBjbGllbnRTZWNyZXQ6IHAuY2xpZW50X3NlY3JldCA/PyB0aHJvd0VycihcIkNsaWVudCBzZWNyZXQgaXMgbWlzc2luZ1wiKSxcbiAgICAgICAgICBmYWNlYm9va0NvbmZpZ0lkOiBwLmZhY2Vib29rX2NvbmZpZ19pZCxcbiAgICAgICAgICBtaWNyb3NvZnRUZW5hbnRJZDogcC5taWNyb3NvZnRfdGVuYW50X2lkXG4gICAgICAgIH0pLFxuICAgICAgICBlbWFpbENvbmZpZzogZGF0YS5jb25maWcuZW1haWxfY29uZmlnLnR5cGUgPT09IFwic2hhcmVkXCIgPyB7XG4gICAgICAgICAgdHlwZTogXCJzaGFyZWRcIlxuICAgICAgICB9IDoge1xuICAgICAgICAgIHR5cGU6IFwic3RhbmRhcmRcIixcbiAgICAgICAgICBob3N0OiBkYXRhLmNvbmZpZy5lbWFpbF9jb25maWcuaG9zdCA/PyB0aHJvd0VycihcIkVtYWlsIGhvc3QgaXMgbWlzc2luZ1wiKSxcbiAgICAgICAgICBwb3J0OiBkYXRhLmNvbmZpZy5lbWFpbF9jb25maWcucG9ydCA/PyB0aHJvd0VycihcIkVtYWlsIHBvcnQgaXMgbWlzc2luZ1wiKSxcbiAgICAgICAgICB1c2VybmFtZTogZGF0YS5jb25maWcuZW1haWxfY29uZmlnLnVzZXJuYW1lID8/IHRocm93RXJyKFwiRW1haWwgdXNlcm5hbWUgaXMgbWlzc2luZ1wiKSxcbiAgICAgICAgICBwYXNzd29yZDogZGF0YS5jb25maWcuZW1haWxfY29uZmlnLnBhc3N3b3JkID8/IHRocm93RXJyKFwiRW1haWwgcGFzc3dvcmQgaXMgbWlzc2luZ1wiKSxcbiAgICAgICAgICBzZW5kZXJOYW1lOiBkYXRhLmNvbmZpZy5lbWFpbF9jb25maWcuc2VuZGVyX25hbWUgPz8gdGhyb3dFcnIoXCJFbWFpbCBzZW5kZXIgbmFtZSBpcyBtaXNzaW5nXCIpLFxuICAgICAgICAgIHNlbmRlckVtYWlsOiBkYXRhLmNvbmZpZy5lbWFpbF9jb25maWcuc2VuZGVyX2VtYWlsID8/IHRocm93RXJyKFwiRW1haWwgc2VuZGVyIGVtYWlsIGlzIG1pc3NpbmdcIilcbiAgICAgICAgfSxcbiAgICAgICAgZG9tYWluczogZGF0YS5jb25maWcuZG9tYWlucy5tYXAoKGQpID0+ICh7XG4gICAgICAgICAgZG9tYWluOiBkLmRvbWFpbixcbiAgICAgICAgICBoYW5kbGVyUGF0aDogZC5oYW5kbGVyX3BhdGhcbiAgICAgICAgfSkpLFxuICAgICAgICBjcmVhdGVUZWFtT25TaWduVXA6IGRhdGEuY29uZmlnLmNyZWF0ZV90ZWFtX29uX3NpZ25fdXAsXG4gICAgICAgIHRlYW1DcmVhdG9yRGVmYXVsdFBlcm1pc3Npb25zOiBkYXRhLmNvbmZpZy50ZWFtX2NyZWF0b3JfZGVmYXVsdF9wZXJtaXNzaW9ucyxcbiAgICAgICAgdGVhbU1lbWJlckRlZmF1bHRQZXJtaXNzaW9uczogZGF0YS5jb25maWcudGVhbV9tZW1iZXJfZGVmYXVsdF9wZXJtaXNzaW9uc1xuICAgICAgfSxcbiAgICAgIGFzeW5jIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgYXdhaXQgYXBwLl9pbnRlcmZhY2UudXBkYXRlUHJvamVjdChhZG1pblByb2plY3RVcGRhdGVPcHRpb25zVG9DcnVkKHVwZGF0ZSkpO1xuICAgICAgICBhd2FpdCBvblJlZnJlc2goKTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBkZWxldGUoKSB7XG4gICAgICAgIGF3YWl0IGFwcC5faW50ZXJmYWNlLmRlbGV0ZVByb2plY3QoKTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBnZXRQcm9kdWN0aW9uTW9kZUVycm9ycygpIHtcbiAgICAgICAgcmV0dXJuIGdldFByb2R1Y3Rpb25Nb2RlRXJyb3JzKGRhdGEpO1xuICAgICAgfSxcbiAgICAgIHVzZVByb2R1Y3Rpb25Nb2RlRXJyb3JzKCkge1xuICAgICAgICByZXR1cm4gZ2V0UHJvZHVjdGlvbk1vZGVFcnJvcnMoZGF0YSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBfYWRtaW5FbWFpbFRlbXBsYXRlRnJvbUNydWQoZGF0YSkge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBkYXRhLnR5cGUsXG4gICAgICBzdWJqZWN0OiBkYXRhLnN1YmplY3QsXG4gICAgICBjb250ZW50OiBkYXRhLmNvbnRlbnQsXG4gICAgICBpc0RlZmF1bHQ6IGRhdGEuaXNfZGVmYXVsdFxuICAgIH07XG4gIH1cbiAgYXN5bmMgZ2V0UHJvamVjdCgpIHtcbiAgICByZXR1cm4gdGhpcy5fYWRtaW5Qcm9qZWN0RnJvbUNydWQoXG4gICAgICBhd2FpdCB0aGlzLl9hZG1pblByb2plY3RDYWNoZS5nZXRPcldhaXQoW10sIFwid3JpdGUtb25seVwiKSxcbiAgICAgICgpID0+IHRoaXMuX3JlZnJlc2hQcm9qZWN0KClcbiAgICApO1xuICB9XG4gIHVzZVByb2plY3QoKSB7XG4gICAgY29uc3QgY3J1ZCA9IHVzZUFzeW5jQ2FjaGUodGhpcy5fYWRtaW5Qcm9qZWN0Q2FjaGUsIFtdLCBcInVzZVByb2plY3RBZG1pbigpXCIpO1xuICAgIHJldHVybiB1c2VNZW1vKCgpID0+IHRoaXMuX2FkbWluUHJvamVjdEZyb21DcnVkKFxuICAgICAgY3J1ZCxcbiAgICAgICgpID0+IHRoaXMuX3JlZnJlc2hQcm9qZWN0KClcbiAgICApLCBbY3J1ZF0pO1xuICB9XG4gIF9jcmVhdGVBcGlLZXlCYXNlRnJvbUNydWQoZGF0YSkge1xuICAgIGNvbnN0IGFwcCA9IHRoaXM7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBkYXRhLmlkLFxuICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXG4gICAgICBleHBpcmVzQXQ6IG5ldyBEYXRlKGRhdGEuZXhwaXJlc19hdF9taWxsaXMpLFxuICAgICAgbWFudWFsbHlSZXZva2VkQXQ6IGRhdGEubWFudWFsbHlfcmV2b2tlZF9hdF9taWxsaXMgPyBuZXcgRGF0ZShkYXRhLm1hbnVhbGx5X3Jldm9rZWRfYXRfbWlsbGlzKSA6IG51bGwsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKGRhdGEuY3JlYXRlZF9hdF9taWxsaXMpLFxuICAgICAgaXNWYWxpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2h5SW52YWxpZCgpID09PSBudWxsO1xuICAgICAgfSxcbiAgICAgIHdoeUludmFsaWQoKSB7XG4gICAgICAgIGlmICh0aGlzLmV4cGlyZXNBdC5nZXRUaW1lKCkgPCBEYXRlLm5vdygpKSByZXR1cm4gXCJleHBpcmVkXCI7XG4gICAgICAgIGlmICh0aGlzLm1hbnVhbGx5UmV2b2tlZEF0KSByZXR1cm4gXCJtYW51YWxseS1yZXZva2VkXCI7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIHJldm9rZSgpIHtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXBwLl9pbnRlcmZhY2UucmV2b2tlQXBpS2V5QnlJZChkYXRhLmlkKTtcbiAgICAgICAgYXdhaXQgYXBwLl9yZWZyZXNoQXBpS2V5cygpO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgX2NyZWF0ZUFwaUtleUZyb21DcnVkKGRhdGEpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4udGhpcy5fY3JlYXRlQXBpS2V5QmFzZUZyb21DcnVkKGRhdGEpLFxuICAgICAgcHVibGlzaGFibGVDbGllbnRLZXk6IGRhdGEucHVibGlzaGFibGVfY2xpZW50X2tleSA/IHsgbGFzdEZvdXI6IGRhdGEucHVibGlzaGFibGVfY2xpZW50X2tleS5sYXN0X2ZvdXIgfSA6IG51bGwsXG4gICAgICBzZWNyZXRTZXJ2ZXJLZXk6IGRhdGEuc2VjcmV0X3NlcnZlcl9rZXkgPyB7IGxhc3RGb3VyOiBkYXRhLnNlY3JldF9zZXJ2ZXJfa2V5Lmxhc3RfZm91ciB9IDogbnVsbCxcbiAgICAgIHN1cGVyU2VjcmV0QWRtaW5LZXk6IGRhdGEuc3VwZXJfc2VjcmV0X2FkbWluX2tleSA/IHsgbGFzdEZvdXI6IGRhdGEuc3VwZXJfc2VjcmV0X2FkbWluX2tleS5sYXN0X2ZvdXIgfSA6IG51bGxcbiAgICB9O1xuICB9XG4gIF9jcmVhdGVBcGlLZXlGaXJzdFZpZXdGcm9tQ3J1ZChkYXRhKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnRoaXMuX2NyZWF0ZUFwaUtleUJhc2VGcm9tQ3J1ZChkYXRhKSxcbiAgICAgIHB1Ymxpc2hhYmxlQ2xpZW50S2V5OiBkYXRhLnB1Ymxpc2hhYmxlX2NsaWVudF9rZXksXG4gICAgICBzZWNyZXRTZXJ2ZXJLZXk6IGRhdGEuc2VjcmV0X3NlcnZlcl9rZXksXG4gICAgICBzdXBlclNlY3JldEFkbWluS2V5OiBkYXRhLnN1cGVyX3NlY3JldF9hZG1pbl9rZXlcbiAgICB9O1xuICB9XG4gIGFzeW5jIGxpc3RBcGlLZXlzKCkge1xuICAgIGNvbnN0IGNydWQgPSBhd2FpdCB0aGlzLl9hcGlLZXlzQ2FjaGUuZ2V0T3JXYWl0KFtdLCBcIndyaXRlLW9ubHlcIik7XG4gICAgcmV0dXJuIGNydWQubWFwKChqKSA9PiB0aGlzLl9jcmVhdGVBcGlLZXlGcm9tQ3J1ZChqKSk7XG4gIH1cbiAgdXNlQXBpS2V5cygpIHtcbiAgICBjb25zdCBjcnVkID0gdXNlQXN5bmNDYWNoZSh0aGlzLl9hcGlLZXlzQ2FjaGUsIFtdLCBcInVzZUFwaUtleXMoKVwiKTtcbiAgICByZXR1cm4gdXNlTWVtbygoKSA9PiB7XG4gICAgICByZXR1cm4gY3J1ZC5tYXAoKGopID0+IHRoaXMuX2NyZWF0ZUFwaUtleUZyb21DcnVkKGopKTtcbiAgICB9LCBbY3J1ZF0pO1xuICB9XG4gIGFzeW5jIGNyZWF0ZUFwaUtleShvcHRpb25zKSB7XG4gICAgY29uc3QgY3J1ZCA9IGF3YWl0IHRoaXMuX2ludGVyZmFjZS5jcmVhdGVBcGlLZXkoYXBpS2V5Q3JlYXRlT3B0aW9uc1RvQ3J1ZChvcHRpb25zKSk7XG4gICAgYXdhaXQgdGhpcy5fcmVmcmVzaEFwaUtleXMoKTtcbiAgICByZXR1cm4gdGhpcy5fY3JlYXRlQXBpS2V5Rmlyc3RWaWV3RnJvbUNydWQoY3J1ZCk7XG4gIH1cbiAgdXNlRW1haWxUZW1wbGF0ZXMoKSB7XG4gICAgY29uc3QgY3J1ZCA9IHVzZUFzeW5jQ2FjaGUodGhpcy5fYWRtaW5FbWFpbFRlbXBsYXRlc0NhY2hlLCBbXSwgXCJ1c2VFbWFpbFRlbXBsYXRlcygpXCIpO1xuICAgIHJldHVybiB1c2VNZW1vKCgpID0+IHtcbiAgICAgIHJldHVybiBjcnVkLm1hcCgoaikgPT4gdGhpcy5fYWRtaW5FbWFpbFRlbXBsYXRlRnJvbUNydWQoaikpO1xuICAgIH0sIFtjcnVkXSk7XG4gIH1cbiAgYXN5bmMgbGlzdEVtYWlsVGVtcGxhdGVzKCkge1xuICAgIGNvbnN0IGNydWQgPSBhd2FpdCB0aGlzLl9hZG1pbkVtYWlsVGVtcGxhdGVzQ2FjaGUuZ2V0T3JXYWl0KFtdLCBcIndyaXRlLW9ubHlcIik7XG4gICAgcmV0dXJuIGNydWQubWFwKChqKSA9PiB0aGlzLl9hZG1pbkVtYWlsVGVtcGxhdGVGcm9tQ3J1ZChqKSk7XG4gIH1cbiAgYXN5bmMgdXBkYXRlRW1haWxUZW1wbGF0ZSh0eXBlLCBkYXRhKSB7XG4gICAgYXdhaXQgdGhpcy5faW50ZXJmYWNlLnVwZGF0ZUVtYWlsVGVtcGxhdGUodHlwZSwgYWRtaW5FbWFpbFRlbXBsYXRlVXBkYXRlT3B0aW9uc1RvQ3J1ZChkYXRhKSk7XG4gICAgYXdhaXQgdGhpcy5fYWRtaW5FbWFpbFRlbXBsYXRlc0NhY2hlLnJlZnJlc2goW10pO1xuICB9XG4gIGFzeW5jIHJlc2V0RW1haWxUZW1wbGF0ZSh0eXBlKSB7XG4gICAgYXdhaXQgdGhpcy5faW50ZXJmYWNlLnJlc2V0RW1haWxUZW1wbGF0ZSh0eXBlKTtcbiAgICBhd2FpdCB0aGlzLl9hZG1pbkVtYWlsVGVtcGxhdGVzQ2FjaGUucmVmcmVzaChbXSk7XG4gIH1cbiAgYXN5bmMgY3JlYXRlVGVhbVBlcm1pc3Npb25EZWZpbml0aW9uKGRhdGEpIHtcbiAgICBjb25zdCBjcnVkID0gYXdhaXQgdGhpcy5faW50ZXJmYWNlLmNyZWF0ZVBlcm1pc3Npb25EZWZpbml0aW9uKHNlcnZlclRlYW1QZXJtaXNzaW9uRGVmaW5pdGlvbkNyZWF0ZU9wdGlvbnNUb0NydWQoZGF0YSkpO1xuICAgIGF3YWl0IHRoaXMuX2FkbWluVGVhbVBlcm1pc3Npb25EZWZpbml0aW9uc0NhY2hlLnJlZnJlc2goW10pO1xuICAgIHJldHVybiB0aGlzLl9zZXJ2ZXJUZWFtUGVybWlzc2lvbkRlZmluaXRpb25Gcm9tQ3J1ZChjcnVkKTtcbiAgfVxuICBhc3luYyB1cGRhdGVUZWFtUGVybWlzc2lvbkRlZmluaXRpb24ocGVybWlzc2lvbklkLCBkYXRhKSB7XG4gICAgYXdhaXQgdGhpcy5faW50ZXJmYWNlLnVwZGF0ZVBlcm1pc3Npb25EZWZpbml0aW9uKHBlcm1pc3Npb25JZCwgc2VydmVyVGVhbVBlcm1pc3Npb25EZWZpbml0aW9uVXBkYXRlT3B0aW9uc1RvQ3J1ZChkYXRhKSk7XG4gICAgYXdhaXQgdGhpcy5fYWRtaW5UZWFtUGVybWlzc2lvbkRlZmluaXRpb25zQ2FjaGUucmVmcmVzaChbXSk7XG4gIH1cbiAgYXN5bmMgZGVsZXRlVGVhbVBlcm1pc3Npb25EZWZpbml0aW9uKHBlcm1pc3Npb25JZCkge1xuICAgIGF3YWl0IHRoaXMuX2ludGVyZmFjZS5kZWxldGVQZXJtaXNzaW9uRGVmaW5pdGlvbihwZXJtaXNzaW9uSWQpO1xuICAgIGF3YWl0IHRoaXMuX2FkbWluVGVhbVBlcm1pc3Npb25EZWZpbml0aW9uc0NhY2hlLnJlZnJlc2goW10pO1xuICB9XG4gIGFzeW5jIGxpc3RUZWFtUGVybWlzc2lvbkRlZmluaXRpb25zKCkge1xuICAgIGNvbnN0IGNydWQgPSBhd2FpdCB0aGlzLl9hZG1pblRlYW1QZXJtaXNzaW9uRGVmaW5pdGlvbnNDYWNoZS5nZXRPcldhaXQoW10sIFwid3JpdGUtb25seVwiKTtcbiAgICByZXR1cm4gY3J1ZC5tYXAoKHApID0+IHRoaXMuX3NlcnZlclRlYW1QZXJtaXNzaW9uRGVmaW5pdGlvbkZyb21DcnVkKHApKTtcbiAgfVxuICB1c2VUZWFtUGVybWlzc2lvbkRlZmluaXRpb25zKCkge1xuICAgIGNvbnN0IGNydWQgPSB1c2VBc3luY0NhY2hlKHRoaXMuX2FkbWluVGVhbVBlcm1pc3Npb25EZWZpbml0aW9uc0NhY2hlLCBbXSwgXCJ1c2VQZXJtaXNzaW9ucygpXCIpO1xuICAgIHJldHVybiB1c2VNZW1vKCgpID0+IHtcbiAgICAgIHJldHVybiBjcnVkLm1hcCgocCkgPT4gdGhpcy5fc2VydmVyVGVhbVBlcm1pc3Npb25EZWZpbml0aW9uRnJvbUNydWQocCkpO1xuICAgIH0sIFtjcnVkXSk7XG4gIH1cbiAgdXNlU3ZpeFRva2VuKCkge1xuICAgIGNvbnN0IGNydWQgPSB1c2VBc3luY0NhY2hlKHRoaXMuX3N2aXhUb2tlbkNhY2hlLCBbXSwgXCJ1c2VTdml4VG9rZW4oKVwiKTtcbiAgICByZXR1cm4gY3J1ZC50b2tlbjtcbiAgfVxuICBhc3luYyBfcmVmcmVzaFByb2plY3QoKSB7XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgc3VwZXIuX3JlZnJlc2hQcm9qZWN0KCksXG4gICAgICB0aGlzLl9hZG1pblByb2plY3RDYWNoZS5yZWZyZXNoKFtdKVxuICAgIF0pO1xuICB9XG4gIGFzeW5jIF9yZWZyZXNoQXBpS2V5cygpIHtcbiAgICBhd2FpdCB0aGlzLl9hcGlLZXlzQ2FjaGUucmVmcmVzaChbXSk7XG4gIH1cbn07XG5mdW5jdGlvbiB1c2VyVXBkYXRlT3B0aW9uc1RvQ3J1ZChvcHRpb25zKSB7XG4gIHJldHVybiB7XG4gICAgZGlzcGxheV9uYW1lOiBvcHRpb25zLmRpc3BsYXlOYW1lLFxuICAgIGNsaWVudF9tZXRhZGF0YTogb3B0aW9ucy5jbGllbnRNZXRhZGF0YSxcbiAgICBzZWxlY3RlZF90ZWFtX2lkOiBvcHRpb25zLnNlbGVjdGVkVGVhbUlkLFxuICAgIHRvdHBfc2VjcmV0X2Jhc2U2NDogb3B0aW9ucy50b3RwTXVsdGlGYWN0b3JTZWNyZXQgIT0gbnVsbCA/IGVuY29kZUJhc2U2NChvcHRpb25zLnRvdHBNdWx0aUZhY3RvclNlY3JldCkgOiBvcHRpb25zLnRvdHBNdWx0aUZhY3RvclNlY3JldCxcbiAgICBwcm9maWxlX2ltYWdlX3VybDogb3B0aW9ucy5wcm9maWxlSW1hZ2VVcmxcbiAgfTtcbn1cbmZ1bmN0aW9uIHNlcnZlclVzZXJVcGRhdGVPcHRpb25zVG9DcnVkKG9wdGlvbnMpIHtcbiAgcmV0dXJuIHtcbiAgICBkaXNwbGF5X25hbWU6IG9wdGlvbnMuZGlzcGxheU5hbWUsXG4gICAgcHJpbWFyeV9lbWFpbDogb3B0aW9ucy5wcmltYXJ5RW1haWwsXG4gICAgY2xpZW50X21ldGFkYXRhOiBvcHRpb25zLmNsaWVudE1ldGFkYXRhLFxuICAgIGNsaWVudF9yZWFkX29ubHlfbWV0YWRhdGE6IG9wdGlvbnMuY2xpZW50UmVhZE9ubHlNZXRhZGF0YSxcbiAgICBzZXJ2ZXJfbWV0YWRhdGE6IG9wdGlvbnMuc2VydmVyTWV0YWRhdGEsXG4gICAgc2VsZWN0ZWRfdGVhbV9pZDogb3B0aW9ucy5zZWxlY3RlZFRlYW1JZCxcbiAgICBwcmltYXJ5X2VtYWlsX2F1dGhfZW5hYmxlZDogb3B0aW9ucy5wcmltYXJ5RW1haWxBdXRoRW5hYmxlZCxcbiAgICBwcmltYXJ5X2VtYWlsX3ZlcmlmaWVkOiBvcHRpb25zLnByaW1hcnlFbWFpbFZlcmlmaWVkLFxuICAgIHBhc3N3b3JkOiBvcHRpb25zLnBhc3N3b3JkLFxuICAgIHByb2ZpbGVfaW1hZ2VfdXJsOiBvcHRpb25zLnByb2ZpbGVJbWFnZVVybCxcbiAgICB0b3RwX3NlY3JldF9iYXNlNjQ6IG9wdGlvbnMudG90cE11bHRpRmFjdG9yU2VjcmV0ICE9IG51bGwgPyBlbmNvZGVCYXNlNjQob3B0aW9ucy50b3RwTXVsdGlGYWN0b3JTZWNyZXQpIDogb3B0aW9ucy50b3RwTXVsdGlGYWN0b3JTZWNyZXRcbiAgfTtcbn1cbmZ1bmN0aW9uIHNlcnZlclVzZXJDcmVhdGVPcHRpb25zVG9DcnVkKG9wdGlvbnMpIHtcbiAgcmV0dXJuIHtcbiAgICBwcmltYXJ5X2VtYWlsOiBvcHRpb25zLnByaW1hcnlFbWFpbCxcbiAgICBwYXNzd29yZDogb3B0aW9ucy5wYXNzd29yZCxcbiAgICBwcmltYXJ5X2VtYWlsX2F1dGhfZW5hYmxlZDogdHJ1ZSxcbiAgICBkaXNwbGF5X25hbWU6IG9wdGlvbnMuZGlzcGxheU5hbWUsXG4gICAgcHJpbWFyeV9lbWFpbF92ZXJpZmllZDogb3B0aW9ucy5wcmltYXJ5RW1haWxWZXJpZmllZFxuICB9O1xufVxuZnVuY3Rpb24gYWRtaW5Qcm9qZWN0VXBkYXRlT3B0aW9uc1RvQ3J1ZChvcHRpb25zKSB7XG4gIHJldHVybiB7XG4gICAgZGlzcGxheV9uYW1lOiBvcHRpb25zLmRpc3BsYXlOYW1lLFxuICAgIGRlc2NyaXB0aW9uOiBvcHRpb25zLmRlc2NyaXB0aW9uLFxuICAgIGlzX3Byb2R1Y3Rpb25fbW9kZTogb3B0aW9ucy5pc1Byb2R1Y3Rpb25Nb2RlLFxuICAgIGNvbmZpZzoge1xuICAgICAgZG9tYWluczogb3B0aW9ucy5jb25maWc/LmRvbWFpbnM/Lm1hcCgoZCkgPT4gKHtcbiAgICAgICAgZG9tYWluOiBkLmRvbWFpbixcbiAgICAgICAgaGFuZGxlcl9wYXRoOiBkLmhhbmRsZXJQYXRoXG4gICAgICB9KSksXG4gICAgICBvYXV0aF9wcm92aWRlcnM6IG9wdGlvbnMuY29uZmlnPy5vYXV0aFByb3ZpZGVycz8ubWFwKChwKSA9PiAoe1xuICAgICAgICBpZDogcC5pZCxcbiAgICAgICAgZW5hYmxlZDogcC5lbmFibGVkLFxuICAgICAgICB0eXBlOiBwLnR5cGUsXG4gICAgICAgIC4uLnAudHlwZSA9PT0gXCJzdGFuZGFyZFwiICYmIHtcbiAgICAgICAgICBjbGllbnRfaWQ6IHAuY2xpZW50SWQsXG4gICAgICAgICAgY2xpZW50X3NlY3JldDogcC5jbGllbnRTZWNyZXQsXG4gICAgICAgICAgZmFjZWJvb2tfY29uZmlnX2lkOiBwLmZhY2Vib29rQ29uZmlnSWQsXG4gICAgICAgICAgbWljcm9zb2Z0X3RlbmFudF9pZDogcC5taWNyb3NvZnRUZW5hbnRJZFxuICAgICAgICB9XG4gICAgICB9KSksXG4gICAgICBlbWFpbF9jb25maWc6IG9wdGlvbnMuY29uZmlnPy5lbWFpbENvbmZpZyAmJiAob3B0aW9ucy5jb25maWcuZW1haWxDb25maWcudHlwZSA9PT0gXCJzaGFyZWRcIiA/IHtcbiAgICAgICAgdHlwZTogXCJzaGFyZWRcIlxuICAgICAgfSA6IHtcbiAgICAgICAgdHlwZTogXCJzdGFuZGFyZFwiLFxuICAgICAgICBob3N0OiBvcHRpb25zLmNvbmZpZy5lbWFpbENvbmZpZy5ob3N0LFxuICAgICAgICBwb3J0OiBvcHRpb25zLmNvbmZpZy5lbWFpbENvbmZpZy5wb3J0LFxuICAgICAgICB1c2VybmFtZTogb3B0aW9ucy5jb25maWcuZW1haWxDb25maWcudXNlcm5hbWUsXG4gICAgICAgIHBhc3N3b3JkOiBvcHRpb25zLmNvbmZpZy5lbWFpbENvbmZpZy5wYXNzd29yZCxcbiAgICAgICAgc2VuZGVyX25hbWU6IG9wdGlvbnMuY29uZmlnLmVtYWlsQ29uZmlnLnNlbmRlck5hbWUsXG4gICAgICAgIHNlbmRlcl9lbWFpbDogb3B0aW9ucy5jb25maWcuZW1haWxDb25maWcuc2VuZGVyRW1haWxcbiAgICAgIH0pLFxuICAgICAgc2lnbl91cF9lbmFibGVkOiBvcHRpb25zLmNvbmZpZz8uc2lnblVwRW5hYmxlZCxcbiAgICAgIGNyZWRlbnRpYWxfZW5hYmxlZDogb3B0aW9ucy5jb25maWc/LmNyZWRlbnRpYWxFbmFibGVkLFxuICAgICAgbWFnaWNfbGlua19lbmFibGVkOiBvcHRpb25zLmNvbmZpZz8ubWFnaWNMaW5rRW5hYmxlZCxcbiAgICAgIGFsbG93X2xvY2FsaG9zdDogb3B0aW9ucy5jb25maWc/LmFsbG93TG9jYWxob3N0LFxuICAgICAgY3JlYXRlX3RlYW1fb25fc2lnbl91cDogb3B0aW9ucy5jb25maWc/LmNyZWF0ZVRlYW1PblNpZ25VcCxcbiAgICAgIGNsaWVudF90ZWFtX2NyZWF0aW9uX2VuYWJsZWQ6IG9wdGlvbnMuY29uZmlnPy5jbGllbnRUZWFtQ3JlYXRpb25FbmFibGVkLFxuICAgICAgY2xpZW50X3VzZXJfZGVsZXRpb25fZW5hYmxlZDogb3B0aW9ucy5jb25maWc/LmNsaWVudFVzZXJEZWxldGlvbkVuYWJsZWQsXG4gICAgICB0ZWFtX2NyZWF0b3JfZGVmYXVsdF9wZXJtaXNzaW9uczogb3B0aW9ucy5jb25maWc/LnRlYW1DcmVhdG9yRGVmYXVsdFBlcm1pc3Npb25zLFxuICAgICAgdGVhbV9tZW1iZXJfZGVmYXVsdF9wZXJtaXNzaW9uczogb3B0aW9ucy5jb25maWc/LnRlYW1NZW1iZXJEZWZhdWx0UGVybWlzc2lvbnNcbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBhZG1pblByb2plY3RDcmVhdGVPcHRpb25zVG9DcnVkKG9wdGlvbnMpIHtcbiAgcmV0dXJuIHtcbiAgICAuLi5hZG1pblByb2plY3RVcGRhdGVPcHRpb25zVG9DcnVkKG9wdGlvbnMpLFxuICAgIGRpc3BsYXlfbmFtZTogb3B0aW9ucy5kaXNwbGF5TmFtZVxuICB9O1xufVxuZnVuY3Rpb24gYXBpS2V5Q3JlYXRlT3B0aW9uc1RvQ3J1ZChvcHRpb25zKSB7XG4gIHJldHVybiB7XG4gICAgZGVzY3JpcHRpb246IG9wdGlvbnMuZGVzY3JpcHRpb24sXG4gICAgZXhwaXJlc19hdF9taWxsaXM6IG9wdGlvbnMuZXhwaXJlc0F0LmdldFRpbWUoKSxcbiAgICBoYXNfcHVibGlzaGFibGVfY2xpZW50X2tleTogb3B0aW9ucy5oYXNQdWJsaXNoYWJsZUNsaWVudEtleSxcbiAgICBoYXNfc2VjcmV0X3NlcnZlcl9rZXk6IG9wdGlvbnMuaGFzU2VjcmV0U2VydmVyS2V5LFxuICAgIGhhc19zdXBlcl9zZWNyZXRfYWRtaW5fa2V5OiBvcHRpb25zLmhhc1N1cGVyU2VjcmV0QWRtaW5LZXlcbiAgfTtcbn1cbmZ1bmN0aW9uIHRlYW1VcGRhdGVPcHRpb25zVG9DcnVkKG9wdGlvbnMpIHtcbiAgcmV0dXJuIHtcbiAgICBkaXNwbGF5X25hbWU6IG9wdGlvbnMuZGlzcGxheU5hbWUsXG4gICAgcHJvZmlsZV9pbWFnZV91cmw6IG9wdGlvbnMucHJvZmlsZUltYWdlVXJsXG4gIH07XG59XG5mdW5jdGlvbiB0ZWFtQ3JlYXRlT3B0aW9uc1RvQ3J1ZChvcHRpb25zKSB7XG4gIHJldHVybiB7XG4gICAgZGlzcGxheV9uYW1lOiBvcHRpb25zLmRpc3BsYXlOYW1lLFxuICAgIHByb2ZpbGVfaW1hZ2VfdXJsOiBvcHRpb25zLnByb2ZpbGVJbWFnZVVybFxuICB9O1xufVxuZnVuY3Rpb24gc2VydmVyVGVhbUNyZWF0ZU9wdGlvbnNUb0NydWQob3B0aW9ucykge1xuICByZXR1cm4gdGVhbUNyZWF0ZU9wdGlvbnNUb0NydWQob3B0aW9ucyk7XG59XG5mdW5jdGlvbiBzZXJ2ZXJUZWFtVXBkYXRlT3B0aW9uc1RvQ3J1ZChvcHRpb25zKSB7XG4gIHJldHVybiB7XG4gICAgZGlzcGxheV9uYW1lOiBvcHRpb25zLmRpc3BsYXlOYW1lLFxuICAgIHByb2ZpbGVfaW1hZ2VfdXJsOiBvcHRpb25zLnByb2ZpbGVJbWFnZVVybFxuICB9O1xufVxuZnVuY3Rpb24gc2VydmVyVGVhbVBlcm1pc3Npb25EZWZpbml0aW9uQ3JlYXRlT3B0aW9uc1RvQ3J1ZChvcHRpb25zKSB7XG4gIHJldHVybiB7XG4gICAgaWQ6IG9wdGlvbnMuaWQsXG4gICAgZGVzY3JpcHRpb246IG9wdGlvbnMuZGVzY3JpcHRpb24sXG4gICAgY29udGFpbmVkX3Blcm1pc3Npb25faWRzOiBvcHRpb25zLmNvbnRhaW5lZFBlcm1pc3Npb25JZHNcbiAgfTtcbn1cbmZ1bmN0aW9uIHNlcnZlclRlYW1QZXJtaXNzaW9uRGVmaW5pdGlvblVwZGF0ZU9wdGlvbnNUb0NydWQob3B0aW9ucykge1xuICByZXR1cm4ge1xuICAgIGlkOiBvcHRpb25zLmlkLFxuICAgIGRlc2NyaXB0aW9uOiBvcHRpb25zLmRlc2NyaXB0aW9uLFxuICAgIGNvbnRhaW5lZF9wZXJtaXNzaW9uX2lkczogb3B0aW9ucy5jb250YWluZWRQZXJtaXNzaW9uSWRzXG4gIH07XG59XG52YXIgU3RhY2tDbGllbnRBcHAgPSBfU3RhY2tDbGllbnRBcHBJbXBsO1xudmFyIFN0YWNrU2VydmVyQXBwID0gX1N0YWNrU2VydmVyQXBwSW1wbDtcbnZhciBTdGFja0FkbWluQXBwID0gX1N0YWNrQWRtaW5BcHBJbXBsO1xuZnVuY3Rpb24gYWRtaW5FbWFpbFRlbXBsYXRlVXBkYXRlT3B0aW9uc1RvQ3J1ZChvcHRpb25zKSB7XG4gIHJldHVybiB7XG4gICAgc3ViamVjdDogb3B0aW9ucy5zdWJqZWN0LFxuICAgIGNvbnRlbnQ6IG9wdGlvbnMuY29udGVudFxuICB9O1xufVxuZXhwb3J0IHtcbiAgU3RhY2tBZG1pbkFwcCxcbiAgU3RhY2tDbGllbnRBcHAsXG4gIFN0YWNrU2VydmVyQXBwLFxuICBzZXJ2ZXJUZWFtUGVybWlzc2lvbkRlZmluaXRpb25DcmVhdGVPcHRpb25zVG9DcnVkLFxuICBzZXJ2ZXJUZWFtUGVybWlzc2lvbkRlZmluaXRpb25VcGRhdGVPcHRpb25zVG9DcnVkLFxuICBzdGFja0FwcEludGVybmFsc1N5bWJvbFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0YWNrLWFwcC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stackframe/stack/dist/esm/providers/stack-provider-client.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@stackframe/stack/dist/esm/providers/stack-provider-client.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StackContext: () => (/* binding */ StackContext),\n/* harmony export */   StackProviderClient: () => (/* binding */ StackProviderClient),\n/* harmony export */   UserSetter: () => (/* binding */ UserSetter)\n/* harmony export */ });\n/* harmony import */ var _stackframe_stack_shared_dist_utils_globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @stackframe/stack-shared/dist/utils/globals */ \"(ssr)/./node_modules/@stackframe/stack-shared/dist/utils/globals.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! .. */ \"(ssr)/./node_modules/@stackframe/stack/dist/esm/lib/hooks.js\");\n/* harmony import */ var _lib_stack_app__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lib/stack-app */ \"(ssr)/./node_modules/@stackframe/stack/dist/esm/lib/stack-app.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__);\n/* __next_internal_client_entry_do_not_use__ StackContext,StackProviderClient,UserSetter auto */ // src/providers/stack-provider-client.tsx\n\n\n\n\n\nvar StackContext = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1___default().createContext(null);\nfunction StackProviderClient(props) {\n    const appJson = props.appJson;\n    const app = _lib_stack_app__WEBPACK_IMPORTED_MODULE_3__.StackClientApp[_lib_stack_app__WEBPACK_IMPORTED_MODULE_3__.stackAppInternalsSymbol].fromClientJson(appJson);\n    _stackframe_stack_shared_dist_utils_globals__WEBPACK_IMPORTED_MODULE_0__.globalVar.__STACK_AUTH__ = {\n        app\n    };\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(StackContext.Provider, {\n        value: {\n            app\n        },\n        children: props.children\n    });\n}\nfunction UserSetter(props) {\n    const app = (0,___WEBPACK_IMPORTED_MODULE_4__.useStackApp)();\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const promise = (async ()=>await props.userJsonPromise)();\n        app[_lib_stack_app__WEBPACK_IMPORTED_MODULE_3__.stackAppInternalsSymbol].setCurrentUser(promise);\n    }, []);\n    return null;\n}\n //# sourceMappingURL=stack-provider-client.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2svZGlzdC9lc20vcHJvdmlkZXJzL3N0YWNrLXByb3ZpZGVyLWNsaWVudC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O2lHQUdBLDBDQUEwQjtBQUNPO0FBQ0w7QUFDaUI7QUFnQnpDO0FBWkQ7QUFFSSxJQUFBTyw2QkFBU04sMERBR2I7QUFDRCxTQUFNUSxvQkFBZ0JDLEtBQUE7SUFDdEIsTUFBTUMsVUFBTUQsTUFBQUMsT0FBZTtJQUUzQixNQUFBQyxNQUFVUiwwREFBQSxDQUFpQkMsbUVBQUFBLENBQU0sQ0FBQVEsY0FBQSxDQUFBRjtJQUVqQ1gsa0ZBQUFBLENBQ0VjLGNBQUEsR0FBQztRQUFBRjtJQUFBO0lBSUwsdUJBQUFOLHNEQUFBQSxDQUFBQyxhQUFBUSxRQUFBO1FBQUFDLE9BQUE7WUFBQUo7UUFBQTtRQUFBSyxVQUFBUCxNQUFBTyxRQUFBO0lBQUE7QUFFTztBQUNMLFNBQU1DLFdBQU1SLEtBQUE7SUFDWixNQUFBRSxNQUFVVCw4Q0FBQUE7SUFDUkQsZ0RBQUFBLENBQU07UUFDTixNQUFJaUIsVUFBQSxXQUF5QixNQUFBVCxNQUFBVSxlQUFzQjtRQUNyRFIsR0FBSyxDQUFBUCxtRUFBQUEsQ0FBQSxDQUFBZ0IsY0FBQSxDQUFBRjtJQUNMO0lBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tYXJrZXJwbEFJY2UvLi4vLi4vLi4vc3JjL3Byb3ZpZGVycy9zdGFjay1wcm92aWRlci1jbGllbnQudHN4P2I1M2MiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XG5cbmltcG9ydCB7IEN1cnJlbnRVc2VyQ3J1ZCB9IGZyb20gXCJAc3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9pbnRlcmZhY2UvY3J1ZC9jdXJyZW50LXVzZXJcIjtcbmltcG9ydCB7IGdsb2JhbFZhciB9IGZyb20gXCJAc3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC91dGlscy9nbG9iYWxzXCI7XG5pbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VTdGFja0FwcCB9IGZyb20gXCIuLlwiO1xuaW1wb3J0IHsgU3RhY2tDbGllbnRBcHAsIFN0YWNrQ2xpZW50QXBwSnNvbiwgc3RhY2tBcHBJbnRlcm5hbHNTeW1ib2wgfSBmcm9tIFwiLi4vbGliL3N0YWNrLWFwcFwiO1xuXG5leHBvcnQgY29uc3QgU3RhY2tDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dDxudWxsIHwge1xuICBhcHA6IFN0YWNrQ2xpZW50QXBwPHRydWU+LFxufT4obnVsbCk7XG5cbmV4cG9ydCBmdW5jdGlvbiBTdGFja1Byb3ZpZGVyQ2xpZW50KHByb3BzOiB7XG4gIGFwcEpzb246IFN0YWNrQ2xpZW50QXBwSnNvbjx0cnVlLCBzdHJpbmc+LFxuICBjaGlsZHJlbj86IFJlYWN0LlJlYWN0Tm9kZSxcbn0pIHtcbiAgY29uc3QgYXBwSnNvbiA9IHByb3BzLmFwcEpzb247XG4gIGNvbnN0IGFwcCA9IFN0YWNrQ2xpZW50QXBwW3N0YWNrQXBwSW50ZXJuYWxzU3ltYm9sXS5mcm9tQ2xpZW50SnNvbihhcHBKc29uKTtcblxuICBnbG9iYWxWYXIuX19TVEFDS19BVVRIX18gPSB7IGFwcCB9O1xuXG4gIHJldHVybiAoXG4gICAgPFN0YWNrQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17eyBhcHAgfX0+XG4gICAgICB7cHJvcHMuY2hpbGRyZW59XG4gICAgPC9TdGFja0NvbnRleHQuUHJvdmlkZXI+XG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBVc2VyU2V0dGVyKHByb3BzOiB7IHVzZXJKc29uUHJvbWlzZTogUHJvbWlzZTxDdXJyZW50VXNlckNydWRbJ0NsaWVudCddWydSZWFkJ10gfCBudWxsPiB9KSB7XG4gIGNvbnN0IGFwcCA9IHVzZVN0YWNrQXBwKCk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgcHJvbWlzZSA9IChhc3luYyAoKSA9PiBhd2FpdCBwcm9wcy51c2VySnNvblByb21pc2UpKCk7ICAvLyB0aGVyZSBpcyBhIE5leHQuanMgYnVnIHdoZXJlIFByb21pc2VzIHBhc3NlZCBieSBzZXJ2ZXIgY29tcG9uZW50cyByZXR1cm4gYHVuZGVmaW5lZGAgYXMgdGhlaXIgYHRoZW5gIHZhbHVlLCBzbyB3cmFwIGl0IGluIGEgbm9ybWFsIHByb21pc2VcbiAgICBhcHBbc3RhY2tBcHBJbnRlcm5hbHNTeW1ib2xdLnNldEN1cnJlbnRVc2VyKHByb21pc2UpO1xuICB9LCBbXSk7XG4gIHJldHVybiBudWxsO1xufVxuIl0sIm5hbWVzIjpbImdsb2JhbFZhciIsIlJlYWN0IiwidXNlRWZmZWN0IiwidXNlU3RhY2tBcHAiLCJTdGFja0NsaWVudEFwcCIsInN0YWNrQXBwSW50ZXJuYWxzU3ltYm9sIiwianN4IiwiU3RhY2tDb250ZXh0IiwiY3JlYXRlQ29udGV4dCIsIlN0YWNrUHJvdmlkZXJDbGllbnQiLCJwcm9wcyIsImFwcEpzb24iLCJhcHAiLCJmcm9tQ2xpZW50SnNvbiIsIl9fU1RBQ0tfQVVUSF9fIiwiUHJvdmlkZXIiLCJ2YWx1ZSIsImNoaWxkcmVuIiwiVXNlclNldHRlciIsInByb21pc2UiLCJ1c2VySnNvblByb21pc2UiLCJzZXRDdXJyZW50VXNlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackframe/stack/dist/esm/providers/stack-provider-client.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stackframe/stack/dist/esm/utils/url.js":
/*!**************************************************************!*\
  !*** ./node_modules/@stackframe/stack/dist/esm/utils/url.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   autoRedirect: () => (/* binding */ autoRedirect),\n/* harmony export */   constructRedirectUrl: () => (/* binding */ constructRedirectUrl)\n/* harmony export */ });\n// src/utils/url.tsx\nfunction autoRedirect() {\n  const url = new URL(window.location.href);\n  const redirectUrl = url.searchParams.get(\"auto-redirect-url\");\n  if (redirectUrl) {\n    const urlObject = new URL(redirectUrl);\n    if (urlObject.origin !== window.location.origin) {\n      throw new Error(\"auto-redirect-url is not same origin (\" + urlObject.origin + \" !== \" + window.location.origin + \")\");\n    }\n    url.searchParams.delete(\"auto-redirect-url\");\n    window.location.replace(urlObject.href);\n  }\n}\nfunction constructRedirectUrl(redirectUrl) {\n  const retainedQueryParams = [\"after_auth_return_to\"];\n  const currentUrl = new URL(window.location.href);\n  const url = redirectUrl ? new URL(redirectUrl, window.location.href) : new URL(window.location.href);\n  for (const param of retainedQueryParams) {\n    if (currentUrl.searchParams.has(param)) {\n      url.searchParams.set(param, currentUrl.searchParams.get(param));\n    }\n  }\n  url.hash = \"\";\n  return url.toString();\n}\n\n//# sourceMappingURL=url.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2svZGlzdC9lc20vdXRpbHMvdXJsLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWFya2VycGxBSWNlLy4vbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrL2Rpc3QvZXNtL3V0aWxzL3VybC5qcz81NWQ3Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy91dGlscy91cmwudHN4XG5mdW5jdGlvbiBhdXRvUmVkaXJlY3QoKSB7XG4gIGNvbnN0IHVybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpO1xuICBjb25zdCByZWRpcmVjdFVybCA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KFwiYXV0by1yZWRpcmVjdC11cmxcIik7XG4gIGlmIChyZWRpcmVjdFVybCkge1xuICAgIGNvbnN0IHVybE9iamVjdCA9IG5ldyBVUkwocmVkaXJlY3RVcmwpO1xuICAgIGlmICh1cmxPYmplY3Qub3JpZ2luICE9PSB3aW5kb3cubG9jYXRpb24ub3JpZ2luKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJhdXRvLXJlZGlyZWN0LXVybCBpcyBub3Qgc2FtZSBvcmlnaW4gKFwiICsgdXJsT2JqZWN0Lm9yaWdpbiArIFwiICE9PSBcIiArIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyBcIilcIik7XG4gICAgfVxuICAgIHVybC5zZWFyY2hQYXJhbXMuZGVsZXRlKFwiYXV0by1yZWRpcmVjdC11cmxcIik7XG4gICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UodXJsT2JqZWN0LmhyZWYpO1xuICB9XG59XG5mdW5jdGlvbiBjb25zdHJ1Y3RSZWRpcmVjdFVybChyZWRpcmVjdFVybCkge1xuICBjb25zdCByZXRhaW5lZFF1ZXJ5UGFyYW1zID0gW1wiYWZ0ZXJfYXV0aF9yZXR1cm5fdG9cIl07XG4gIGNvbnN0IGN1cnJlbnRVcmwgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcbiAgY29uc3QgdXJsID0gcmVkaXJlY3RVcmwgPyBuZXcgVVJMKHJlZGlyZWN0VXJsLCB3aW5kb3cubG9jYXRpb24uaHJlZikgOiBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcbiAgZm9yIChjb25zdCBwYXJhbSBvZiByZXRhaW5lZFF1ZXJ5UGFyYW1zKSB7XG4gICAgaWYgKGN1cnJlbnRVcmwuc2VhcmNoUGFyYW1zLmhhcyhwYXJhbSkpIHtcbiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KHBhcmFtLCBjdXJyZW50VXJsLnNlYXJjaFBhcmFtcy5nZXQocGFyYW0pKTtcbiAgICB9XG4gIH1cbiAgdXJsLmhhc2ggPSBcIlwiO1xuICByZXR1cm4gdXJsLnRvU3RyaW5nKCk7XG59XG5leHBvcnQge1xuICBhdXRvUmVkaXJlY3QsXG4gIGNvbnN0cnVjdFJlZGlyZWN0VXJsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXJsLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackframe/stack/dist/esm/utils/url.js\n");

/***/ })

};
;